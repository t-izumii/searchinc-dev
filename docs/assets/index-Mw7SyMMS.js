(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();const xj="182",ey={ROTATE:0,DOLLY:1,PAN:2},$_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},jxe=0,Bse=1,Vxe=2,NI=1,Hxe=2,QS=3,Rc=0,os=1,wc=2,af=0,ty=1,zse=2,jse=3,Vse=4,Gxe=5,rg=100,Wxe=101,qxe=102,Xxe=103,Kxe=104,Yxe=200,$xe=201,Zxe=202,Jxe=203,Z4=204,J4=205,Qxe=206,e1e=207,t1e=208,n1e=209,r1e=210,i1e=211,a1e=212,o1e=213,s1e=214,Q4=0,ez=1,tz=2,cy=3,nz=4,rz=5,iz=6,az=7,Kue=0,l1e=1,u1e=2,Ac=0,Yue=1,$ue=2,Zue=3,Sj=4,Jue=5,Que=6,ece=7,Hse="attached",c1e="detached",tce=300,vg=301,dy=302,oz=303,sz=304,v3=306,rs=1e3,Tc=1001,ZI=1002,Da=1003,nce=1004,ew=1005,fa=1006,LI=1007,tf=1008,$s=1009,rce=1010,ice=1011,Pw=1012,wj=1013,Dc=1014,Il=1015,lf=1016,Ej=1017,Tj=1018,Cw=1020,ace=35902,oce=35899,sce=1021,lce=1022,Qs=1023,uf=1026,ag=1027,Mj=1028,Pj=1029,fy=1030,Cj=1031,Aj=1033,FI=33776,UI=33777,BI=33778,zI=33779,lz=35840,uz=35841,cz=35842,dz=35843,fz=36196,hz=37492,pz=37496,mz=37488,gz=37489,vz=37490,_z=37491,yz=37808,bz=37809,xz=37810,Sz=37811,wz=37812,Ez=37813,Tz=37814,Mz=37815,Pz=37816,Cz=37817,Az=37818,kz=37819,Iz=37820,Rz=37821,Dz=36492,Oz=36494,Nz=36495,Lz=36283,Fz=36284,Uz=36285,Bz=36286,Aw=2300,kw=2301,YB=2302,Gse=2400,Wse=2401,qse=2402,d1e=2500,f1e=0,uce=1,zz=2,h1e=3200,cce=0,p1e=1,Vh="",da="srgb",Oo="srgb-linear",JI="linear",ai="srgb",A_=7680,Xse=519,m1e=512,g1e=513,v1e=514,kj=515,_1e=516,y1e=517,Ij=518,b1e=519,jz=35044,Kse="300 es",Mc=2e3,QI=2001;function dce(c){for(let e=c.length-1;e>=0;--e)if(c[e]>=65535)return!0;return!1}function x1e(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function Iw(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function S1e(){const c=Iw("canvas");return c.style.display="block",c}const Yse={};function e3(...c){const e="THREE."+c.shift();console.log(e,...c)}function Wn(...c){const e="THREE."+c.shift();console.warn(e,...c)}function ar(...c){const e="THREE."+c.shift();console.error(e,...c)}function Rw(...c){const e=c.join(" ");e in Yse||(Yse[e]=!0,Wn(...c))}function w1e(c,e,n){return new Promise(function(r,o){function u(){switch(c.clientWaitSync(e,c.SYNC_FLUSH_COMMANDS_BIT,0)){case c.WAIT_FAILED:o();break;case c.TIMEOUT_EXPIRED:setTimeout(u,n);break;default:r()}}setTimeout(u,n)})}class xg{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const o=r[e];if(o!==void 0){const u=o.indexOf(n);u!==-1&&o.splice(u,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let u=0,h=o.length;u<h;u++)o[u].call(this,e);e.target=null}}}const Mo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $se=1234567;const dw=Math.PI/180,hy=180/Math.PI;function Tu(){const c=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Mo[c&255]+Mo[c>>8&255]+Mo[c>>16&255]+Mo[c>>24&255]+"-"+Mo[e&255]+Mo[e>>8&255]+"-"+Mo[e>>16&15|64]+Mo[e>>24&255]+"-"+Mo[n&63|128]+Mo[n>>8&255]+"-"+Mo[n>>16&255]+Mo[n>>24&255]+Mo[r&255]+Mo[r>>8&255]+Mo[r>>16&255]+Mo[r>>24&255]).toLowerCase()}function Tr(c,e,n){return Math.max(e,Math.min(n,c))}function Rj(c,e){return(c%e+e)%e}function E1e(c,e,n,r,o){return r+(c-e)*(o-r)/(n-e)}function T1e(c,e,n){return c!==e?(n-c)/(e-c):0}function fw(c,e,n){return(1-n)*c+n*e}function M1e(c,e,n,r){return fw(c,e,1-Math.exp(-n*r))}function P1e(c,e=1){return e-Math.abs(Rj(c,e*2)-e)}function C1e(c,e,n){return c<=e?0:c>=n?1:(c=(c-e)/(n-e),c*c*(3-2*c))}function A1e(c,e,n){return c<=e?0:c>=n?1:(c=(c-e)/(n-e),c*c*c*(c*(c*6-15)+10))}function k1e(c,e){return c+Math.floor(Math.random()*(e-c+1))}function I1e(c,e){return c+Math.random()*(e-c)}function R1e(c){return c*(.5-Math.random())}function D1e(c){c!==void 0&&($se=c);let e=$se+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function O1e(c){return c*dw}function N1e(c){return c*hy}function L1e(c){return(c&c-1)===0&&c!==0}function F1e(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function U1e(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}function B1e(c,e,n,r,o){const u=Math.cos,h=Math.sin,m=u(n/2),b=h(n/2),S=u((e+r)/2),T=h((e+r)/2),k=u((e-r)/2),O=h((e-r)/2),L=u((r-e)/2),H=h((r-e)/2);switch(o){case"XYX":c.set(m*T,b*k,b*O,m*S);break;case"YZY":c.set(b*O,m*T,b*k,m*S);break;case"ZXZ":c.set(b*k,b*O,m*T,m*S);break;case"XZX":c.set(m*T,b*H,b*L,m*S);break;case"YXY":c.set(b*L,m*T,b*H,m*S);break;case"ZYZ":c.set(b*H,b*L,m*T,m*S);break;default:Wn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function wu(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return c/4294967295;case Uint16Array:return c/65535;case Uint8Array:return c/255;case Int32Array:return Math.max(c/2147483647,-1);case Int16Array:return Math.max(c/32767,-1);case Int8Array:return Math.max(c/127,-1);default:throw new Error("Invalid component type.")}}function oi(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return Math.round(c*4294967295);case Uint16Array:return Math.round(c*65535);case Uint8Array:return Math.round(c*255);case Int32Array:return Math.round(c*2147483647);case Int16Array:return Math.round(c*32767);case Int8Array:return Math.round(c*127);default:throw new Error("Invalid component type.")}}const ug={DEG2RAD:dw,RAD2DEG:hy,generateUUID:Tu,clamp:Tr,euclideanModulo:Rj,mapLinear:E1e,inverseLerp:T1e,lerp:fw,damp:M1e,pingpong:P1e,smoothstep:C1e,smootherstep:A1e,randInt:k1e,randFloat:I1e,randFloatSpread:R1e,seededRandom:D1e,degToRad:O1e,radToDeg:N1e,isPowerOfTwo:L1e,ceilPowerOfTwo:F1e,floorPowerOfTwo:U1e,setQuaternionFromProperEuler:B1e,normalize:oi,denormalize:wu};class gr{constructor(e=0,n=0){gr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6],this.y=o[1]*n+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Tr(this.x,e.x,n.x),this.y=Tr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Tr(this.x,e,n),this.y=Tr(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),o=Math.sin(n),u=this.x-e.x,h=this.y-e.y;return this.x=u*r-h*o+e.x,this.y=u*o+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Oc{constructor(e=0,n=0,r=0,o=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=o}static slerpFlat(e,n,r,o,u,h,m){let b=r[o+0],S=r[o+1],T=r[o+2],k=r[o+3],O=u[h+0],L=u[h+1],H=u[h+2],G=u[h+3];if(m<=0){e[n+0]=b,e[n+1]=S,e[n+2]=T,e[n+3]=k;return}if(m>=1){e[n+0]=O,e[n+1]=L,e[n+2]=H,e[n+3]=G;return}if(k!==G||b!==O||S!==L||T!==H){let V=b*O+S*L+T*H+k*G;V<0&&(O=-O,L=-L,H=-H,G=-G,V=-V);let I=1-m;if(V<.9995){const K=Math.acos(V),ue=Math.sin(K);I=Math.sin(I*K)/ue,m=Math.sin(m*K)/ue,b=b*I+O*m,S=S*I+L*m,T=T*I+H*m,k=k*I+G*m}else{b=b*I+O*m,S=S*I+L*m,T=T*I+H*m,k=k*I+G*m;const K=1/Math.sqrt(b*b+S*S+T*T+k*k);b*=K,S*=K,T*=K,k*=K}}e[n]=b,e[n+1]=S,e[n+2]=T,e[n+3]=k}static multiplyQuaternionsFlat(e,n,r,o,u,h){const m=r[o],b=r[o+1],S=r[o+2],T=r[o+3],k=u[h],O=u[h+1],L=u[h+2],H=u[h+3];return e[n]=m*H+T*k+b*L-S*O,e[n+1]=b*H+T*O+S*k-m*L,e[n+2]=S*H+T*L+m*O-b*k,e[n+3]=T*H-m*k-b*O-S*L,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,o){return this._x=e,this._y=n,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,o=e._y,u=e._z,h=e._order,m=Math.cos,b=Math.sin,S=m(r/2),T=m(o/2),k=m(u/2),O=b(r/2),L=b(o/2),H=b(u/2);switch(h){case"XYZ":this._x=O*T*k+S*L*H,this._y=S*L*k-O*T*H,this._z=S*T*H+O*L*k,this._w=S*T*k-O*L*H;break;case"YXZ":this._x=O*T*k+S*L*H,this._y=S*L*k-O*T*H,this._z=S*T*H-O*L*k,this._w=S*T*k+O*L*H;break;case"ZXY":this._x=O*T*k-S*L*H,this._y=S*L*k+O*T*H,this._z=S*T*H+O*L*k,this._w=S*T*k-O*L*H;break;case"ZYX":this._x=O*T*k-S*L*H,this._y=S*L*k+O*T*H,this._z=S*T*H-O*L*k,this._w=S*T*k+O*L*H;break;case"YZX":this._x=O*T*k+S*L*H,this._y=S*L*k+O*T*H,this._z=S*T*H-O*L*k,this._w=S*T*k-O*L*H;break;case"XZY":this._x=O*T*k-S*L*H,this._y=S*L*k-O*T*H,this._z=S*T*H+O*L*k,this._w=S*T*k+O*L*H;break;default:Wn("Quaternion: .setFromEuler() encountered an unknown order: "+h)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],o=n[4],u=n[8],h=n[1],m=n[5],b=n[9],S=n[2],T=n[6],k=n[10],O=r+m+k;if(O>0){const L=.5/Math.sqrt(O+1);this._w=.25/L,this._x=(T-b)*L,this._y=(u-S)*L,this._z=(h-o)*L}else if(r>m&&r>k){const L=2*Math.sqrt(1+r-m-k);this._w=(T-b)/L,this._x=.25*L,this._y=(o+h)/L,this._z=(u+S)/L}else if(m>k){const L=2*Math.sqrt(1+m-r-k);this._w=(u-S)/L,this._x=(o+h)/L,this._y=.25*L,this._z=(b+T)/L}else{const L=2*Math.sqrt(1+k-r-m);this._w=(h-o)/L,this._x=(u+S)/L,this._y=(b+T)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,n/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,o=e._y,u=e._z,h=e._w,m=n._x,b=n._y,S=n._z,T=n._w;return this._x=r*T+h*m+o*S-u*b,this._y=o*T+h*b+u*m-r*S,this._z=u*T+h*S+r*b-o*m,this._w=h*T-r*m-o*b-u*S,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let r=e._x,o=e._y,u=e._z,h=e._w,m=this.dot(e);m<0&&(r=-r,o=-o,u=-u,h=-h,m=-m);let b=1-n;if(m<.9995){const S=Math.acos(m),T=Math.sin(S);b=Math.sin(b*S)/T,n=Math.sin(n*S)/T,this._x=this._x*b+r*n,this._y=this._y*b+o*n,this._z=this._z*b+u*n,this._w=this._w*b+h*n,this._onChangeCallback()}else this._x=this._x*b+r*n,this._y=this._y*b+o*n,this._z=this._z*b+u*n,this._w=this._w*b+h*n,this.normalize();return this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),o=Math.sqrt(1-r),u=Math.sqrt(r);return this.set(o*Math.sin(e),o*Math.cos(e),u*Math.sin(n),u*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Xe{constructor(e=0,n=0,r=0){Xe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Zse.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Zse.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[3]*r+u[6]*o,this.y=u[1]*n+u[4]*r+u[7]*o,this.z=u[2]*n+u[5]*r+u[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=e.elements,h=1/(u[3]*n+u[7]*r+u[11]*o+u[15]);return this.x=(u[0]*n+u[4]*r+u[8]*o+u[12])*h,this.y=(u[1]*n+u[5]*r+u[9]*o+u[13])*h,this.z=(u[2]*n+u[6]*r+u[10]*o+u[14])*h,this}applyQuaternion(e){const n=this.x,r=this.y,o=this.z,u=e.x,h=e.y,m=e.z,b=e.w,S=2*(h*o-m*r),T=2*(m*n-u*o),k=2*(u*r-h*n);return this.x=n+b*S+h*k-m*T,this.y=r+b*T+m*S-u*k,this.z=o+b*k+u*T-h*S,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*o,this.y=u[1]*n+u[5]*r+u[9]*o,this.z=u[2]*n+u[6]*r+u[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Tr(this.x,e.x,n.x),this.y=Tr(this.y,e.y,n.y),this.z=Tr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Tr(this.x,e,n),this.y=Tr(this.y,e,n),this.z=Tr(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,o=e.y,u=e.z,h=n.x,m=n.y,b=n.z;return this.x=o*b-u*m,this.y=u*h-r*b,this.z=r*m-o*h,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return $B.copy(this).projectOnVector(e),this.sub($B)}reflect(e){return this.sub($B.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return n*n+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const o=Math.sin(n)*e;return this.x=o*Math.sin(r),this.y=Math.cos(n)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=o,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $B=new Xe,Zse=new Oc;class br{constructor(e,n,r,o,u,h,m,b,S){br.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,b,S)}set(e,n,r,o,u,h,m,b,S){const T=this.elements;return T[0]=e,T[1]=o,T[2]=m,T[3]=n,T[4]=u,T[5]=b,T[6]=r,T[7]=h,T[8]=S,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[3],b=r[6],S=r[1],T=r[4],k=r[7],O=r[2],L=r[5],H=r[8],G=o[0],V=o[3],I=o[6],K=o[1],ue=o[4],P=o[7],ae=o[2],ge=o[5],me=o[8];return u[0]=h*G+m*K+b*ae,u[3]=h*V+m*ue+b*ge,u[6]=h*I+m*P+b*me,u[1]=S*G+T*K+k*ae,u[4]=S*V+T*ue+k*ge,u[7]=S*I+T*P+k*me,u[2]=O*G+L*K+H*ae,u[5]=O*V+L*ue+H*ge,u[8]=O*I+L*P+H*me,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],b=e[6],S=e[7],T=e[8];return n*h*T-n*m*S-r*u*T+r*m*b+o*u*S-o*h*b}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],b=e[6],S=e[7],T=e[8],k=T*h-m*S,O=m*b-T*u,L=S*u-h*b,H=n*k+r*O+o*L;if(H===0)return this.set(0,0,0,0,0,0,0,0,0);const G=1/H;return e[0]=k*G,e[1]=(o*S-T*r)*G,e[2]=(m*r-o*h)*G,e[3]=O*G,e[4]=(T*n-o*b)*G,e[5]=(o*u-m*n)*G,e[6]=L*G,e[7]=(r*b-S*n)*G,e[8]=(h*n-r*u)*G,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,o,u,h,m){const b=Math.cos(u),S=Math.sin(u);return this.set(r*b,r*S,-r*(b*h+S*m)+h+e,-o*S,o*b,-o*(-S*h+b*m)+m+n,0,0,1),this}scale(e,n){return this.premultiply(ZB.makeScale(e,n)),this}rotate(e){return this.premultiply(ZB.makeRotation(-e)),this}translate(e,n){return this.premultiply(ZB.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<9;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ZB=new br,Jse=new br().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Qse=new br().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function z1e(){const c={enabled:!0,workingColorSpace:Oo,spaces:{},convert:function(o,u,h){return this.enabled===!1||u===h||!u||!h||(this.spaces[u].transfer===ai&&(o.r=of(o.r),o.g=of(o.g),o.b=of(o.b)),this.spaces[u].primaries!==this.spaces[h].primaries&&(o.applyMatrix3(this.spaces[u].toXYZ),o.applyMatrix3(this.spaces[h].fromXYZ)),this.spaces[h].transfer===ai&&(o.r=ny(o.r),o.g=ny(o.g),o.b=ny(o.b))),o},workingToColorSpace:function(o,u){return this.convert(o,this.workingColorSpace,u)},colorSpaceToWorking:function(o,u){return this.convert(o,u,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===Vh?JI:this.spaces[o].transfer},getToneMappingMode:function(o){return this.spaces[o].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(o,u=this.workingColorSpace){return o.fromArray(this.spaces[u].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,u,h){return o.copy(this.spaces[u].toXYZ).multiply(this.spaces[h].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(o,u){return Rw("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),c.workingToColorSpace(o,u)},toWorkingColorSpace:function(o,u){return Rw("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),c.colorSpaceToWorking(o,u)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return c.define({[Oo]:{primaries:e,whitePoint:r,transfer:JI,toXYZ:Jse,fromXYZ:Qse,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:da},outputColorSpaceConfig:{drawingBufferColorSpace:da}},[da]:{primaries:e,whitePoint:r,transfer:ai,toXYZ:Jse,fromXYZ:Qse,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:da}}}),c}const Or=z1e();function of(c){return c<.04045?c*.0773993808:Math.pow(c*.9478672986+.0521327014,2.4)}function ny(c){return c<.0031308?c*12.92:1.055*Math.pow(c,.41666)-.055}let k_;class j1e{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{k_===void 0&&(k_=Iw("canvas")),k_.width=e.width,k_.height=e.height;const o=k_.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),r=k_}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Iw("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),u=o.data;for(let h=0;h<u.length;h++)u[h]=of(u[h]/255)*255;return r.putImageData(o,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(of(n[r]/255)*255):n[r]=of(n[r]);return{data:n,width:e.width,height:e.height}}else return Wn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let V1e=0;class Dj{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:V1e++}),this.uuid=Tu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):typeof VideoFrame<"u"&&n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let u;if(Array.isArray(o)){u=[];for(let h=0,m=o.length;h<m;h++)o[h].isDataTexture?u.push(JB(o[h].image)):u.push(JB(o[h]))}else u=JB(o);r.url=u}return n||(e.images[this.uuid]=r),r}}function JB(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?j1e.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(Wn("Texture: Unable to serialize Texture."),{})}let H1e=0;const QB=new Xe;class Ka extends xg{constructor(e=Ka.DEFAULT_IMAGE,n=Ka.DEFAULT_MAPPING,r=Tc,o=Tc,u=fa,h=tf,m=Qs,b=$s,S=Ka.DEFAULT_ANISOTROPY,T=Vh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:H1e++}),this.uuid=Tu(),this.name="",this.source=new Dj(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=u,this.minFilter=h,this.anisotropy=S,this.format=m,this.internalFormat=null,this.type=b,this.offset=new gr(0,0),this.repeat=new gr(1,1),this.center=new gr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new br,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=T,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(QB).x}get height(){return this.source.getSize(QB).y}get depth(){return this.source.getSize(QB).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){Wn(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){Wn(`Texture.setValues(): property '${n}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tce)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rs:e.x=e.x-Math.floor(e.x);break;case Tc:e.x=e.x<0?0:1;break;case ZI:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rs:e.y=e.y-Math.floor(e.y);break;case Tc:e.y=e.y<0?0:1;break;case ZI:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ka.DEFAULT_IMAGE=null;Ka.DEFAULT_MAPPING=tce;Ka.DEFAULT_ANISOTROPY=1;class _i{constructor(e=0,n=0,r=0,o=1){_i.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,o){return this.x=e,this.y=n,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=this.w,h=e.elements;return this.x=h[0]*n+h[4]*r+h[8]*o+h[12]*u,this.y=h[1]*n+h[5]*r+h[9]*o+h[13]*u,this.z=h[2]*n+h[6]*r+h[10]*o+h[14]*u,this.w=h[3]*n+h[7]*r+h[11]*o+h[15]*u,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,o,u;const b=e.elements,S=b[0],T=b[4],k=b[8],O=b[1],L=b[5],H=b[9],G=b[2],V=b[6],I=b[10];if(Math.abs(T-O)<.01&&Math.abs(k-G)<.01&&Math.abs(H-V)<.01){if(Math.abs(T+O)<.1&&Math.abs(k+G)<.1&&Math.abs(H+V)<.1&&Math.abs(S+L+I-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const ue=(S+1)/2,P=(L+1)/2,ae=(I+1)/2,ge=(T+O)/4,me=(k+G)/4,J=(H+V)/4;return ue>P&&ue>ae?ue<.01?(r=0,o=.707106781,u=.707106781):(r=Math.sqrt(ue),o=ge/r,u=me/r):P>ae?P<.01?(r=.707106781,o=0,u=.707106781):(o=Math.sqrt(P),r=ge/o,u=J/o):ae<.01?(r=.707106781,o=.707106781,u=0):(u=Math.sqrt(ae),r=me/u,o=J/u),this.set(r,o,u,n),this}let K=Math.sqrt((V-H)*(V-H)+(k-G)*(k-G)+(O-T)*(O-T));return Math.abs(K)<.001&&(K=1),this.x=(V-H)/K,this.y=(k-G)/K,this.z=(O-T)/K,this.w=Math.acos((S+L+I-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Tr(this.x,e.x,n.x),this.y=Tr(this.y,e.y,n.y),this.z=Tr(this.z,e.z,n.z),this.w=Tr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Tr(this.x,e,n),this.y=Tr(this.y,e,n),this.z=Tr(this.z,e,n),this.w=Tr(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class G1e extends xg{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new _i(0,0,e,n),this.scissorTest=!1,this.viewport=new _i(0,0,e,n);const o={width:e,height:n,depth:r.depth},u=new Ka(o);this.textures=[];const h=r.count;for(let m=0;m<h;m++)this.textures[m]=u.clone(),this.textures[m].isRenderTargetTexture=!0,this.textures[m].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:fa,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let o=0,u=this.textures.length;o<u;o++)this.textures[o].image.width=e,this.textures[o].image.height=n,this.textures[o].image.depth=r,this.textures[o].isData3DTexture!==!0&&(this.textures[o].isArrayTexture=this.textures[o].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const o=Object.assign({},e.textures[n].image);this.textures[n].source=new Dj(o)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ol extends G1e{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class fce extends Ka{constructor(e=null,n=1,r=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Da,this.minFilter=Da,this.wrapR=Tc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class W1e extends Ka{constructor(e=null,n=1,r=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Da,this.minFilter=Da,this.wrapR=Tc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ff{constructor(e=new Xe(1/0,1/0,1/0),n=new Xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(yu.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(yu.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=yu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const u=r.getAttribute("position");if(n===!0&&u!==void 0&&e.isInstancedMesh!==!0)for(let h=0,m=u.count;h<m;h++)e.isMesh===!0?e.getVertexPosition(h,yu):yu.fromBufferAttribute(u,h),yu.applyMatrix4(e.matrixWorld),this.expandByPoint(yu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),X2.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),X2.copy(r.boundingBox)),X2.applyMatrix4(e.matrixWorld),this.union(X2)}const o=e.children;for(let u=0,h=o.length;u<h;u++)this.expandByObject(o[u],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,yu),yu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zS),K2.subVectors(this.max,zS),I_.subVectors(e.a,zS),R_.subVectors(e.b,zS),D_.subVectors(e.c,zS),Oh.subVectors(R_,I_),Nh.subVectors(D_,R_),Wm.subVectors(I_,D_);let n=[0,-Oh.z,Oh.y,0,-Nh.z,Nh.y,0,-Wm.z,Wm.y,Oh.z,0,-Oh.x,Nh.z,0,-Nh.x,Wm.z,0,-Wm.x,-Oh.y,Oh.x,0,-Nh.y,Nh.x,0,-Wm.y,Wm.x,0];return!e4(n,I_,R_,D_,K2)||(n=[1,0,0,0,1,0,0,0,1],!e4(n,I_,R_,D_,K2))?!1:(Y2.crossVectors(Oh,Nh),n=[Y2.x,Y2.y,Y2.z],e4(n,I_,R_,D_,K2))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(yu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Wd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Wd=[new Xe,new Xe,new Xe,new Xe,new Xe,new Xe,new Xe,new Xe],yu=new Xe,X2=new ff,I_=new Xe,R_=new Xe,D_=new Xe,Oh=new Xe,Nh=new Xe,Wm=new Xe,zS=new Xe,K2=new Xe,Y2=new Xe,qm=new Xe;function e4(c,e,n,r,o){for(let u=0,h=c.length-3;u<=h;u+=3){qm.fromArray(c,u);const m=o.x*Math.abs(qm.x)+o.y*Math.abs(qm.y)+o.z*Math.abs(qm.z),b=e.dot(qm),S=n.dot(qm),T=r.dot(qm);if(Math.max(-Math.max(b,S,T),Math.min(b,S,T))>m)return!1}return!0}const q1e=new ff,jS=new Xe,t4=new Xe;class Fc{constructor(e=new Xe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):q1e.setFromPoints(e).getCenter(r);let o=0;for(let u=0,h=e.length;u<h;u++)o=Math.max(o,r.distanceToSquared(e[u]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jS.subVectors(e,this.center);const n=jS.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),o=(r-this.radius)*.5;this.center.addScaledVector(jS,o/r),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(t4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jS.copy(e.center).add(t4)),this.expandByPoint(jS.copy(e.center).sub(t4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const qd=new Xe,n4=new Xe,$2=new Xe,Lh=new Xe,r4=new Xe,Z2=new Xe,i4=new Xe;class Hw{constructor(e=new Xe,n=new Xe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=qd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(qd.copy(this.origin).addScaledVector(this.direction,n),qd.distanceToSquared(e))}distanceSqToSegment(e,n,r,o){n4.copy(e).add(n).multiplyScalar(.5),$2.copy(n).sub(e).normalize(),Lh.copy(this.origin).sub(n4);const u=e.distanceTo(n)*.5,h=-this.direction.dot($2),m=Lh.dot(this.direction),b=-Lh.dot($2),S=Lh.lengthSq(),T=Math.abs(1-h*h);let k,O,L,H;if(T>0)if(k=h*b-m,O=h*m-b,H=u*T,k>=0)if(O>=-H)if(O<=H){const G=1/T;k*=G,O*=G,L=k*(k+h*O+2*m)+O*(h*k+O+2*b)+S}else O=u,k=Math.max(0,-(h*O+m)),L=-k*k+O*(O+2*b)+S;else O=-u,k=Math.max(0,-(h*O+m)),L=-k*k+O*(O+2*b)+S;else O<=-H?(k=Math.max(0,-(-h*u+m)),O=k>0?-u:Math.min(Math.max(-u,-b),u),L=-k*k+O*(O+2*b)+S):O<=H?(k=0,O=Math.min(Math.max(-u,-b),u),L=O*(O+2*b)+S):(k=Math.max(0,-(h*u+m)),O=k>0?u:Math.min(Math.max(-u,-b),u),L=-k*k+O*(O+2*b)+S);else O=h>0?-u:u,k=Math.max(0,-(h*O+m)),L=-k*k+O*(O+2*b)+S;return r&&r.copy(this.origin).addScaledVector(this.direction,k),o&&o.copy(n4).addScaledVector($2,O),L}intersectSphere(e,n){qd.subVectors(e.center,this.origin);const r=qd.dot(this.direction),o=qd.dot(qd)-r*r,u=e.radius*e.radius;if(o>u)return null;const h=Math.sqrt(u-o),m=r-h,b=r+h;return b<0?null:m<0?this.at(b,n):this.at(m,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,o,u,h,m,b;const S=1/this.direction.x,T=1/this.direction.y,k=1/this.direction.z,O=this.origin;return S>=0?(r=(e.min.x-O.x)*S,o=(e.max.x-O.x)*S):(r=(e.max.x-O.x)*S,o=(e.min.x-O.x)*S),T>=0?(u=(e.min.y-O.y)*T,h=(e.max.y-O.y)*T):(u=(e.max.y-O.y)*T,h=(e.min.y-O.y)*T),r>h||u>o||((u>r||isNaN(r))&&(r=u),(h<o||isNaN(o))&&(o=h),k>=0?(m=(e.min.z-O.z)*k,b=(e.max.z-O.z)*k):(m=(e.max.z-O.z)*k,b=(e.min.z-O.z)*k),r>b||m>o)||((m>r||r!==r)&&(r=m),(b<o||o!==o)&&(o=b),o<0)?null:this.at(r>=0?r:o,n)}intersectsBox(e){return this.intersectBox(e,qd)!==null}intersectTriangle(e,n,r,o,u){r4.subVectors(n,e),Z2.subVectors(r,e),i4.crossVectors(r4,Z2);let h=this.direction.dot(i4),m;if(h>0){if(o)return null;m=1}else if(h<0)m=-1,h=-h;else return null;Lh.subVectors(this.origin,e);const b=m*this.direction.dot(Z2.crossVectors(Lh,Z2));if(b<0)return null;const S=m*this.direction.dot(r4.cross(Lh));if(S<0||b+S>h)return null;const T=-m*Lh.dot(i4);return T<0?null:this.at(T/h,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class vr{constructor(e,n,r,o,u,h,m,b,S,T,k,O,L,H,G,V){vr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,b,S,T,k,O,L,H,G,V)}set(e,n,r,o,u,h,m,b,S,T,k,O,L,H,G,V){const I=this.elements;return I[0]=e,I[4]=n,I[8]=r,I[12]=o,I[1]=u,I[5]=h,I[9]=m,I[13]=b,I[2]=S,I[6]=T,I[10]=k,I[14]=O,I[3]=L,I[7]=H,I[11]=G,I[15]=V,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return this.determinant()===0?(e.set(1,0,0),n.set(0,1,0),r.set(0,0,1),this):(e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const n=this.elements,r=e.elements,o=1/O_.setFromMatrixColumn(e,0).length(),u=1/O_.setFromMatrixColumn(e,1).length(),h=1/O_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=0,n[4]=r[4]*u,n[5]=r[5]*u,n[6]=r[6]*u,n[7]=0,n[8]=r[8]*h,n[9]=r[9]*h,n[10]=r[10]*h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,o=e.y,u=e.z,h=Math.cos(r),m=Math.sin(r),b=Math.cos(o),S=Math.sin(o),T=Math.cos(u),k=Math.sin(u);if(e.order==="XYZ"){const O=h*T,L=h*k,H=m*T,G=m*k;n[0]=b*T,n[4]=-b*k,n[8]=S,n[1]=L+H*S,n[5]=O-G*S,n[9]=-m*b,n[2]=G-O*S,n[6]=H+L*S,n[10]=h*b}else if(e.order==="YXZ"){const O=b*T,L=b*k,H=S*T,G=S*k;n[0]=O+G*m,n[4]=H*m-L,n[8]=h*S,n[1]=h*k,n[5]=h*T,n[9]=-m,n[2]=L*m-H,n[6]=G+O*m,n[10]=h*b}else if(e.order==="ZXY"){const O=b*T,L=b*k,H=S*T,G=S*k;n[0]=O-G*m,n[4]=-h*k,n[8]=H+L*m,n[1]=L+H*m,n[5]=h*T,n[9]=G-O*m,n[2]=-h*S,n[6]=m,n[10]=h*b}else if(e.order==="ZYX"){const O=h*T,L=h*k,H=m*T,G=m*k;n[0]=b*T,n[4]=H*S-L,n[8]=O*S+G,n[1]=b*k,n[5]=G*S+O,n[9]=L*S-H,n[2]=-S,n[6]=m*b,n[10]=h*b}else if(e.order==="YZX"){const O=h*b,L=h*S,H=m*b,G=m*S;n[0]=b*T,n[4]=G-O*k,n[8]=H*k+L,n[1]=k,n[5]=h*T,n[9]=-m*T,n[2]=-S*T,n[6]=L*k+H,n[10]=O-G*k}else if(e.order==="XZY"){const O=h*b,L=h*S,H=m*b,G=m*S;n[0]=b*T,n[4]=-k,n[8]=S*T,n[1]=O*k+G,n[5]=h*T,n[9]=L*k-H,n[2]=H*k-L,n[6]=m*T,n[10]=G*k+O}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(X1e,e,K1e)}lookAt(e,n,r){const o=this.elements;return Gs.subVectors(e,n),Gs.lengthSq()===0&&(Gs.z=1),Gs.normalize(),Fh.crossVectors(r,Gs),Fh.lengthSq()===0&&(Math.abs(r.z)===1?Gs.x+=1e-4:Gs.z+=1e-4,Gs.normalize(),Fh.crossVectors(r,Gs)),Fh.normalize(),J2.crossVectors(Gs,Fh),o[0]=Fh.x,o[4]=J2.x,o[8]=Gs.x,o[1]=Fh.y,o[5]=J2.y,o[9]=Gs.y,o[2]=Fh.z,o[6]=J2.z,o[10]=Gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[4],b=r[8],S=r[12],T=r[1],k=r[5],O=r[9],L=r[13],H=r[2],G=r[6],V=r[10],I=r[14],K=r[3],ue=r[7],P=r[11],ae=r[15],ge=o[0],me=o[4],J=o[8],te=o[12],oe=o[1],Y=o[5],ke=o[9],$e=o[13],ot=o[2],Qe=o[6],pe=o[10],Ve=o[14],Ue=o[3],Pt=o[7],Me=o[11],Ot=o[15];return u[0]=h*ge+m*oe+b*ot+S*Ue,u[4]=h*me+m*Y+b*Qe+S*Pt,u[8]=h*J+m*ke+b*pe+S*Me,u[12]=h*te+m*$e+b*Ve+S*Ot,u[1]=T*ge+k*oe+O*ot+L*Ue,u[5]=T*me+k*Y+O*Qe+L*Pt,u[9]=T*J+k*ke+O*pe+L*Me,u[13]=T*te+k*$e+O*Ve+L*Ot,u[2]=H*ge+G*oe+V*ot+I*Ue,u[6]=H*me+G*Y+V*Qe+I*Pt,u[10]=H*J+G*ke+V*pe+I*Me,u[14]=H*te+G*$e+V*Ve+I*Ot,u[3]=K*ge+ue*oe+P*ot+ae*Ue,u[7]=K*me+ue*Y+P*Qe+ae*Pt,u[11]=K*J+ue*ke+P*pe+ae*Me,u[15]=K*te+ue*$e+P*Ve+ae*Ot,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],o=e[8],u=e[12],h=e[1],m=e[5],b=e[9],S=e[13],T=e[2],k=e[6],O=e[10],L=e[14],H=e[3],G=e[7],V=e[11],I=e[15],K=b*L-S*O,ue=m*L-S*k,P=m*O-b*k,ae=h*L-S*T,ge=h*O-b*T,me=h*k-m*T;return n*(G*K-V*ue+I*P)-r*(H*K-V*ae+I*ge)+o*(H*ue-G*ae+I*me)-u*(H*P-G*ge+V*me)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=n,o[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],b=e[6],S=e[7],T=e[8],k=e[9],O=e[10],L=e[11],H=e[12],G=e[13],V=e[14],I=e[15],K=k*V*S-G*O*S+G*b*L-m*V*L-k*b*I+m*O*I,ue=H*O*S-T*V*S-H*b*L+h*V*L+T*b*I-h*O*I,P=T*G*S-H*k*S+H*m*L-h*G*L-T*m*I+h*k*I,ae=H*k*b-T*G*b-H*m*O+h*G*O+T*m*V-h*k*V,ge=n*K+r*ue+o*P+u*ae;if(ge===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const me=1/ge;return e[0]=K*me,e[1]=(G*O*u-k*V*u-G*o*L+r*V*L+k*o*I-r*O*I)*me,e[2]=(m*V*u-G*b*u+G*o*S-r*V*S-m*o*I+r*b*I)*me,e[3]=(k*b*u-m*O*u-k*o*S+r*O*S+m*o*L-r*b*L)*me,e[4]=ue*me,e[5]=(T*V*u-H*O*u+H*o*L-n*V*L-T*o*I+n*O*I)*me,e[6]=(H*b*u-h*V*u-H*o*S+n*V*S+h*o*I-n*b*I)*me,e[7]=(h*O*u-T*b*u+T*o*S-n*O*S-h*o*L+n*b*L)*me,e[8]=P*me,e[9]=(H*k*u-T*G*u-H*r*L+n*G*L+T*r*I-n*k*I)*me,e[10]=(h*G*u-H*m*u+H*r*S-n*G*S-h*r*I+n*m*I)*me,e[11]=(T*m*u-h*k*u-T*r*S+n*k*S+h*r*L-n*m*L)*me,e[12]=ae*me,e[13]=(T*G*o-H*k*o+H*r*O-n*G*O-T*r*V+n*k*V)*me,e[14]=(H*m*o-h*G*o-H*r*b+n*G*b+h*r*V-n*m*V)*me,e[15]=(h*k*o-T*m*o+T*r*b-n*k*b-h*r*O+n*m*O)*me,this}scale(e){const n=this.elements,r=e.x,o=e.y,u=e.z;return n[0]*=r,n[4]*=o,n[8]*=u,n[1]*=r,n[5]*=o,n[9]*=u,n[2]*=r,n[6]*=o,n[10]*=u,n[3]*=r,n[7]*=o,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,o))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),o=Math.sin(n),u=1-r,h=e.x,m=e.y,b=e.z,S=u*h,T=u*m;return this.set(S*h+r,S*m-o*b,S*b+o*m,0,S*m+o*b,T*m+r,T*b-o*h,0,S*b-o*m,T*b+o*h,u*b*b+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,o,u,h){return this.set(1,r,u,0,e,1,h,0,n,o,1,0,0,0,0,1),this}compose(e,n,r){const o=this.elements,u=n._x,h=n._y,m=n._z,b=n._w,S=u+u,T=h+h,k=m+m,O=u*S,L=u*T,H=u*k,G=h*T,V=h*k,I=m*k,K=b*S,ue=b*T,P=b*k,ae=r.x,ge=r.y,me=r.z;return o[0]=(1-(G+I))*ae,o[1]=(L+P)*ae,o[2]=(H-ue)*ae,o[3]=0,o[4]=(L-P)*ge,o[5]=(1-(O+I))*ge,o[6]=(V+K)*ge,o[7]=0,o[8]=(H+ue)*me,o[9]=(V-K)*me,o[10]=(1-(O+G))*me,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,n,r){const o=this.elements;if(e.x=o[12],e.y=o[13],e.z=o[14],this.determinant()===0)return r.set(1,1,1),n.identity(),this;let u=O_.set(o[0],o[1],o[2]).length();const h=O_.set(o[4],o[5],o[6]).length(),m=O_.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),bu.copy(this);const S=1/u,T=1/h,k=1/m;return bu.elements[0]*=S,bu.elements[1]*=S,bu.elements[2]*=S,bu.elements[4]*=T,bu.elements[5]*=T,bu.elements[6]*=T,bu.elements[8]*=k,bu.elements[9]*=k,bu.elements[10]*=k,n.setFromRotationMatrix(bu),r.x=u,r.y=h,r.z=m,this}makePerspective(e,n,r,o,u,h,m=Mc,b=!1){const S=this.elements,T=2*u/(n-e),k=2*u/(r-o),O=(n+e)/(n-e),L=(r+o)/(r-o);let H,G;if(b)H=u/(h-u),G=h*u/(h-u);else if(m===Mc)H=-(h+u)/(h-u),G=-2*h*u/(h-u);else if(m===QI)H=-h/(h-u),G=-h*u/(h-u);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+m);return S[0]=T,S[4]=0,S[8]=O,S[12]=0,S[1]=0,S[5]=k,S[9]=L,S[13]=0,S[2]=0,S[6]=0,S[10]=H,S[14]=G,S[3]=0,S[7]=0,S[11]=-1,S[15]=0,this}makeOrthographic(e,n,r,o,u,h,m=Mc,b=!1){const S=this.elements,T=2/(n-e),k=2/(r-o),O=-(n+e)/(n-e),L=-(r+o)/(r-o);let H,G;if(b)H=1/(h-u),G=h/(h-u);else if(m===Mc)H=-2/(h-u),G=-(h+u)/(h-u);else if(m===QI)H=-1/(h-u),G=-u/(h-u);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+m);return S[0]=T,S[4]=0,S[8]=0,S[12]=O,S[1]=0,S[5]=k,S[9]=0,S[13]=L,S[2]=0,S[6]=0,S[10]=H,S[14]=G,S[3]=0,S[7]=0,S[11]=0,S[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<16;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const O_=new Xe,bu=new vr,X1e=new Xe(0,0,0),K1e=new Xe(1,1,1),Fh=new Xe,J2=new Xe,Gs=new Xe,ele=new vr,tle=new Oc;class Nc{constructor(e=0,n=0,r=0,o=Nc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const o=e.elements,u=o[0],h=o[4],m=o[8],b=o[1],S=o[5],T=o[9],k=o[2],O=o[6],L=o[10];switch(n){case"XYZ":this._y=Math.asin(Tr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-T,L),this._z=Math.atan2(-h,u)):(this._x=Math.atan2(O,S),this._z=0);break;case"YXZ":this._x=Math.asin(-Tr(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(m,L),this._z=Math.atan2(b,S)):(this._y=Math.atan2(-k,u),this._z=0);break;case"ZXY":this._x=Math.asin(Tr(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(-k,L),this._z=Math.atan2(-h,S)):(this._y=0,this._z=Math.atan2(b,u));break;case"ZYX":this._y=Math.asin(-Tr(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(O,L),this._z=Math.atan2(b,u)):(this._x=0,this._z=Math.atan2(-h,S));break;case"YZX":this._z=Math.asin(Tr(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-T,S),this._y=Math.atan2(-k,u)):(this._x=0,this._y=Math.atan2(m,L));break;case"XZY":this._z=Math.asin(-Tr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(O,S),this._y=Math.atan2(m,u)):(this._x=Math.atan2(-T,L),this._y=0);break;default:Wn("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return ele.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ele,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return tle.setFromEuler(this),this.setFromQuaternion(tle,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Nc.DEFAULT_ORDER="XYZ";class hce{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Y1e=0;const nle=new Xe,N_=new Oc,Xd=new vr,Q2=new Xe,VS=new Xe,$1e=new Xe,Z1e=new Oc,rle=new Xe(1,0,0),ile=new Xe(0,1,0),ale=new Xe(0,0,1),ole={type:"added"},J1e={type:"removed"},L_={type:"childadded",child:null},a4={type:"childremoved",child:null};class $i extends xg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Y1e++}),this.uuid=Tu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$i.DEFAULT_UP.clone();const e=new Xe,n=new Nc,r=new Oc,o=new Xe(1,1,1);function u(){r.setFromEuler(n,!1)}function h(){n.setFromQuaternion(r,void 0,!1)}n._onChange(u),r._onChange(h),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new vr},normalMatrix:{value:new br}}),this.matrix=new vr,this.matrixWorld=new vr,this.matrixAutoUpdate=$i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=$i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hce,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return N_.setFromAxisAngle(e,n),this.quaternion.multiply(N_),this}rotateOnWorldAxis(e,n){return N_.setFromAxisAngle(e,n),this.quaternion.premultiply(N_),this}rotateX(e){return this.rotateOnAxis(rle,e)}rotateY(e){return this.rotateOnAxis(ile,e)}rotateZ(e){return this.rotateOnAxis(ale,e)}translateOnAxis(e,n){return nle.copy(e).applyQuaternion(this.quaternion),this.position.add(nle.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(rle,e)}translateY(e){return this.translateOnAxis(ile,e)}translateZ(e){return this.translateOnAxis(ale,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xd.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Q2.copy(e):Q2.set(e,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),VS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xd.lookAt(VS,Q2,this.up):Xd.lookAt(Q2,VS,this.up),this.quaternion.setFromRotationMatrix(Xd),o&&(Xd.extractRotation(o.matrixWorld),N_.setFromRotationMatrix(Xd),this.quaternion.premultiply(N_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(ar("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ole),L_.child=e,this.dispatchEvent(L_),L_.child=null):ar("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(J1e),a4.child=e,this.dispatchEvent(a4),a4.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ole),L_.child=e,this.dispatchEvent(L_),L_.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const h=this.children[r].getObjectByProperty(e,n);if(h!==void 0)return h}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const o=this.children;for(let u=0,h=o.length;u<h;u++)o[u].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(VS,e,$1e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(VS,Z1e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const o=this.children;for(let u=0,h=o.length;u<h;u++)o[u].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(m=>({...m,boundingBox:m.boundingBox?m.boundingBox.toJSON():void 0,boundingSphere:m.boundingSphere?m.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(m=>({...m})),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(e),o.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function u(m,b){return m[b.uuid]===void 0&&(m[b.uuid]=b.toJSON(e)),b.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=u(e.geometries,this.geometry);const m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){const b=m.shapes;if(Array.isArray(b))for(let S=0,T=b.length;S<T;S++){const k=b[S];u(e.shapes,k)}else u(e.shapes,b)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(u(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const m=[];for(let b=0,S=this.material.length;b<S;b++)m.push(u(e.materials,this.material[b]));o.material=m}else o.material=u(e.materials,this.material);if(this.children.length>0){o.children=[];for(let m=0;m<this.children.length;m++)o.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let m=0;m<this.animations.length;m++){const b=this.animations[m];o.animations.push(u(e.animations,b))}}if(n){const m=h(e.geometries),b=h(e.materials),S=h(e.textures),T=h(e.images),k=h(e.shapes),O=h(e.skeletons),L=h(e.animations),H=h(e.nodes);m.length>0&&(r.geometries=m),b.length>0&&(r.materials=b),S.length>0&&(r.textures=S),T.length>0&&(r.images=T),k.length>0&&(r.shapes=k),O.length>0&&(r.skeletons=O),L.length>0&&(r.animations=L),H.length>0&&(r.nodes=H)}return r.object=o,r;function h(m){const b=[];for(const S in m){const T=m[S];delete T.metadata,b.push(T)}return b}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}$i.DEFAULT_UP=new Xe(0,1,0);$i.DEFAULT_MATRIX_AUTO_UPDATE=!0;$i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xu=new Xe,Kd=new Xe,o4=new Xe,Yd=new Xe,F_=new Xe,U_=new Xe,sle=new Xe,s4=new Xe,l4=new Xe,u4=new Xe,c4=new _i,d4=new _i,f4=new _i;class Eu{constructor(e=new Xe,n=new Xe,r=new Xe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,o){o.subVectors(r,n),xu.subVectors(e,n),o.cross(xu);const u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}static getBarycoord(e,n,r,o,u){xu.subVectors(o,n),Kd.subVectors(r,n),o4.subVectors(e,n);const h=xu.dot(xu),m=xu.dot(Kd),b=xu.dot(o4),S=Kd.dot(Kd),T=Kd.dot(o4),k=h*S-m*m;if(k===0)return u.set(0,0,0),null;const O=1/k,L=(S*b-m*T)*O,H=(h*T-m*b)*O;return u.set(1-L-H,H,L)}static containsPoint(e,n,r,o){return this.getBarycoord(e,n,r,o,Yd)===null?!1:Yd.x>=0&&Yd.y>=0&&Yd.x+Yd.y<=1}static getInterpolation(e,n,r,o,u,h,m,b){return this.getBarycoord(e,n,r,o,Yd)===null?(b.x=0,b.y=0,"z"in b&&(b.z=0),"w"in b&&(b.w=0),null):(b.setScalar(0),b.addScaledVector(u,Yd.x),b.addScaledVector(h,Yd.y),b.addScaledVector(m,Yd.z),b)}static getInterpolatedAttribute(e,n,r,o,u,h){return c4.setScalar(0),d4.setScalar(0),f4.setScalar(0),c4.fromBufferAttribute(e,n),d4.fromBufferAttribute(e,r),f4.fromBufferAttribute(e,o),h.setScalar(0),h.addScaledVector(c4,u.x),h.addScaledVector(d4,u.y),h.addScaledVector(f4,u.z),h}static isFrontFacing(e,n,r,o){return xu.subVectors(r,n),Kd.subVectors(e,n),xu.cross(Kd).dot(o)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,o){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,n,r,o){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xu.subVectors(this.c,this.b),Kd.subVectors(this.a,this.b),xu.cross(Kd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Eu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Eu.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,o,u){return Eu.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}containsPoint(e){return Eu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Eu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,o=this.b,u=this.c;let h,m;F_.subVectors(o,r),U_.subVectors(u,r),s4.subVectors(e,r);const b=F_.dot(s4),S=U_.dot(s4);if(b<=0&&S<=0)return n.copy(r);l4.subVectors(e,o);const T=F_.dot(l4),k=U_.dot(l4);if(T>=0&&k<=T)return n.copy(o);const O=b*k-T*S;if(O<=0&&b>=0&&T<=0)return h=b/(b-T),n.copy(r).addScaledVector(F_,h);u4.subVectors(e,u);const L=F_.dot(u4),H=U_.dot(u4);if(H>=0&&L<=H)return n.copy(u);const G=L*S-b*H;if(G<=0&&S>=0&&H<=0)return m=S/(S-H),n.copy(r).addScaledVector(U_,m);const V=T*H-L*k;if(V<=0&&k-T>=0&&L-H>=0)return sle.subVectors(u,o),m=(k-T)/(k-T+(L-H)),n.copy(o).addScaledVector(sle,m);const I=1/(V+G+O);return h=G*I,m=O*I,n.copy(r).addScaledVector(F_,h).addScaledVector(U_,m)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uh={h:0,s:0,l:0},eI={h:0,s:0,l:0};function h4(c,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?c+(e-c)*6*n:n<1/2?e:n<2/3?c+(e-c)*6*(2/3-n):c}class tr{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=da){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Or.colorSpaceToWorking(this,n),this}setRGB(e,n,r,o=Or.workingColorSpace){return this.r=e,this.g=n,this.b=r,Or.colorSpaceToWorking(this,o),this}setHSL(e,n,r,o=Or.workingColorSpace){if(e=Rj(e,1),n=Tr(n,0,1),r=Tr(r,0,1),n===0)this.r=this.g=this.b=r;else{const u=r<=.5?r*(1+n):r+n-r*n,h=2*r-u;this.r=h4(h,u,e+1/3),this.g=h4(h,u,e),this.b=h4(h,u,e-1/3)}return Or.colorSpaceToWorking(this,o),this}setStyle(e,n=da){function r(u){u!==void 0&&parseFloat(u)<1&&Wn("Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const h=o[1],m=o[2];switch(h){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:Wn("Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=o[1],h=u.length;if(h===3)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(h===6)return this.setHex(parseInt(u,16),n);Wn("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=da){const r=pce[e.toLowerCase()];return r!==void 0?this.setHex(r,n):Wn("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=of(e.r),this.g=of(e.g),this.b=of(e.b),this}copyLinearToSRGB(e){return this.r=ny(e.r),this.g=ny(e.g),this.b=ny(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=da){return Or.workingToColorSpace(Po.copy(this),e),Math.round(Tr(Po.r*255,0,255))*65536+Math.round(Tr(Po.g*255,0,255))*256+Math.round(Tr(Po.b*255,0,255))}getHexString(e=da){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Or.workingColorSpace){Or.workingToColorSpace(Po.copy(this),n);const r=Po.r,o=Po.g,u=Po.b,h=Math.max(r,o,u),m=Math.min(r,o,u);let b,S;const T=(m+h)/2;if(m===h)b=0,S=0;else{const k=h-m;switch(S=T<=.5?k/(h+m):k/(2-h-m),h){case r:b=(o-u)/k+(o<u?6:0);break;case o:b=(u-r)/k+2;break;case u:b=(r-o)/k+4;break}b/=6}return e.h=b,e.s=S,e.l=T,e}getRGB(e,n=Or.workingColorSpace){return Or.workingToColorSpace(Po.copy(this),n),e.r=Po.r,e.g=Po.g,e.b=Po.b,e}getStyle(e=da){Or.workingToColorSpace(Po.copy(this),e);const n=Po.r,r=Po.g,o=Po.b;return e!==da?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(o*255)})`}offsetHSL(e,n,r){return this.getHSL(Uh),this.setHSL(Uh.h+e,Uh.s+n,Uh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Uh),e.getHSL(eI);const r=fw(Uh.h,eI.h,n),o=fw(Uh.s,eI.s,n),u=fw(Uh.l,eI.l,n);return this.setHSL(r,o,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,o=this.b,u=e.elements;return this.r=u[0]*n+u[3]*r+u[6]*o,this.g=u[1]*n+u[4]*r+u[7]*o,this.b=u[2]*n+u[5]*r+u[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Po=new tr;tr.NAMES=pce;let Q1e=0;class kc extends xg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Q1e++}),this.uuid=Tu(),this.name="",this.type="Material",this.blending=ty,this.side=Rc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Z4,this.blendDst=J4,this.blendEquation=rg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new tr(0,0,0),this.blendAlpha=0,this.depthFunc=cy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Xse,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=A_,this.stencilZFail=A_,this.stencilZPass=A_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){Wn(`Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){Wn(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ty&&(r.blending=this.blending),this.side!==Rc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Z4&&(r.blendSrc=this.blendSrc),this.blendDst!==J4&&(r.blendDst=this.blendDst),this.blendEquation!==rg&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==cy&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Xse&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==A_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==A_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==A_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.allowOverride===!1&&(r.allowOverride=!1),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function o(u){const h=[];for(const m in u){const b=u[m];delete b.metadata,h.push(b)}return h}if(n){const u=o(e.textures),h=o(e.images);u.length>0&&(r.textures=u),h.length>0&&(r.images=h)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const o=n.length;r=new Array(o);for(let u=0;u!==o;++u)r[u]=n[u].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class og extends kc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Nc,this.combine=Kue,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wa=new Xe,tI=new gr;let eSe=0;class ho{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eSe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=jz,this.updateRanges=[],this.gpuType=Il,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let o=0,u=this.itemSize;o<u;o++)this.array[e+o]=n.array[r+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)tI.fromBufferAttribute(this,n),tI.applyMatrix3(e),this.setXY(n,tI.x,tI.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)wa.fromBufferAttribute(this,n),wa.applyMatrix3(e),this.setXYZ(n,wa.x,wa.y,wa.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)wa.fromBufferAttribute(this,n),wa.applyMatrix4(e),this.setXYZ(n,wa.x,wa.y,wa.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)wa.fromBufferAttribute(this,n),wa.applyNormalMatrix(e),this.setXYZ(n,wa.x,wa.y,wa.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)wa.fromBufferAttribute(this,n),wa.transformDirection(e),this.setXYZ(n,wa.x,wa.y,wa.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=wu(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=oi(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=wu(n,this.array)),n}setX(e,n){return this.normalized&&(n=oi(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=wu(n,this.array)),n}setY(e,n){return this.normalized&&(n=oi(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=wu(n,this.array)),n}setZ(e,n){return this.normalized&&(n=oi(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=wu(n,this.array)),n}setW(e,n){return this.normalized&&(n=oi(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,o){return e*=this.itemSize,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array),o=oi(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,n,r,o,u){return e*=this.itemSize,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array),o=oi(o,this.array),u=oi(u,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==jz&&(e.usage=this.usage),e}}class mce extends ho{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class gce extends ho{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Mu extends ho{constructor(e,n,r){super(new Float32Array(e),n,r)}}let tSe=0;const Ml=new vr,p4=new $i,B_=new Xe,Ws=new ff,HS=new ff,Wa=new Xe;class ol extends xg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tSe++}),this.uuid=Tu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(dce(e)?gce:mce)(e,1):this.index=e,this}setIndirect(e,n=0){return this.indirect=e,this.indirectOffset=n,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const u=new br().getNormalMatrix(e);r.applyNormalMatrix(u),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ml.makeRotationFromQuaternion(e),this.applyMatrix4(Ml),this}rotateX(e){return Ml.makeRotationX(e),this.applyMatrix4(Ml),this}rotateY(e){return Ml.makeRotationY(e),this.applyMatrix4(Ml),this}rotateZ(e){return Ml.makeRotationZ(e),this.applyMatrix4(Ml),this}translate(e,n,r){return Ml.makeTranslation(e,n,r),this.applyMatrix4(Ml),this}scale(e,n,r){return Ml.makeScale(e,n,r),this.applyMatrix4(Ml),this}lookAt(e){return p4.lookAt(e),p4.updateMatrix(),this.applyMatrix4(p4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(B_).negate(),this.translate(B_.x,B_.y,B_.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let o=0,u=e.length;o<u;o++){const h=e[o];r.push(h.x,h.y,h.z||0)}this.setAttribute("position",new Mu(r,3))}else{const r=Math.min(e.length,n.count);for(let o=0;o<r;o++){const u=e[o];n.setXYZ(o,u.x,u.y,u.z||0)}e.length>n.count&&Wn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ff);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){ar("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Xe(-1/0,-1/0,-1/0),new Xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,o=n.length;r<o;r++){const u=n[r];Ws.setFromBufferAttribute(u),this.morphTargetsRelative?(Wa.addVectors(this.boundingBox.min,Ws.min),this.boundingBox.expandByPoint(Wa),Wa.addVectors(this.boundingBox.max,Ws.max),this.boundingBox.expandByPoint(Wa)):(this.boundingBox.expandByPoint(Ws.min),this.boundingBox.expandByPoint(Ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&ar('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fc);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){ar("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Xe,1/0);return}if(e){const r=this.boundingSphere.center;if(Ws.setFromBufferAttribute(e),n)for(let u=0,h=n.length;u<h;u++){const m=n[u];HS.setFromBufferAttribute(m),this.morphTargetsRelative?(Wa.addVectors(Ws.min,HS.min),Ws.expandByPoint(Wa),Wa.addVectors(Ws.max,HS.max),Ws.expandByPoint(Wa)):(Ws.expandByPoint(HS.min),Ws.expandByPoint(HS.max))}Ws.getCenter(r);let o=0;for(let u=0,h=e.count;u<h;u++)Wa.fromBufferAttribute(e,u),o=Math.max(o,r.distanceToSquared(Wa));if(n)for(let u=0,h=n.length;u<h;u++){const m=n[u],b=this.morphTargetsRelative;for(let S=0,T=m.count;S<T;S++)Wa.fromBufferAttribute(m,S),b&&(B_.fromBufferAttribute(e,S),Wa.add(B_)),o=Math.max(o,r.distanceToSquared(Wa))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&ar('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){ar("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,o=n.normal,u=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ho(new Float32Array(4*r.count),4));const h=this.getAttribute("tangent"),m=[],b=[];for(let J=0;J<r.count;J++)m[J]=new Xe,b[J]=new Xe;const S=new Xe,T=new Xe,k=new Xe,O=new gr,L=new gr,H=new gr,G=new Xe,V=new Xe;function I(J,te,oe){S.fromBufferAttribute(r,J),T.fromBufferAttribute(r,te),k.fromBufferAttribute(r,oe),O.fromBufferAttribute(u,J),L.fromBufferAttribute(u,te),H.fromBufferAttribute(u,oe),T.sub(S),k.sub(S),L.sub(O),H.sub(O);const Y=1/(L.x*H.y-H.x*L.y);isFinite(Y)&&(G.copy(T).multiplyScalar(H.y).addScaledVector(k,-L.y).multiplyScalar(Y),V.copy(k).multiplyScalar(L.x).addScaledVector(T,-H.x).multiplyScalar(Y),m[J].add(G),m[te].add(G),m[oe].add(G),b[J].add(V),b[te].add(V),b[oe].add(V))}let K=this.groups;K.length===0&&(K=[{start:0,count:e.count}]);for(let J=0,te=K.length;J<te;++J){const oe=K[J],Y=oe.start,ke=oe.count;for(let $e=Y,ot=Y+ke;$e<ot;$e+=3)I(e.getX($e+0),e.getX($e+1),e.getX($e+2))}const ue=new Xe,P=new Xe,ae=new Xe,ge=new Xe;function me(J){ae.fromBufferAttribute(o,J),ge.copy(ae);const te=m[J];ue.copy(te),ue.sub(ae.multiplyScalar(ae.dot(te))).normalize(),P.crossVectors(ge,te);const Y=P.dot(b[J])<0?-1:1;h.setXYZW(J,ue.x,ue.y,ue.z,Y)}for(let J=0,te=K.length;J<te;++J){const oe=K[J],Y=oe.start,ke=oe.count;for(let $e=Y,ot=Y+ke;$e<ot;$e+=3)me(e.getX($e+0)),me(e.getX($e+1)),me(e.getX($e+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ho(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let O=0,L=r.count;O<L;O++)r.setXYZ(O,0,0,0);const o=new Xe,u=new Xe,h=new Xe,m=new Xe,b=new Xe,S=new Xe,T=new Xe,k=new Xe;if(e)for(let O=0,L=e.count;O<L;O+=3){const H=e.getX(O+0),G=e.getX(O+1),V=e.getX(O+2);o.fromBufferAttribute(n,H),u.fromBufferAttribute(n,G),h.fromBufferAttribute(n,V),T.subVectors(h,u),k.subVectors(o,u),T.cross(k),m.fromBufferAttribute(r,H),b.fromBufferAttribute(r,G),S.fromBufferAttribute(r,V),m.add(T),b.add(T),S.add(T),r.setXYZ(H,m.x,m.y,m.z),r.setXYZ(G,b.x,b.y,b.z),r.setXYZ(V,S.x,S.y,S.z)}else for(let O=0,L=n.count;O<L;O+=3)o.fromBufferAttribute(n,O+0),u.fromBufferAttribute(n,O+1),h.fromBufferAttribute(n,O+2),T.subVectors(h,u),k.subVectors(o,u),T.cross(k),r.setXYZ(O+0,T.x,T.y,T.z),r.setXYZ(O+1,T.x,T.y,T.z),r.setXYZ(O+2,T.x,T.y,T.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Wa.fromBufferAttribute(e,n),Wa.normalize(),e.setXYZ(n,Wa.x,Wa.y,Wa.z)}toNonIndexed(){function e(m,b){const S=m.array,T=m.itemSize,k=m.normalized,O=new S.constructor(b.length*T);let L=0,H=0;for(let G=0,V=b.length;G<V;G++){m.isInterleavedBufferAttribute?L=b[G]*m.data.stride+m.offset:L=b[G]*T;for(let I=0;I<T;I++)O[H++]=S[L++]}return new ho(O,T,k)}if(this.index===null)return Wn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ol,r=this.index.array,o=this.attributes;for(const m in o){const b=o[m],S=e(b,r);n.setAttribute(m,S)}const u=this.morphAttributes;for(const m in u){const b=[],S=u[m];for(let T=0,k=S.length;T<k;T++){const O=S[T],L=e(O,r);b.push(L)}n.morphAttributes[m]=b}n.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let m=0,b=h.length;m<b;m++){const S=h[m];n.addGroup(S.start,S.count,S.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const b=this.parameters;for(const S in b)b[S]!==void 0&&(e[S]=b[S]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const b in r){const S=r[b];e.data.attributes[b]=S.toJSON(e.data)}const o={};let u=!1;for(const b in this.morphAttributes){const S=this.morphAttributes[b],T=[];for(let k=0,O=S.length;k<O;k++){const L=S[k];T.push(L.toJSON(e.data))}T.length>0&&(o[b]=T,u=!0)}u&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const m=this.boundingSphere;return m!==null&&(e.data.boundingSphere=m.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const o=e.attributes;for(const S in o){const T=o[S];this.setAttribute(S,T.clone(n))}const u=e.morphAttributes;for(const S in u){const T=[],k=u[S];for(let O=0,L=k.length;O<L;O++)T.push(k[O].clone(n));this.morphAttributes[S]=T}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let S=0,T=h.length;S<T;S++){const k=h[S];this.addGroup(k.start,k.count,k.materialIndex)}const m=e.boundingBox;m!==null&&(this.boundingBox=m.clone());const b=e.boundingSphere;return b!==null&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const lle=new vr,Xm=new Hw,nI=new Fc,ule=new Xe,rI=new Xe,iI=new Xe,aI=new Xe,m4=new Xe,oI=new Xe,cle=new Xe,sI=new Xe;class No extends $i{constructor(e=new ol,n=new og){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,h=o.length;u<h;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}getVertexPosition(e,n){const r=this.geometry,o=r.attributes.position,u=r.morphAttributes.position,h=r.morphTargetsRelative;n.fromBufferAttribute(o,e);const m=this.morphTargetInfluences;if(u&&m){oI.set(0,0,0);for(let b=0,S=u.length;b<S;b++){const T=m[b],k=u[b];T!==0&&(m4.fromBufferAttribute(k,e),h?oI.addScaledVector(m4,T):oI.addScaledVector(m4.sub(n),T))}n.add(oI)}return n}raycast(e,n){const r=this.geometry,o=this.material,u=this.matrixWorld;o!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),nI.copy(r.boundingSphere),nI.applyMatrix4(u),Xm.copy(e.ray).recast(e.near),!(nI.containsPoint(Xm.origin)===!1&&(Xm.intersectSphere(nI,ule)===null||Xm.origin.distanceToSquared(ule)>(e.far-e.near)**2))&&(lle.copy(u).invert(),Xm.copy(e.ray).applyMatrix4(lle),!(r.boundingBox!==null&&Xm.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Xm)))}_computeIntersections(e,n,r){let o;const u=this.geometry,h=this.material,m=u.index,b=u.attributes.position,S=u.attributes.uv,T=u.attributes.uv1,k=u.attributes.normal,O=u.groups,L=u.drawRange;if(m!==null)if(Array.isArray(h))for(let H=0,G=O.length;H<G;H++){const V=O[H],I=h[V.materialIndex],K=Math.max(V.start,L.start),ue=Math.min(m.count,Math.min(V.start+V.count,L.start+L.count));for(let P=K,ae=ue;P<ae;P+=3){const ge=m.getX(P),me=m.getX(P+1),J=m.getX(P+2);o=lI(this,I,e,r,S,T,k,ge,me,J),o&&(o.faceIndex=Math.floor(P/3),o.face.materialIndex=V.materialIndex,n.push(o))}}else{const H=Math.max(0,L.start),G=Math.min(m.count,L.start+L.count);for(let V=H,I=G;V<I;V+=3){const K=m.getX(V),ue=m.getX(V+1),P=m.getX(V+2);o=lI(this,h,e,r,S,T,k,K,ue,P),o&&(o.faceIndex=Math.floor(V/3),n.push(o))}}else if(b!==void 0)if(Array.isArray(h))for(let H=0,G=O.length;H<G;H++){const V=O[H],I=h[V.materialIndex],K=Math.max(V.start,L.start),ue=Math.min(b.count,Math.min(V.start+V.count,L.start+L.count));for(let P=K,ae=ue;P<ae;P+=3){const ge=P,me=P+1,J=P+2;o=lI(this,I,e,r,S,T,k,ge,me,J),o&&(o.faceIndex=Math.floor(P/3),o.face.materialIndex=V.materialIndex,n.push(o))}}else{const H=Math.max(0,L.start),G=Math.min(b.count,L.start+L.count);for(let V=H,I=G;V<I;V+=3){const K=V,ue=V+1,P=V+2;o=lI(this,h,e,r,S,T,k,K,ue,P),o&&(o.faceIndex=Math.floor(V/3),n.push(o))}}}}function nSe(c,e,n,r,o,u,h,m){let b;if(e.side===os?b=r.intersectTriangle(h,u,o,!0,m):b=r.intersectTriangle(o,u,h,e.side===Rc,m),b===null)return null;sI.copy(m),sI.applyMatrix4(c.matrixWorld);const S=n.ray.origin.distanceTo(sI);return S<n.near||S>n.far?null:{distance:S,point:sI.clone(),object:c}}function lI(c,e,n,r,o,u,h,m,b,S){c.getVertexPosition(m,rI),c.getVertexPosition(b,iI),c.getVertexPosition(S,aI);const T=nSe(c,e,n,r,rI,iI,aI,cle);if(T){const k=new Xe;Eu.getBarycoord(cle,rI,iI,aI,k),o&&(T.uv=Eu.getInterpolatedAttribute(o,m,b,S,k,new gr)),u&&(T.uv1=Eu.getInterpolatedAttribute(u,m,b,S,k,new gr)),h&&(T.normal=Eu.getInterpolatedAttribute(h,m,b,S,k,new Xe),T.normal.dot(r.direction)>0&&T.normal.multiplyScalar(-1));const O={a:m,b,c:S,normal:new Xe,materialIndex:0};Eu.getNormal(rI,iI,aI,O.normal),T.face=O,T.barycoord=k}return T}class Ty extends ol{constructor(e=1,n=1,r=1,o=1,u=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:o,heightSegments:u,depthSegments:h};const m=this;o=Math.floor(o),u=Math.floor(u),h=Math.floor(h);const b=[],S=[],T=[],k=[];let O=0,L=0;H("z","y","x",-1,-1,r,n,e,h,u,0),H("z","y","x",1,-1,r,n,-e,h,u,1),H("x","z","y",1,1,e,r,n,o,h,2),H("x","z","y",1,-1,e,r,-n,o,h,3),H("x","y","z",1,-1,e,n,r,o,u,4),H("x","y","z",-1,-1,e,n,-r,o,u,5),this.setIndex(b),this.setAttribute("position",new Mu(S,3)),this.setAttribute("normal",new Mu(T,3)),this.setAttribute("uv",new Mu(k,2));function H(G,V,I,K,ue,P,ae,ge,me,J,te){const oe=P/me,Y=ae/J,ke=P/2,$e=ae/2,ot=ge/2,Qe=me+1,pe=J+1;let Ve=0,Ue=0;const Pt=new Xe;for(let Me=0;Me<pe;Me++){const Ot=Me*Y-$e;for(let Tn=0;Tn<Qe;Tn++){const yn=Tn*oe-ke;Pt[G]=yn*K,Pt[V]=Ot*ue,Pt[I]=ot,S.push(Pt.x,Pt.y,Pt.z),Pt[G]=0,Pt[V]=0,Pt[I]=ge>0?1:-1,T.push(Pt.x,Pt.y,Pt.z),k.push(Tn/me),k.push(1-Me/J),Ve+=1}}for(let Me=0;Me<J;Me++)for(let Ot=0;Ot<me;Ot++){const Tn=O+Ot+Qe*Me,yn=O+Ot+Qe*(Me+1),qn=O+(Ot+1)+Qe*(Me+1),Dn=O+(Ot+1)+Qe*Me;b.push(Tn,yn,Dn),b.push(yn,qn,Dn),Ue+=6}m.addGroup(L,Ue,te),L+=Ue,O+=Ve}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ty(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function py(c){const e={};for(const n in c){e[n]={};for(const r in c[n]){const o=c[n][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(Wn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=o.clone():Array.isArray(o)?e[n][r]=o.slice():e[n][r]=o}}return e}function Qo(c){const e={};for(let n=0;n<c.length;n++){const r=py(c[n]);for(const o in r)e[o]=r[o]}return e}function rSe(c){const e=[];for(let n=0;n<c.length;n++)e.push(c[n].clone());return e}function vce(c){const e=c.getRenderTarget();return e===null?c.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Or.workingColorSpace}const t3={clone:py,merge:Qo};var iSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,aSe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rl extends kc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=iSe,this.fragmentShader=aSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=py(e.uniforms),this.uniformsGroups=rSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const h=this.uniforms[o].value;h&&h.isTexture?n.uniforms[o]={type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?n.uniforms[o]={type:"c",value:h.getHex()}:h&&h.isVector2?n.uniforms[o]={type:"v2",value:h.toArray()}:h&&h.isVector3?n.uniforms[o]={type:"v3",value:h.toArray()}:h&&h.isVector4?n.uniforms[o]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?n.uniforms[o]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?n.uniforms[o]={type:"m4",value:h.toArray()}:n.uniforms[o]={value:h}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}let _ce=class extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vr,this.projectionMatrix=new vr,this.projectionMatrixInverse=new vr,this.coordinateSystem=Mc,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Bh=new Xe,dle=new gr,fle=new gr;class ko extends _ce{constructor(e=50,n=1,r=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=hy*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hy*2*Math.atan(Math.tan(dw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Bh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Bh.x,Bh.y).multiplyScalar(-e/Bh.z),Bh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Bh.x,Bh.y).multiplyScalar(-e/Bh.z)}getViewSize(e,n){return this.getViewBounds(e,dle,fle),n.subVectors(fle,dle)}setViewOffset(e,n,r,o,u,h){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(dw*.5*this.fov)/this.zoom,r=2*n,o=this.aspect*r,u=-.5*o;const h=this.view;if(this.view!==null&&this.view.enabled){const b=h.fullWidth,S=h.fullHeight;u+=h.offsetX*o/b,n-=h.offsetY*r/S,o*=h.width/b,r*=h.height/S}const m=this.filmOffset;m!==0&&(u+=e*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,n,n-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const z_=-90,j_=1;class oSe extends $i{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new ko(z_,j_,e,n);o.layers=this.layers,this.add(o);const u=new ko(z_,j_,e,n);u.layers=this.layers,this.add(u);const h=new ko(z_,j_,e,n);h.layers=this.layers,this.add(h);const m=new ko(z_,j_,e,n);m.layers=this.layers,this.add(m);const b=new ko(z_,j_,e,n);b.layers=this.layers,this.add(b);const S=new ko(z_,j_,e,n);S.layers=this.layers,this.add(S)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,o,u,h,m,b]=n;for(const S of n)this.remove(S);if(e===Mc)r.up.set(0,1,0),r.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),m.up.set(0,1,0),m.lookAt(0,0,1),b.up.set(0,1,0),b.lookAt(0,0,-1);else if(e===QI)r.up.set(0,-1,0),r.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),m.up.set(0,-1,0),m.lookAt(0,0,1),b.up.set(0,-1,0),b.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const S of n)this.add(S),S.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[u,h,m,b,S,T]=this.children,k=e.getRenderTarget(),O=e.getActiveCubeFace(),L=e.getActiveMipmapLevel(),H=e.xr.enabled;e.xr.enabled=!1;const G=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,o),e.render(n,u),e.setRenderTarget(r,1,o),e.render(n,h),e.setRenderTarget(r,2,o),e.render(n,m),e.setRenderTarget(r,3,o),e.render(n,b),e.setRenderTarget(r,4,o),e.render(n,S),r.texture.generateMipmaps=G,e.setRenderTarget(r,5,o),e.render(n,T),e.setRenderTarget(k,O,L),e.xr.enabled=H,r.texture.needsPMREMUpdate=!0}}class yce extends Ka{constructor(e=[],n=vg,r,o,u,h,m,b,S,T){super(e,n,r,o,u,h,m,b,S,T),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bce extends Ol{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];this.texture=new yce(o),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new Ty(5,5,5),u=new rl({name:"CubemapFromEquirect",uniforms:py(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:os,blending:af});u.uniforms.tEquirect.value=n;const h=new No(o,u),m=n.minFilter;return n.minFilter===tf&&(n.minFilter=fa),new oSe(1,10,this).update(e,h),n.minFilter=m,h.geometry.dispose(),h.material.dispose(),this}clear(e,n=!0,r=!0,o=!0){const u=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(n,r,o);e.setRenderTarget(u)}}class Hh extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sSe={type:"move"};class g4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Hh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Hh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Hh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Xe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let o=null,u=null,h=null;const m=this._targetRay,b=this._grip,S=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(S&&e.hand){h=!0;for(const G of e.hand.values()){const V=n.getJointPose(G,r),I=this._getHandJoint(S,G);V!==null&&(I.matrix.fromArray(V.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,I.jointRadius=V.radius),I.visible=V!==null}const T=S.joints["index-finger-tip"],k=S.joints["thumb-tip"],O=T.position.distanceTo(k.position),L=.02,H=.005;S.inputState.pinching&&O>L+H?(S.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!S.inputState.pinching&&O<=L-H&&(S.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else b!==null&&e.gripSpace&&(u=n.getPose(e.gripSpace,r),u!==null&&(b.matrix.fromArray(u.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,u.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(u.linearVelocity)):b.hasLinearVelocity=!1,u.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(u.angularVelocity)):b.hasAngularVelocity=!1));m!==null&&(o=n.getPose(e.targetRaySpace,r),o===null&&u!==null&&(o=u),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(sSe)))}return m!==null&&(m.visible=o!==null),b!==null&&(b.visible=u!==null),S!==null&&(S.visible=h!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Hh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Oj{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new tr(e),this.density=n}clone(){return new Oj(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class xce extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Nc,this.environmentIntensity=1,this.environmentRotation=new Nc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Sce{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=jz,this.updateRanges=[],this.version=0,this.uuid=Tu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let o=0,u=this.stride;o<u;o++)this.array[e+o]=n.array[r+o];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Tu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Tu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $o=new Xe;class _3{constructor(e,n,r,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)$o.fromBufferAttribute(this,n),$o.applyMatrix4(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)$o.fromBufferAttribute(this,n),$o.applyNormalMatrix(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)$o.fromBufferAttribute(this,n),$o.transformDirection(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=wu(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=oi(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=oi(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=oi(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=oi(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=oi(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=wu(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=wu(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=wu(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=wu(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array),o=oi(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,n,r,o,u){return e=e*this.data.stride+this.offset,this.normalized&&(n=oi(n,this.array),r=oi(r,this.array),o=oi(o,this.array),u=oi(u,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=u,this}clone(e){if(e===void 0){e3("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[o+u])}return new ho(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _3(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){e3("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[o+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const hle=new Xe,ple=new _i,mle=new _i,lSe=new Xe,gle=new vr,uI=new Xe,v4=new Fc,vle=new vr,_4=new Hw;class uSe extends No{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Hse,this.bindMatrix=new vr,this.bindMatrixInverse=new vr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ff),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,uI),this.boundingBox.expandByPoint(uI)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fc),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,uI),this.boundingSphere.expandByPoint(uI)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,o=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),v4.copy(this.boundingSphere),v4.applyMatrix4(o),e.ray.intersectsSphere(v4)!==!1&&(vle.copy(o).invert(),_4.copy(e.ray).applyMatrix4(vle),!(this.boundingBox!==null&&_4.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,_4)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _i,n=this.geometry.attributes.skinWeight;for(let r=0,o=n.count;r<o;r++){e.fromBufferAttribute(n,r);const u=1/e.manhattanLength();u!==1/0?e.multiplyScalar(u):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Hse?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===c1e?this.bindMatrixInverse.copy(this.bindMatrix).invert():Wn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,o=this.geometry;ple.fromBufferAttribute(o.attributes.skinIndex,e),mle.fromBufferAttribute(o.attributes.skinWeight,e),hle.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let u=0;u<4;u++){const h=mle.getComponent(u);if(h!==0){const m=ple.getComponent(u);gle.multiplyMatrices(r.bones[m].matrixWorld,r.boneInverses[m]),n.addScaledVector(lSe.copy(hle).applyMatrix4(gle),h)}}return n.applyMatrix4(this.bindMatrixInverse)}}class wce extends $i{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Nj extends Ka{constructor(e=null,n=1,r=1,o,u,h,m,b,S=Da,T=Da,k,O){super(null,h,m,b,S,T,o,u,k,O),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _le=new vr,cSe=new vr;class Lj{constructor(e=[],n=[]){this.uuid=Tu(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){Wn("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new vr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new vr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let u=0,h=e.length;u<h;u++){const m=e[u]?e[u].matrixWorld:cSe;_le.multiplyMatrices(m,n[u]),_le.toArray(r,u*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new Lj(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Nj(n,e,e,Qs,Il);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const o=this.bones[n];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const u=e.bones[r];let h=n[u];h===void 0&&(Wn("Skeleton: No bone found with UUID:",u),h=new wce),this.bones.push(h),this.boneInverses.push(new vr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let o=0,u=n.length;o<u;o++){const h=n[o];e.bones.push(h.uuid);const m=r[o];e.boneInverses.push(m.toArray())}return e}}class Vz extends ho{constructor(e,n,r,o=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const V_=new vr,yle=new vr,cI=[],ble=new ff,dSe=new vr,GS=new No,WS=new Fc;class fSe extends No{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Vz(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<r;o++)this.setMatrixAt(o,dSe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ff),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,V_),ble.copy(e.boundingBox).applyMatrix4(V_),this.boundingBox.union(ble)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,V_),WS.copy(e.boundingSphere).applyMatrix4(V_),this.boundingSphere.union(WS)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,o=this.morphTexture.source.data.data,u=r.length+1,h=e*u+1;for(let m=0;m<r.length;m++)r[m]=o[h+m]}raycast(e,n){const r=this.matrixWorld,o=this.count;if(GS.geometry=this.geometry,GS.material=this.material,GS.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),WS.copy(this.boundingSphere),WS.applyMatrix4(r),e.ray.intersectsSphere(WS)!==!1))for(let u=0;u<o;u++){this.getMatrixAt(u,V_),yle.multiplyMatrices(r,V_),GS.matrixWorld=yle,GS.raycast(e,cI);for(let h=0,m=cI.length;h<m;h++){const b=cI[h];b.instanceId=u,b.object=this,n.push(b)}cI.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Vz(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,o=r.length+1;this.morphTexture===null&&(this.morphTexture=new Nj(new Float32Array(o*this.count),o,this.count,Mj,Il));const u=this.morphTexture.source.data.data;let h=0;for(let S=0;S<r.length;S++)h+=r[S];const m=this.geometry.morphTargetsRelative?1:1-h,b=o*e;u[b]=m,u.set(r,b+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const y4=new Xe,hSe=new Xe,pSe=new br;class Jd{constructor(e=new Xe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,o){return this.normal.set(e,n,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const o=y4.subVectors(r,n).cross(hSe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(y4),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:n.copy(e.start).addScaledVector(r,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||pSe.getNormalMatrix(e),o=this.coplanarPoint(y4).applyMatrix4(e),u=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Km=new Fc,mSe=new gr(.5,.5),dI=new Xe;class Fj{constructor(e=new Jd,n=new Jd,r=new Jd,o=new Jd,u=new Jd,h=new Jd){this.planes=[e,n,r,o,u,h]}set(e,n,r,o,u,h){const m=this.planes;return m[0].copy(e),m[1].copy(n),m[2].copy(r),m[3].copy(o),m[4].copy(u),m[5].copy(h),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Mc,r=!1){const o=this.planes,u=e.elements,h=u[0],m=u[1],b=u[2],S=u[3],T=u[4],k=u[5],O=u[6],L=u[7],H=u[8],G=u[9],V=u[10],I=u[11],K=u[12],ue=u[13],P=u[14],ae=u[15];if(o[0].setComponents(S-h,L-T,I-H,ae-K).normalize(),o[1].setComponents(S+h,L+T,I+H,ae+K).normalize(),o[2].setComponents(S+m,L+k,I+G,ae+ue).normalize(),o[3].setComponents(S-m,L-k,I-G,ae-ue).normalize(),r)o[4].setComponents(b,O,V,P).normalize(),o[5].setComponents(S-b,L-O,I-V,ae-P).normalize();else if(o[4].setComponents(S-b,L-O,I-V,ae-P).normalize(),n===Mc)o[5].setComponents(S+b,L+O,I+V,ae+P).normalize();else if(n===QI)o[5].setComponents(b,O,V,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Km.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Km.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Km)}intersectsSprite(e){Km.center.set(0,0,0);const n=mSe.distanceTo(e.center);return Km.radius=.7071067811865476+n,Km.applyMatrix4(e.matrixWorld),this.intersectsSphere(Km)}intersectsSphere(e){const n=this.planes,r=e.center,o=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const o=n[r];if(dI.x=o.normal.x>0?e.max.x:e.min.x,dI.y=o.normal.y>0?e.max.y:e.min.y,dI.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(dI)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Ece extends kc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const n3=new Xe,r3=new Xe,xle=new vr,qS=new Hw,fI=new Fc,b4=new Xe,Sle=new Xe;class Uj extends $i{constructor(e=new ol,n=new Ece){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let o=1,u=n.count;o<u;o++)n3.fromBufferAttribute(n,o-1),r3.fromBufferAttribute(n,o),r[o]=r[o-1],r[o]+=n3.distanceTo(r3);e.setAttribute("lineDistance",new Mu(r,1))}else Wn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,o=this.matrixWorld,u=e.params.Line.threshold,h=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),fI.copy(r.boundingSphere),fI.applyMatrix4(o),fI.radius+=u,e.ray.intersectsSphere(fI)===!1)return;xle.copy(o).invert(),qS.copy(e.ray).applyMatrix4(xle);const m=u/((this.scale.x+this.scale.y+this.scale.z)/3),b=m*m,S=this.isLineSegments?2:1,T=r.index,O=r.attributes.position;if(T!==null){const L=Math.max(0,h.start),H=Math.min(T.count,h.start+h.count);for(let G=L,V=H-1;G<V;G+=S){const I=T.getX(G),K=T.getX(G+1),ue=hI(this,e,qS,b,I,K,G);ue&&n.push(ue)}if(this.isLineLoop){const G=T.getX(H-1),V=T.getX(L),I=hI(this,e,qS,b,G,V,H-1);I&&n.push(I)}}else{const L=Math.max(0,h.start),H=Math.min(O.count,h.start+h.count);for(let G=L,V=H-1;G<V;G+=S){const I=hI(this,e,qS,b,G,G+1,G);I&&n.push(I)}if(this.isLineLoop){const G=hI(this,e,qS,b,H-1,L,H-1);G&&n.push(G)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,h=o.length;u<h;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}}function hI(c,e,n,r,o,u,h){const m=c.geometry.attributes.position;if(n3.fromBufferAttribute(m,o),r3.fromBufferAttribute(m,u),n.distanceSqToSegment(n3,r3,b4,Sle)>r)return;b4.applyMatrix4(c.matrixWorld);const S=e.ray.origin.distanceTo(b4);if(!(S<e.near||S>e.far))return{distance:S,point:Sle.clone().applyMatrix4(c.matrixWorld),index:h,face:null,faceIndex:null,barycoord:null,object:c}}const wle=new Xe,Ele=new Xe;class gSe extends Uj{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let o=0,u=n.count;o<u;o+=2)wle.fromBufferAttribute(n,o),Ele.fromBufferAttribute(n,o+1),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+wle.distanceTo(Ele);e.setAttribute("lineDistance",new Mu(r,1))}else Wn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vSe extends Uj{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Tce extends kc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new tr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Tle=new vr,Hz=new Hw,pI=new Fc,mI=new Xe;class _Se extends $i{constructor(e=new ol,n=new Tce){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,o=this.matrixWorld,u=e.params.Points.threshold,h=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),pI.copy(r.boundingSphere),pI.applyMatrix4(o),pI.radius+=u,e.ray.intersectsSphere(pI)===!1)return;Tle.copy(o).invert(),Hz.copy(e.ray).applyMatrix4(Tle);const m=u/((this.scale.x+this.scale.y+this.scale.z)/3),b=m*m,S=r.index,k=r.attributes.position;if(S!==null){const O=Math.max(0,h.start),L=Math.min(S.count,h.start+h.count);for(let H=O,G=L;H<G;H++){const V=S.getX(H);mI.fromBufferAttribute(k,V),Mle(mI,V,b,o,e,n,this)}}else{const O=Math.max(0,h.start),L=Math.min(k.count,h.start+h.count);for(let H=O,G=L;H<G;H++)mI.fromBufferAttribute(k,H),Mle(mI,H,b,o,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,h=o.length;u<h;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}}function Mle(c,e,n,r,o,u,h){const m=Hz.distanceSqToPoint(c);if(m<n){const b=new Xe;Hz.closestPointToPoint(c,b),b.applyMatrix4(r);const S=o.ray.origin.distanceTo(b);if(S<o.near||S>o.far)return;u.push({distance:S,distanceToRay:Math.sqrt(m),point:b,index:e,face:null,faceIndex:null,barycoord:null,object:h})}}class Dw extends Ka{constructor(e,n,r=Dc,o,u,h,m=Da,b=Da,S,T=uf,k=1){if(T!==uf&&T!==ag)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const O={width:e,height:n,depth:k};super(O,o,u,h,m,b,T,r,S),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Dj(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class ySe extends Dw{constructor(e,n=Dc,r=vg,o,u,h=Da,m=Da,b,S=uf){const T={width:e,height:e,depth:1},k=[T,T,T,T,T,T];super(e,e,n,r,o,u,h,m,b,S),this.image=k,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class Mce extends Ka{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class My extends ol{constructor(e=1,n=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:o};const u=e/2,h=n/2,m=Math.floor(r),b=Math.floor(o),S=m+1,T=b+1,k=e/m,O=n/b,L=[],H=[],G=[],V=[];for(let I=0;I<T;I++){const K=I*O-h;for(let ue=0;ue<S;ue++){const P=ue*k-u;H.push(P,-K,0),G.push(0,0,1),V.push(ue/m),V.push(1-I/b)}}for(let I=0;I<b;I++)for(let K=0;K<m;K++){const ue=K+S*I,P=K+S*(I+1),ae=K+1+S*(I+1),ge=K+1+S*I;L.push(ue,P,ge),L.push(P,ae,ge)}this.setIndex(L),this.setAttribute("position",new Mu(H,3)),this.setAttribute("normal",new Mu(G,3)),this.setAttribute("uv",new Mu(V,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new My(e.width,e.height,e.widthSegments,e.heightSegments)}}class bSe extends rl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Bj extends kc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new tr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cce,this.normalScale=new gr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Nc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Uc extends Bj{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Tr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new tr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new tr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xSe extends kc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=h1e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class SSe extends kc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function gI(c,e){return!c||c.constructor===e?c:typeof e.BYTES_PER_ELEMENT=="number"?new e(c):Array.prototype.slice.call(c)}function wSe(c){function e(o,u){return c[o]-c[u]}const n=c.length,r=new Array(n);for(let o=0;o!==n;++o)r[o]=o;return r.sort(e),r}function Ple(c,e,n){const r=c.length,o=new c.constructor(r);for(let u=0,h=0;h!==r;++u){const m=n[u]*e;for(let b=0;b!==e;++b)o[h++]=c[m+b]}return o}function Pce(c,e,n,r){let o=1,u=c[0];for(;u!==void 0&&u[r]===void 0;)u=c[o++];if(u===void 0)return;let h=u[r];if(h!==void 0)if(Array.isArray(h))do h=u[r],h!==void 0&&(e.push(u.time),n.push(...h)),u=c[o++];while(u!==void 0);else if(h.toArray!==void 0)do h=u[r],h!==void 0&&(e.push(u.time),h.toArray(n,n.length)),u=c[o++];while(u!==void 0);else do h=u[r],h!==void 0&&(e.push(u.time),n.push(h)),u=c[o++];while(u!==void 0)}class Gw{constructor(e,n,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,o=n[r],u=n[r-1];e:{t:{let h;n:{r:if(!(e<o)){for(let m=r+2;;){if(o===void 0){if(e<u)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===m)break;if(u=o,o=n[++r],e<o)break t}h=n.length;break n}if(!(e>=u)){const m=n[1];e<m&&(r=2,u=m);for(let b=r-2;;){if(u===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===b)break;if(o=u,u=n[--r-1],e>=u)break t}h=r,r=0;break n}break e}for(;r<h;){const m=r+h>>>1;e<n[m]?h=m:r=m+1}if(o=n[r],u=n[r-1],u===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,u,o)}return this.interpolate_(r,u,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,o=this.valueSize,u=e*o;for(let h=0;h!==o;++h)n[h]=r[u+h];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ESe extends Gw{constructor(e,n,r,o){super(e,n,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gse,endingEnd:Gse}}intervalChanged_(e,n,r){const o=this.parameterPositions;let u=e-2,h=e+1,m=o[u],b=o[h];if(m===void 0)switch(this.getSettings_().endingStart){case Wse:u=e,m=2*n-r;break;case qse:u=o.length-2,m=n+o[u]-o[u+1];break;default:u=e,m=r}if(b===void 0)switch(this.getSettings_().endingEnd){case Wse:h=e,b=2*r-n;break;case qse:h=1,b=r+o[1]-o[0];break;default:h=e-1,b=n}const S=(r-n)*.5,T=this.valueSize;this._weightPrev=S/(n-m),this._weightNext=S/(b-r),this._offsetPrev=u*T,this._offsetNext=h*T}interpolate_(e,n,r,o){const u=this.resultBuffer,h=this.sampleValues,m=this.valueSize,b=e*m,S=b-m,T=this._offsetPrev,k=this._offsetNext,O=this._weightPrev,L=this._weightNext,H=(r-n)/(o-n),G=H*H,V=G*H,I=-O*V+2*O*G-O*H,K=(1+O)*V+(-1.5-2*O)*G+(-.5+O)*H+1,ue=(-1-L)*V+(1.5+L)*G+.5*H,P=L*V-L*G;for(let ae=0;ae!==m;++ae)u[ae]=I*h[T+ae]+K*h[S+ae]+ue*h[b+ae]+P*h[k+ae];return u}}class TSe extends Gw{constructor(e,n,r,o){super(e,n,r,o)}interpolate_(e,n,r,o){const u=this.resultBuffer,h=this.sampleValues,m=this.valueSize,b=e*m,S=b-m,T=(r-n)/(o-n),k=1-T;for(let O=0;O!==m;++O)u[O]=h[S+O]*k+h[b+O]*T;return u}}class MSe extends Gw{constructor(e,n,r,o){super(e,n,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class Pu{constructor(e,n,r,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gI(n,this.TimeBufferType),this.values=gI(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:gI(e.times,Array),values:gI(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new MSe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new TSe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ESe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Aw:n=this.InterpolantFactoryMethodDiscrete;break;case kw:n=this.InterpolantFactoryMethodLinear;break;case YB:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return Wn("KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Aw;case this.InterpolantFactoryMethodLinear:return kw;case this.InterpolantFactoryMethodSmooth:return YB}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,o=n.length;r!==o;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,o=n.length;r!==o;++r)n[r]*=e}return this}trim(e,n){const r=this.times,o=r.length;let u=0,h=o-1;for(;u!==o&&r[u]<e;)++u;for(;h!==-1&&r[h]>n;)--h;if(++h,u!==0||h!==o){u>=h&&(h=Math.max(h,1),u=h-1);const m=this.getValueSize();this.times=r.slice(u,h),this.values=this.values.slice(u*m,h*m)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(ar("KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,u=r.length;u===0&&(ar("KeyframeTrack: Track is empty.",this),e=!1);let h=null;for(let m=0;m!==u;m++){const b=r[m];if(typeof b=="number"&&isNaN(b)){ar("KeyframeTrack: Time is not a valid number.",this,m,b),e=!1;break}if(h!==null&&h>b){ar("KeyframeTrack: Out of order keys.",this,m,b,h),e=!1;break}h=b}if(o!==void 0&&x1e(o))for(let m=0,b=o.length;m!==b;++m){const S=o[m];if(isNaN(S)){ar("KeyframeTrack: Value is not a valid number.",this,m,S),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),o=this.getInterpolation()===YB,u=e.length-1;let h=1;for(let m=1;m<u;++m){let b=!1;const S=e[m],T=e[m+1];if(S!==T&&(m!==1||S!==e[0]))if(o)b=!0;else{const k=m*r,O=k-r,L=k+r;for(let H=0;H!==r;++H){const G=n[k+H];if(G!==n[O+H]||G!==n[L+H]){b=!0;break}}}if(b){if(m!==h){e[h]=e[m];const k=m*r,O=h*r;for(let L=0;L!==r;++L)n[O+L]=n[k+L]}++h}}if(u>0){e[h]=e[u];for(let m=u*r,b=h*r,S=0;S!==r;++S)n[b+S]=n[m+S];++h}return h!==e.length?(this.times=e.slice(0,h),this.values=n.slice(0,h*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,o=new r(this.name,e,n);return o.createInterpolant=this.createInterpolant,o}}Pu.prototype.ValueTypeName="";Pu.prototype.TimeBufferType=Float32Array;Pu.prototype.ValueBufferType=Float32Array;Pu.prototype.DefaultInterpolation=kw;class Py extends Pu{constructor(e,n,r){super(e,n,r)}}Py.prototype.ValueTypeName="bool";Py.prototype.ValueBufferType=Array;Py.prototype.DefaultInterpolation=Aw;Py.prototype.InterpolantFactoryMethodLinear=void 0;Py.prototype.InterpolantFactoryMethodSmooth=void 0;class Cce extends Pu{constructor(e,n,r,o){super(e,n,r,o)}}Cce.prototype.ValueTypeName="color";class my extends Pu{constructor(e,n,r,o){super(e,n,r,o)}}my.prototype.ValueTypeName="number";class PSe extends Gw{constructor(e,n,r,o){super(e,n,r,o)}interpolate_(e,n,r,o){const u=this.resultBuffer,h=this.sampleValues,m=this.valueSize,b=(r-n)/(o-n);let S=e*m;for(let T=S+m;S!==T;S+=4)Oc.slerpFlat(u,0,h,S-m,h,S,b);return u}}class gy extends Pu{constructor(e,n,r,o){super(e,n,r,o)}InterpolantFactoryMethodLinear(e){return new PSe(this.times,this.values,this.getValueSize(),e)}}gy.prototype.ValueTypeName="quaternion";gy.prototype.InterpolantFactoryMethodSmooth=void 0;class Cy extends Pu{constructor(e,n,r){super(e,n,r)}}Cy.prototype.ValueTypeName="string";Cy.prototype.ValueBufferType=Array;Cy.prototype.DefaultInterpolation=Aw;Cy.prototype.InterpolantFactoryMethodLinear=void 0;Cy.prototype.InterpolantFactoryMethodSmooth=void 0;class vy extends Pu{constructor(e,n,r,o){super(e,n,r,o)}}vy.prototype.ValueTypeName="vector";class CSe{constructor(e="",n=-1,r=[],o=d1e){this.name=e,this.tracks=r,this.duration=n,this.blendMode=o,this.uuid=Tu(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,o=1/(e.fps||1);for(let h=0,m=r.length;h!==m;++h)n.push(kSe(r[h]).scale(o));const u=new this(e.name,e.duration,n,e.blendMode);return u.uuid=e.uuid,u.userData=JSON.parse(e.userData||"{}"),u}static toJSON(e){const n=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let u=0,h=r.length;u!==h;++u)n.push(Pu.toJSON(r[u]));return o}static CreateFromMorphTargetSequence(e,n,r,o){const u=n.length,h=[];for(let m=0;m<u;m++){let b=[],S=[];b.push((m+u-1)%u,m,(m+1)%u),S.push(0,1,0);const T=wSe(b);b=Ple(b,1,T),S=Ple(S,1,T),!o&&b[0]===0&&(b.push(u),S.push(S[0])),h.push(new my(".morphTargetInfluences["+n[m].name+"]",b,S).scale(1/r))}return new this(e,-1,h)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===n)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const o={},u=/^([\w-]*?)([\d]+)$/;for(let m=0,b=e.length;m<b;m++){const S=e[m],T=S.name.match(u);if(T&&T.length>1){const k=T[1];let O=o[k];O||(o[k]=O=[]),O.push(S)}}const h=[];for(const m in o)h.push(this.CreateFromMorphTargetSequence(m,o[m],n,r));return h}static parseAnimation(e,n){if(Wn("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return ar("AnimationClip: No animation in JSONLoader data."),null;const r=function(k,O,L,H,G){if(L.length!==0){const V=[],I=[];Pce(L,V,I,H),V.length!==0&&G.push(new k(O,V,I))}},o=[],u=e.name||"default",h=e.fps||30,m=e.blendMode;let b=e.length||-1;const S=e.hierarchy||[];for(let k=0;k<S.length;k++){const O=S[k].keys;if(!(!O||O.length===0))if(O[0].morphTargets){const L={};let H;for(H=0;H<O.length;H++)if(O[H].morphTargets)for(let G=0;G<O[H].morphTargets.length;G++)L[O[H].morphTargets[G]]=-1;for(const G in L){const V=[],I=[];for(let K=0;K!==O[H].morphTargets.length;++K){const ue=O[H];V.push(ue.time),I.push(ue.morphTarget===G?1:0)}o.push(new my(".morphTargetInfluence["+G+"]",V,I))}b=L.length*h}else{const L=".bones["+n[k].name+"]";r(vy,L+".position",O,"pos",o),r(gy,L+".quaternion",O,"rot",o),r(vy,L+".scale",O,"scl",o)}}return o.length===0?null:new this(u,b,o,m)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,o=e.length;r!==o;++r){const u=this.tracks[r];n=Math.max(n,u.times[u.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function ASe(c){switch(c.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return my;case"vector":case"vector2":case"vector3":case"vector4":return vy;case"color":return Cce;case"quaternion":return gy;case"bool":case"boolean":return Py;case"string":return Cy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+c)}function kSe(c){if(c.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ASe(c.type);if(c.times===void 0){const n=[],r=[];Pce(c.keys,n,r,"value"),c.times=n,c.values=r}return e.parse!==void 0?e.parse(c):new e(c.name,c.times,c.values,c.interpolation)}const nf={enabled:!1,files:{},add:function(c,e){this.enabled!==!1&&(this.files[c]=e)},get:function(c){if(this.enabled!==!1)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};class ISe{constructor(e,n,r){const o=this;let u=!1,h=0,m=0,b;const S=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this._abortController=null,this.itemStart=function(T){m++,u===!1&&o.onStart!==void 0&&o.onStart(T,h,m),u=!0},this.itemEnd=function(T){h++,o.onProgress!==void 0&&o.onProgress(T,h,m),h===m&&(u=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(T){o.onError!==void 0&&o.onError(T)},this.resolveURL=function(T){return b?b(T):T},this.setURLModifier=function(T){return b=T,this},this.addHandler=function(T,k){return S.push(T,k),this},this.removeHandler=function(T){const k=S.indexOf(T);return k!==-1&&S.splice(k,2),this},this.getHandler=function(T){for(let k=0,O=S.length;k<O;k+=2){const L=S[k],H=S[k+1];if(L.global&&(L.lastIndex=0),L.test(T))return H}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const RSe=new ISe;class Sg{constructor(e){this.manager=e!==void 0?e:RSe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(o,u){r.load(e,o,n,u)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Sg.DEFAULT_MATERIAL_NAME="__DEFAULT";const $d={};class DSe extends Error{constructor(e,n){super(e),this.response=n}}class i3 extends Sg{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=nf.get(`file:${e}`);if(u!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(u),this.manager.itemEnd(e)},0),u;if($d[e]!==void 0){$d[e].push({onLoad:n,onProgress:r,onError:o});return}$d[e]=[],$d[e].push({onLoad:n,onProgress:r,onError:o});const h=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),m=this.mimeType,b=this.responseType;fetch(h).then(S=>{if(S.status===200||S.status===0){if(S.status===0&&Wn("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||S.body===void 0||S.body.getReader===void 0)return S;const T=$d[e],k=S.body.getReader(),O=S.headers.get("X-File-Size")||S.headers.get("Content-Length"),L=O?parseInt(O):0,H=L!==0;let G=0;const V=new ReadableStream({start(I){K();function K(){k.read().then(({done:ue,value:P})=>{if(ue)I.close();else{G+=P.byteLength;const ae=new ProgressEvent("progress",{lengthComputable:H,loaded:G,total:L});for(let ge=0,me=T.length;ge<me;ge++){const J=T[ge];J.onProgress&&J.onProgress(ae)}I.enqueue(P),K()}},ue=>{I.error(ue)})}}});return new Response(V)}else throw new DSe(`fetch for "${S.url}" responded with ${S.status}: ${S.statusText}`,S)}).then(S=>{switch(b){case"arraybuffer":return S.arrayBuffer();case"blob":return S.blob();case"document":return S.text().then(T=>new DOMParser().parseFromString(T,m));case"json":return S.json();default:if(m==="")return S.text();{const k=/charset="?([^;"\s]*)"?/i.exec(m),O=k&&k[1]?k[1].toLowerCase():void 0,L=new TextDecoder(O);return S.arrayBuffer().then(H=>L.decode(H))}}}).then(S=>{nf.add(`file:${e}`,S);const T=$d[e];delete $d[e];for(let k=0,O=T.length;k<O;k++){const L=T[k];L.onLoad&&L.onLoad(S)}}).catch(S=>{const T=$d[e];if(T===void 0)throw this.manager.itemError(e),S;delete $d[e];for(let k=0,O=T.length;k<O;k++){const L=T[k];L.onError&&L.onError(S)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const H_=new WeakMap;class OSe extends Sg{constructor(e){super(e)}load(e,n,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=this,h=nf.get(`image:${e}`);if(h!==void 0){if(h.complete===!0)u.manager.itemStart(e),setTimeout(function(){n&&n(h),u.manager.itemEnd(e)},0);else{let k=H_.get(h);k===void 0&&(k=[],H_.set(h,k)),k.push({onLoad:n,onError:o})}return h}const m=Iw("img");function b(){T(),n&&n(this);const k=H_.get(this)||[];for(let O=0;O<k.length;O++){const L=k[O];L.onLoad&&L.onLoad(this)}H_.delete(this),u.manager.itemEnd(e)}function S(k){T(),o&&o(k),nf.remove(`image:${e}`);const O=H_.get(this)||[];for(let L=0;L<O.length;L++){const H=O[L];H.onError&&H.onError(k)}H_.delete(this),u.manager.itemError(e),u.manager.itemEnd(e)}function T(){m.removeEventListener("load",b,!1),m.removeEventListener("error",S,!1)}return m.addEventListener("load",b,!1),m.addEventListener("error",S,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(m.crossOrigin=this.crossOrigin),nf.add(`image:${e}`,m),u.manager.itemStart(e),m.src=e,m}}class a3 extends Sg{constructor(e){super(e)}load(e,n,r,o){const u=new Ka,h=new OSe(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(e,function(m){u.image=m,u.needsUpdate=!0,n!==void 0&&n(u)},r,o),u}}let y3=class extends $i{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new tr(e),this.intensity=n}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,n}};const x4=new vr,Cle=new Xe,Ale=new Xe;class zj{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gr(512,512),this.mapType=$s,this.map=null,this.mapPass=null,this.matrix=new vr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fj,this._frameExtents=new gr(1,1),this._viewportCount=1,this._viewports=[new _i(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Cle.setFromMatrixPosition(e.matrixWorld),n.position.copy(Cle),Ale.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Ale),n.updateMatrixWorld(),x4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(x4,n.coordinateSystem,n.reversedDepth),n.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(x4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NSe extends zj{constructor(){super(new ko(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,r=hy*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height*this.aspect,u=e.distance||n.far;(r!==n.fov||o!==n.aspect||u!==n.far)&&(n.fov=r,n.aspect=o,n.far=u,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LSe extends y3{constructor(e,n,r=0,o=Math.PI/3,u=0,h=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.distance=r,this.angle=o,this.penumbra=u,this.decay=h,this.map=null,this.shadow=new NSe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.angle=this.angle,n.object.decay=this.decay,n.object.penumbra=this.penumbra,n.object.target=this.target.uuid,this.map&&this.map.isTexture&&(n.object.map=this.map.toJSON(e).uuid),n.object.shadow=this.shadow.toJSON(),n}}class FSe extends zj{constructor(){super(new ko(90,1,.5,500)),this.isPointLightShadow=!0}}class USe extends y3{constructor(e,n,r=0,o=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new FSe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.decay=this.decay,n.object.shadow=this.shadow.toJSON(),n}}class Ww extends _ce{constructor(e=-1,n=1,r=1,o=-1,u=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=o,this.near=u,this.far=h,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,o,u,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let u=r-e,h=r+e,m=o+n,b=o-n;if(this.view!==null&&this.view.enabled){const S=(this.right-this.left)/this.view.fullWidth/this.zoom,T=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=S*this.view.offsetX,h=u+S*this.view.width,m-=T*this.view.offsetY,b=m-T*this.view.height}this.projectionMatrix.makeOrthographic(u,h,m,b,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class BSe extends zj{constructor(){super(new Ww(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Gz extends y3{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.shadow=new BSe}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.shadow=this.shadow.toJSON(),n.object.target=this.target.uuid,n}}class zSe extends y3{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class hw{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}const S4=new WeakMap;class jSe extends Sg{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Wn("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Wn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=this,h=nf.get(`image-bitmap:${e}`);if(h!==void 0){if(u.manager.itemStart(e),h.then){h.then(S=>{if(S4.has(h)===!0)o&&o(S4.get(h)),u.manager.itemError(e),u.manager.itemEnd(e);else return n&&n(S),u.manager.itemEnd(e),S});return}return setTimeout(function(){n&&n(h),u.manager.itemEnd(e)},0),h}const m={};m.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",m.headers=this.requestHeader,m.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const b=fetch(e,m).then(function(S){return S.blob()}).then(function(S){return createImageBitmap(S,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(S){return nf.add(`image-bitmap:${e}`,S),n&&n(S),u.manager.itemEnd(e),S}).catch(function(S){o&&o(S),S4.set(b,S),nf.remove(`image-bitmap:${e}`),u.manager.itemError(e),u.manager.itemEnd(e)});nf.add(`image-bitmap:${e}`,b),u.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class VSe extends ko{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const jj="\\[\\]\\.:\\/",HSe=new RegExp("["+jj+"]","g"),Vj="[^"+jj+"]",GSe="[^"+jj.replace("\\.","")+"]",WSe=/((?:WC+[\/:])*)/.source.replace("WC",Vj),qSe=/(WCOD+)?/.source.replace("WCOD",GSe),XSe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Vj),KSe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Vj),YSe=new RegExp("^"+WSe+qSe+XSe+KSe+"$"),$Se=["material","materials","bones","map"];class ZSe{constructor(e,n,r){const o=r||si.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,o)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,o=this._bindings[r];o!==void 0&&o.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,u=r.length;o!==u;++o)r[o].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class si{constructor(e,n,r){this.path=n,this.parsedPath=r||si.parseTrackName(n),this.node=si.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new si.Composite(e,n,r):new si(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(HSe,"")}static parseTrackName(e){const n=YSe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const u=r.nodeName.substring(o+1);$Se.indexOf(u)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=u)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(u){for(let h=0;h<u.length;h++){const m=u[h];if(m.name===n||m.uuid===n)return m;const b=r(m.children);if(b)return b}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let o=0,u=r.length;o!==u;++o)e[n++]=r[o]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let o=0,u=r.length;o!==u;++o)r[o]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let o=0,u=r.length;o!==u;++o)r[o]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let o=0,u=r.length;o!==u;++o)r[o]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,o=n.propertyName;let u=n.propertyIndex;if(e||(e=si.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Wn("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let S=n.objectIndex;switch(r){case"materials":if(!e.material){ar("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){ar("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){ar("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let T=0;T<e.length;T++)if(e[T].name===S){S=T;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){ar("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){ar("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){ar("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(S!==void 0){if(e[S]===void 0){ar("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[S]}}const h=e[o];if(h===void 0){const S=n.nodeName;ar("PropertyBinding: Trying to update property for track: "+S+"."+o+" but it wasn't found.",e);return}let m=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?m=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(m=this.Versioning.MatrixWorldNeedsUpdate);let b=this.BindingType.Direct;if(u!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){ar("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){ar("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[u]!==void 0&&(u=e.morphTargetDictionary[u])}b=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=u}else h.fromArray!==void 0&&h.toArray!==void 0?(b=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(b=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=o;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}si.Composite=ZSe;si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};si.prototype.GetterByBindingType=[si.prototype._getValue_direct,si.prototype._getValue_array,si.prototype._getValue_arrayElement,si.prototype._getValue_toArray];si.prototype.SetterByBindingTypeAndVersioning=[[si.prototype._setValue_direct,si.prototype._setValue_direct_setNeedsUpdate,si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[si.prototype._setValue_array,si.prototype._setValue_array_setNeedsUpdate,si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[si.prototype._setValue_arrayElement,si.prototype._setValue_arrayElement_setNeedsUpdate,si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[si.prototype._setValue_fromArray,si.prototype._setValue_fromArray_setNeedsUpdate,si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kle{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Tr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Tr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class JSe extends xg{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Wn("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Ile(c,e,n,r){const o=QSe(r);switch(n){case sce:return c*e;case Mj:return c*e/o.components*o.byteLength;case Pj:return c*e/o.components*o.byteLength;case fy:return c*e*2/o.components*o.byteLength;case Cj:return c*e*2/o.components*o.byteLength;case lce:return c*e*3/o.components*o.byteLength;case Qs:return c*e*4/o.components*o.byteLength;case Aj:return c*e*4/o.components*o.byteLength;case FI:case UI:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case BI:case zI:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case uz:case dz:return Math.max(c,16)*Math.max(e,8)/4;case lz:case cz:return Math.max(c,8)*Math.max(e,8)/2;case fz:case hz:case mz:case gz:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case pz:case vz:case _z:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case yz:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case bz:return Math.floor((c+4)/5)*Math.floor((e+3)/4)*16;case xz:return Math.floor((c+4)/5)*Math.floor((e+4)/5)*16;case Sz:return Math.floor((c+5)/6)*Math.floor((e+4)/5)*16;case wz:return Math.floor((c+5)/6)*Math.floor((e+5)/6)*16;case Ez:return Math.floor((c+7)/8)*Math.floor((e+4)/5)*16;case Tz:return Math.floor((c+7)/8)*Math.floor((e+5)/6)*16;case Mz:return Math.floor((c+7)/8)*Math.floor((e+7)/8)*16;case Pz:return Math.floor((c+9)/10)*Math.floor((e+4)/5)*16;case Cz:return Math.floor((c+9)/10)*Math.floor((e+5)/6)*16;case Az:return Math.floor((c+9)/10)*Math.floor((e+7)/8)*16;case kz:return Math.floor((c+9)/10)*Math.floor((e+9)/10)*16;case Iz:return Math.floor((c+11)/12)*Math.floor((e+9)/10)*16;case Rz:return Math.floor((c+11)/12)*Math.floor((e+11)/12)*16;case Dz:case Oz:case Nz:return Math.ceil(c/4)*Math.ceil(e/4)*16;case Lz:case Fz:return Math.ceil(c/4)*Math.ceil(e/4)*8;case Uz:case Bz:return Math.ceil(c/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function QSe(c){switch(c){case $s:case rce:return{byteLength:1,components:1};case Pw:case ice:case lf:return{byteLength:2,components:1};case Ej:case Tj:return{byteLength:2,components:4};case Dc:case wj:case Il:return{byteLength:4,components:1};case ace:case oce:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${c}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xj}}));typeof window<"u"&&(window.__THREE__?Wn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xj);function Ace(){let c=null,e=!1,n=null,r=null;function o(u,h){n(u,h),r=c.requestAnimationFrame(o)}return{start:function(){e!==!0&&n!==null&&(r=c.requestAnimationFrame(o),e=!0)},stop:function(){c.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){c=u}}}function ewe(c){const e=new WeakMap;function n(m,b){const S=m.array,T=m.usage,k=S.byteLength,O=c.createBuffer();c.bindBuffer(b,O),c.bufferData(b,S,T),m.onUploadCallback();let L;if(S instanceof Float32Array)L=c.FLOAT;else if(typeof Float16Array<"u"&&S instanceof Float16Array)L=c.HALF_FLOAT;else if(S instanceof Uint16Array)m.isFloat16BufferAttribute?L=c.HALF_FLOAT:L=c.UNSIGNED_SHORT;else if(S instanceof Int16Array)L=c.SHORT;else if(S instanceof Uint32Array)L=c.UNSIGNED_INT;else if(S instanceof Int32Array)L=c.INT;else if(S instanceof Int8Array)L=c.BYTE;else if(S instanceof Uint8Array)L=c.UNSIGNED_BYTE;else if(S instanceof Uint8ClampedArray)L=c.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+S);return{buffer:O,type:L,bytesPerElement:S.BYTES_PER_ELEMENT,version:m.version,size:k}}function r(m,b,S){const T=b.array,k=b.updateRanges;if(c.bindBuffer(S,m),k.length===0)c.bufferSubData(S,0,T);else{k.sort((L,H)=>L.start-H.start);let O=0;for(let L=1;L<k.length;L++){const H=k[O],G=k[L];G.start<=H.start+H.count+1?H.count=Math.max(H.count,G.start+G.count-H.start):(++O,k[O]=G)}k.length=O+1;for(let L=0,H=k.length;L<H;L++){const G=k[L];c.bufferSubData(S,G.start*T.BYTES_PER_ELEMENT,T,G.start,G.count)}b.clearUpdateRanges()}b.onUploadCallback()}function o(m){return m.isInterleavedBufferAttribute&&(m=m.data),e.get(m)}function u(m){m.isInterleavedBufferAttribute&&(m=m.data);const b=e.get(m);b&&(c.deleteBuffer(b.buffer),e.delete(m))}function h(m,b){if(m.isInterleavedBufferAttribute&&(m=m.data),m.isGLBufferAttribute){const T=e.get(m);(!T||T.version<m.version)&&e.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version});return}const S=e.get(m);if(S===void 0)e.set(m,n(m,b));else if(S.version<m.version){if(S.size!==m.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(S.buffer,m,b),S.version=m.version}}return{get:o,remove:u,update:h}}var twe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nwe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,rwe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,iwe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,awe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,owe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,swe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lwe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,uwe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,cwe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,dwe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,fwe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hwe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pwe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mwe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gwe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,vwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_we=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ywe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,bwe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,xwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Swe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,wwe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Ewe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Twe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Mwe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Pwe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Cwe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Awe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kwe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Iwe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Rwe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Dwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Owe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,Nwe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Lwe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Fwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Uwe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Bwe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zwe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,jwe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Vwe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Hwe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gwe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Wwe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,qwe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Xwe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Kwe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ywe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$we=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Zwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Jwe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qwe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eEe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tEe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nEe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,rEe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iEe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aEe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,oEe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,sEe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lEe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,uEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cEe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dEe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hEe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,pEe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,mEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,gEe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,vEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_Ee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,yEe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,SEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,EEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,TEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,MEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,PEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,CEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,AEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,kEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,IEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,REe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,DEe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,OEe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,NEe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,LEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,FEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,UEe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,BEe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,zEe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,jEe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,VEe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,HEe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,GEe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,WEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,qEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,XEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,KEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,YEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,$Ee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ZEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,QEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const eTe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tTe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rTe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aTe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oTe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sTe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,lTe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,uTe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,cTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dTe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fTe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hTe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pTe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mTe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gTe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vTe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Te=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yTe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bTe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xTe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,STe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wTe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ETe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,TTe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MTe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PTe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CTe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ATe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kTe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ITe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,RTe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DTe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Sr={alphahash_fragment:twe,alphahash_pars_fragment:nwe,alphamap_fragment:rwe,alphamap_pars_fragment:iwe,alphatest_fragment:awe,alphatest_pars_fragment:owe,aomap_fragment:swe,aomap_pars_fragment:lwe,batching_pars_vertex:uwe,batching_vertex:cwe,begin_vertex:dwe,beginnormal_vertex:fwe,bsdfs:hwe,iridescence_fragment:pwe,bumpmap_pars_fragment:mwe,clipping_planes_fragment:gwe,clipping_planes_pars_fragment:vwe,clipping_planes_pars_vertex:_we,clipping_planes_vertex:ywe,color_fragment:bwe,color_pars_fragment:xwe,color_pars_vertex:Swe,color_vertex:wwe,common:Ewe,cube_uv_reflection_fragment:Twe,defaultnormal_vertex:Mwe,displacementmap_pars_vertex:Pwe,displacementmap_vertex:Cwe,emissivemap_fragment:Awe,emissivemap_pars_fragment:kwe,colorspace_fragment:Iwe,colorspace_pars_fragment:Rwe,envmap_fragment:Dwe,envmap_common_pars_fragment:Owe,envmap_pars_fragment:Nwe,envmap_pars_vertex:Lwe,envmap_physical_pars_fragment:Xwe,envmap_vertex:Fwe,fog_vertex:Uwe,fog_pars_vertex:Bwe,fog_fragment:zwe,fog_pars_fragment:jwe,gradientmap_pars_fragment:Vwe,lightmap_pars_fragment:Hwe,lights_lambert_fragment:Gwe,lights_lambert_pars_fragment:Wwe,lights_pars_begin:qwe,lights_toon_fragment:Kwe,lights_toon_pars_fragment:Ywe,lights_phong_fragment:$we,lights_phong_pars_fragment:Zwe,lights_physical_fragment:Jwe,lights_physical_pars_fragment:Qwe,lights_fragment_begin:eEe,lights_fragment_maps:tEe,lights_fragment_end:nEe,logdepthbuf_fragment:rEe,logdepthbuf_pars_fragment:iEe,logdepthbuf_pars_vertex:aEe,logdepthbuf_vertex:oEe,map_fragment:sEe,map_pars_fragment:lEe,map_particle_fragment:uEe,map_particle_pars_fragment:cEe,metalnessmap_fragment:dEe,metalnessmap_pars_fragment:fEe,morphinstance_vertex:hEe,morphcolor_vertex:pEe,morphnormal_vertex:mEe,morphtarget_pars_vertex:gEe,morphtarget_vertex:vEe,normal_fragment_begin:_Ee,normal_fragment_maps:yEe,normal_pars_fragment:bEe,normal_pars_vertex:xEe,normal_vertex:SEe,normalmap_pars_fragment:wEe,clearcoat_normal_fragment_begin:EEe,clearcoat_normal_fragment_maps:TEe,clearcoat_pars_fragment:MEe,iridescence_pars_fragment:PEe,opaque_fragment:CEe,packing:AEe,premultiplied_alpha_fragment:kEe,project_vertex:IEe,dithering_fragment:REe,dithering_pars_fragment:DEe,roughnessmap_fragment:OEe,roughnessmap_pars_fragment:NEe,shadowmap_pars_fragment:LEe,shadowmap_pars_vertex:FEe,shadowmap_vertex:UEe,shadowmask_pars_fragment:BEe,skinbase_vertex:zEe,skinning_pars_vertex:jEe,skinning_vertex:VEe,skinnormal_vertex:HEe,specularmap_fragment:GEe,specularmap_pars_fragment:WEe,tonemapping_fragment:qEe,tonemapping_pars_fragment:XEe,transmission_fragment:KEe,transmission_pars_fragment:YEe,uv_pars_fragment:$Ee,uv_pars_vertex:ZEe,uv_vertex:JEe,worldpos_vertex:QEe,background_vert:eTe,background_frag:tTe,backgroundCube_vert:nTe,backgroundCube_frag:rTe,cube_vert:iTe,cube_frag:aTe,depth_vert:oTe,depth_frag:sTe,distance_vert:lTe,distance_frag:uTe,equirect_vert:cTe,equirect_frag:dTe,linedashed_vert:fTe,linedashed_frag:hTe,meshbasic_vert:pTe,meshbasic_frag:mTe,meshlambert_vert:gTe,meshlambert_frag:vTe,meshmatcap_vert:_Te,meshmatcap_frag:yTe,meshnormal_vert:bTe,meshnormal_frag:xTe,meshphong_vert:STe,meshphong_frag:wTe,meshphysical_vert:ETe,meshphysical_frag:TTe,meshtoon_vert:MTe,meshtoon_frag:PTe,points_vert:CTe,points_frag:ATe,shadow_vert:kTe,shadow_frag:ITe,sprite_vert:RTe,sprite_frag:DTe},un={common:{diffuse:{value:new tr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new br},alphaMap:{value:null},alphaMapTransform:{value:new br},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new br}},envmap:{envMap:{value:null},envMapRotation:{value:new br},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new br}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new br}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new br},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new br},normalScale:{value:new gr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new br},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new br}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new br}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new br}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new br},alphaTest:{value:0},uvTransform:{value:new br}},sprite:{diffuse:{value:new tr(16777215)},opacity:{value:1},center:{value:new gr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new br},alphaMap:{value:null},alphaMapTransform:{value:new br},alphaTest:{value:0}}},Sc={basic:{uniforms:Qo([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:Sr.meshbasic_vert,fragmentShader:Sr.meshbasic_frag},lambert:{uniforms:Qo([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new tr(0)}}]),vertexShader:Sr.meshlambert_vert,fragmentShader:Sr.meshlambert_frag},phong:{uniforms:Qo([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new tr(0)},specular:{value:new tr(1118481)},shininess:{value:30}}]),vertexShader:Sr.meshphong_vert,fragmentShader:Sr.meshphong_frag},standard:{uniforms:Qo([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new tr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sr.meshphysical_vert,fragmentShader:Sr.meshphysical_frag},toon:{uniforms:Qo([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new tr(0)}}]),vertexShader:Sr.meshtoon_vert,fragmentShader:Sr.meshtoon_frag},matcap:{uniforms:Qo([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:Sr.meshmatcap_vert,fragmentShader:Sr.meshmatcap_frag},points:{uniforms:Qo([un.points,un.fog]),vertexShader:Sr.points_vert,fragmentShader:Sr.points_frag},dashed:{uniforms:Qo([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sr.linedashed_vert,fragmentShader:Sr.linedashed_frag},depth:{uniforms:Qo([un.common,un.displacementmap]),vertexShader:Sr.depth_vert,fragmentShader:Sr.depth_frag},normal:{uniforms:Qo([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:Sr.meshnormal_vert,fragmentShader:Sr.meshnormal_frag},sprite:{uniforms:Qo([un.sprite,un.fog]),vertexShader:Sr.sprite_vert,fragmentShader:Sr.sprite_frag},background:{uniforms:{uvTransform:{value:new br},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Sr.background_vert,fragmentShader:Sr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new br}},vertexShader:Sr.backgroundCube_vert,fragmentShader:Sr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sr.cube_vert,fragmentShader:Sr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sr.equirect_vert,fragmentShader:Sr.equirect_frag},distance:{uniforms:Qo([un.common,un.displacementmap,{referencePosition:{value:new Xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sr.distance_vert,fragmentShader:Sr.distance_frag},shadow:{uniforms:Qo([un.lights,un.fog,{color:{value:new tr(0)},opacity:{value:1}}]),vertexShader:Sr.shadow_vert,fragmentShader:Sr.shadow_frag}};Sc.physical={uniforms:Qo([Sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new br},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new br},clearcoatNormalScale:{value:new gr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new br},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new br},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new br},sheen:{value:0},sheenColor:{value:new tr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new br},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new br},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new br},transmissionSamplerSize:{value:new gr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new br},attenuationDistance:{value:0},attenuationColor:{value:new tr(0)},specularColor:{value:new tr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new br},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new br},anisotropyVector:{value:new gr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new br}}]),vertexShader:Sr.meshphysical_vert,fragmentShader:Sr.meshphysical_frag};const vI={r:0,b:0,g:0},Ym=new Nc,OTe=new vr;function NTe(c,e,n,r,o,u,h){const m=new tr(0);let b=u===!0?0:1,S,T,k=null,O=0,L=null;function H(ue){let P=ue.isScene===!0?ue.background:null;return P&&P.isTexture&&(P=(ue.backgroundBlurriness>0?n:e).get(P)),P}function G(ue){let P=!1;const ae=H(ue);ae===null?I(m,b):ae&&ae.isColor&&(I(ae,1),P=!0);const ge=c.xr.getEnvironmentBlendMode();ge==="additive"?r.buffers.color.setClear(0,0,0,1,h):ge==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,h),(c.autoClear||P)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil))}function V(ue,P){const ae=H(P);ae&&(ae.isCubeTexture||ae.mapping===v3)?(T===void 0&&(T=new No(new Ty(1,1,1),new rl({name:"BackgroundCubeMaterial",uniforms:py(Sc.backgroundCube.uniforms),vertexShader:Sc.backgroundCube.vertexShader,fragmentShader:Sc.backgroundCube.fragmentShader,side:os,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),T.geometry.deleteAttribute("normal"),T.geometry.deleteAttribute("uv"),T.onBeforeRender=function(ge,me,J){this.matrixWorld.copyPosition(J.matrixWorld)},Object.defineProperty(T.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(T)),Ym.copy(P.backgroundRotation),Ym.x*=-1,Ym.y*=-1,Ym.z*=-1,ae.isCubeTexture&&ae.isRenderTargetTexture===!1&&(Ym.y*=-1,Ym.z*=-1),T.material.uniforms.envMap.value=ae,T.material.uniforms.flipEnvMap.value=ae.isCubeTexture&&ae.isRenderTargetTexture===!1?-1:1,T.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,T.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,T.material.uniforms.backgroundRotation.value.setFromMatrix4(OTe.makeRotationFromEuler(Ym)),T.material.toneMapped=Or.getTransfer(ae.colorSpace)!==ai,(k!==ae||O!==ae.version||L!==c.toneMapping)&&(T.material.needsUpdate=!0,k=ae,O=ae.version,L=c.toneMapping),T.layers.enableAll(),ue.unshift(T,T.geometry,T.material,0,0,null)):ae&&ae.isTexture&&(S===void 0&&(S=new No(new My(2,2),new rl({name:"BackgroundMaterial",uniforms:py(Sc.background.uniforms),vertexShader:Sc.background.vertexShader,fragmentShader:Sc.background.fragmentShader,side:Rc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),S.geometry.deleteAttribute("normal"),Object.defineProperty(S.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(S)),S.material.uniforms.t2D.value=ae,S.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,S.material.toneMapped=Or.getTransfer(ae.colorSpace)!==ai,ae.matrixAutoUpdate===!0&&ae.updateMatrix(),S.material.uniforms.uvTransform.value.copy(ae.matrix),(k!==ae||O!==ae.version||L!==c.toneMapping)&&(S.material.needsUpdate=!0,k=ae,O=ae.version,L=c.toneMapping),S.layers.enableAll(),ue.unshift(S,S.geometry,S.material,0,0,null))}function I(ue,P){ue.getRGB(vI,vce(c)),r.buffers.color.setClear(vI.r,vI.g,vI.b,P,h)}function K(){T!==void 0&&(T.geometry.dispose(),T.material.dispose(),T=void 0),S!==void 0&&(S.geometry.dispose(),S.material.dispose(),S=void 0)}return{getClearColor:function(){return m},setClearColor:function(ue,P=1){m.set(ue),b=P,I(m,b)},getClearAlpha:function(){return b},setClearAlpha:function(ue){b=ue,I(m,b)},render:G,addToRenderList:V,dispose:K}}function LTe(c,e){const n=c.getParameter(c.MAX_VERTEX_ATTRIBS),r={},o=O(null);let u=o,h=!1;function m(oe,Y,ke,$e,ot){let Qe=!1;const pe=k($e,ke,Y);u!==pe&&(u=pe,S(u.object)),Qe=L(oe,$e,ke,ot),Qe&&H(oe,$e,ke,ot),ot!==null&&e.update(ot,c.ELEMENT_ARRAY_BUFFER),(Qe||h)&&(h=!1,P(oe,Y,ke,$e),ot!==null&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.get(ot).buffer))}function b(){return c.createVertexArray()}function S(oe){return c.bindVertexArray(oe)}function T(oe){return c.deleteVertexArray(oe)}function k(oe,Y,ke){const $e=ke.wireframe===!0;let ot=r[oe.id];ot===void 0&&(ot={},r[oe.id]=ot);let Qe=ot[Y.id];Qe===void 0&&(Qe={},ot[Y.id]=Qe);let pe=Qe[$e];return pe===void 0&&(pe=O(b()),Qe[$e]=pe),pe}function O(oe){const Y=[],ke=[],$e=[];for(let ot=0;ot<n;ot++)Y[ot]=0,ke[ot]=0,$e[ot]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ke,attributeDivisors:$e,object:oe,attributes:{},index:null}}function L(oe,Y,ke,$e){const ot=u.attributes,Qe=Y.attributes;let pe=0;const Ve=ke.getAttributes();for(const Ue in Ve)if(Ve[Ue].location>=0){const Me=ot[Ue];let Ot=Qe[Ue];if(Ot===void 0&&(Ue==="instanceMatrix"&&oe.instanceMatrix&&(Ot=oe.instanceMatrix),Ue==="instanceColor"&&oe.instanceColor&&(Ot=oe.instanceColor)),Me===void 0||Me.attribute!==Ot||Ot&&Me.data!==Ot.data)return!0;pe++}return u.attributesNum!==pe||u.index!==$e}function H(oe,Y,ke,$e){const ot={},Qe=Y.attributes;let pe=0;const Ve=ke.getAttributes();for(const Ue in Ve)if(Ve[Ue].location>=0){let Me=Qe[Ue];Me===void 0&&(Ue==="instanceMatrix"&&oe.instanceMatrix&&(Me=oe.instanceMatrix),Ue==="instanceColor"&&oe.instanceColor&&(Me=oe.instanceColor));const Ot={};Ot.attribute=Me,Me&&Me.data&&(Ot.data=Me.data),ot[Ue]=Ot,pe++}u.attributes=ot,u.attributesNum=pe,u.index=$e}function G(){const oe=u.newAttributes;for(let Y=0,ke=oe.length;Y<ke;Y++)oe[Y]=0}function V(oe){I(oe,0)}function I(oe,Y){const ke=u.newAttributes,$e=u.enabledAttributes,ot=u.attributeDivisors;ke[oe]=1,$e[oe]===0&&(c.enableVertexAttribArray(oe),$e[oe]=1),ot[oe]!==Y&&(c.vertexAttribDivisor(oe,Y),ot[oe]=Y)}function K(){const oe=u.newAttributes,Y=u.enabledAttributes;for(let ke=0,$e=Y.length;ke<$e;ke++)Y[ke]!==oe[ke]&&(c.disableVertexAttribArray(ke),Y[ke]=0)}function ue(oe,Y,ke,$e,ot,Qe,pe){pe===!0?c.vertexAttribIPointer(oe,Y,ke,ot,Qe):c.vertexAttribPointer(oe,Y,ke,$e,ot,Qe)}function P(oe,Y,ke,$e){G();const ot=$e.attributes,Qe=ke.getAttributes(),pe=Y.defaultAttributeValues;for(const Ve in Qe){const Ue=Qe[Ve];if(Ue.location>=0){let Pt=ot[Ve];if(Pt===void 0&&(Ve==="instanceMatrix"&&oe.instanceMatrix&&(Pt=oe.instanceMatrix),Ve==="instanceColor"&&oe.instanceColor&&(Pt=oe.instanceColor)),Pt!==void 0){const Me=Pt.normalized,Ot=Pt.itemSize,Tn=e.get(Pt);if(Tn===void 0)continue;const yn=Tn.buffer,qn=Tn.type,Dn=Tn.bytesPerElement,xt=qn===c.INT||qn===c.UNSIGNED_INT||Pt.gpuType===wj;if(Pt.isInterleavedBufferAttribute){const vt=Pt.data,Zt=vt.stride,Mn=Pt.offset;if(vt.isInstancedInterleavedBuffer){for(let sn=0;sn<Ue.locationSize;sn++)I(Ue.location+sn,vt.meshPerAttribute);oe.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=vt.meshPerAttribute*vt.count)}else for(let sn=0;sn<Ue.locationSize;sn++)V(Ue.location+sn);c.bindBuffer(c.ARRAY_BUFFER,yn);for(let sn=0;sn<Ue.locationSize;sn++)ue(Ue.location+sn,Ot/Ue.locationSize,qn,Me,Zt*Dn,(Mn+Ot/Ue.locationSize*sn)*Dn,xt)}else{if(Pt.isInstancedBufferAttribute){for(let vt=0;vt<Ue.locationSize;vt++)I(Ue.location+vt,Pt.meshPerAttribute);oe.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=Pt.meshPerAttribute*Pt.count)}else for(let vt=0;vt<Ue.locationSize;vt++)V(Ue.location+vt);c.bindBuffer(c.ARRAY_BUFFER,yn);for(let vt=0;vt<Ue.locationSize;vt++)ue(Ue.location+vt,Ot/Ue.locationSize,qn,Me,Ot*Dn,Ot/Ue.locationSize*vt*Dn,xt)}}else if(pe!==void 0){const Me=pe[Ve];if(Me!==void 0)switch(Me.length){case 2:c.vertexAttrib2fv(Ue.location,Me);break;case 3:c.vertexAttrib3fv(Ue.location,Me);break;case 4:c.vertexAttrib4fv(Ue.location,Me);break;default:c.vertexAttrib1fv(Ue.location,Me)}}}}K()}function ae(){J();for(const oe in r){const Y=r[oe];for(const ke in Y){const $e=Y[ke];for(const ot in $e)T($e[ot].object),delete $e[ot];delete Y[ke]}delete r[oe]}}function ge(oe){if(r[oe.id]===void 0)return;const Y=r[oe.id];for(const ke in Y){const $e=Y[ke];for(const ot in $e)T($e[ot].object),delete $e[ot];delete Y[ke]}delete r[oe.id]}function me(oe){for(const Y in r){const ke=r[Y];if(ke[oe.id]===void 0)continue;const $e=ke[oe.id];for(const ot in $e)T($e[ot].object),delete $e[ot];delete ke[oe.id]}}function J(){te(),h=!0,u!==o&&(u=o,S(u.object))}function te(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:m,reset:J,resetDefaultState:te,dispose:ae,releaseStatesOfGeometry:ge,releaseStatesOfProgram:me,initAttributes:G,enableAttribute:V,disableUnusedAttributes:K}}function FTe(c,e,n){let r;function o(S){r=S}function u(S,T){c.drawArrays(r,S,T),n.update(T,r,1)}function h(S,T,k){k!==0&&(c.drawArraysInstanced(r,S,T,k),n.update(T,r,k))}function m(S,T,k){if(k===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,S,0,T,0,k);let L=0;for(let H=0;H<k;H++)L+=T[H];n.update(L,r,1)}function b(S,T,k,O){if(k===0)return;const L=e.get("WEBGL_multi_draw");if(L===null)for(let H=0;H<S.length;H++)h(S[H],T[H],O[H]);else{L.multiDrawArraysInstancedWEBGL(r,S,0,T,0,O,0,k);let H=0;for(let G=0;G<k;G++)H+=T[G]*O[G];n.update(H,r,1)}}this.setMode=o,this.render=u,this.renderInstances=h,this.renderMultiDraw=m,this.renderMultiDrawInstances=b}function UTe(c,e,n,r){let o;function u(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");o=c.getParameter(me.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function h(me){return!(me!==Qs&&r.convert(me)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_FORMAT))}function m(me){const J=me===lf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(me!==$s&&r.convert(me)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_TYPE)&&me!==Il&&!J)}function b(me){if(me==="highp"){if(c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).precision>0)return"highp";me="mediump"}return me==="mediump"&&c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let S=n.precision!==void 0?n.precision:"highp";const T=b(S);T!==S&&(Wn("WebGLRenderer:",S,"not supported, using",T,"instead."),S=T);const k=n.logarithmicDepthBuffer===!0,O=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),L=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),H=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),G=c.getParameter(c.MAX_TEXTURE_SIZE),V=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE),I=c.getParameter(c.MAX_VERTEX_ATTRIBS),K=c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS),ue=c.getParameter(c.MAX_VARYING_VECTORS),P=c.getParameter(c.MAX_FRAGMENT_UNIFORM_VECTORS),ae=c.getParameter(c.MAX_SAMPLES),ge=c.getParameter(c.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:u,getMaxPrecision:b,textureFormatReadable:h,textureTypeReadable:m,precision:S,logarithmicDepthBuffer:k,reversedDepthBuffer:O,maxTextures:L,maxVertexTextures:H,maxTextureSize:G,maxCubemapSize:V,maxAttributes:I,maxVertexUniforms:K,maxVaryings:ue,maxFragmentUniforms:P,maxSamples:ae,samples:ge}}function BTe(c){const e=this;let n=null,r=0,o=!1,u=!1;const h=new Jd,m=new br,b={value:null,needsUpdate:!1};this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(k,O){const L=k.length!==0||O||r!==0||o;return o=O,r=k.length,L},this.beginShadows=function(){u=!0,T(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(k,O){n=T(k,O,0)},this.setState=function(k,O,L){const H=k.clippingPlanes,G=k.clipIntersection,V=k.clipShadows,I=c.get(k);if(!o||H===null||H.length===0||u&&!V)u?T(null):S();else{const K=u?0:r,ue=K*4;let P=I.clippingState||null;b.value=P,P=T(H,O,ue,L);for(let ae=0;ae!==ue;++ae)P[ae]=n[ae];I.clippingState=P,this.numIntersection=G?this.numPlanes:0,this.numPlanes+=K}};function S(){b.value!==n&&(b.value=n,b.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function T(k,O,L,H){const G=k!==null?k.length:0;let V=null;if(G!==0){if(V=b.value,H!==!0||V===null){const I=L+G*4,K=O.matrixWorldInverse;m.getNormalMatrix(K),(V===null||V.length<I)&&(V=new Float32Array(I));for(let ue=0,P=L;ue!==G;++ue,P+=4)h.copy(k[ue]).applyMatrix4(K,m),h.normal.toArray(V,P),V[P+3]=h.constant}b.value=V,b.needsUpdate=!0}return e.numPlanes=G,e.numIntersection=0,V}}function zTe(c){let e=new WeakMap;function n(h,m){return m===oz?h.mapping=vg:m===sz&&(h.mapping=dy),h}function r(h){if(h&&h.isTexture){const m=h.mapping;if(m===oz||m===sz)if(e.has(h)){const b=e.get(h).texture;return n(b,h.mapping)}else{const b=h.image;if(b&&b.height>0){const S=new bce(b.height);return S.fromEquirectangularTexture(c,h),e.set(h,S),h.addEventListener("dispose",o),n(S.texture,h.mapping)}else return null}}return h}function o(h){const m=h.target;m.removeEventListener("dispose",o);const b=e.get(m);b!==void 0&&(e.delete(m),b.dispose())}function u(){e=new WeakMap}return{get:r,dispose:u}}const Gh=4,Rle=[.125,.215,.35,.446,.526,.582],ig=20,jTe=256,XS=new Ww,Dle=new tr;let w4=null,E4=0,T4=0,M4=!1;const VTe=new Xe;class Ole{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,r=.1,o=100,u={}){const{size:h=256,position:m=VTe}=u;w4=this._renderer.getRenderTarget(),E4=this._renderer.getActiveCubeFace(),T4=this._renderer.getActiveMipmapLevel(),M4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(h);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(e,r,o,b,m),n>0&&this._blur(b,0,0,n),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Fle(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Lle(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(w4,E4,T4),this._renderer.xr.enabled=M4,e.scissorTest=!1,G_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===vg||e.mapping===dy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),w4=this._renderer.getRenderTarget(),E4=this._renderer.getActiveCubeFace(),T4=this._renderer.getActiveMipmapLevel(),M4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:fa,minFilter:fa,generateMipmaps:!1,type:lf,format:Qs,colorSpace:Oo,depthBuffer:!1},o=Nle(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Nle(e,n,r);const{_lodMax:u}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=HTe(u)),this._blurMaterial=WTe(u,e,n),this._ggxMaterial=GTe(u,e,n)}return o}_compileMaterial(e){const n=new No(new ol,e);this._renderer.compile(n,XS)}_sceneToCubeUV(e,n,r,o,u){const b=new ko(90,1,n,r),S=[1,-1,1,1,1,1],T=[1,1,1,-1,-1,-1],k=this._renderer,O=k.autoClear,L=k.toneMapping;k.getClearColor(Dle),k.toneMapping=Ac,k.autoClear=!1,k.state.buffers.depth.getReversed()&&(k.setRenderTarget(o),k.clearDepth(),k.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new No(new Ty,new og({name:"PMREM.Background",side:os,depthWrite:!1,depthTest:!1})));const G=this._backgroundBox,V=G.material;let I=!1;const K=e.background;K?K.isColor&&(V.color.copy(K),e.background=null,I=!0):(V.color.copy(Dle),I=!0);for(let ue=0;ue<6;ue++){const P=ue%3;P===0?(b.up.set(0,S[ue],0),b.position.set(u.x,u.y,u.z),b.lookAt(u.x+T[ue],u.y,u.z)):P===1?(b.up.set(0,0,S[ue]),b.position.set(u.x,u.y,u.z),b.lookAt(u.x,u.y+T[ue],u.z)):(b.up.set(0,S[ue],0),b.position.set(u.x,u.y,u.z),b.lookAt(u.x,u.y,u.z+T[ue]));const ae=this._cubeSize;G_(o,P*ae,ue>2?ae:0,ae,ae),k.setRenderTarget(o),I&&k.render(G,b),k.render(e,b)}k.toneMapping=L,k.autoClear=O,e.background=K}_textureToCubeUV(e,n){const r=this._renderer,o=e.mapping===vg||e.mapping===dy;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Fle()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Lle());const u=o?this._cubemapMaterial:this._equirectMaterial,h=this._lodMeshes[0];h.material=u;const m=u.uniforms;m.envMap.value=e;const b=this._cubeSize;G_(n,0,0,3*b,2*b),r.setRenderTarget(n),r.render(h,XS)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const o=this._lodMeshes.length;for(let u=1;u<o;u++)this._applyGGXFilter(e,u-1,u);n.autoClear=r}_applyGGXFilter(e,n,r){const o=this._renderer,u=this._pingPongRenderTarget,h=this._ggxMaterial,m=this._lodMeshes[r];m.material=h;const b=h.uniforms,S=r/(this._lodMeshes.length-1),T=n/(this._lodMeshes.length-1),k=Math.sqrt(S*S-T*T),O=0+S*1.25,L=k*O,{_lodMax:H}=this,G=this._sizeLods[r],V=3*G*(r>H-Gh?r-H+Gh:0),I=4*(this._cubeSize-G);b.envMap.value=e.texture,b.roughness.value=L,b.mipInt.value=H-n,G_(u,V,I,3*G,2*G),o.setRenderTarget(u),o.render(m,XS),b.envMap.value=u.texture,b.roughness.value=0,b.mipInt.value=H-r,G_(e,V,I,3*G,2*G),o.setRenderTarget(e),o.render(m,XS)}_blur(e,n,r,o,u){const h=this._pingPongRenderTarget;this._halfBlur(e,h,n,r,o,"latitudinal",u),this._halfBlur(h,e,r,r,o,"longitudinal",u)}_halfBlur(e,n,r,o,u,h,m){const b=this._renderer,S=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&ar("blur direction must be either latitudinal or longitudinal!");const T=3,k=this._lodMeshes[o];k.material=S;const O=S.uniforms,L=this._sizeLods[r]-1,H=isFinite(u)?Math.PI/(2*L):2*Math.PI/(2*ig-1),G=u/H,V=isFinite(u)?1+Math.floor(T*G):ig;V>ig&&Wn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${V} samples when the maximum is set to ${ig}`);const I=[];let K=0;for(let me=0;me<ig;++me){const J=me/G,te=Math.exp(-J*J/2);I.push(te),me===0?K+=te:me<V&&(K+=2*te)}for(let me=0;me<I.length;me++)I[me]=I[me]/K;O.envMap.value=e.texture,O.samples.value=V,O.weights.value=I,O.latitudinal.value=h==="latitudinal",m&&(O.poleAxis.value=m);const{_lodMax:ue}=this;O.dTheta.value=H,O.mipInt.value=ue-r;const P=this._sizeLods[o],ae=3*P*(o>ue-Gh?o-ue+Gh:0),ge=4*(this._cubeSize-P);G_(n,ae,ge,3*P,2*P),b.setRenderTarget(n),b.render(k,XS)}}function HTe(c){const e=[],n=[],r=[];let o=c;const u=c-Gh+1+Rle.length;for(let h=0;h<u;h++){const m=Math.pow(2,o);e.push(m);let b=1/m;h>c-Gh?b=Rle[h-c+Gh-1]:h===0&&(b=0),n.push(b);const S=1/(m-2),T=-S,k=1+S,O=[T,T,k,T,k,k,T,T,k,k,T,k],L=6,H=6,G=3,V=2,I=1,K=new Float32Array(G*H*L),ue=new Float32Array(V*H*L),P=new Float32Array(I*H*L);for(let ge=0;ge<L;ge++){const me=ge%3*2/3-1,J=ge>2?0:-1,te=[me,J,0,me+2/3,J,0,me+2/3,J+1,0,me,J,0,me+2/3,J+1,0,me,J+1,0];K.set(te,G*H*ge),ue.set(O,V*H*ge);const oe=[ge,ge,ge,ge,ge,ge];P.set(oe,I*H*ge)}const ae=new ol;ae.setAttribute("position",new ho(K,G)),ae.setAttribute("uv",new ho(ue,V)),ae.setAttribute("faceIndex",new ho(P,I)),r.push(new No(ae,null)),o>Gh&&o--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function Nle(c,e,n){const r=new Ol(c,e,n);return r.texture.mapping=v3,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function G_(c,e,n,r,o){c.viewport.set(e,n,r,o),c.scissor.set(e,n,r,o)}function GTe(c,e,n){return new rl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:jTe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:b3(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function WTe(c,e,n){const r=new Float32Array(ig),o=new Xe(0,1,0);return new rl({name:"SphericalGaussianBlur",defines:{n:ig,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:b3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function Lle(){return new rl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:b3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function Fle(){return new rl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:b3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function b3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qTe(c){let e=new WeakMap,n=null;function r(m){if(m&&m.isTexture){const b=m.mapping,S=b===oz||b===sz,T=b===vg||b===dy;if(S||T){let k=e.get(m);const O=k!==void 0?k.texture.pmremVersion:0;if(m.isRenderTargetTexture&&m.pmremVersion!==O)return n===null&&(n=new Ole(c)),k=S?n.fromEquirectangular(m,k):n.fromCubemap(m,k),k.texture.pmremVersion=m.pmremVersion,e.set(m,k),k.texture;if(k!==void 0)return k.texture;{const L=m.image;return S&&L&&L.height>0||T&&L&&o(L)?(n===null&&(n=new Ole(c)),k=S?n.fromEquirectangular(m):n.fromCubemap(m),k.texture.pmremVersion=m.pmremVersion,e.set(m,k),m.addEventListener("dispose",u),k.texture):null}}}return m}function o(m){let b=0;const S=6;for(let T=0;T<S;T++)m[T]!==void 0&&b++;return b===S}function u(m){const b=m.target;b.removeEventListener("dispose",u);const S=e.get(b);S!==void 0&&(e.delete(b),S.dispose())}function h(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:h}}function XTe(c){const e={};function n(r){if(e[r]!==void 0)return e[r];const o=c.getExtension(r);return e[r]=o,o}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const o=n(r);return o===null&&Rw("WebGLRenderer: "+r+" extension not supported."),o}}}function KTe(c,e,n,r){const o={},u=new WeakMap;function h(k){const O=k.target;O.index!==null&&e.remove(O.index);for(const H in O.attributes)e.remove(O.attributes[H]);O.removeEventListener("dispose",h),delete o[O.id];const L=u.get(O);L&&(e.remove(L),u.delete(O)),r.releaseStatesOfGeometry(O),O.isInstancedBufferGeometry===!0&&delete O._maxInstanceCount,n.memory.geometries--}function m(k,O){return o[O.id]===!0||(O.addEventListener("dispose",h),o[O.id]=!0,n.memory.geometries++),O}function b(k){const O=k.attributes;for(const L in O)e.update(O[L],c.ARRAY_BUFFER)}function S(k){const O=[],L=k.index,H=k.attributes.position;let G=0;if(L!==null){const K=L.array;G=L.version;for(let ue=0,P=K.length;ue<P;ue+=3){const ae=K[ue+0],ge=K[ue+1],me=K[ue+2];O.push(ae,ge,ge,me,me,ae)}}else if(H!==void 0){const K=H.array;G=H.version;for(let ue=0,P=K.length/3-1;ue<P;ue+=3){const ae=ue+0,ge=ue+1,me=ue+2;O.push(ae,ge,ge,me,me,ae)}}else return;const V=new(dce(O)?gce:mce)(O,1);V.version=G;const I=u.get(k);I&&e.remove(I),u.set(k,V)}function T(k){const O=u.get(k);if(O){const L=k.index;L!==null&&O.version<L.version&&S(k)}else S(k);return u.get(k)}return{get:m,update:b,getWireframeAttribute:T}}function YTe(c,e,n){let r;function o(O){r=O}let u,h;function m(O){u=O.type,h=O.bytesPerElement}function b(O,L){c.drawElements(r,L,u,O*h),n.update(L,r,1)}function S(O,L,H){H!==0&&(c.drawElementsInstanced(r,L,u,O*h,H),n.update(L,r,H))}function T(O,L,H){if(H===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,L,0,u,O,0,H);let V=0;for(let I=0;I<H;I++)V+=L[I];n.update(V,r,1)}function k(O,L,H,G){if(H===0)return;const V=e.get("WEBGL_multi_draw");if(V===null)for(let I=0;I<O.length;I++)S(O[I]/h,L[I],G[I]);else{V.multiDrawElementsInstancedWEBGL(r,L,0,u,O,0,G,0,H);let I=0;for(let K=0;K<H;K++)I+=L[K]*G[K];n.update(I,r,1)}}this.setMode=o,this.setIndex=m,this.render=b,this.renderInstances=S,this.renderMultiDraw=T,this.renderMultiDrawInstances=k}function $Te(c){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(u,h,m){switch(n.calls++,h){case c.TRIANGLES:n.triangles+=m*(u/3);break;case c.LINES:n.lines+=m*(u/2);break;case c.LINE_STRIP:n.lines+=m*(u-1);break;case c.LINE_LOOP:n.lines+=m*u;break;case c.POINTS:n.points+=m*u;break;default:ar("WebGLInfo: Unknown draw mode:",h);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:o,update:r}}function ZTe(c,e,n){const r=new WeakMap,o=new _i;function u(h,m,b){const S=h.morphTargetInfluences,T=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,k=T!==void 0?T.length:0;let O=r.get(m);if(O===void 0||O.count!==k){let oe=function(){J.dispose(),r.delete(m),m.removeEventListener("dispose",oe)};var L=oe;O!==void 0&&O.texture.dispose();const H=m.morphAttributes.position!==void 0,G=m.morphAttributes.normal!==void 0,V=m.morphAttributes.color!==void 0,I=m.morphAttributes.position||[],K=m.morphAttributes.normal||[],ue=m.morphAttributes.color||[];let P=0;H===!0&&(P=1),G===!0&&(P=2),V===!0&&(P=3);let ae=m.attributes.position.count*P,ge=1;ae>e.maxTextureSize&&(ge=Math.ceil(ae/e.maxTextureSize),ae=e.maxTextureSize);const me=new Float32Array(ae*ge*4*k),J=new fce(me,ae,ge,k);J.type=Il,J.needsUpdate=!0;const te=P*4;for(let Y=0;Y<k;Y++){const ke=I[Y],$e=K[Y],ot=ue[Y],Qe=ae*ge*4*Y;for(let pe=0;pe<ke.count;pe++){const Ve=pe*te;H===!0&&(o.fromBufferAttribute(ke,pe),me[Qe+Ve+0]=o.x,me[Qe+Ve+1]=o.y,me[Qe+Ve+2]=o.z,me[Qe+Ve+3]=0),G===!0&&(o.fromBufferAttribute($e,pe),me[Qe+Ve+4]=o.x,me[Qe+Ve+5]=o.y,me[Qe+Ve+6]=o.z,me[Qe+Ve+7]=0),V===!0&&(o.fromBufferAttribute(ot,pe),me[Qe+Ve+8]=o.x,me[Qe+Ve+9]=o.y,me[Qe+Ve+10]=o.z,me[Qe+Ve+11]=ot.itemSize===4?o.w:1)}}O={count:k,texture:J,size:new gr(ae,ge)},r.set(m,O),m.addEventListener("dispose",oe)}if(h.isInstancedMesh===!0&&h.morphTexture!==null)b.getUniforms().setValue(c,"morphTexture",h.morphTexture,n);else{let H=0;for(let V=0;V<S.length;V++)H+=S[V];const G=m.morphTargetsRelative?1:1-H;b.getUniforms().setValue(c,"morphTargetBaseInfluence",G),b.getUniforms().setValue(c,"morphTargetInfluences",S)}b.getUniforms().setValue(c,"morphTargetsTexture",O.texture,n),b.getUniforms().setValue(c,"morphTargetsTextureSize",O.size)}return{update:u}}function JTe(c,e,n,r){let o=new WeakMap;function u(b){const S=r.render.frame,T=b.geometry,k=e.get(b,T);if(o.get(k)!==S&&(e.update(k),o.set(k,S)),b.isInstancedMesh&&(b.hasEventListener("dispose",m)===!1&&b.addEventListener("dispose",m),o.get(b)!==S&&(n.update(b.instanceMatrix,c.ARRAY_BUFFER),b.instanceColor!==null&&n.update(b.instanceColor,c.ARRAY_BUFFER),o.set(b,S))),b.isSkinnedMesh){const O=b.skeleton;o.get(O)!==S&&(O.update(),o.set(O,S))}return k}function h(){o=new WeakMap}function m(b){const S=b.target;S.removeEventListener("dispose",m),n.remove(S.instanceMatrix),S.instanceColor!==null&&n.remove(S.instanceColor)}return{update:u,dispose:h}}const QTe={[Yue]:"LINEAR_TONE_MAPPING",[$ue]:"REINHARD_TONE_MAPPING",[Zue]:"CINEON_TONE_MAPPING",[Sj]:"ACES_FILMIC_TONE_MAPPING",[Que]:"AGX_TONE_MAPPING",[ece]:"NEUTRAL_TONE_MAPPING",[Jue]:"CUSTOM_TONE_MAPPING"};function eMe(c,e,n,r,o){const u=new Ol(e,n,{type:c,depthBuffer:r,stencilBuffer:o}),h=new Ol(e,n,{type:lf,depthBuffer:!1,stencilBuffer:!1}),m=new ol;m.setAttribute("position",new Mu([-1,3,0,-1,-1,0,3,-1,0],3)),m.setAttribute("uv",new Mu([0,2,0,0,2,0],2));const b=new bSe({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),S=new No(m,b),T=new Ww(-1,1,1,-1,0,1);let k=null,O=null,L=!1,H,G=null,V=[],I=!1;this.setSize=function(K,ue){u.setSize(K,ue),h.setSize(K,ue);for(let P=0;P<V.length;P++){const ae=V[P];ae.setSize&&ae.setSize(K,ue)}},this.setEffects=function(K){V=K,I=V.length>0&&V[0].isRenderPass===!0;const ue=u.width,P=u.height;for(let ae=0;ae<V.length;ae++){const ge=V[ae];ge.setSize&&ge.setSize(ue,P)}},this.begin=function(K,ue){if(L||K.toneMapping===Ac&&V.length===0)return!1;if(G=ue,ue!==null){const P=ue.width,ae=ue.height;(u.width!==P||u.height!==ae)&&this.setSize(P,ae)}return I===!1&&K.setRenderTarget(u),H=K.toneMapping,K.toneMapping=Ac,!0},this.hasRenderPass=function(){return I},this.end=function(K,ue){K.toneMapping=H,L=!0;let P=u,ae=h;for(let ge=0;ge<V.length;ge++){const me=V[ge];if(me.enabled!==!1&&(me.render(K,ae,P,ue),me.needsSwap!==!1)){const J=P;P=ae,ae=J}}if(k!==K.outputColorSpace||O!==K.toneMapping){k=K.outputColorSpace,O=K.toneMapping,b.defines={},Or.getTransfer(k)===ai&&(b.defines.SRGB_TRANSFER="");const ge=QTe[O];ge&&(b.defines[ge]=""),b.needsUpdate=!0}b.uniforms.tDiffuse.value=P.texture,K.setRenderTarget(G),K.render(S,T),G=null,L=!1},this.isCompositing=function(){return L},this.dispose=function(){u.dispose(),h.dispose(),m.dispose(),b.dispose()}}const kce=new Ka,Wz=new Dw(1,1),Ice=new fce,Rce=new W1e,Dce=new yce,Ule=[],Ble=[],zle=new Float32Array(16),jle=new Float32Array(9),Vle=new Float32Array(4);function Ay(c,e,n){const r=c[0];if(r<=0||r>0)return c;const o=e*n;let u=Ule[o];if(u===void 0&&(u=new Float32Array(o),Ule[o]=u),e!==0){r.toArray(u,0);for(let h=1,m=0;h!==e;++h)m+=n,c[h].toArray(u,m)}return u}function Oa(c,e){if(c.length!==e.length)return!1;for(let n=0,r=c.length;n<r;n++)if(c[n]!==e[n])return!1;return!0}function Na(c,e){for(let n=0,r=e.length;n<r;n++)c[n]=e[n]}function x3(c,e){let n=Ble[e];n===void 0&&(n=new Int32Array(e),Ble[e]=n);for(let r=0;r!==e;++r)n[r]=c.allocateTextureUnit();return n}function tMe(c,e){const n=this.cache;n[0]!==e&&(c.uniform1f(this.addr,e),n[0]=e)}function nMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Oa(n,e))return;c.uniform2fv(this.addr,e),Na(n,e)}}function rMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(c.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Oa(n,e))return;c.uniform3fv(this.addr,e),Na(n,e)}}function iMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Oa(n,e))return;c.uniform4fv(this.addr,e),Na(n,e)}}function aMe(c,e){const n=this.cache,r=e.elements;if(r===void 0){if(Oa(n,e))return;c.uniformMatrix2fv(this.addr,!1,e),Na(n,e)}else{if(Oa(n,r))return;Vle.set(r),c.uniformMatrix2fv(this.addr,!1,Vle),Na(n,r)}}function oMe(c,e){const n=this.cache,r=e.elements;if(r===void 0){if(Oa(n,e))return;c.uniformMatrix3fv(this.addr,!1,e),Na(n,e)}else{if(Oa(n,r))return;jle.set(r),c.uniformMatrix3fv(this.addr,!1,jle),Na(n,r)}}function sMe(c,e){const n=this.cache,r=e.elements;if(r===void 0){if(Oa(n,e))return;c.uniformMatrix4fv(this.addr,!1,e),Na(n,e)}else{if(Oa(n,r))return;zle.set(r),c.uniformMatrix4fv(this.addr,!1,zle),Na(n,r)}}function lMe(c,e){const n=this.cache;n[0]!==e&&(c.uniform1i(this.addr,e),n[0]=e)}function uMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Oa(n,e))return;c.uniform2iv(this.addr,e),Na(n,e)}}function cMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Oa(n,e))return;c.uniform3iv(this.addr,e),Na(n,e)}}function dMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Oa(n,e))return;c.uniform4iv(this.addr,e),Na(n,e)}}function fMe(c,e){const n=this.cache;n[0]!==e&&(c.uniform1ui(this.addr,e),n[0]=e)}function hMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Oa(n,e))return;c.uniform2uiv(this.addr,e),Na(n,e)}}function pMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Oa(n,e))return;c.uniform3uiv(this.addr,e),Na(n,e)}}function mMe(c,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Oa(n,e))return;c.uniform4uiv(this.addr,e),Na(n,e)}}function gMe(c,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o);let u;this.type===c.SAMPLER_2D_SHADOW?(Wz.compareFunction=n.isReversedDepthBuffer()?Ij:kj,u=Wz):u=kce,n.setTexture2D(e||u,o)}function vMe(c,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||Rce,o)}function _Me(c,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||Dce,o)}function yMe(c,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||Ice,o)}function bMe(c){switch(c){case 5126:return tMe;case 35664:return nMe;case 35665:return rMe;case 35666:return iMe;case 35674:return aMe;case 35675:return oMe;case 35676:return sMe;case 5124:case 35670:return lMe;case 35667:case 35671:return uMe;case 35668:case 35672:return cMe;case 35669:case 35673:return dMe;case 5125:return fMe;case 36294:return hMe;case 36295:return pMe;case 36296:return mMe;case 35678:case 36198:case 36298:case 36306:case 35682:return gMe;case 35679:case 36299:case 36307:return vMe;case 35680:case 36300:case 36308:case 36293:return _Me;case 36289:case 36303:case 36311:case 36292:return yMe}}function xMe(c,e){c.uniform1fv(this.addr,e)}function SMe(c,e){const n=Ay(e,this.size,2);c.uniform2fv(this.addr,n)}function wMe(c,e){const n=Ay(e,this.size,3);c.uniform3fv(this.addr,n)}function EMe(c,e){const n=Ay(e,this.size,4);c.uniform4fv(this.addr,n)}function TMe(c,e){const n=Ay(e,this.size,4);c.uniformMatrix2fv(this.addr,!1,n)}function MMe(c,e){const n=Ay(e,this.size,9);c.uniformMatrix3fv(this.addr,!1,n)}function PMe(c,e){const n=Ay(e,this.size,16);c.uniformMatrix4fv(this.addr,!1,n)}function CMe(c,e){c.uniform1iv(this.addr,e)}function AMe(c,e){c.uniform2iv(this.addr,e)}function kMe(c,e){c.uniform3iv(this.addr,e)}function IMe(c,e){c.uniform4iv(this.addr,e)}function RMe(c,e){c.uniform1uiv(this.addr,e)}function DMe(c,e){c.uniform2uiv(this.addr,e)}function OMe(c,e){c.uniform3uiv(this.addr,e)}function NMe(c,e){c.uniform4uiv(this.addr,e)}function LMe(c,e,n){const r=this.cache,o=e.length,u=x3(n,o);Oa(r,u)||(c.uniform1iv(this.addr,u),Na(r,u));let h;this.type===c.SAMPLER_2D_SHADOW?h=Wz:h=kce;for(let m=0;m!==o;++m)n.setTexture2D(e[m]||h,u[m])}function FMe(c,e,n){const r=this.cache,o=e.length,u=x3(n,o);Oa(r,u)||(c.uniform1iv(this.addr,u),Na(r,u));for(let h=0;h!==o;++h)n.setTexture3D(e[h]||Rce,u[h])}function UMe(c,e,n){const r=this.cache,o=e.length,u=x3(n,o);Oa(r,u)||(c.uniform1iv(this.addr,u),Na(r,u));for(let h=0;h!==o;++h)n.setTextureCube(e[h]||Dce,u[h])}function BMe(c,e,n){const r=this.cache,o=e.length,u=x3(n,o);Oa(r,u)||(c.uniform1iv(this.addr,u),Na(r,u));for(let h=0;h!==o;++h)n.setTexture2DArray(e[h]||Ice,u[h])}function zMe(c){switch(c){case 5126:return xMe;case 35664:return SMe;case 35665:return wMe;case 35666:return EMe;case 35674:return TMe;case 35675:return MMe;case 35676:return PMe;case 5124:case 35670:return CMe;case 35667:case 35671:return AMe;case 35668:case 35672:return kMe;case 35669:case 35673:return IMe;case 5125:return RMe;case 36294:return DMe;case 36295:return OMe;case 36296:return NMe;case 35678:case 36198:case 36298:case 36306:case 35682:return LMe;case 35679:case 36299:case 36307:return FMe;case 35680:case 36300:case 36308:case 36293:return UMe;case 36289:case 36303:case 36311:case 36292:return BMe}}class jMe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=bMe(n.type)}}class VMe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=zMe(n.type)}}class HMe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const o=this.seq;for(let u=0,h=o.length;u!==h;++u){const m=o[u];m.setValue(e,n[m.id],r)}}}const P4=/(\w+)(\])?(\[|\.)?/g;function Hle(c,e){c.seq.push(e),c.map[e.id]=e}function GMe(c,e,n){const r=c.name,o=r.length;for(P4.lastIndex=0;;){const u=P4.exec(r),h=P4.lastIndex;let m=u[1];const b=u[2]==="]",S=u[3];if(b&&(m=m|0),S===void 0||S==="["&&h+2===o){Hle(n,S===void 0?new jMe(m,c,e):new VMe(m,c,e));break}else{let k=n.map[m];k===void 0&&(k=new HMe(m),Hle(n,k)),n=k}}}class jI{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let h=0;h<r;++h){const m=e.getActiveUniform(n,h),b=e.getUniformLocation(n,m.name);GMe(m,b,this)}const o=[],u=[];for(const h of this.seq)h.type===e.SAMPLER_2D_SHADOW||h.type===e.SAMPLER_CUBE_SHADOW||h.type===e.SAMPLER_2D_ARRAY_SHADOW?o.push(h):u.push(h);o.length>0&&(this.seq=o.concat(u))}setValue(e,n,r,o){const u=this.map[n];u!==void 0&&u.setValue(e,r,o)}setOptional(e,n,r){const o=n[r];o!==void 0&&this.setValue(e,r,o)}static upload(e,n,r,o){for(let u=0,h=n.length;u!==h;++u){const m=n[u],b=r[m.id];b.needsUpdate!==!1&&m.setValue(e,b.value,o)}}static seqWithValue(e,n){const r=[];for(let o=0,u=e.length;o!==u;++o){const h=e[o];h.id in n&&r.push(h)}return r}}function Gle(c,e,n){const r=c.createShader(e);return c.shaderSource(r,n),c.compileShader(r),r}const WMe=37297;let qMe=0;function XMe(c,e){const n=c.split(`
`),r=[],o=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let h=o;h<u;h++){const m=h+1;r.push(`${m===e?">":" "} ${m}: ${n[h]}`)}return r.join(`
`)}const Wle=new br;function KMe(c){Or._getMatrix(Wle,Or.workingColorSpace,c);const e=`mat3( ${Wle.elements.map(n=>n.toFixed(4))} )`;switch(Or.getTransfer(c)){case JI:return[e,"LinearTransferOETF"];case ai:return[e,"sRGBTransferOETF"];default:return Wn("WebGLProgram: Unsupported color space: ",c),[e,"LinearTransferOETF"]}}function qle(c,e,n){const r=c.getShaderParameter(e,c.COMPILE_STATUS),u=(c.getShaderInfoLog(e)||"").trim();if(r&&u==="")return"";const h=/ERROR: 0:(\d+)/.exec(u);if(h){const m=parseInt(h[1]);return n.toUpperCase()+`

`+u+`

`+XMe(c.getShaderSource(e),m)}else return u}function YMe(c,e){const n=KMe(e);return[`vec4 ${c}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}const $Me={[Yue]:"Linear",[$ue]:"Reinhard",[Zue]:"Cineon",[Sj]:"ACESFilmic",[Que]:"AgX",[ece]:"Neutral",[Jue]:"Custom"};function ZMe(c,e){const n=$Me[e];return n===void 0?(Wn("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+c+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+c+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const _I=new Xe;function JMe(){Or.getLuminanceCoefficients(_I);const c=_I.x.toFixed(4),e=_I.y.toFixed(4),n=_I.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${c}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function QMe(c){return[c.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",c.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(tw).join(`
`)}function ePe(c){const e=[];for(const n in c){const r=c[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function tPe(c,e){const n={},r=c.getProgramParameter(e,c.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const u=c.getActiveAttrib(e,o),h=u.name;let m=1;u.type===c.FLOAT_MAT2&&(m=2),u.type===c.FLOAT_MAT3&&(m=3),u.type===c.FLOAT_MAT4&&(m=4),n[h]={type:u.type,location:c.getAttribLocation(e,h),locationSize:m}}return n}function tw(c){return c!==""}function Xle(c,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return c.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kle(c,e){return c.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const nPe=/^[ \t]*#include +<([\w\d./]+)>/gm;function qz(c){return c.replace(nPe,iPe)}const rPe=new Map;function iPe(c,e){let n=Sr[e];if(n===void 0){const r=rPe.get(e);if(r!==void 0)n=Sr[r],Wn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return qz(n)}const aPe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Yle(c){return c.replace(aPe,oPe)}function oPe(c,e,n,r){let o="";for(let u=parseInt(e);u<parseInt(n);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function $le(c){let e=`precision ${c.precision} float;
	precision ${c.precision} int;
	precision ${c.precision} sampler2D;
	precision ${c.precision} samplerCube;
	precision ${c.precision} sampler3D;
	precision ${c.precision} sampler2DArray;
	precision ${c.precision} sampler2DShadow;
	precision ${c.precision} samplerCubeShadow;
	precision ${c.precision} sampler2DArrayShadow;
	precision ${c.precision} isampler2D;
	precision ${c.precision} isampler3D;
	precision ${c.precision} isamplerCube;
	precision ${c.precision} isampler2DArray;
	precision ${c.precision} usampler2D;
	precision ${c.precision} usampler3D;
	precision ${c.precision} usamplerCube;
	precision ${c.precision} usampler2DArray;
	`;return c.precision==="highp"?e+=`
#define HIGH_PRECISION`:c.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:c.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const sPe={[NI]:"SHADOWMAP_TYPE_PCF",[QS]:"SHADOWMAP_TYPE_VSM"};function lPe(c){return sPe[c.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const uPe={[vg]:"ENVMAP_TYPE_CUBE",[dy]:"ENVMAP_TYPE_CUBE",[v3]:"ENVMAP_TYPE_CUBE_UV"};function cPe(c){return c.envMap===!1?"ENVMAP_TYPE_CUBE":uPe[c.envMapMode]||"ENVMAP_TYPE_CUBE"}const dPe={[dy]:"ENVMAP_MODE_REFRACTION"};function fPe(c){return c.envMap===!1?"ENVMAP_MODE_REFLECTION":dPe[c.envMapMode]||"ENVMAP_MODE_REFLECTION"}const hPe={[Kue]:"ENVMAP_BLENDING_MULTIPLY",[l1e]:"ENVMAP_BLENDING_MIX",[u1e]:"ENVMAP_BLENDING_ADD"};function pPe(c){return c.envMap===!1?"ENVMAP_BLENDING_NONE":hPe[c.combine]||"ENVMAP_BLENDING_NONE"}function mPe(c){const e=c.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function gPe(c,e,n,r){const o=c.getContext(),u=n.defines;let h=n.vertexShader,m=n.fragmentShader;const b=lPe(n),S=cPe(n),T=fPe(n),k=pPe(n),O=mPe(n),L=QMe(n),H=ePe(u),G=o.createProgram();let V,I,K=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(V=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,H].filter(tw).join(`
`),V.length>0&&(V+=`
`),I=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,H].filter(tw).join(`
`),I.length>0&&(I+=`
`)):(V=[$le(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,H,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+T:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(tw).join(`
`),I=[$le(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,H,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+S:"",n.envMap?"#define "+T:"",n.envMap?"#define "+k:"",O?"#define CUBEUV_TEXEL_WIDTH "+O.texelWidth:"",O?"#define CUBEUV_TEXEL_HEIGHT "+O.texelHeight:"",O?"#define CUBEUV_MAX_MIP "+O.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ac?"#define TONE_MAPPING":"",n.toneMapping!==Ac?Sr.tonemapping_pars_fragment:"",n.toneMapping!==Ac?ZMe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Sr.colorspace_pars_fragment,YMe("linearToOutputTexel",n.outputColorSpace),JMe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(tw).join(`
`)),h=qz(h),h=Xle(h,n),h=Kle(h,n),m=qz(m),m=Xle(m,n),m=Kle(m,n),h=Yle(h),m=Yle(m),n.isRawShaderMaterial!==!0&&(K=`#version 300 es
`,V=[L,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+V,I=["#define varying in",n.glslVersion===Kse?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Kse?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+I);const ue=K+V+h,P=K+I+m,ae=Gle(o,o.VERTEX_SHADER,ue),ge=Gle(o,o.FRAGMENT_SHADER,P);o.attachShader(G,ae),o.attachShader(G,ge),n.index0AttributeName!==void 0?o.bindAttribLocation(G,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(G,0,"position"),o.linkProgram(G);function me(Y){if(c.debug.checkShaderErrors){const ke=o.getProgramInfoLog(G)||"",$e=o.getShaderInfoLog(ae)||"",ot=o.getShaderInfoLog(ge)||"",Qe=ke.trim(),pe=$e.trim(),Ve=ot.trim();let Ue=!0,Pt=!0;if(o.getProgramParameter(G,o.LINK_STATUS)===!1)if(Ue=!1,typeof c.debug.onShaderError=="function")c.debug.onShaderError(o,G,ae,ge);else{const Me=qle(o,ae,"vertex"),Ot=qle(o,ge,"fragment");ar("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(G,o.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+Qe+`
`+Me+`
`+Ot)}else Qe!==""?Wn("WebGLProgram: Program Info Log:",Qe):(pe===""||Ve==="")&&(Pt=!1);Pt&&(Y.diagnostics={runnable:Ue,programLog:Qe,vertexShader:{log:pe,prefix:V},fragmentShader:{log:Ve,prefix:I}})}o.deleteShader(ae),o.deleteShader(ge),J=new jI(o,G),te=tPe(o,G)}let J;this.getUniforms=function(){return J===void 0&&me(this),J};let te;this.getAttributes=function(){return te===void 0&&me(this),te};let oe=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return oe===!1&&(oe=o.getProgramParameter(G,WMe)),oe},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(G),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=qMe++,this.cacheKey=e,this.usedTimes=1,this.program=G,this.vertexShader=ae,this.fragmentShader=ge,this}let vPe=0;class _Pe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(n),u=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return h.has(o)===!1&&(h.add(o),o.usedTimes++),h.has(u)===!1&&(h.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new yPe(e),n.set(e,r)),r}}class yPe{constructor(e){this.id=vPe++,this.code=e,this.usedTimes=0}}function bPe(c,e,n,r,o,u,h){const m=new hce,b=new _Pe,S=new Set,T=[],k=new Map,O=o.logarithmicDepthBuffer;let L=o.precision;const H={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function G(te){return S.add(te),te===0?"uv":`uv${te}`}function V(te,oe,Y,ke,$e){const ot=ke.fog,Qe=$e.geometry,pe=te.isMeshStandardMaterial?ke.environment:null,Ve=(te.isMeshStandardMaterial?n:e).get(te.envMap||pe),Ue=Ve&&Ve.mapping===v3?Ve.image.height:null,Pt=H[te.type];te.precision!==null&&(L=o.getMaxPrecision(te.precision),L!==te.precision&&Wn("WebGLProgram.getParameters:",te.precision,"not supported, using",L,"instead."));const Me=Qe.morphAttributes.position||Qe.morphAttributes.normal||Qe.morphAttributes.color,Ot=Me!==void 0?Me.length:0;let Tn=0;Qe.morphAttributes.position!==void 0&&(Tn=1),Qe.morphAttributes.normal!==void 0&&(Tn=2),Qe.morphAttributes.color!==void 0&&(Tn=3);let yn,qn,Dn,xt;if(Pt){const en=Sc[Pt];yn=en.vertexShader,qn=en.fragmentShader}else yn=te.vertexShader,qn=te.fragmentShader,b.update(te),Dn=b.getVertexShaderID(te),xt=b.getFragmentShaderID(te);const vt=c.getRenderTarget(),Zt=c.state.buffers.depth.getReversed(),Mn=$e.isInstancedMesh===!0,sn=$e.isBatchedMesh===!0,Fn=!!te.map,fr=!!te.matcap,pn=!!Ve,zn=!!te.aoMap,nr=!!te.lightMap,Un=!!te.bumpMap,st=!!te.normalMap,De=!!te.displacementMap,or=!!te.emissiveMap,sr=!!te.metalnessMap,Pn=!!te.roughnessMap,Jt=te.anisotropy>0,we=te.clearcoat>0,ie=te.dispersion>0,ze=te.iridescence>0,St=te.sheen>0,_t=te.transmission>0,mt=Jt&&!!te.anisotropyMap,ln=we&&!!te.clearcoatMap,Wt=we&&!!te.clearcoatNormalMap,dn=we&&!!te.clearcoatRoughnessMap,fn=ze&&!!te.iridescenceMap,At=ze&&!!te.iridescenceThicknessMap,Kt=St&&!!te.sheenColorMap,hn=St&&!!te.sheenRoughnessMap,mn=!!te.specularMap,qt=!!te.specularColorMap,Xn=!!te.specularIntensityMap,Ae=_t&&!!te.transmissionMap,Gt=_t&&!!te.thicknessMap,Dt=!!te.gradientMap,Xt=!!te.alphaMap,Ct=te.alphaTest>0,Mt=!!te.alphaHash,Yt=!!te.extensions;let Sn=Ac;te.toneMapped&&(vt===null||vt.isXRRenderTarget===!0)&&(Sn=c.toneMapping);const _r={shaderID:Pt,shaderType:te.type,shaderName:te.name,vertexShader:yn,fragmentShader:qn,defines:te.defines,customVertexShaderID:Dn,customFragmentShaderID:xt,isRawShaderMaterial:te.isRawShaderMaterial===!0,glslVersion:te.glslVersion,precision:L,batching:sn,batchingColor:sn&&$e._colorsTexture!==null,instancing:Mn,instancingColor:Mn&&$e.instanceColor!==null,instancingMorph:Mn&&$e.morphTexture!==null,outputColorSpace:vt===null?c.outputColorSpace:vt.isXRRenderTarget===!0?vt.texture.colorSpace:Oo,alphaToCoverage:!!te.alphaToCoverage,map:Fn,matcap:fr,envMap:pn,envMapMode:pn&&Ve.mapping,envMapCubeUVHeight:Ue,aoMap:zn,lightMap:nr,bumpMap:Un,normalMap:st,displacementMap:De,emissiveMap:or,normalMapObjectSpace:st&&te.normalMapType===p1e,normalMapTangentSpace:st&&te.normalMapType===cce,metalnessMap:sr,roughnessMap:Pn,anisotropy:Jt,anisotropyMap:mt,clearcoat:we,clearcoatMap:ln,clearcoatNormalMap:Wt,clearcoatRoughnessMap:dn,dispersion:ie,iridescence:ze,iridescenceMap:fn,iridescenceThicknessMap:At,sheen:St,sheenColorMap:Kt,sheenRoughnessMap:hn,specularMap:mn,specularColorMap:qt,specularIntensityMap:Xn,transmission:_t,transmissionMap:Ae,thicknessMap:Gt,gradientMap:Dt,opaque:te.transparent===!1&&te.blending===ty&&te.alphaToCoverage===!1,alphaMap:Xt,alphaTest:Ct,alphaHash:Mt,combine:te.combine,mapUv:Fn&&G(te.map.channel),aoMapUv:zn&&G(te.aoMap.channel),lightMapUv:nr&&G(te.lightMap.channel),bumpMapUv:Un&&G(te.bumpMap.channel),normalMapUv:st&&G(te.normalMap.channel),displacementMapUv:De&&G(te.displacementMap.channel),emissiveMapUv:or&&G(te.emissiveMap.channel),metalnessMapUv:sr&&G(te.metalnessMap.channel),roughnessMapUv:Pn&&G(te.roughnessMap.channel),anisotropyMapUv:mt&&G(te.anisotropyMap.channel),clearcoatMapUv:ln&&G(te.clearcoatMap.channel),clearcoatNormalMapUv:Wt&&G(te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dn&&G(te.clearcoatRoughnessMap.channel),iridescenceMapUv:fn&&G(te.iridescenceMap.channel),iridescenceThicknessMapUv:At&&G(te.iridescenceThicknessMap.channel),sheenColorMapUv:Kt&&G(te.sheenColorMap.channel),sheenRoughnessMapUv:hn&&G(te.sheenRoughnessMap.channel),specularMapUv:mn&&G(te.specularMap.channel),specularColorMapUv:qt&&G(te.specularColorMap.channel),specularIntensityMapUv:Xn&&G(te.specularIntensityMap.channel),transmissionMapUv:Ae&&G(te.transmissionMap.channel),thicknessMapUv:Gt&&G(te.thicknessMap.channel),alphaMapUv:Xt&&G(te.alphaMap.channel),vertexTangents:!!Qe.attributes.tangent&&(st||Jt),vertexColors:te.vertexColors,vertexAlphas:te.vertexColors===!0&&!!Qe.attributes.color&&Qe.attributes.color.itemSize===4,pointsUvs:$e.isPoints===!0&&!!Qe.attributes.uv&&(Fn||Xt),fog:!!ot,useFog:te.fog===!0,fogExp2:!!ot&&ot.isFogExp2,flatShading:te.flatShading===!0&&te.wireframe===!1,sizeAttenuation:te.sizeAttenuation===!0,logarithmicDepthBuffer:O,reversedDepthBuffer:Zt,skinning:$e.isSkinnedMesh===!0,morphTargets:Qe.morphAttributes.position!==void 0,morphNormals:Qe.morphAttributes.normal!==void 0,morphColors:Qe.morphAttributes.color!==void 0,morphTargetsCount:Ot,morphTextureStride:Tn,numDirLights:oe.directional.length,numPointLights:oe.point.length,numSpotLights:oe.spot.length,numSpotLightMaps:oe.spotLightMap.length,numRectAreaLights:oe.rectArea.length,numHemiLights:oe.hemi.length,numDirLightShadows:oe.directionalShadowMap.length,numPointLightShadows:oe.pointShadowMap.length,numSpotLightShadows:oe.spotShadowMap.length,numSpotLightShadowsWithMaps:oe.numSpotLightShadowsWithMaps,numLightProbes:oe.numLightProbes,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:te.dithering,shadowMapEnabled:c.shadowMap.enabled&&Y.length>0,shadowMapType:c.shadowMap.type,toneMapping:Sn,decodeVideoTexture:Fn&&te.map.isVideoTexture===!0&&Or.getTransfer(te.map.colorSpace)===ai,decodeVideoTextureEmissive:or&&te.emissiveMap.isVideoTexture===!0&&Or.getTransfer(te.emissiveMap.colorSpace)===ai,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===wc,flipSided:te.side===os,useDepthPacking:te.depthPacking>=0,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionClipCullDistance:Yt&&te.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Yt&&te.extensions.multiDraw===!0||sn)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:te.customProgramCacheKey()};return _r.vertexUv1s=S.has(1),_r.vertexUv2s=S.has(2),_r.vertexUv3s=S.has(3),S.clear(),_r}function I(te){const oe=[];if(te.shaderID?oe.push(te.shaderID):(oe.push(te.customVertexShaderID),oe.push(te.customFragmentShaderID)),te.defines!==void 0)for(const Y in te.defines)oe.push(Y),oe.push(te.defines[Y]);return te.isRawShaderMaterial===!1&&(K(oe,te),ue(oe,te),oe.push(c.outputColorSpace)),oe.push(te.customProgramCacheKey),oe.join()}function K(te,oe){te.push(oe.precision),te.push(oe.outputColorSpace),te.push(oe.envMapMode),te.push(oe.envMapCubeUVHeight),te.push(oe.mapUv),te.push(oe.alphaMapUv),te.push(oe.lightMapUv),te.push(oe.aoMapUv),te.push(oe.bumpMapUv),te.push(oe.normalMapUv),te.push(oe.displacementMapUv),te.push(oe.emissiveMapUv),te.push(oe.metalnessMapUv),te.push(oe.roughnessMapUv),te.push(oe.anisotropyMapUv),te.push(oe.clearcoatMapUv),te.push(oe.clearcoatNormalMapUv),te.push(oe.clearcoatRoughnessMapUv),te.push(oe.iridescenceMapUv),te.push(oe.iridescenceThicknessMapUv),te.push(oe.sheenColorMapUv),te.push(oe.sheenRoughnessMapUv),te.push(oe.specularMapUv),te.push(oe.specularColorMapUv),te.push(oe.specularIntensityMapUv),te.push(oe.transmissionMapUv),te.push(oe.thicknessMapUv),te.push(oe.combine),te.push(oe.fogExp2),te.push(oe.sizeAttenuation),te.push(oe.morphTargetsCount),te.push(oe.morphAttributeCount),te.push(oe.numDirLights),te.push(oe.numPointLights),te.push(oe.numSpotLights),te.push(oe.numSpotLightMaps),te.push(oe.numHemiLights),te.push(oe.numRectAreaLights),te.push(oe.numDirLightShadows),te.push(oe.numPointLightShadows),te.push(oe.numSpotLightShadows),te.push(oe.numSpotLightShadowsWithMaps),te.push(oe.numLightProbes),te.push(oe.shadowMapType),te.push(oe.toneMapping),te.push(oe.numClippingPlanes),te.push(oe.numClipIntersection),te.push(oe.depthPacking)}function ue(te,oe){m.disableAll(),oe.instancing&&m.enable(0),oe.instancingColor&&m.enable(1),oe.instancingMorph&&m.enable(2),oe.matcap&&m.enable(3),oe.envMap&&m.enable(4),oe.normalMapObjectSpace&&m.enable(5),oe.normalMapTangentSpace&&m.enable(6),oe.clearcoat&&m.enable(7),oe.iridescence&&m.enable(8),oe.alphaTest&&m.enable(9),oe.vertexColors&&m.enable(10),oe.vertexAlphas&&m.enable(11),oe.vertexUv1s&&m.enable(12),oe.vertexUv2s&&m.enable(13),oe.vertexUv3s&&m.enable(14),oe.vertexTangents&&m.enable(15),oe.anisotropy&&m.enable(16),oe.alphaHash&&m.enable(17),oe.batching&&m.enable(18),oe.dispersion&&m.enable(19),oe.batchingColor&&m.enable(20),oe.gradientMap&&m.enable(21),te.push(m.mask),m.disableAll(),oe.fog&&m.enable(0),oe.useFog&&m.enable(1),oe.flatShading&&m.enable(2),oe.logarithmicDepthBuffer&&m.enable(3),oe.reversedDepthBuffer&&m.enable(4),oe.skinning&&m.enable(5),oe.morphTargets&&m.enable(6),oe.morphNormals&&m.enable(7),oe.morphColors&&m.enable(8),oe.premultipliedAlpha&&m.enable(9),oe.shadowMapEnabled&&m.enable(10),oe.doubleSided&&m.enable(11),oe.flipSided&&m.enable(12),oe.useDepthPacking&&m.enable(13),oe.dithering&&m.enable(14),oe.transmission&&m.enable(15),oe.sheen&&m.enable(16),oe.opaque&&m.enable(17),oe.pointsUvs&&m.enable(18),oe.decodeVideoTexture&&m.enable(19),oe.decodeVideoTextureEmissive&&m.enable(20),oe.alphaToCoverage&&m.enable(21),te.push(m.mask)}function P(te){const oe=H[te.type];let Y;if(oe){const ke=Sc[oe];Y=t3.clone(ke.uniforms)}else Y=te.uniforms;return Y}function ae(te,oe){let Y=k.get(oe);return Y!==void 0?++Y.usedTimes:(Y=new gPe(c,oe,te,u),T.push(Y),k.set(oe,Y)),Y}function ge(te){if(--te.usedTimes===0){const oe=T.indexOf(te);T[oe]=T[T.length-1],T.pop(),k.delete(te.cacheKey),te.destroy()}}function me(te){b.remove(te)}function J(){b.dispose()}return{getParameters:V,getProgramCacheKey:I,getUniforms:P,acquireProgram:ae,releaseProgram:ge,releaseShaderCache:me,programs:T,dispose:J}}function xPe(){let c=new WeakMap;function e(h){return c.has(h)}function n(h){let m=c.get(h);return m===void 0&&(m={},c.set(h,m)),m}function r(h){c.delete(h)}function o(h,m,b){c.get(h)[m]=b}function u(){c=new WeakMap}return{has:e,get:n,remove:r,update:o,dispose:u}}function SPe(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.material.id!==e.material.id?c.material.id-e.material.id:c.z!==e.z?c.z-e.z:c.id-e.id}function Zle(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.z!==e.z?e.z-c.z:c.id-e.id}function Jle(){const c=[];let e=0;const n=[],r=[],o=[];function u(){e=0,n.length=0,r.length=0,o.length=0}function h(k,O,L,H,G,V){let I=c[e];return I===void 0?(I={id:k.id,object:k,geometry:O,material:L,groupOrder:H,renderOrder:k.renderOrder,z:G,group:V},c[e]=I):(I.id=k.id,I.object=k,I.geometry=O,I.material=L,I.groupOrder=H,I.renderOrder=k.renderOrder,I.z=G,I.group=V),e++,I}function m(k,O,L,H,G,V){const I=h(k,O,L,H,G,V);L.transmission>0?r.push(I):L.transparent===!0?o.push(I):n.push(I)}function b(k,O,L,H,G,V){const I=h(k,O,L,H,G,V);L.transmission>0?r.unshift(I):L.transparent===!0?o.unshift(I):n.unshift(I)}function S(k,O){n.length>1&&n.sort(k||SPe),r.length>1&&r.sort(O||Zle),o.length>1&&o.sort(O||Zle)}function T(){for(let k=e,O=c.length;k<O;k++){const L=c[k];if(L.id===null)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}}return{opaque:n,transmissive:r,transparent:o,init:u,push:m,unshift:b,finish:T,sort:S}}function wPe(){let c=new WeakMap;function e(r,o){const u=c.get(r);let h;return u===void 0?(h=new Jle,c.set(r,[h])):o>=u.length?(h=new Jle,u.push(h)):h=u[o],h}function n(){c=new WeakMap}return{get:e,dispose:n}}function EPe(){const c={};return{get:function(e){if(c[e.id]!==void 0)return c[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Xe,color:new tr};break;case"SpotLight":n={position:new Xe,direction:new Xe,color:new tr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Xe,color:new tr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Xe,skyColor:new tr,groundColor:new tr};break;case"RectAreaLight":n={color:new tr,position:new Xe,halfWidth:new Xe,halfHeight:new Xe};break}return c[e.id]=n,n}}}function TPe(){const c={};return{get:function(e){if(c[e.id]!==void 0)return c[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gr};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gr};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gr,shadowCameraNear:1,shadowCameraFar:1e3};break}return c[e.id]=n,n}}}let MPe=0;function PPe(c,e){return(e.castShadow?2:0)-(c.castShadow?2:0)+(e.map?1:0)-(c.map?1:0)}function CPe(c){const e=new EPe,n=TPe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let S=0;S<9;S++)r.probe.push(new Xe);const o=new Xe,u=new vr,h=new vr;function m(S){let T=0,k=0,O=0;for(let te=0;te<9;te++)r.probe[te].set(0,0,0);let L=0,H=0,G=0,V=0,I=0,K=0,ue=0,P=0,ae=0,ge=0,me=0;S.sort(PPe);for(let te=0,oe=S.length;te<oe;te++){const Y=S[te],ke=Y.color,$e=Y.intensity,ot=Y.distance;let Qe=null;if(Y.shadow&&Y.shadow.map&&(Y.shadow.map.texture.format===fy?Qe=Y.shadow.map.texture:Qe=Y.shadow.map.depthTexture||Y.shadow.map.texture),Y.isAmbientLight)T+=ke.r*$e,k+=ke.g*$e,O+=ke.b*$e;else if(Y.isLightProbe){for(let pe=0;pe<9;pe++)r.probe[pe].addScaledVector(Y.sh.coefficients[pe],$e);me++}else if(Y.isDirectionalLight){const pe=e.get(Y);if(pe.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const Ve=Y.shadow,Ue=n.get(Y);Ue.shadowIntensity=Ve.intensity,Ue.shadowBias=Ve.bias,Ue.shadowNormalBias=Ve.normalBias,Ue.shadowRadius=Ve.radius,Ue.shadowMapSize=Ve.mapSize,r.directionalShadow[L]=Ue,r.directionalShadowMap[L]=Qe,r.directionalShadowMatrix[L]=Y.shadow.matrix,K++}r.directional[L]=pe,L++}else if(Y.isSpotLight){const pe=e.get(Y);pe.position.setFromMatrixPosition(Y.matrixWorld),pe.color.copy(ke).multiplyScalar($e),pe.distance=ot,pe.coneCos=Math.cos(Y.angle),pe.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),pe.decay=Y.decay,r.spot[G]=pe;const Ve=Y.shadow;if(Y.map&&(r.spotLightMap[ae]=Y.map,ae++,Ve.updateMatrices(Y),Y.castShadow&&ge++),r.spotLightMatrix[G]=Ve.matrix,Y.castShadow){const Ue=n.get(Y);Ue.shadowIntensity=Ve.intensity,Ue.shadowBias=Ve.bias,Ue.shadowNormalBias=Ve.normalBias,Ue.shadowRadius=Ve.radius,Ue.shadowMapSize=Ve.mapSize,r.spotShadow[G]=Ue,r.spotShadowMap[G]=Qe,P++}G++}else if(Y.isRectAreaLight){const pe=e.get(Y);pe.color.copy(ke).multiplyScalar($e),pe.halfWidth.set(Y.width*.5,0,0),pe.halfHeight.set(0,Y.height*.5,0),r.rectArea[V]=pe,V++}else if(Y.isPointLight){const pe=e.get(Y);if(pe.color.copy(Y.color).multiplyScalar(Y.intensity),pe.distance=Y.distance,pe.decay=Y.decay,Y.castShadow){const Ve=Y.shadow,Ue=n.get(Y);Ue.shadowIntensity=Ve.intensity,Ue.shadowBias=Ve.bias,Ue.shadowNormalBias=Ve.normalBias,Ue.shadowRadius=Ve.radius,Ue.shadowMapSize=Ve.mapSize,Ue.shadowCameraNear=Ve.camera.near,Ue.shadowCameraFar=Ve.camera.far,r.pointShadow[H]=Ue,r.pointShadowMap[H]=Qe,r.pointShadowMatrix[H]=Y.shadow.matrix,ue++}r.point[H]=pe,H++}else if(Y.isHemisphereLight){const pe=e.get(Y);pe.skyColor.copy(Y.color).multiplyScalar($e),pe.groundColor.copy(Y.groundColor).multiplyScalar($e),r.hemi[I]=pe,I++}}V>0&&(c.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=un.LTC_FLOAT_1,r.rectAreaLTC2=un.LTC_FLOAT_2):(r.rectAreaLTC1=un.LTC_HALF_1,r.rectAreaLTC2=un.LTC_HALF_2)),r.ambient[0]=T,r.ambient[1]=k,r.ambient[2]=O;const J=r.hash;(J.directionalLength!==L||J.pointLength!==H||J.spotLength!==G||J.rectAreaLength!==V||J.hemiLength!==I||J.numDirectionalShadows!==K||J.numPointShadows!==ue||J.numSpotShadows!==P||J.numSpotMaps!==ae||J.numLightProbes!==me)&&(r.directional.length=L,r.spot.length=G,r.rectArea.length=V,r.point.length=H,r.hemi.length=I,r.directionalShadow.length=K,r.directionalShadowMap.length=K,r.pointShadow.length=ue,r.pointShadowMap.length=ue,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=K,r.pointShadowMatrix.length=ue,r.spotLightMatrix.length=P+ae-ge,r.spotLightMap.length=ae,r.numSpotLightShadowsWithMaps=ge,r.numLightProbes=me,J.directionalLength=L,J.pointLength=H,J.spotLength=G,J.rectAreaLength=V,J.hemiLength=I,J.numDirectionalShadows=K,J.numPointShadows=ue,J.numSpotShadows=P,J.numSpotMaps=ae,J.numLightProbes=me,r.version=MPe++)}function b(S,T){let k=0,O=0,L=0,H=0,G=0;const V=T.matrixWorldInverse;for(let I=0,K=S.length;I<K;I++){const ue=S[I];if(ue.isDirectionalLight){const P=r.directional[k];P.direction.setFromMatrixPosition(ue.matrixWorld),o.setFromMatrixPosition(ue.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(V),k++}else if(ue.isSpotLight){const P=r.spot[L];P.position.setFromMatrixPosition(ue.matrixWorld),P.position.applyMatrix4(V),P.direction.setFromMatrixPosition(ue.matrixWorld),o.setFromMatrixPosition(ue.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(V),L++}else if(ue.isRectAreaLight){const P=r.rectArea[H];P.position.setFromMatrixPosition(ue.matrixWorld),P.position.applyMatrix4(V),h.identity(),u.copy(ue.matrixWorld),u.premultiply(V),h.extractRotation(u),P.halfWidth.set(ue.width*.5,0,0),P.halfHeight.set(0,ue.height*.5,0),P.halfWidth.applyMatrix4(h),P.halfHeight.applyMatrix4(h),H++}else if(ue.isPointLight){const P=r.point[O];P.position.setFromMatrixPosition(ue.matrixWorld),P.position.applyMatrix4(V),O++}else if(ue.isHemisphereLight){const P=r.hemi[G];P.direction.setFromMatrixPosition(ue.matrixWorld),P.direction.transformDirection(V),G++}}}return{setup:m,setupView:b,state:r}}function Qle(c){const e=new CPe(c),n=[],r=[];function o(T){S.camera=T,n.length=0,r.length=0}function u(T){n.push(T)}function h(T){r.push(T)}function m(){e.setup(n)}function b(T){e.setupView(n,T)}const S={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:S,setupLights:m,setupLightsView:b,pushLight:u,pushShadow:h}}function APe(c){let e=new WeakMap;function n(o,u=0){const h=e.get(o);let m;return h===void 0?(m=new Qle(c),e.set(o,[m])):u>=h.length?(m=new Qle(c),h.push(m)):m=h[u],m}function r(){e=new WeakMap}return{get:n,dispose:r}}const kPe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,IPe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,RPe=[new Xe(1,0,0),new Xe(-1,0,0),new Xe(0,1,0),new Xe(0,-1,0),new Xe(0,0,1),new Xe(0,0,-1)],DPe=[new Xe(0,-1,0),new Xe(0,-1,0),new Xe(0,0,1),new Xe(0,0,-1),new Xe(0,-1,0),new Xe(0,-1,0)],eue=new vr,KS=new Xe,C4=new Xe;function OPe(c,e,n){let r=new Fj;const o=new gr,u=new gr,h=new _i,m=new xSe,b=new SSe,S={},T=n.maxTextureSize,k={[Rc]:os,[os]:Rc,[wc]:wc},O=new rl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gr},radius:{value:4}},vertexShader:kPe,fragmentShader:IPe}),L=O.clone();L.defines.HORIZONTAL_PASS=1;const H=new ol;H.setAttribute("position",new ho(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const G=new No(H,O),V=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=NI;let I=this.type;this.render=function(ge,me,J){if(V.enabled===!1||V.autoUpdate===!1&&V.needsUpdate===!1||ge.length===0)return;ge.type===Hxe&&(Wn("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),ge.type=NI);const te=c.getRenderTarget(),oe=c.getActiveCubeFace(),Y=c.getActiveMipmapLevel(),ke=c.state;ke.setBlending(af),ke.buffers.depth.getReversed()===!0?ke.buffers.color.setClear(0,0,0,0):ke.buffers.color.setClear(1,1,1,1),ke.buffers.depth.setTest(!0),ke.setScissorTest(!1);const $e=I!==this.type;$e&&me.traverse(function(ot){ot.material&&(Array.isArray(ot.material)?ot.material.forEach(Qe=>Qe.needsUpdate=!0):ot.material.needsUpdate=!0)});for(let ot=0,Qe=ge.length;ot<Qe;ot++){const pe=ge[ot],Ve=pe.shadow;if(Ve===void 0){Wn("WebGLShadowMap:",pe,"has no shadow.");continue}if(Ve.autoUpdate===!1&&Ve.needsUpdate===!1)continue;o.copy(Ve.mapSize);const Ue=Ve.getFrameExtents();if(o.multiply(Ue),u.copy(Ve.mapSize),(o.x>T||o.y>T)&&(o.x>T&&(u.x=Math.floor(T/Ue.x),o.x=u.x*Ue.x,Ve.mapSize.x=u.x),o.y>T&&(u.y=Math.floor(T/Ue.y),o.y=u.y*Ue.y,Ve.mapSize.y=u.y)),Ve.map===null||$e===!0){if(Ve.map!==null&&(Ve.map.depthTexture!==null&&(Ve.map.depthTexture.dispose(),Ve.map.depthTexture=null),Ve.map.dispose()),this.type===QS){if(pe.isPointLight){Wn("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Ve.map=new Ol(o.x,o.y,{format:fy,type:lf,minFilter:fa,magFilter:fa,generateMipmaps:!1}),Ve.map.texture.name=pe.name+".shadowMap",Ve.map.depthTexture=new Dw(o.x,o.y,Il),Ve.map.depthTexture.name=pe.name+".shadowMapDepth",Ve.map.depthTexture.format=uf,Ve.map.depthTexture.compareFunction=null,Ve.map.depthTexture.minFilter=Da,Ve.map.depthTexture.magFilter=Da}else{pe.isPointLight?(Ve.map=new bce(o.x),Ve.map.depthTexture=new ySe(o.x,Dc)):(Ve.map=new Ol(o.x,o.y),Ve.map.depthTexture=new Dw(o.x,o.y,Dc)),Ve.map.depthTexture.name=pe.name+".shadowMap",Ve.map.depthTexture.format=uf;const Me=c.state.buffers.depth.getReversed();this.type===NI?(Ve.map.depthTexture.compareFunction=Me?Ij:kj,Ve.map.depthTexture.minFilter=fa,Ve.map.depthTexture.magFilter=fa):(Ve.map.depthTexture.compareFunction=null,Ve.map.depthTexture.minFilter=Da,Ve.map.depthTexture.magFilter=Da)}Ve.camera.updateProjectionMatrix()}const Pt=Ve.map.isWebGLCubeRenderTarget?6:1;for(let Me=0;Me<Pt;Me++){if(Ve.map.isWebGLCubeRenderTarget)c.setRenderTarget(Ve.map,Me),c.clear();else{Me===0&&(c.setRenderTarget(Ve.map),c.clear());const Ot=Ve.getViewport(Me);h.set(u.x*Ot.x,u.y*Ot.y,u.x*Ot.z,u.y*Ot.w),ke.viewport(h)}if(pe.isPointLight){const Ot=Ve.camera,Tn=Ve.matrix,yn=pe.distance||Ot.far;yn!==Ot.far&&(Ot.far=yn,Ot.updateProjectionMatrix()),KS.setFromMatrixPosition(pe.matrixWorld),Ot.position.copy(KS),C4.copy(Ot.position),C4.add(RPe[Me]),Ot.up.copy(DPe[Me]),Ot.lookAt(C4),Ot.updateMatrixWorld(),Tn.makeTranslation(-KS.x,-KS.y,-KS.z),eue.multiplyMatrices(Ot.projectionMatrix,Ot.matrixWorldInverse),Ve._frustum.setFromProjectionMatrix(eue,Ot.coordinateSystem,Ot.reversedDepth)}else Ve.updateMatrices(pe);r=Ve.getFrustum(),P(me,J,Ve.camera,pe,this.type)}Ve.isPointLightShadow!==!0&&this.type===QS&&K(Ve,J),Ve.needsUpdate=!1}I=this.type,V.needsUpdate=!1,c.setRenderTarget(te,oe,Y)};function K(ge,me){const J=e.update(G);O.defines.VSM_SAMPLES!==ge.blurSamples&&(O.defines.VSM_SAMPLES=ge.blurSamples,L.defines.VSM_SAMPLES=ge.blurSamples,O.needsUpdate=!0,L.needsUpdate=!0),ge.mapPass===null&&(ge.mapPass=new Ol(o.x,o.y,{format:fy,type:lf})),O.uniforms.shadow_pass.value=ge.map.depthTexture,O.uniforms.resolution.value=ge.mapSize,O.uniforms.radius.value=ge.radius,c.setRenderTarget(ge.mapPass),c.clear(),c.renderBufferDirect(me,null,J,O,G,null),L.uniforms.shadow_pass.value=ge.mapPass.texture,L.uniforms.resolution.value=ge.mapSize,L.uniforms.radius.value=ge.radius,c.setRenderTarget(ge.map),c.clear(),c.renderBufferDirect(me,null,J,L,G,null)}function ue(ge,me,J,te){let oe=null;const Y=J.isPointLight===!0?ge.customDistanceMaterial:ge.customDepthMaterial;if(Y!==void 0)oe=Y;else if(oe=J.isPointLight===!0?b:m,c.localClippingEnabled&&me.clipShadows===!0&&Array.isArray(me.clippingPlanes)&&me.clippingPlanes.length!==0||me.displacementMap&&me.displacementScale!==0||me.alphaMap&&me.alphaTest>0||me.map&&me.alphaTest>0||me.alphaToCoverage===!0){const ke=oe.uuid,$e=me.uuid;let ot=S[ke];ot===void 0&&(ot={},S[ke]=ot);let Qe=ot[$e];Qe===void 0&&(Qe=oe.clone(),ot[$e]=Qe,me.addEventListener("dispose",ae)),oe=Qe}if(oe.visible=me.visible,oe.wireframe=me.wireframe,te===QS?oe.side=me.shadowSide!==null?me.shadowSide:me.side:oe.side=me.shadowSide!==null?me.shadowSide:k[me.side],oe.alphaMap=me.alphaMap,oe.alphaTest=me.alphaToCoverage===!0?.5:me.alphaTest,oe.map=me.map,oe.clipShadows=me.clipShadows,oe.clippingPlanes=me.clippingPlanes,oe.clipIntersection=me.clipIntersection,oe.displacementMap=me.displacementMap,oe.displacementScale=me.displacementScale,oe.displacementBias=me.displacementBias,oe.wireframeLinewidth=me.wireframeLinewidth,oe.linewidth=me.linewidth,J.isPointLight===!0&&oe.isMeshDistanceMaterial===!0){const ke=c.properties.get(oe);ke.light=J}return oe}function P(ge,me,J,te,oe){if(ge.visible===!1)return;if(ge.layers.test(me.layers)&&(ge.isMesh||ge.isLine||ge.isPoints)&&(ge.castShadow||ge.receiveShadow&&oe===QS)&&(!ge.frustumCulled||r.intersectsObject(ge))){ge.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,ge.matrixWorld);const $e=e.update(ge),ot=ge.material;if(Array.isArray(ot)){const Qe=$e.groups;for(let pe=0,Ve=Qe.length;pe<Ve;pe++){const Ue=Qe[pe],Pt=ot[Ue.materialIndex];if(Pt&&Pt.visible){const Me=ue(ge,Pt,te,oe);ge.onBeforeShadow(c,ge,me,J,$e,Me,Ue),c.renderBufferDirect(J,null,$e,Me,ge,Ue),ge.onAfterShadow(c,ge,me,J,$e,Me,Ue)}}}else if(ot.visible){const Qe=ue(ge,ot,te,oe);ge.onBeforeShadow(c,ge,me,J,$e,Qe,null),c.renderBufferDirect(J,null,$e,Qe,ge,null),ge.onAfterShadow(c,ge,me,J,$e,Qe,null)}}const ke=ge.children;for(let $e=0,ot=ke.length;$e<ot;$e++)P(ke[$e],me,J,te,oe)}function ae(ge){ge.target.removeEventListener("dispose",ae);for(const J in S){const te=S[J],oe=ge.target.uuid;oe in te&&(te[oe].dispose(),delete te[oe])}}}const NPe={[Q4]:ez,[tz]:iz,[nz]:az,[cy]:rz,[ez]:Q4,[iz]:tz,[az]:nz,[rz]:cy};function LPe(c,e){function n(){let Ae=!1;const Gt=new _i;let Dt=null;const Xt=new _i(0,0,0,0);return{setMask:function(Ct){Dt!==Ct&&!Ae&&(c.colorMask(Ct,Ct,Ct,Ct),Dt=Ct)},setLocked:function(Ct){Ae=Ct},setClear:function(Ct,Mt,Yt,Sn,_r){_r===!0&&(Ct*=Sn,Mt*=Sn,Yt*=Sn),Gt.set(Ct,Mt,Yt,Sn),Xt.equals(Gt)===!1&&(c.clearColor(Ct,Mt,Yt,Sn),Xt.copy(Gt))},reset:function(){Ae=!1,Dt=null,Xt.set(-1,0,0,0)}}}function r(){let Ae=!1,Gt=!1,Dt=null,Xt=null,Ct=null;return{setReversed:function(Mt){if(Gt!==Mt){const Yt=e.get("EXT_clip_control");Mt?Yt.clipControlEXT(Yt.LOWER_LEFT_EXT,Yt.ZERO_TO_ONE_EXT):Yt.clipControlEXT(Yt.LOWER_LEFT_EXT,Yt.NEGATIVE_ONE_TO_ONE_EXT),Gt=Mt;const Sn=Ct;Ct=null,this.setClear(Sn)}},getReversed:function(){return Gt},setTest:function(Mt){Mt?vt(c.DEPTH_TEST):Zt(c.DEPTH_TEST)},setMask:function(Mt){Dt!==Mt&&!Ae&&(c.depthMask(Mt),Dt=Mt)},setFunc:function(Mt){if(Gt&&(Mt=NPe[Mt]),Xt!==Mt){switch(Mt){case Q4:c.depthFunc(c.NEVER);break;case ez:c.depthFunc(c.ALWAYS);break;case tz:c.depthFunc(c.LESS);break;case cy:c.depthFunc(c.LEQUAL);break;case nz:c.depthFunc(c.EQUAL);break;case rz:c.depthFunc(c.GEQUAL);break;case iz:c.depthFunc(c.GREATER);break;case az:c.depthFunc(c.NOTEQUAL);break;default:c.depthFunc(c.LEQUAL)}Xt=Mt}},setLocked:function(Mt){Ae=Mt},setClear:function(Mt){Ct!==Mt&&(Gt&&(Mt=1-Mt),c.clearDepth(Mt),Ct=Mt)},reset:function(){Ae=!1,Dt=null,Xt=null,Ct=null,Gt=!1}}}function o(){let Ae=!1,Gt=null,Dt=null,Xt=null,Ct=null,Mt=null,Yt=null,Sn=null,_r=null;return{setTest:function(en){Ae||(en?vt(c.STENCIL_TEST):Zt(c.STENCIL_TEST))},setMask:function(en){Gt!==en&&!Ae&&(c.stencilMask(en),Gt=en)},setFunc:function(en,vn,rr){(Dt!==en||Xt!==vn||Ct!==rr)&&(c.stencilFunc(en,vn,rr),Dt=en,Xt=vn,Ct=rr)},setOp:function(en,vn,rr){(Mt!==en||Yt!==vn||Sn!==rr)&&(c.stencilOp(en,vn,rr),Mt=en,Yt=vn,Sn=rr)},setLocked:function(en){Ae=en},setClear:function(en){_r!==en&&(c.clearStencil(en),_r=en)},reset:function(){Ae=!1,Gt=null,Dt=null,Xt=null,Ct=null,Mt=null,Yt=null,Sn=null,_r=null}}}const u=new n,h=new r,m=new o,b=new WeakMap,S=new WeakMap;let T={},k={},O=new WeakMap,L=[],H=null,G=!1,V=null,I=null,K=null,ue=null,P=null,ae=null,ge=null,me=new tr(0,0,0),J=0,te=!1,oe=null,Y=null,ke=null,$e=null,ot=null;const Qe=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let pe=!1,Ve=0;const Ue=c.getParameter(c.VERSION);Ue.indexOf("WebGL")!==-1?(Ve=parseFloat(/^WebGL (\d)/.exec(Ue)[1]),pe=Ve>=1):Ue.indexOf("OpenGL ES")!==-1&&(Ve=parseFloat(/^OpenGL ES (\d)/.exec(Ue)[1]),pe=Ve>=2);let Pt=null,Me={};const Ot=c.getParameter(c.SCISSOR_BOX),Tn=c.getParameter(c.VIEWPORT),yn=new _i().fromArray(Ot),qn=new _i().fromArray(Tn);function Dn(Ae,Gt,Dt,Xt){const Ct=new Uint8Array(4),Mt=c.createTexture();c.bindTexture(Ae,Mt),c.texParameteri(Ae,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(Ae,c.TEXTURE_MAG_FILTER,c.NEAREST);for(let Yt=0;Yt<Dt;Yt++)Ae===c.TEXTURE_3D||Ae===c.TEXTURE_2D_ARRAY?c.texImage3D(Gt,0,c.RGBA,1,1,Xt,0,c.RGBA,c.UNSIGNED_BYTE,Ct):c.texImage2D(Gt+Yt,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,Ct);return Mt}const xt={};xt[c.TEXTURE_2D]=Dn(c.TEXTURE_2D,c.TEXTURE_2D,1),xt[c.TEXTURE_CUBE_MAP]=Dn(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),xt[c.TEXTURE_2D_ARRAY]=Dn(c.TEXTURE_2D_ARRAY,c.TEXTURE_2D_ARRAY,1,1),xt[c.TEXTURE_3D]=Dn(c.TEXTURE_3D,c.TEXTURE_3D,1,1),u.setClear(0,0,0,1),h.setClear(1),m.setClear(0),vt(c.DEPTH_TEST),h.setFunc(cy),Un(!1),st(Bse),vt(c.CULL_FACE),zn(af);function vt(Ae){T[Ae]!==!0&&(c.enable(Ae),T[Ae]=!0)}function Zt(Ae){T[Ae]!==!1&&(c.disable(Ae),T[Ae]=!1)}function Mn(Ae,Gt){return k[Ae]!==Gt?(c.bindFramebuffer(Ae,Gt),k[Ae]=Gt,Ae===c.DRAW_FRAMEBUFFER&&(k[c.FRAMEBUFFER]=Gt),Ae===c.FRAMEBUFFER&&(k[c.DRAW_FRAMEBUFFER]=Gt),!0):!1}function sn(Ae,Gt){let Dt=L,Xt=!1;if(Ae){Dt=O.get(Gt),Dt===void 0&&(Dt=[],O.set(Gt,Dt));const Ct=Ae.textures;if(Dt.length!==Ct.length||Dt[0]!==c.COLOR_ATTACHMENT0){for(let Mt=0,Yt=Ct.length;Mt<Yt;Mt++)Dt[Mt]=c.COLOR_ATTACHMENT0+Mt;Dt.length=Ct.length,Xt=!0}}else Dt[0]!==c.BACK&&(Dt[0]=c.BACK,Xt=!0);Xt&&c.drawBuffers(Dt)}function Fn(Ae){return H!==Ae?(c.useProgram(Ae),H=Ae,!0):!1}const fr={[rg]:c.FUNC_ADD,[Wxe]:c.FUNC_SUBTRACT,[qxe]:c.FUNC_REVERSE_SUBTRACT};fr[Xxe]=c.MIN,fr[Kxe]=c.MAX;const pn={[Yxe]:c.ZERO,[$xe]:c.ONE,[Zxe]:c.SRC_COLOR,[Z4]:c.SRC_ALPHA,[r1e]:c.SRC_ALPHA_SATURATE,[t1e]:c.DST_COLOR,[Qxe]:c.DST_ALPHA,[Jxe]:c.ONE_MINUS_SRC_COLOR,[J4]:c.ONE_MINUS_SRC_ALPHA,[n1e]:c.ONE_MINUS_DST_COLOR,[e1e]:c.ONE_MINUS_DST_ALPHA,[i1e]:c.CONSTANT_COLOR,[a1e]:c.ONE_MINUS_CONSTANT_COLOR,[o1e]:c.CONSTANT_ALPHA,[s1e]:c.ONE_MINUS_CONSTANT_ALPHA};function zn(Ae,Gt,Dt,Xt,Ct,Mt,Yt,Sn,_r,en){if(Ae===af){G===!0&&(Zt(c.BLEND),G=!1);return}if(G===!1&&(vt(c.BLEND),G=!0),Ae!==Gxe){if(Ae!==V||en!==te){if((I!==rg||P!==rg)&&(c.blendEquation(c.FUNC_ADD),I=rg,P=rg),en)switch(Ae){case ty:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case zse:c.blendFunc(c.ONE,c.ONE);break;case jse:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Vse:c.blendFuncSeparate(c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA,c.ZERO,c.ONE);break;default:ar("WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case ty:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case zse:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE,c.ONE,c.ONE);break;case jse:ar("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Vse:ar("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:ar("WebGLState: Invalid blending: ",Ae);break}K=null,ue=null,ae=null,ge=null,me.set(0,0,0),J=0,V=Ae,te=en}return}Ct=Ct||Gt,Mt=Mt||Dt,Yt=Yt||Xt,(Gt!==I||Ct!==P)&&(c.blendEquationSeparate(fr[Gt],fr[Ct]),I=Gt,P=Ct),(Dt!==K||Xt!==ue||Mt!==ae||Yt!==ge)&&(c.blendFuncSeparate(pn[Dt],pn[Xt],pn[Mt],pn[Yt]),K=Dt,ue=Xt,ae=Mt,ge=Yt),(Sn.equals(me)===!1||_r!==J)&&(c.blendColor(Sn.r,Sn.g,Sn.b,_r),me.copy(Sn),J=_r),V=Ae,te=!1}function nr(Ae,Gt){Ae.side===wc?Zt(c.CULL_FACE):vt(c.CULL_FACE);let Dt=Ae.side===os;Gt&&(Dt=!Dt),Un(Dt),Ae.blending===ty&&Ae.transparent===!1?zn(af):zn(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),h.setFunc(Ae.depthFunc),h.setTest(Ae.depthTest),h.setMask(Ae.depthWrite),u.setMask(Ae.colorWrite);const Xt=Ae.stencilWrite;m.setTest(Xt),Xt&&(m.setMask(Ae.stencilWriteMask),m.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),m.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),or(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?vt(c.SAMPLE_ALPHA_TO_COVERAGE):Zt(c.SAMPLE_ALPHA_TO_COVERAGE)}function Un(Ae){oe!==Ae&&(Ae?c.frontFace(c.CW):c.frontFace(c.CCW),oe=Ae)}function st(Ae){Ae!==jxe?(vt(c.CULL_FACE),Ae!==Y&&(Ae===Bse?c.cullFace(c.BACK):Ae===Vxe?c.cullFace(c.FRONT):c.cullFace(c.FRONT_AND_BACK))):Zt(c.CULL_FACE),Y=Ae}function De(Ae){Ae!==ke&&(pe&&c.lineWidth(Ae),ke=Ae)}function or(Ae,Gt,Dt){Ae?(vt(c.POLYGON_OFFSET_FILL),($e!==Gt||ot!==Dt)&&(c.polygonOffset(Gt,Dt),$e=Gt,ot=Dt)):Zt(c.POLYGON_OFFSET_FILL)}function sr(Ae){Ae?vt(c.SCISSOR_TEST):Zt(c.SCISSOR_TEST)}function Pn(Ae){Ae===void 0&&(Ae=c.TEXTURE0+Qe-1),Pt!==Ae&&(c.activeTexture(Ae),Pt=Ae)}function Jt(Ae,Gt,Dt){Dt===void 0&&(Pt===null?Dt=c.TEXTURE0+Qe-1:Dt=Pt);let Xt=Me[Dt];Xt===void 0&&(Xt={type:void 0,texture:void 0},Me[Dt]=Xt),(Xt.type!==Ae||Xt.texture!==Gt)&&(Pt!==Dt&&(c.activeTexture(Dt),Pt=Dt),c.bindTexture(Ae,Gt||xt[Ae]),Xt.type=Ae,Xt.texture=Gt)}function we(){const Ae=Me[Pt];Ae!==void 0&&Ae.type!==void 0&&(c.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function ie(){try{c.compressedTexImage2D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function ze(){try{c.compressedTexImage3D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function St(){try{c.texSubImage2D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function _t(){try{c.texSubImage3D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function mt(){try{c.compressedTexSubImage2D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function ln(){try{c.compressedTexSubImage3D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function Wt(){try{c.texStorage2D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function dn(){try{c.texStorage3D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function fn(){try{c.texImage2D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function At(){try{c.texImage3D(...arguments)}catch(Ae){ar("WebGLState:",Ae)}}function Kt(Ae){yn.equals(Ae)===!1&&(c.scissor(Ae.x,Ae.y,Ae.z,Ae.w),yn.copy(Ae))}function hn(Ae){qn.equals(Ae)===!1&&(c.viewport(Ae.x,Ae.y,Ae.z,Ae.w),qn.copy(Ae))}function mn(Ae,Gt){let Dt=S.get(Gt);Dt===void 0&&(Dt=new WeakMap,S.set(Gt,Dt));let Xt=Dt.get(Ae);Xt===void 0&&(Xt=c.getUniformBlockIndex(Gt,Ae.name),Dt.set(Ae,Xt))}function qt(Ae,Gt){const Xt=S.get(Gt).get(Ae);b.get(Gt)!==Xt&&(c.uniformBlockBinding(Gt,Xt,Ae.__bindingPointIndex),b.set(Gt,Xt))}function Xn(){c.disable(c.BLEND),c.disable(c.CULL_FACE),c.disable(c.DEPTH_TEST),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SCISSOR_TEST),c.disable(c.STENCIL_TEST),c.disable(c.SAMPLE_ALPHA_TO_COVERAGE),c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO),c.blendFuncSeparate(c.ONE,c.ZERO,c.ONE,c.ZERO),c.blendColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(c.LESS),h.setReversed(!1),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(c.ALWAYS,0,4294967295),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),c.clearStencil(0),c.cullFace(c.BACK),c.frontFace(c.CCW),c.polygonOffset(0,0),c.activeTexture(c.TEXTURE0),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),T={},Pt=null,Me={},k={},O=new WeakMap,L=[],H=null,G=!1,V=null,I=null,K=null,ue=null,P=null,ae=null,ge=null,me=new tr(0,0,0),J=0,te=!1,oe=null,Y=null,ke=null,$e=null,ot=null,yn.set(0,0,c.canvas.width,c.canvas.height),qn.set(0,0,c.canvas.width,c.canvas.height),u.reset(),h.reset(),m.reset()}return{buffers:{color:u,depth:h,stencil:m},enable:vt,disable:Zt,bindFramebuffer:Mn,drawBuffers:sn,useProgram:Fn,setBlending:zn,setMaterial:nr,setFlipSided:Un,setCullFace:st,setLineWidth:De,setPolygonOffset:or,setScissorTest:sr,activeTexture:Pn,bindTexture:Jt,unbindTexture:we,compressedTexImage2D:ie,compressedTexImage3D:ze,texImage2D:fn,texImage3D:At,updateUBOMapping:mn,uniformBlockBinding:qt,texStorage2D:Wt,texStorage3D:dn,texSubImage2D:St,texSubImage3D:_t,compressedTexSubImage2D:mt,compressedTexSubImage3D:ln,scissor:Kt,viewport:hn,reset:Xn}}function FPe(c,e,n,r,o,u,h){const m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,b=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),S=new gr,T=new WeakMap;let k;const O=new WeakMap;let L=!1;try{L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function H(we,ie){return L?new OffscreenCanvas(we,ie):Iw("canvas")}function G(we,ie,ze){let St=1;const _t=Jt(we);if((_t.width>ze||_t.height>ze)&&(St=ze/Math.max(_t.width,_t.height)),St<1)if(typeof HTMLImageElement<"u"&&we instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&we instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&we instanceof ImageBitmap||typeof VideoFrame<"u"&&we instanceof VideoFrame){const mt=Math.floor(St*_t.width),ln=Math.floor(St*_t.height);k===void 0&&(k=H(mt,ln));const Wt=ie?H(mt,ln):k;return Wt.width=mt,Wt.height=ln,Wt.getContext("2d").drawImage(we,0,0,mt,ln),Wn("WebGLRenderer: Texture has been resized from ("+_t.width+"x"+_t.height+") to ("+mt+"x"+ln+")."),Wt}else return"data"in we&&Wn("WebGLRenderer: Image in DataTexture is too big ("+_t.width+"x"+_t.height+")."),we;return we}function V(we){return we.generateMipmaps}function I(we){c.generateMipmap(we)}function K(we){return we.isWebGLCubeRenderTarget?c.TEXTURE_CUBE_MAP:we.isWebGL3DRenderTarget?c.TEXTURE_3D:we.isWebGLArrayRenderTarget||we.isCompressedArrayTexture?c.TEXTURE_2D_ARRAY:c.TEXTURE_2D}function ue(we,ie,ze,St,_t=!1){if(we!==null){if(c[we]!==void 0)return c[we];Wn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+we+"'")}let mt=ie;if(ie===c.RED&&(ze===c.FLOAT&&(mt=c.R32F),ze===c.HALF_FLOAT&&(mt=c.R16F),ze===c.UNSIGNED_BYTE&&(mt=c.R8)),ie===c.RED_INTEGER&&(ze===c.UNSIGNED_BYTE&&(mt=c.R8UI),ze===c.UNSIGNED_SHORT&&(mt=c.R16UI),ze===c.UNSIGNED_INT&&(mt=c.R32UI),ze===c.BYTE&&(mt=c.R8I),ze===c.SHORT&&(mt=c.R16I),ze===c.INT&&(mt=c.R32I)),ie===c.RG&&(ze===c.FLOAT&&(mt=c.RG32F),ze===c.HALF_FLOAT&&(mt=c.RG16F),ze===c.UNSIGNED_BYTE&&(mt=c.RG8)),ie===c.RG_INTEGER&&(ze===c.UNSIGNED_BYTE&&(mt=c.RG8UI),ze===c.UNSIGNED_SHORT&&(mt=c.RG16UI),ze===c.UNSIGNED_INT&&(mt=c.RG32UI),ze===c.BYTE&&(mt=c.RG8I),ze===c.SHORT&&(mt=c.RG16I),ze===c.INT&&(mt=c.RG32I)),ie===c.RGB_INTEGER&&(ze===c.UNSIGNED_BYTE&&(mt=c.RGB8UI),ze===c.UNSIGNED_SHORT&&(mt=c.RGB16UI),ze===c.UNSIGNED_INT&&(mt=c.RGB32UI),ze===c.BYTE&&(mt=c.RGB8I),ze===c.SHORT&&(mt=c.RGB16I),ze===c.INT&&(mt=c.RGB32I)),ie===c.RGBA_INTEGER&&(ze===c.UNSIGNED_BYTE&&(mt=c.RGBA8UI),ze===c.UNSIGNED_SHORT&&(mt=c.RGBA16UI),ze===c.UNSIGNED_INT&&(mt=c.RGBA32UI),ze===c.BYTE&&(mt=c.RGBA8I),ze===c.SHORT&&(mt=c.RGBA16I),ze===c.INT&&(mt=c.RGBA32I)),ie===c.RGB&&(ze===c.UNSIGNED_INT_5_9_9_9_REV&&(mt=c.RGB9_E5),ze===c.UNSIGNED_INT_10F_11F_11F_REV&&(mt=c.R11F_G11F_B10F)),ie===c.RGBA){const ln=_t?JI:Or.getTransfer(St);ze===c.FLOAT&&(mt=c.RGBA32F),ze===c.HALF_FLOAT&&(mt=c.RGBA16F),ze===c.UNSIGNED_BYTE&&(mt=ln===ai?c.SRGB8_ALPHA8:c.RGBA8),ze===c.UNSIGNED_SHORT_4_4_4_4&&(mt=c.RGBA4),ze===c.UNSIGNED_SHORT_5_5_5_1&&(mt=c.RGB5_A1)}return(mt===c.R16F||mt===c.R32F||mt===c.RG16F||mt===c.RG32F||mt===c.RGBA16F||mt===c.RGBA32F)&&e.get("EXT_color_buffer_float"),mt}function P(we,ie){let ze;return we?ie===null||ie===Dc||ie===Cw?ze=c.DEPTH24_STENCIL8:ie===Il?ze=c.DEPTH32F_STENCIL8:ie===Pw&&(ze=c.DEPTH24_STENCIL8,Wn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ie===null||ie===Dc||ie===Cw?ze=c.DEPTH_COMPONENT24:ie===Il?ze=c.DEPTH_COMPONENT32F:ie===Pw&&(ze=c.DEPTH_COMPONENT16),ze}function ae(we,ie){return V(we)===!0||we.isFramebufferTexture&&we.minFilter!==Da&&we.minFilter!==fa?Math.log2(Math.max(ie.width,ie.height))+1:we.mipmaps!==void 0&&we.mipmaps.length>0?we.mipmaps.length:we.isCompressedTexture&&Array.isArray(we.image)?ie.mipmaps.length:1}function ge(we){const ie=we.target;ie.removeEventListener("dispose",ge),J(ie),ie.isVideoTexture&&T.delete(ie)}function me(we){const ie=we.target;ie.removeEventListener("dispose",me),oe(ie)}function J(we){const ie=r.get(we);if(ie.__webglInit===void 0)return;const ze=we.source,St=O.get(ze);if(St){const _t=St[ie.__cacheKey];_t.usedTimes--,_t.usedTimes===0&&te(we),Object.keys(St).length===0&&O.delete(ze)}r.remove(we)}function te(we){const ie=r.get(we);c.deleteTexture(ie.__webglTexture);const ze=we.source,St=O.get(ze);delete St[ie.__cacheKey],h.memory.textures--}function oe(we){const ie=r.get(we);if(we.depthTexture&&(we.depthTexture.dispose(),r.remove(we.depthTexture)),we.isWebGLCubeRenderTarget)for(let St=0;St<6;St++){if(Array.isArray(ie.__webglFramebuffer[St]))for(let _t=0;_t<ie.__webglFramebuffer[St].length;_t++)c.deleteFramebuffer(ie.__webglFramebuffer[St][_t]);else c.deleteFramebuffer(ie.__webglFramebuffer[St]);ie.__webglDepthbuffer&&c.deleteRenderbuffer(ie.__webglDepthbuffer[St])}else{if(Array.isArray(ie.__webglFramebuffer))for(let St=0;St<ie.__webglFramebuffer.length;St++)c.deleteFramebuffer(ie.__webglFramebuffer[St]);else c.deleteFramebuffer(ie.__webglFramebuffer);if(ie.__webglDepthbuffer&&c.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&c.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let St=0;St<ie.__webglColorRenderbuffer.length;St++)ie.__webglColorRenderbuffer[St]&&c.deleteRenderbuffer(ie.__webglColorRenderbuffer[St]);ie.__webglDepthRenderbuffer&&c.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}const ze=we.textures;for(let St=0,_t=ze.length;St<_t;St++){const mt=r.get(ze[St]);mt.__webglTexture&&(c.deleteTexture(mt.__webglTexture),h.memory.textures--),r.remove(ze[St])}r.remove(we)}let Y=0;function ke(){Y=0}function $e(){const we=Y;return we>=o.maxTextures&&Wn("WebGLTextures: Trying to use "+we+" texture units while this GPU supports only "+o.maxTextures),Y+=1,we}function ot(we){const ie=[];return ie.push(we.wrapS),ie.push(we.wrapT),ie.push(we.wrapR||0),ie.push(we.magFilter),ie.push(we.minFilter),ie.push(we.anisotropy),ie.push(we.internalFormat),ie.push(we.format),ie.push(we.type),ie.push(we.generateMipmaps),ie.push(we.premultiplyAlpha),ie.push(we.flipY),ie.push(we.unpackAlignment),ie.push(we.colorSpace),ie.join()}function Qe(we,ie){const ze=r.get(we);if(we.isVideoTexture&&sr(we),we.isRenderTargetTexture===!1&&we.isExternalTexture!==!0&&we.version>0&&ze.__version!==we.version){const St=we.image;if(St===null)Wn("WebGLRenderer: Texture marked for update but no image data found.");else if(St.complete===!1)Wn("WebGLRenderer: Texture marked for update but image is incomplete");else{xt(ze,we,ie);return}}else we.isExternalTexture&&(ze.__webglTexture=we.sourceTexture?we.sourceTexture:null);n.bindTexture(c.TEXTURE_2D,ze.__webglTexture,c.TEXTURE0+ie)}function pe(we,ie){const ze=r.get(we);if(we.isRenderTargetTexture===!1&&we.version>0&&ze.__version!==we.version){xt(ze,we,ie);return}else we.isExternalTexture&&(ze.__webglTexture=we.sourceTexture?we.sourceTexture:null);n.bindTexture(c.TEXTURE_2D_ARRAY,ze.__webglTexture,c.TEXTURE0+ie)}function Ve(we,ie){const ze=r.get(we);if(we.isRenderTargetTexture===!1&&we.version>0&&ze.__version!==we.version){xt(ze,we,ie);return}n.bindTexture(c.TEXTURE_3D,ze.__webglTexture,c.TEXTURE0+ie)}function Ue(we,ie){const ze=r.get(we);if(we.isCubeDepthTexture!==!0&&we.version>0&&ze.__version!==we.version){vt(ze,we,ie);return}n.bindTexture(c.TEXTURE_CUBE_MAP,ze.__webglTexture,c.TEXTURE0+ie)}const Pt={[rs]:c.REPEAT,[Tc]:c.CLAMP_TO_EDGE,[ZI]:c.MIRRORED_REPEAT},Me={[Da]:c.NEAREST,[nce]:c.NEAREST_MIPMAP_NEAREST,[ew]:c.NEAREST_MIPMAP_LINEAR,[fa]:c.LINEAR,[LI]:c.LINEAR_MIPMAP_NEAREST,[tf]:c.LINEAR_MIPMAP_LINEAR},Ot={[m1e]:c.NEVER,[b1e]:c.ALWAYS,[g1e]:c.LESS,[kj]:c.LEQUAL,[v1e]:c.EQUAL,[Ij]:c.GEQUAL,[_1e]:c.GREATER,[y1e]:c.NOTEQUAL};function Tn(we,ie){if(ie.type===Il&&e.has("OES_texture_float_linear")===!1&&(ie.magFilter===fa||ie.magFilter===LI||ie.magFilter===ew||ie.magFilter===tf||ie.minFilter===fa||ie.minFilter===LI||ie.minFilter===ew||ie.minFilter===tf)&&Wn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),c.texParameteri(we,c.TEXTURE_WRAP_S,Pt[ie.wrapS]),c.texParameteri(we,c.TEXTURE_WRAP_T,Pt[ie.wrapT]),(we===c.TEXTURE_3D||we===c.TEXTURE_2D_ARRAY)&&c.texParameteri(we,c.TEXTURE_WRAP_R,Pt[ie.wrapR]),c.texParameteri(we,c.TEXTURE_MAG_FILTER,Me[ie.magFilter]),c.texParameteri(we,c.TEXTURE_MIN_FILTER,Me[ie.minFilter]),ie.compareFunction&&(c.texParameteri(we,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.texParameteri(we,c.TEXTURE_COMPARE_FUNC,Ot[ie.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ie.magFilter===Da||ie.minFilter!==ew&&ie.minFilter!==tf||ie.type===Il&&e.has("OES_texture_float_linear")===!1)return;if(ie.anisotropy>1||r.get(ie).__currentAnisotropy){const ze=e.get("EXT_texture_filter_anisotropic");c.texParameterf(we,ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,o.getMaxAnisotropy())),r.get(ie).__currentAnisotropy=ie.anisotropy}}}function yn(we,ie){let ze=!1;we.__webglInit===void 0&&(we.__webglInit=!0,ie.addEventListener("dispose",ge));const St=ie.source;let _t=O.get(St);_t===void 0&&(_t={},O.set(St,_t));const mt=ot(ie);if(mt!==we.__cacheKey){_t[mt]===void 0&&(_t[mt]={texture:c.createTexture(),usedTimes:0},h.memory.textures++,ze=!0),_t[mt].usedTimes++;const ln=_t[we.__cacheKey];ln!==void 0&&(_t[we.__cacheKey].usedTimes--,ln.usedTimes===0&&te(ie)),we.__cacheKey=mt,we.__webglTexture=_t[mt].texture}return ze}function qn(we,ie,ze){return Math.floor(Math.floor(we/ze)/ie)}function Dn(we,ie,ze,St){const mt=we.updateRanges;if(mt.length===0)n.texSubImage2D(c.TEXTURE_2D,0,0,0,ie.width,ie.height,ze,St,ie.data);else{mt.sort((At,Kt)=>At.start-Kt.start);let ln=0;for(let At=1;At<mt.length;At++){const Kt=mt[ln],hn=mt[At],mn=Kt.start+Kt.count,qt=qn(hn.start,ie.width,4),Xn=qn(Kt.start,ie.width,4);hn.start<=mn+1&&qt===Xn&&qn(hn.start+hn.count-1,ie.width,4)===qt?Kt.count=Math.max(Kt.count,hn.start+hn.count-Kt.start):(++ln,mt[ln]=hn)}mt.length=ln+1;const Wt=c.getParameter(c.UNPACK_ROW_LENGTH),dn=c.getParameter(c.UNPACK_SKIP_PIXELS),fn=c.getParameter(c.UNPACK_SKIP_ROWS);c.pixelStorei(c.UNPACK_ROW_LENGTH,ie.width);for(let At=0,Kt=mt.length;At<Kt;At++){const hn=mt[At],mn=Math.floor(hn.start/4),qt=Math.ceil(hn.count/4),Xn=mn%ie.width,Ae=Math.floor(mn/ie.width),Gt=qt,Dt=1;c.pixelStorei(c.UNPACK_SKIP_PIXELS,Xn),c.pixelStorei(c.UNPACK_SKIP_ROWS,Ae),n.texSubImage2D(c.TEXTURE_2D,0,Xn,Ae,Gt,Dt,ze,St,ie.data)}we.clearUpdateRanges(),c.pixelStorei(c.UNPACK_ROW_LENGTH,Wt),c.pixelStorei(c.UNPACK_SKIP_PIXELS,dn),c.pixelStorei(c.UNPACK_SKIP_ROWS,fn)}}function xt(we,ie,ze){let St=c.TEXTURE_2D;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&(St=c.TEXTURE_2D_ARRAY),ie.isData3DTexture&&(St=c.TEXTURE_3D);const _t=yn(we,ie),mt=ie.source;n.bindTexture(St,we.__webglTexture,c.TEXTURE0+ze);const ln=r.get(mt);if(mt.version!==ln.__version||_t===!0){n.activeTexture(c.TEXTURE0+ze);const Wt=Or.getPrimaries(Or.workingColorSpace),dn=ie.colorSpace===Vh?null:Or.getPrimaries(ie.colorSpace),fn=ie.colorSpace===Vh||Wt===dn?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,ie.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,ie.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,fn);let At=G(ie.image,!1,o.maxTextureSize);At=Pn(ie,At);const Kt=u.convert(ie.format,ie.colorSpace),hn=u.convert(ie.type);let mn=ue(ie.internalFormat,Kt,hn,ie.colorSpace,ie.isVideoTexture);Tn(St,ie);let qt;const Xn=ie.mipmaps,Ae=ie.isVideoTexture!==!0,Gt=ln.__version===void 0||_t===!0,Dt=mt.dataReady,Xt=ae(ie,At);if(ie.isDepthTexture)mn=P(ie.format===ag,ie.type),Gt&&(Ae?n.texStorage2D(c.TEXTURE_2D,1,mn,At.width,At.height):n.texImage2D(c.TEXTURE_2D,0,mn,At.width,At.height,0,Kt,hn,null));else if(ie.isDataTexture)if(Xn.length>0){Ae&&Gt&&n.texStorage2D(c.TEXTURE_2D,Xt,mn,Xn[0].width,Xn[0].height);for(let Ct=0,Mt=Xn.length;Ct<Mt;Ct++)qt=Xn[Ct],Ae?Dt&&n.texSubImage2D(c.TEXTURE_2D,Ct,0,0,qt.width,qt.height,Kt,hn,qt.data):n.texImage2D(c.TEXTURE_2D,Ct,mn,qt.width,qt.height,0,Kt,hn,qt.data);ie.generateMipmaps=!1}else Ae?(Gt&&n.texStorage2D(c.TEXTURE_2D,Xt,mn,At.width,At.height),Dt&&Dn(ie,At,Kt,hn)):n.texImage2D(c.TEXTURE_2D,0,mn,At.width,At.height,0,Kt,hn,At.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){Ae&&Gt&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Xt,mn,Xn[0].width,Xn[0].height,At.depth);for(let Ct=0,Mt=Xn.length;Ct<Mt;Ct++)if(qt=Xn[Ct],ie.format!==Qs)if(Kt!==null)if(Ae){if(Dt)if(ie.layerUpdates.size>0){const Yt=Ile(qt.width,qt.height,ie.format,ie.type);for(const Sn of ie.layerUpdates){const _r=qt.data.subarray(Sn*Yt/qt.data.BYTES_PER_ELEMENT,(Sn+1)*Yt/qt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,Ct,0,0,Sn,qt.width,qt.height,1,Kt,_r)}ie.clearLayerUpdates()}else n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,Ct,0,0,0,qt.width,qt.height,At.depth,Kt,qt.data)}else n.compressedTexImage3D(c.TEXTURE_2D_ARRAY,Ct,mn,qt.width,qt.height,At.depth,0,qt.data,0,0);else Wn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ae?Dt&&n.texSubImage3D(c.TEXTURE_2D_ARRAY,Ct,0,0,0,qt.width,qt.height,At.depth,Kt,hn,qt.data):n.texImage3D(c.TEXTURE_2D_ARRAY,Ct,mn,qt.width,qt.height,At.depth,0,Kt,hn,qt.data)}else{Ae&&Gt&&n.texStorage2D(c.TEXTURE_2D,Xt,mn,Xn[0].width,Xn[0].height);for(let Ct=0,Mt=Xn.length;Ct<Mt;Ct++)qt=Xn[Ct],ie.format!==Qs?Kt!==null?Ae?Dt&&n.compressedTexSubImage2D(c.TEXTURE_2D,Ct,0,0,qt.width,qt.height,Kt,qt.data):n.compressedTexImage2D(c.TEXTURE_2D,Ct,mn,qt.width,qt.height,0,qt.data):Wn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Dt&&n.texSubImage2D(c.TEXTURE_2D,Ct,0,0,qt.width,qt.height,Kt,hn,qt.data):n.texImage2D(c.TEXTURE_2D,Ct,mn,qt.width,qt.height,0,Kt,hn,qt.data)}else if(ie.isDataArrayTexture)if(Ae){if(Gt&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Xt,mn,At.width,At.height,At.depth),Dt)if(ie.layerUpdates.size>0){const Ct=Ile(At.width,At.height,ie.format,ie.type);for(const Mt of ie.layerUpdates){const Yt=At.data.subarray(Mt*Ct/At.data.BYTES_PER_ELEMENT,(Mt+1)*Ct/At.data.BYTES_PER_ELEMENT);n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,Mt,At.width,At.height,1,Kt,hn,Yt)}ie.clearLayerUpdates()}else n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,0,At.width,At.height,At.depth,Kt,hn,At.data)}else n.texImage3D(c.TEXTURE_2D_ARRAY,0,mn,At.width,At.height,At.depth,0,Kt,hn,At.data);else if(ie.isData3DTexture)Ae?(Gt&&n.texStorage3D(c.TEXTURE_3D,Xt,mn,At.width,At.height,At.depth),Dt&&n.texSubImage3D(c.TEXTURE_3D,0,0,0,0,At.width,At.height,At.depth,Kt,hn,At.data)):n.texImage3D(c.TEXTURE_3D,0,mn,At.width,At.height,At.depth,0,Kt,hn,At.data);else if(ie.isFramebufferTexture){if(Gt)if(Ae)n.texStorage2D(c.TEXTURE_2D,Xt,mn,At.width,At.height);else{let Ct=At.width,Mt=At.height;for(let Yt=0;Yt<Xt;Yt++)n.texImage2D(c.TEXTURE_2D,Yt,mn,Ct,Mt,0,Kt,hn,null),Ct>>=1,Mt>>=1}}else if(Xn.length>0){if(Ae&&Gt){const Ct=Jt(Xn[0]);n.texStorage2D(c.TEXTURE_2D,Xt,mn,Ct.width,Ct.height)}for(let Ct=0,Mt=Xn.length;Ct<Mt;Ct++)qt=Xn[Ct],Ae?Dt&&n.texSubImage2D(c.TEXTURE_2D,Ct,0,0,Kt,hn,qt):n.texImage2D(c.TEXTURE_2D,Ct,mn,Kt,hn,qt);ie.generateMipmaps=!1}else if(Ae){if(Gt){const Ct=Jt(At);n.texStorage2D(c.TEXTURE_2D,Xt,mn,Ct.width,Ct.height)}Dt&&n.texSubImage2D(c.TEXTURE_2D,0,0,0,Kt,hn,At)}else n.texImage2D(c.TEXTURE_2D,0,mn,Kt,hn,At);V(ie)&&I(St),ln.__version=mt.version,ie.onUpdate&&ie.onUpdate(ie)}we.__version=ie.version}function vt(we,ie,ze){if(ie.image.length!==6)return;const St=yn(we,ie),_t=ie.source;n.bindTexture(c.TEXTURE_CUBE_MAP,we.__webglTexture,c.TEXTURE0+ze);const mt=r.get(_t);if(_t.version!==mt.__version||St===!0){n.activeTexture(c.TEXTURE0+ze);const ln=Or.getPrimaries(Or.workingColorSpace),Wt=ie.colorSpace===Vh?null:Or.getPrimaries(ie.colorSpace),dn=ie.colorSpace===Vh||ln===Wt?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,ie.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,ie.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,dn);const fn=ie.isCompressedTexture||ie.image[0].isCompressedTexture,At=ie.image[0]&&ie.image[0].isDataTexture,Kt=[];for(let Mt=0;Mt<6;Mt++)!fn&&!At?Kt[Mt]=G(ie.image[Mt],!0,o.maxCubemapSize):Kt[Mt]=At?ie.image[Mt].image:ie.image[Mt],Kt[Mt]=Pn(ie,Kt[Mt]);const hn=Kt[0],mn=u.convert(ie.format,ie.colorSpace),qt=u.convert(ie.type),Xn=ue(ie.internalFormat,mn,qt,ie.colorSpace),Ae=ie.isVideoTexture!==!0,Gt=mt.__version===void 0||St===!0,Dt=_t.dataReady;let Xt=ae(ie,hn);Tn(c.TEXTURE_CUBE_MAP,ie);let Ct;if(fn){Ae&&Gt&&n.texStorage2D(c.TEXTURE_CUBE_MAP,Xt,Xn,hn.width,hn.height);for(let Mt=0;Mt<6;Mt++){Ct=Kt[Mt].mipmaps;for(let Yt=0;Yt<Ct.length;Yt++){const Sn=Ct[Yt];ie.format!==Qs?mn!==null?Ae?Dt&&n.compressedTexSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt,0,0,Sn.width,Sn.height,mn,Sn.data):n.compressedTexImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt,Xn,Sn.width,Sn.height,0,Sn.data):Wn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ae?Dt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt,0,0,Sn.width,Sn.height,mn,qt,Sn.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt,Xn,Sn.width,Sn.height,0,mn,qt,Sn.data)}}}else{if(Ct=ie.mipmaps,Ae&&Gt){Ct.length>0&&Xt++;const Mt=Jt(Kt[0]);n.texStorage2D(c.TEXTURE_CUBE_MAP,Xt,Xn,Mt.width,Mt.height)}for(let Mt=0;Mt<6;Mt++)if(At){Ae?Dt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,Kt[Mt].width,Kt[Mt].height,mn,qt,Kt[Mt].data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,Xn,Kt[Mt].width,Kt[Mt].height,0,mn,qt,Kt[Mt].data);for(let Yt=0;Yt<Ct.length;Yt++){const _r=Ct[Yt].image[Mt].image;Ae?Dt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt+1,0,0,_r.width,_r.height,mn,qt,_r.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt+1,Xn,_r.width,_r.height,0,mn,qt,_r.data)}}else{Ae?Dt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,mn,qt,Kt[Mt]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,Xn,mn,qt,Kt[Mt]);for(let Yt=0;Yt<Ct.length;Yt++){const Sn=Ct[Yt];Ae?Dt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt+1,0,0,mn,qt,Sn.image[Mt]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Yt+1,Xn,mn,qt,Sn.image[Mt])}}}V(ie)&&I(c.TEXTURE_CUBE_MAP),mt.__version=_t.version,ie.onUpdate&&ie.onUpdate(ie)}we.__version=ie.version}function Zt(we,ie,ze,St,_t,mt){const ln=u.convert(ze.format,ze.colorSpace),Wt=u.convert(ze.type),dn=ue(ze.internalFormat,ln,Wt,ze.colorSpace),fn=r.get(ie),At=r.get(ze);if(At.__renderTarget=ie,!fn.__hasExternalTextures){const Kt=Math.max(1,ie.width>>mt),hn=Math.max(1,ie.height>>mt);_t===c.TEXTURE_3D||_t===c.TEXTURE_2D_ARRAY?n.texImage3D(_t,mt,dn,Kt,hn,ie.depth,0,ln,Wt,null):n.texImage2D(_t,mt,dn,Kt,hn,0,ln,Wt,null)}n.bindFramebuffer(c.FRAMEBUFFER,we),or(ie)?m.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,St,_t,At.__webglTexture,0,De(ie)):(_t===c.TEXTURE_2D||_t>=c.TEXTURE_CUBE_MAP_POSITIVE_X&&_t<=c.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&c.framebufferTexture2D(c.FRAMEBUFFER,St,_t,At.__webglTexture,mt),n.bindFramebuffer(c.FRAMEBUFFER,null)}function Mn(we,ie,ze){if(c.bindRenderbuffer(c.RENDERBUFFER,we),ie.depthBuffer){const St=ie.depthTexture,_t=St&&St.isDepthTexture?St.type:null,mt=P(ie.stencilBuffer,_t),ln=ie.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT;or(ie)?m.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,De(ie),mt,ie.width,ie.height):ze?c.renderbufferStorageMultisample(c.RENDERBUFFER,De(ie),mt,ie.width,ie.height):c.renderbufferStorage(c.RENDERBUFFER,mt,ie.width,ie.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,ln,c.RENDERBUFFER,we)}else{const St=ie.textures;for(let _t=0;_t<St.length;_t++){const mt=St[_t],ln=u.convert(mt.format,mt.colorSpace),Wt=u.convert(mt.type),dn=ue(mt.internalFormat,ln,Wt,mt.colorSpace);or(ie)?m.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,De(ie),dn,ie.width,ie.height):ze?c.renderbufferStorageMultisample(c.RENDERBUFFER,De(ie),dn,ie.width,ie.height):c.renderbufferStorage(c.RENDERBUFFER,dn,ie.width,ie.height)}}c.bindRenderbuffer(c.RENDERBUFFER,null)}function sn(we,ie,ze){const St=ie.isWebGLCubeRenderTarget===!0;if(n.bindFramebuffer(c.FRAMEBUFFER,we),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const _t=r.get(ie.depthTexture);if(_t.__renderTarget=ie,(!_t.__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),St){if(_t.__webglInit===void 0&&(_t.__webglInit=!0,ie.depthTexture.addEventListener("dispose",ge)),_t.__webglTexture===void 0){_t.__webglTexture=c.createTexture(),n.bindTexture(c.TEXTURE_CUBE_MAP,_t.__webglTexture),Tn(c.TEXTURE_CUBE_MAP,ie.depthTexture);const fn=u.convert(ie.depthTexture.format),At=u.convert(ie.depthTexture.type);let Kt;ie.depthTexture.format===uf?Kt=c.DEPTH_COMPONENT24:ie.depthTexture.format===ag&&(Kt=c.DEPTH24_STENCIL8);for(let hn=0;hn<6;hn++)c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0,Kt,ie.width,ie.height,0,fn,At,null)}}else Qe(ie.depthTexture,0);const mt=_t.__webglTexture,ln=De(ie),Wt=St?c.TEXTURE_CUBE_MAP_POSITIVE_X+ze:c.TEXTURE_2D,dn=ie.depthTexture.format===ag?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT;if(ie.depthTexture.format===uf)or(ie)?m.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,dn,Wt,mt,0,ln):c.framebufferTexture2D(c.FRAMEBUFFER,dn,Wt,mt,0);else if(ie.depthTexture.format===ag)or(ie)?m.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,dn,Wt,mt,0,ln):c.framebufferTexture2D(c.FRAMEBUFFER,dn,Wt,mt,0);else throw new Error("Unknown depthTexture format")}function Fn(we){const ie=r.get(we),ze=we.isWebGLCubeRenderTarget===!0;if(ie.__boundDepthTexture!==we.depthTexture){const St=we.depthTexture;if(ie.__depthDisposeCallback&&ie.__depthDisposeCallback(),St){const _t=()=>{delete ie.__boundDepthTexture,delete ie.__depthDisposeCallback,St.removeEventListener("dispose",_t)};St.addEventListener("dispose",_t),ie.__depthDisposeCallback=_t}ie.__boundDepthTexture=St}if(we.depthTexture&&!ie.__autoAllocateDepthBuffer)if(ze)for(let St=0;St<6;St++)sn(ie.__webglFramebuffer[St],we,St);else{const St=we.texture.mipmaps;St&&St.length>0?sn(ie.__webglFramebuffer[0],we,0):sn(ie.__webglFramebuffer,we,0)}else if(ze){ie.__webglDepthbuffer=[];for(let St=0;St<6;St++)if(n.bindFramebuffer(c.FRAMEBUFFER,ie.__webglFramebuffer[St]),ie.__webglDepthbuffer[St]===void 0)ie.__webglDepthbuffer[St]=c.createRenderbuffer(),Mn(ie.__webglDepthbuffer[St],we,!1);else{const _t=we.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,mt=ie.__webglDepthbuffer[St];c.bindRenderbuffer(c.RENDERBUFFER,mt),c.framebufferRenderbuffer(c.FRAMEBUFFER,_t,c.RENDERBUFFER,mt)}}else{const St=we.texture.mipmaps;if(St&&St.length>0?n.bindFramebuffer(c.FRAMEBUFFER,ie.__webglFramebuffer[0]):n.bindFramebuffer(c.FRAMEBUFFER,ie.__webglFramebuffer),ie.__webglDepthbuffer===void 0)ie.__webglDepthbuffer=c.createRenderbuffer(),Mn(ie.__webglDepthbuffer,we,!1);else{const _t=we.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,mt=ie.__webglDepthbuffer;c.bindRenderbuffer(c.RENDERBUFFER,mt),c.framebufferRenderbuffer(c.FRAMEBUFFER,_t,c.RENDERBUFFER,mt)}}n.bindFramebuffer(c.FRAMEBUFFER,null)}function fr(we,ie,ze){const St=r.get(we);ie!==void 0&&Zt(St.__webglFramebuffer,we,we.texture,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,0),ze!==void 0&&Fn(we)}function pn(we){const ie=we.texture,ze=r.get(we),St=r.get(ie);we.addEventListener("dispose",me);const _t=we.textures,mt=we.isWebGLCubeRenderTarget===!0,ln=_t.length>1;if(ln||(St.__webglTexture===void 0&&(St.__webglTexture=c.createTexture()),St.__version=ie.version,h.memory.textures++),mt){ze.__webglFramebuffer=[];for(let Wt=0;Wt<6;Wt++)if(ie.mipmaps&&ie.mipmaps.length>0){ze.__webglFramebuffer[Wt]=[];for(let dn=0;dn<ie.mipmaps.length;dn++)ze.__webglFramebuffer[Wt][dn]=c.createFramebuffer()}else ze.__webglFramebuffer[Wt]=c.createFramebuffer()}else{if(ie.mipmaps&&ie.mipmaps.length>0){ze.__webglFramebuffer=[];for(let Wt=0;Wt<ie.mipmaps.length;Wt++)ze.__webglFramebuffer[Wt]=c.createFramebuffer()}else ze.__webglFramebuffer=c.createFramebuffer();if(ln)for(let Wt=0,dn=_t.length;Wt<dn;Wt++){const fn=r.get(_t[Wt]);fn.__webglTexture===void 0&&(fn.__webglTexture=c.createTexture(),h.memory.textures++)}if(we.samples>0&&or(we)===!1){ze.__webglMultisampledFramebuffer=c.createFramebuffer(),ze.__webglColorRenderbuffer=[],n.bindFramebuffer(c.FRAMEBUFFER,ze.__webglMultisampledFramebuffer);for(let Wt=0;Wt<_t.length;Wt++){const dn=_t[Wt];ze.__webglColorRenderbuffer[Wt]=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,ze.__webglColorRenderbuffer[Wt]);const fn=u.convert(dn.format,dn.colorSpace),At=u.convert(dn.type),Kt=ue(dn.internalFormat,fn,At,dn.colorSpace,we.isXRRenderTarget===!0),hn=De(we);c.renderbufferStorageMultisample(c.RENDERBUFFER,hn,Kt,we.width,we.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Wt,c.RENDERBUFFER,ze.__webglColorRenderbuffer[Wt])}c.bindRenderbuffer(c.RENDERBUFFER,null),we.depthBuffer&&(ze.__webglDepthRenderbuffer=c.createRenderbuffer(),Mn(ze.__webglDepthRenderbuffer,we,!0)),n.bindFramebuffer(c.FRAMEBUFFER,null)}}if(mt){n.bindTexture(c.TEXTURE_CUBE_MAP,St.__webglTexture),Tn(c.TEXTURE_CUBE_MAP,ie);for(let Wt=0;Wt<6;Wt++)if(ie.mipmaps&&ie.mipmaps.length>0)for(let dn=0;dn<ie.mipmaps.length;dn++)Zt(ze.__webglFramebuffer[Wt][dn],we,ie,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,dn);else Zt(ze.__webglFramebuffer[Wt],we,ie,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,0);V(ie)&&I(c.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ln){for(let Wt=0,dn=_t.length;Wt<dn;Wt++){const fn=_t[Wt],At=r.get(fn);let Kt=c.TEXTURE_2D;(we.isWebGL3DRenderTarget||we.isWebGLArrayRenderTarget)&&(Kt=we.isWebGL3DRenderTarget?c.TEXTURE_3D:c.TEXTURE_2D_ARRAY),n.bindTexture(Kt,At.__webglTexture),Tn(Kt,fn),Zt(ze.__webglFramebuffer,we,fn,c.COLOR_ATTACHMENT0+Wt,Kt,0),V(fn)&&I(Kt)}n.unbindTexture()}else{let Wt=c.TEXTURE_2D;if((we.isWebGL3DRenderTarget||we.isWebGLArrayRenderTarget)&&(Wt=we.isWebGL3DRenderTarget?c.TEXTURE_3D:c.TEXTURE_2D_ARRAY),n.bindTexture(Wt,St.__webglTexture),Tn(Wt,ie),ie.mipmaps&&ie.mipmaps.length>0)for(let dn=0;dn<ie.mipmaps.length;dn++)Zt(ze.__webglFramebuffer[dn],we,ie,c.COLOR_ATTACHMENT0,Wt,dn);else Zt(ze.__webglFramebuffer,we,ie,c.COLOR_ATTACHMENT0,Wt,0);V(ie)&&I(Wt),n.unbindTexture()}we.depthBuffer&&Fn(we)}function zn(we){const ie=we.textures;for(let ze=0,St=ie.length;ze<St;ze++){const _t=ie[ze];if(V(_t)){const mt=K(we),ln=r.get(_t).__webglTexture;n.bindTexture(mt,ln),I(mt),n.unbindTexture()}}}const nr=[],Un=[];function st(we){if(we.samples>0){if(or(we)===!1){const ie=we.textures,ze=we.width,St=we.height;let _t=c.COLOR_BUFFER_BIT;const mt=we.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,ln=r.get(we),Wt=ie.length>1;if(Wt)for(let fn=0;fn<ie.length;fn++)n.bindFramebuffer(c.FRAMEBUFFER,ln.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+fn,c.RENDERBUFFER,null),n.bindFramebuffer(c.FRAMEBUFFER,ln.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+fn,c.TEXTURE_2D,null,0);n.bindFramebuffer(c.READ_FRAMEBUFFER,ln.__webglMultisampledFramebuffer);const dn=we.texture.mipmaps;dn&&dn.length>0?n.bindFramebuffer(c.DRAW_FRAMEBUFFER,ln.__webglFramebuffer[0]):n.bindFramebuffer(c.DRAW_FRAMEBUFFER,ln.__webglFramebuffer);for(let fn=0;fn<ie.length;fn++){if(we.resolveDepthBuffer&&(we.depthBuffer&&(_t|=c.DEPTH_BUFFER_BIT),we.stencilBuffer&&we.resolveStencilBuffer&&(_t|=c.STENCIL_BUFFER_BIT)),Wt){c.framebufferRenderbuffer(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,ln.__webglColorRenderbuffer[fn]);const At=r.get(ie[fn]).__webglTexture;c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,At,0)}c.blitFramebuffer(0,0,ze,St,0,0,ze,St,_t,c.NEAREST),b===!0&&(nr.length=0,Un.length=0,nr.push(c.COLOR_ATTACHMENT0+fn),we.depthBuffer&&we.resolveDepthBuffer===!1&&(nr.push(mt),Un.push(mt),c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,Un)),c.invalidateFramebuffer(c.READ_FRAMEBUFFER,nr))}if(n.bindFramebuffer(c.READ_FRAMEBUFFER,null),n.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),Wt)for(let fn=0;fn<ie.length;fn++){n.bindFramebuffer(c.FRAMEBUFFER,ln.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+fn,c.RENDERBUFFER,ln.__webglColorRenderbuffer[fn]);const At=r.get(ie[fn]).__webglTexture;n.bindFramebuffer(c.FRAMEBUFFER,ln.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+fn,c.TEXTURE_2D,At,0)}n.bindFramebuffer(c.DRAW_FRAMEBUFFER,ln.__webglMultisampledFramebuffer)}else if(we.depthBuffer&&we.resolveDepthBuffer===!1&&b){const ie=we.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT;c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,[ie])}}}function De(we){return Math.min(o.maxSamples,we.samples)}function or(we){const ie=r.get(we);return we.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function sr(we){const ie=h.render.frame;T.get(we)!==ie&&(T.set(we,ie),we.update())}function Pn(we,ie){const ze=we.colorSpace,St=we.format,_t=we.type;return we.isCompressedTexture===!0||we.isVideoTexture===!0||ze!==Oo&&ze!==Vh&&(Or.getTransfer(ze)===ai?(St!==Qs||_t!==$s)&&Wn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):ar("WebGLTextures: Unsupported texture color space:",ze)),ie}function Jt(we){return typeof HTMLImageElement<"u"&&we instanceof HTMLImageElement?(S.width=we.naturalWidth||we.width,S.height=we.naturalHeight||we.height):typeof VideoFrame<"u"&&we instanceof VideoFrame?(S.width=we.displayWidth,S.height=we.displayHeight):(S.width=we.width,S.height=we.height),S}this.allocateTextureUnit=$e,this.resetTextureUnits=ke,this.setTexture2D=Qe,this.setTexture2DArray=pe,this.setTexture3D=Ve,this.setTextureCube=Ue,this.rebindTextures=fr,this.setupRenderTarget=pn,this.updateRenderTargetMipmap=zn,this.updateMultisampleRenderTarget=st,this.setupDepthRenderbuffer=Fn,this.setupFrameBufferTexture=Zt,this.useMultisampledRTT=or,this.isReversedDepthBuffer=function(){return n.buffers.depth.getReversed()}}function UPe(c,e){function n(r,o=Vh){let u;const h=Or.getTransfer(o);if(r===$s)return c.UNSIGNED_BYTE;if(r===Ej)return c.UNSIGNED_SHORT_4_4_4_4;if(r===Tj)return c.UNSIGNED_SHORT_5_5_5_1;if(r===ace)return c.UNSIGNED_INT_5_9_9_9_REV;if(r===oce)return c.UNSIGNED_INT_10F_11F_11F_REV;if(r===rce)return c.BYTE;if(r===ice)return c.SHORT;if(r===Pw)return c.UNSIGNED_SHORT;if(r===wj)return c.INT;if(r===Dc)return c.UNSIGNED_INT;if(r===Il)return c.FLOAT;if(r===lf)return c.HALF_FLOAT;if(r===sce)return c.ALPHA;if(r===lce)return c.RGB;if(r===Qs)return c.RGBA;if(r===uf)return c.DEPTH_COMPONENT;if(r===ag)return c.DEPTH_STENCIL;if(r===Mj)return c.RED;if(r===Pj)return c.RED_INTEGER;if(r===fy)return c.RG;if(r===Cj)return c.RG_INTEGER;if(r===Aj)return c.RGBA_INTEGER;if(r===FI||r===UI||r===BI||r===zI)if(h===ai)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(r===FI)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===UI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===BI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===zI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(r===FI)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===UI)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===BI)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===zI)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===lz||r===uz||r===cz||r===dz)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(r===lz)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===uz)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===cz)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===dz)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===fz||r===hz||r===pz||r===mz||r===gz||r===vz||r===_z)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(r===fz||r===hz)return h===ai?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(r===pz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC;if(r===mz)return u.COMPRESSED_R11_EAC;if(r===gz)return u.COMPRESSED_SIGNED_R11_EAC;if(r===vz)return u.COMPRESSED_RG11_EAC;if(r===_z)return u.COMPRESSED_SIGNED_RG11_EAC}else return null;if(r===yz||r===bz||r===xz||r===Sz||r===wz||r===Ez||r===Tz||r===Mz||r===Pz||r===Cz||r===Az||r===kz||r===Iz||r===Rz)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(r===yz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===bz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===xz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Sz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===wz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Ez)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Tz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Mz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Pz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Cz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Az)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===kz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Iz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Rz)return h===ai?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Dz||r===Oz||r===Nz)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(r===Dz)return h===ai?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Oz)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Nz)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Lz||r===Fz||r===Uz||r===Bz)if(u=e.get("EXT_texture_compression_rgtc"),u!==null){if(r===Lz)return u.COMPRESSED_RED_RGTC1_EXT;if(r===Fz)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Uz)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Bz)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Cw?c.UNSIGNED_INT_24_8:c[r]!==void 0?c[r]:null}return{convert:n}}const BPe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,zPe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class jPe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const r=new Mce(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new rl({vertexShader:BPe,fragmentShader:zPe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new No(new My(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class VPe extends xg{constructor(e,n){super();const r=this;let o=null,u=1,h=null,m="local-floor",b=1,S=null,T=null,k=null,O=null,L=null,H=null;const G=typeof XRWebGLBinding<"u",V=new jPe,I={},K=n.getContextAttributes();let ue=null,P=null;const ae=[],ge=[],me=new gr;let J=null;const te=new ko;te.viewport=new _i;const oe=new ko;oe.viewport=new _i;const Y=[te,oe],ke=new VSe;let $e=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(xt){let vt=ae[xt];return vt===void 0&&(vt=new g4,ae[xt]=vt),vt.getTargetRaySpace()},this.getControllerGrip=function(xt){let vt=ae[xt];return vt===void 0&&(vt=new g4,ae[xt]=vt),vt.getGripSpace()},this.getHand=function(xt){let vt=ae[xt];return vt===void 0&&(vt=new g4,ae[xt]=vt),vt.getHandSpace()};function Qe(xt){const vt=ge.indexOf(xt.inputSource);if(vt===-1)return;const Zt=ae[vt];Zt!==void 0&&(Zt.update(xt.inputSource,xt.frame,S||h),Zt.dispatchEvent({type:xt.type,data:xt.inputSource}))}function pe(){o.removeEventListener("select",Qe),o.removeEventListener("selectstart",Qe),o.removeEventListener("selectend",Qe),o.removeEventListener("squeeze",Qe),o.removeEventListener("squeezestart",Qe),o.removeEventListener("squeezeend",Qe),o.removeEventListener("end",pe),o.removeEventListener("inputsourceschange",Ve);for(let xt=0;xt<ae.length;xt++){const vt=ge[xt];vt!==null&&(ge[xt]=null,ae[xt].disconnect(vt))}$e=null,ot=null,V.reset();for(const xt in I)delete I[xt];e.setRenderTarget(ue),L=null,O=null,k=null,o=null,P=null,Dn.stop(),r.isPresenting=!1,e.setPixelRatio(J),e.setSize(me.width,me.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(xt){u=xt,r.isPresenting===!0&&Wn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(xt){m=xt,r.isPresenting===!0&&Wn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return S||h},this.setReferenceSpace=function(xt){S=xt},this.getBaseLayer=function(){return O!==null?O:L},this.getBinding=function(){return k===null&&G&&(k=new XRWebGLBinding(o,n)),k},this.getFrame=function(){return H},this.getSession=function(){return o},this.setSession=async function(xt){if(o=xt,o!==null){if(ue=e.getRenderTarget(),o.addEventListener("select",Qe),o.addEventListener("selectstart",Qe),o.addEventListener("selectend",Qe),o.addEventListener("squeeze",Qe),o.addEventListener("squeezestart",Qe),o.addEventListener("squeezeend",Qe),o.addEventListener("end",pe),o.addEventListener("inputsourceschange",Ve),K.xrCompatible!==!0&&await n.makeXRCompatible(),J=e.getPixelRatio(),e.getSize(me),G&&"createProjectionLayer"in XRWebGLBinding.prototype){let Zt=null,Mn=null,sn=null;K.depth&&(sn=K.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Zt=K.stencil?ag:uf,Mn=K.stencil?Cw:Dc);const Fn={colorFormat:n.RGBA8,depthFormat:sn,scaleFactor:u};k=this.getBinding(),O=k.createProjectionLayer(Fn),o.updateRenderState({layers:[O]}),e.setPixelRatio(1),e.setSize(O.textureWidth,O.textureHeight,!1),P=new Ol(O.textureWidth,O.textureHeight,{format:Qs,type:$s,depthTexture:new Dw(O.textureWidth,O.textureHeight,Mn,void 0,void 0,void 0,void 0,void 0,void 0,Zt),stencilBuffer:K.stencil,colorSpace:e.outputColorSpace,samples:K.antialias?4:0,resolveDepthBuffer:O.ignoreDepthValues===!1,resolveStencilBuffer:O.ignoreDepthValues===!1})}else{const Zt={antialias:K.antialias,alpha:!0,depth:K.depth,stencil:K.stencil,framebufferScaleFactor:u};L=new XRWebGLLayer(o,n,Zt),o.updateRenderState({baseLayer:L}),e.setPixelRatio(1),e.setSize(L.framebufferWidth,L.framebufferHeight,!1),P=new Ol(L.framebufferWidth,L.framebufferHeight,{format:Qs,type:$s,colorSpace:e.outputColorSpace,stencilBuffer:K.stencil,resolveDepthBuffer:L.ignoreDepthValues===!1,resolveStencilBuffer:L.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(b),S=null,h=await o.requestReferenceSpace(m),Dn.setContext(o),Dn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return V.getDepthTexture()};function Ve(xt){for(let vt=0;vt<xt.removed.length;vt++){const Zt=xt.removed[vt],Mn=ge.indexOf(Zt);Mn>=0&&(ge[Mn]=null,ae[Mn].disconnect(Zt))}for(let vt=0;vt<xt.added.length;vt++){const Zt=xt.added[vt];let Mn=ge.indexOf(Zt);if(Mn===-1){for(let Fn=0;Fn<ae.length;Fn++)if(Fn>=ge.length){ge.push(Zt),Mn=Fn;break}else if(ge[Fn]===null){ge[Fn]=Zt,Mn=Fn;break}if(Mn===-1)break}const sn=ae[Mn];sn&&sn.connect(Zt)}}const Ue=new Xe,Pt=new Xe;function Me(xt,vt,Zt){Ue.setFromMatrixPosition(vt.matrixWorld),Pt.setFromMatrixPosition(Zt.matrixWorld);const Mn=Ue.distanceTo(Pt),sn=vt.projectionMatrix.elements,Fn=Zt.projectionMatrix.elements,fr=sn[14]/(sn[10]-1),pn=sn[14]/(sn[10]+1),zn=(sn[9]+1)/sn[5],nr=(sn[9]-1)/sn[5],Un=(sn[8]-1)/sn[0],st=(Fn[8]+1)/Fn[0],De=fr*Un,or=fr*st,sr=Mn/(-Un+st),Pn=sr*-Un;if(vt.matrixWorld.decompose(xt.position,xt.quaternion,xt.scale),xt.translateX(Pn),xt.translateZ(sr),xt.matrixWorld.compose(xt.position,xt.quaternion,xt.scale),xt.matrixWorldInverse.copy(xt.matrixWorld).invert(),sn[10]===-1)xt.projectionMatrix.copy(vt.projectionMatrix),xt.projectionMatrixInverse.copy(vt.projectionMatrixInverse);else{const Jt=fr+sr,we=pn+sr,ie=De-Pn,ze=or+(Mn-Pn),St=zn*pn/we*Jt,_t=nr*pn/we*Jt;xt.projectionMatrix.makePerspective(ie,ze,St,_t,Jt,we),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert()}}function Ot(xt,vt){vt===null?xt.matrixWorld.copy(xt.matrix):xt.matrixWorld.multiplyMatrices(vt.matrixWorld,xt.matrix),xt.matrixWorldInverse.copy(xt.matrixWorld).invert()}this.updateCamera=function(xt){if(o===null)return;let vt=xt.near,Zt=xt.far;V.texture!==null&&(V.depthNear>0&&(vt=V.depthNear),V.depthFar>0&&(Zt=V.depthFar)),ke.near=oe.near=te.near=vt,ke.far=oe.far=te.far=Zt,($e!==ke.near||ot!==ke.far)&&(o.updateRenderState({depthNear:ke.near,depthFar:ke.far}),$e=ke.near,ot=ke.far),ke.layers.mask=xt.layers.mask|6,te.layers.mask=ke.layers.mask&3,oe.layers.mask=ke.layers.mask&5;const Mn=xt.parent,sn=ke.cameras;Ot(ke,Mn);for(let Fn=0;Fn<sn.length;Fn++)Ot(sn[Fn],Mn);sn.length===2?Me(ke,te,oe):ke.projectionMatrix.copy(te.projectionMatrix),Tn(xt,ke,Mn)};function Tn(xt,vt,Zt){Zt===null?xt.matrix.copy(vt.matrixWorld):(xt.matrix.copy(Zt.matrixWorld),xt.matrix.invert(),xt.matrix.multiply(vt.matrixWorld)),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.updateMatrixWorld(!0),xt.projectionMatrix.copy(vt.projectionMatrix),xt.projectionMatrixInverse.copy(vt.projectionMatrixInverse),xt.isPerspectiveCamera&&(xt.fov=hy*2*Math.atan(1/xt.projectionMatrix.elements[5]),xt.zoom=1)}this.getCamera=function(){return ke},this.getFoveation=function(){if(!(O===null&&L===null))return b},this.setFoveation=function(xt){b=xt,O!==null&&(O.fixedFoveation=xt),L!==null&&L.fixedFoveation!==void 0&&(L.fixedFoveation=xt)},this.hasDepthSensing=function(){return V.texture!==null},this.getDepthSensingMesh=function(){return V.getMesh(ke)},this.getCameraTexture=function(xt){return I[xt]};let yn=null;function qn(xt,vt){if(T=vt.getViewerPose(S||h),H=vt,T!==null){const Zt=T.views;L!==null&&(e.setRenderTargetFramebuffer(P,L.framebuffer),e.setRenderTarget(P));let Mn=!1;Zt.length!==ke.cameras.length&&(ke.cameras.length=0,Mn=!0);for(let pn=0;pn<Zt.length;pn++){const zn=Zt[pn];let nr=null;if(L!==null)nr=L.getViewport(zn);else{const st=k.getViewSubImage(O,zn);nr=st.viewport,pn===0&&(e.setRenderTargetTextures(P,st.colorTexture,st.depthStencilTexture),e.setRenderTarget(P))}let Un=Y[pn];Un===void 0&&(Un=new ko,Un.layers.enable(pn),Un.viewport=new _i,Y[pn]=Un),Un.matrix.fromArray(zn.transform.matrix),Un.matrix.decompose(Un.position,Un.quaternion,Un.scale),Un.projectionMatrix.fromArray(zn.projectionMatrix),Un.projectionMatrixInverse.copy(Un.projectionMatrix).invert(),Un.viewport.set(nr.x,nr.y,nr.width,nr.height),pn===0&&(ke.matrix.copy(Un.matrix),ke.matrix.decompose(ke.position,ke.quaternion,ke.scale)),Mn===!0&&ke.cameras.push(Un)}const sn=o.enabledFeatures;if(sn&&sn.includes("depth-sensing")&&o.depthUsage=="gpu-optimized"&&G){k=r.getBinding();const pn=k.getDepthInformation(Zt[0]);pn&&pn.isValid&&pn.texture&&V.init(pn,o.renderState)}if(sn&&sn.includes("camera-access")&&G){e.state.unbindTexture(),k=r.getBinding();for(let pn=0;pn<Zt.length;pn++){const zn=Zt[pn].camera;if(zn){let nr=I[zn];nr||(nr=new Mce,I[zn]=nr);const Un=k.getCameraImage(zn);nr.sourceTexture=Un}}}}for(let Zt=0;Zt<ae.length;Zt++){const Mn=ge[Zt],sn=ae[Zt];Mn!==null&&sn!==void 0&&sn.update(Mn,vt,S||h)}yn&&yn(xt,vt),vt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:vt}),H=null}const Dn=new Ace;Dn.setAnimationLoop(qn),this.setAnimationLoop=function(xt){yn=xt},this.dispose=function(){}}}const $m=new Nc,HPe=new vr;function GPe(c,e){function n(V,I){V.matrixAutoUpdate===!0&&V.updateMatrix(),I.value.copy(V.matrix)}function r(V,I){I.color.getRGB(V.fogColor.value,vce(c)),I.isFog?(V.fogNear.value=I.near,V.fogFar.value=I.far):I.isFogExp2&&(V.fogDensity.value=I.density)}function o(V,I,K,ue,P){I.isMeshBasicMaterial||I.isMeshLambertMaterial?u(V,I):I.isMeshToonMaterial?(u(V,I),k(V,I)):I.isMeshPhongMaterial?(u(V,I),T(V,I)):I.isMeshStandardMaterial?(u(V,I),O(V,I),I.isMeshPhysicalMaterial&&L(V,I,P)):I.isMeshMatcapMaterial?(u(V,I),H(V,I)):I.isMeshDepthMaterial?u(V,I):I.isMeshDistanceMaterial?(u(V,I),G(V,I)):I.isMeshNormalMaterial?u(V,I):I.isLineBasicMaterial?(h(V,I),I.isLineDashedMaterial&&m(V,I)):I.isPointsMaterial?b(V,I,K,ue):I.isSpriteMaterial?S(V,I):I.isShadowMaterial?(V.color.value.copy(I.color),V.opacity.value=I.opacity):I.isShaderMaterial&&(I.uniformsNeedUpdate=!1)}function u(V,I){V.opacity.value=I.opacity,I.color&&V.diffuse.value.copy(I.color),I.emissive&&V.emissive.value.copy(I.emissive).multiplyScalar(I.emissiveIntensity),I.map&&(V.map.value=I.map,n(I.map,V.mapTransform)),I.alphaMap&&(V.alphaMap.value=I.alphaMap,n(I.alphaMap,V.alphaMapTransform)),I.bumpMap&&(V.bumpMap.value=I.bumpMap,n(I.bumpMap,V.bumpMapTransform),V.bumpScale.value=I.bumpScale,I.side===os&&(V.bumpScale.value*=-1)),I.normalMap&&(V.normalMap.value=I.normalMap,n(I.normalMap,V.normalMapTransform),V.normalScale.value.copy(I.normalScale),I.side===os&&V.normalScale.value.negate()),I.displacementMap&&(V.displacementMap.value=I.displacementMap,n(I.displacementMap,V.displacementMapTransform),V.displacementScale.value=I.displacementScale,V.displacementBias.value=I.displacementBias),I.emissiveMap&&(V.emissiveMap.value=I.emissiveMap,n(I.emissiveMap,V.emissiveMapTransform)),I.specularMap&&(V.specularMap.value=I.specularMap,n(I.specularMap,V.specularMapTransform)),I.alphaTest>0&&(V.alphaTest.value=I.alphaTest);const K=e.get(I),ue=K.envMap,P=K.envMapRotation;ue&&(V.envMap.value=ue,$m.copy(P),$m.x*=-1,$m.y*=-1,$m.z*=-1,ue.isCubeTexture&&ue.isRenderTargetTexture===!1&&($m.y*=-1,$m.z*=-1),V.envMapRotation.value.setFromMatrix4(HPe.makeRotationFromEuler($m)),V.flipEnvMap.value=ue.isCubeTexture&&ue.isRenderTargetTexture===!1?-1:1,V.reflectivity.value=I.reflectivity,V.ior.value=I.ior,V.refractionRatio.value=I.refractionRatio),I.lightMap&&(V.lightMap.value=I.lightMap,V.lightMapIntensity.value=I.lightMapIntensity,n(I.lightMap,V.lightMapTransform)),I.aoMap&&(V.aoMap.value=I.aoMap,V.aoMapIntensity.value=I.aoMapIntensity,n(I.aoMap,V.aoMapTransform))}function h(V,I){V.diffuse.value.copy(I.color),V.opacity.value=I.opacity,I.map&&(V.map.value=I.map,n(I.map,V.mapTransform))}function m(V,I){V.dashSize.value=I.dashSize,V.totalSize.value=I.dashSize+I.gapSize,V.scale.value=I.scale}function b(V,I,K,ue){V.diffuse.value.copy(I.color),V.opacity.value=I.opacity,V.size.value=I.size*K,V.scale.value=ue*.5,I.map&&(V.map.value=I.map,n(I.map,V.uvTransform)),I.alphaMap&&(V.alphaMap.value=I.alphaMap,n(I.alphaMap,V.alphaMapTransform)),I.alphaTest>0&&(V.alphaTest.value=I.alphaTest)}function S(V,I){V.diffuse.value.copy(I.color),V.opacity.value=I.opacity,V.rotation.value=I.rotation,I.map&&(V.map.value=I.map,n(I.map,V.mapTransform)),I.alphaMap&&(V.alphaMap.value=I.alphaMap,n(I.alphaMap,V.alphaMapTransform)),I.alphaTest>0&&(V.alphaTest.value=I.alphaTest)}function T(V,I){V.specular.value.copy(I.specular),V.shininess.value=Math.max(I.shininess,1e-4)}function k(V,I){I.gradientMap&&(V.gradientMap.value=I.gradientMap)}function O(V,I){V.metalness.value=I.metalness,I.metalnessMap&&(V.metalnessMap.value=I.metalnessMap,n(I.metalnessMap,V.metalnessMapTransform)),V.roughness.value=I.roughness,I.roughnessMap&&(V.roughnessMap.value=I.roughnessMap,n(I.roughnessMap,V.roughnessMapTransform)),I.envMap&&(V.envMapIntensity.value=I.envMapIntensity)}function L(V,I,K){V.ior.value=I.ior,I.sheen>0&&(V.sheenColor.value.copy(I.sheenColor).multiplyScalar(I.sheen),V.sheenRoughness.value=I.sheenRoughness,I.sheenColorMap&&(V.sheenColorMap.value=I.sheenColorMap,n(I.sheenColorMap,V.sheenColorMapTransform)),I.sheenRoughnessMap&&(V.sheenRoughnessMap.value=I.sheenRoughnessMap,n(I.sheenRoughnessMap,V.sheenRoughnessMapTransform))),I.clearcoat>0&&(V.clearcoat.value=I.clearcoat,V.clearcoatRoughness.value=I.clearcoatRoughness,I.clearcoatMap&&(V.clearcoatMap.value=I.clearcoatMap,n(I.clearcoatMap,V.clearcoatMapTransform)),I.clearcoatRoughnessMap&&(V.clearcoatRoughnessMap.value=I.clearcoatRoughnessMap,n(I.clearcoatRoughnessMap,V.clearcoatRoughnessMapTransform)),I.clearcoatNormalMap&&(V.clearcoatNormalMap.value=I.clearcoatNormalMap,n(I.clearcoatNormalMap,V.clearcoatNormalMapTransform),V.clearcoatNormalScale.value.copy(I.clearcoatNormalScale),I.side===os&&V.clearcoatNormalScale.value.negate())),I.dispersion>0&&(V.dispersion.value=I.dispersion),I.iridescence>0&&(V.iridescence.value=I.iridescence,V.iridescenceIOR.value=I.iridescenceIOR,V.iridescenceThicknessMinimum.value=I.iridescenceThicknessRange[0],V.iridescenceThicknessMaximum.value=I.iridescenceThicknessRange[1],I.iridescenceMap&&(V.iridescenceMap.value=I.iridescenceMap,n(I.iridescenceMap,V.iridescenceMapTransform)),I.iridescenceThicknessMap&&(V.iridescenceThicknessMap.value=I.iridescenceThicknessMap,n(I.iridescenceThicknessMap,V.iridescenceThicknessMapTransform))),I.transmission>0&&(V.transmission.value=I.transmission,V.transmissionSamplerMap.value=K.texture,V.transmissionSamplerSize.value.set(K.width,K.height),I.transmissionMap&&(V.transmissionMap.value=I.transmissionMap,n(I.transmissionMap,V.transmissionMapTransform)),V.thickness.value=I.thickness,I.thicknessMap&&(V.thicknessMap.value=I.thicknessMap,n(I.thicknessMap,V.thicknessMapTransform)),V.attenuationDistance.value=I.attenuationDistance,V.attenuationColor.value.copy(I.attenuationColor)),I.anisotropy>0&&(V.anisotropyVector.value.set(I.anisotropy*Math.cos(I.anisotropyRotation),I.anisotropy*Math.sin(I.anisotropyRotation)),I.anisotropyMap&&(V.anisotropyMap.value=I.anisotropyMap,n(I.anisotropyMap,V.anisotropyMapTransform))),V.specularIntensity.value=I.specularIntensity,V.specularColor.value.copy(I.specularColor),I.specularColorMap&&(V.specularColorMap.value=I.specularColorMap,n(I.specularColorMap,V.specularColorMapTransform)),I.specularIntensityMap&&(V.specularIntensityMap.value=I.specularIntensityMap,n(I.specularIntensityMap,V.specularIntensityMapTransform))}function H(V,I){I.matcap&&(V.matcap.value=I.matcap)}function G(V,I){const K=e.get(I).light;V.referencePosition.value.setFromMatrixPosition(K.matrixWorld),V.nearDistance.value=K.shadow.camera.near,V.farDistance.value=K.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:o}}function WPe(c,e,n,r){let o={},u={},h=[];const m=c.getParameter(c.MAX_UNIFORM_BUFFER_BINDINGS);function b(K,ue){const P=ue.program;r.uniformBlockBinding(K,P)}function S(K,ue){let P=o[K.id];P===void 0&&(H(K),P=T(K),o[K.id]=P,K.addEventListener("dispose",V));const ae=ue.program;r.updateUBOMapping(K,ae);const ge=e.render.frame;u[K.id]!==ge&&(O(K),u[K.id]=ge)}function T(K){const ue=k();K.__bindingPointIndex=ue;const P=c.createBuffer(),ae=K.__size,ge=K.usage;return c.bindBuffer(c.UNIFORM_BUFFER,P),c.bufferData(c.UNIFORM_BUFFER,ae,ge),c.bindBuffer(c.UNIFORM_BUFFER,null),c.bindBufferBase(c.UNIFORM_BUFFER,ue,P),P}function k(){for(let K=0;K<m;K++)if(h.indexOf(K)===-1)return h.push(K),K;return ar("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function O(K){const ue=o[K.id],P=K.uniforms,ae=K.__cache;c.bindBuffer(c.UNIFORM_BUFFER,ue);for(let ge=0,me=P.length;ge<me;ge++){const J=Array.isArray(P[ge])?P[ge]:[P[ge]];for(let te=0,oe=J.length;te<oe;te++){const Y=J[te];if(L(Y,ge,te,ae)===!0){const ke=Y.__offset,$e=Array.isArray(Y.value)?Y.value:[Y.value];let ot=0;for(let Qe=0;Qe<$e.length;Qe++){const pe=$e[Qe],Ve=G(pe);typeof pe=="number"||typeof pe=="boolean"?(Y.__data[0]=pe,c.bufferSubData(c.UNIFORM_BUFFER,ke+ot,Y.__data)):pe.isMatrix3?(Y.__data[0]=pe.elements[0],Y.__data[1]=pe.elements[1],Y.__data[2]=pe.elements[2],Y.__data[3]=0,Y.__data[4]=pe.elements[3],Y.__data[5]=pe.elements[4],Y.__data[6]=pe.elements[5],Y.__data[7]=0,Y.__data[8]=pe.elements[6],Y.__data[9]=pe.elements[7],Y.__data[10]=pe.elements[8],Y.__data[11]=0):(pe.toArray(Y.__data,ot),ot+=Ve.storage/Float32Array.BYTES_PER_ELEMENT)}c.bufferSubData(c.UNIFORM_BUFFER,ke,Y.__data)}}}c.bindBuffer(c.UNIFORM_BUFFER,null)}function L(K,ue,P,ae){const ge=K.value,me=ue+"_"+P;if(ae[me]===void 0)return typeof ge=="number"||typeof ge=="boolean"?ae[me]=ge:ae[me]=ge.clone(),!0;{const J=ae[me];if(typeof ge=="number"||typeof ge=="boolean"){if(J!==ge)return ae[me]=ge,!0}else if(J.equals(ge)===!1)return J.copy(ge),!0}return!1}function H(K){const ue=K.uniforms;let P=0;const ae=16;for(let me=0,J=ue.length;me<J;me++){const te=Array.isArray(ue[me])?ue[me]:[ue[me]];for(let oe=0,Y=te.length;oe<Y;oe++){const ke=te[oe],$e=Array.isArray(ke.value)?ke.value:[ke.value];for(let ot=0,Qe=$e.length;ot<Qe;ot++){const pe=$e[ot],Ve=G(pe),Ue=P%ae,Pt=Ue%Ve.boundary,Me=Ue+Pt;P+=Pt,Me!==0&&ae-Me<Ve.storage&&(P+=ae-Me),ke.__data=new Float32Array(Ve.storage/Float32Array.BYTES_PER_ELEMENT),ke.__offset=P,P+=Ve.storage}}}const ge=P%ae;return ge>0&&(P+=ae-ge),K.__size=P,K.__cache={},this}function G(K){const ue={boundary:0,storage:0};return typeof K=="number"||typeof K=="boolean"?(ue.boundary=4,ue.storage=4):K.isVector2?(ue.boundary=8,ue.storage=8):K.isVector3||K.isColor?(ue.boundary=16,ue.storage=12):K.isVector4?(ue.boundary=16,ue.storage=16):K.isMatrix3?(ue.boundary=48,ue.storage=48):K.isMatrix4?(ue.boundary=64,ue.storage=64):K.isTexture?Wn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Wn("WebGLRenderer: Unsupported uniform value type.",K),ue}function V(K){const ue=K.target;ue.removeEventListener("dispose",V);const P=h.indexOf(ue.__bindingPointIndex);h.splice(P,1),c.deleteBuffer(o[ue.id]),delete o[ue.id],delete u[ue.id]}function I(){for(const K in o)c.deleteBuffer(o[K]);h=[],o={},u={}}return{bind:b,update:S,dispose:I}}const qPe=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let _c=null;function XPe(){return _c===null&&(_c=new Nj(qPe,16,16,fy,lf),_c.name="DFG_LUT",_c.minFilter=fa,_c.magFilter=fa,_c.wrapS=Tc,_c.wrapT=Tc,_c.generateMipmaps=!1,_c.needsUpdate=!0),_c}class KPe{constructor(e={}){const{canvas:n=S1e(),context:r=null,depth:o=!0,stencil:u=!1,alpha:h=!1,antialias:m=!1,premultipliedAlpha:b=!0,preserveDrawingBuffer:S=!1,powerPreference:T="default",failIfMajorPerformanceCaveat:k=!1,reversedDepthBuffer:O=!1,outputBufferType:L=$s}=e;this.isWebGLRenderer=!0;let H;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");H=r.getContextAttributes().alpha}else H=h;const G=L,V=new Set([Aj,Cj,Pj]),I=new Set([$s,Dc,Pw,Cw,Ej,Tj]),K=new Uint32Array(4),ue=new Int32Array(4);let P=null,ae=null;const ge=[],me=[];let J=null;this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ac,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const te=this;let oe=!1;this._outputColorSpace=da;let Y=0,ke=0,$e=null,ot=-1,Qe=null;const pe=new _i,Ve=new _i;let Ue=null;const Pt=new tr(0);let Me=0,Ot=n.width,Tn=n.height,yn=1,qn=null,Dn=null;const xt=new _i(0,0,Ot,Tn),vt=new _i(0,0,Ot,Tn);let Zt=!1;const Mn=new Fj;let sn=!1,Fn=!1;const fr=new vr,pn=new Xe,zn=new _i,nr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Un=!1;function st(){return $e===null?yn:1}let De=r;function or(he,He){return n.getContext(he,He)}try{const he={alpha:!0,depth:o,stencil:u,antialias:m,premultipliedAlpha:b,preserveDrawingBuffer:S,powerPreference:T,failIfMajorPerformanceCaveat:k};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${xj}`),n.addEventListener("webglcontextlost",Sn,!1),n.addEventListener("webglcontextrestored",_r,!1),n.addEventListener("webglcontextcreationerror",en,!1),De===null){const He="webgl2";if(De=or(He,he),De===null)throw or(He)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(he){throw ar("WebGLRenderer: "+he.message),he}let sr,Pn,Jt,we,ie,ze,St,_t,mt,ln,Wt,dn,fn,At,Kt,hn,mn,qt,Xn,Ae,Gt,Dt,Xt,Ct;function Mt(){sr=new XTe(De),sr.init(),Dt=new UPe(De,sr),Pn=new UTe(De,sr,e,Dt),Jt=new LPe(De,sr),Pn.reversedDepthBuffer&&O&&Jt.buffers.depth.setReversed(!0),we=new $Te(De),ie=new xPe,ze=new FPe(De,sr,Jt,ie,Pn,Dt,we),St=new zTe(te),_t=new qTe(te),mt=new ewe(De),Xt=new LTe(De,mt),ln=new KTe(De,mt,we,Xt),Wt=new JTe(De,ln,mt,we),Xn=new ZTe(De,Pn,ze),hn=new BTe(ie),dn=new bPe(te,St,_t,sr,Pn,Xt,hn),fn=new GPe(te,ie),At=new wPe,Kt=new APe(sr),qt=new NTe(te,St,_t,Jt,Wt,H,b),mn=new OPe(te,Wt,Pn),Ct=new WPe(De,we,Pn,Jt),Ae=new FTe(De,sr,we),Gt=new YTe(De,sr,we),we.programs=dn.programs,te.capabilities=Pn,te.extensions=sr,te.properties=ie,te.renderLists=At,te.shadowMap=mn,te.state=Jt,te.info=we}Mt(),G!==$s&&(J=new eMe(G,n.width,n.height,o,u));const Yt=new VPe(te,De);this.xr=Yt,this.getContext=function(){return De},this.getContextAttributes=function(){return De.getContextAttributes()},this.forceContextLoss=function(){const he=sr.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=sr.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return yn},this.setPixelRatio=function(he){he!==void 0&&(yn=he,this.setSize(Ot,Tn,!1))},this.getSize=function(he){return he.set(Ot,Tn)},this.setSize=function(he,He,ft=!0){if(Yt.isPresenting){Wn("WebGLRenderer: Can't change size while VR device is presenting.");return}Ot=he,Tn=He,n.width=Math.floor(he*yn),n.height=Math.floor(He*yn),ft===!0&&(n.style.width=he+"px",n.style.height=He+"px"),J!==null&&J.setSize(n.width,n.height),this.setViewport(0,0,he,He)},this.getDrawingBufferSize=function(he){return he.set(Ot*yn,Tn*yn).floor()},this.setDrawingBufferSize=function(he,He,ft){Ot=he,Tn=He,yn=ft,n.width=Math.floor(he*ft),n.height=Math.floor(He*ft),this.setViewport(0,0,he,He)},this.setEffects=function(he){if(G===$s){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(he){for(let He=0;He<he.length;He++)if(he[He].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}J.setEffects(he||[])},this.getCurrentViewport=function(he){return he.copy(pe)},this.getViewport=function(he){return he.copy(xt)},this.setViewport=function(he,He,ft,lt){he.isVector4?xt.set(he.x,he.y,he.z,he.w):xt.set(he,He,ft,lt),Jt.viewport(pe.copy(xt).multiplyScalar(yn).round())},this.getScissor=function(he){return he.copy(vt)},this.setScissor=function(he,He,ft,lt){he.isVector4?vt.set(he.x,he.y,he.z,he.w):vt.set(he,He,ft,lt),Jt.scissor(Ve.copy(vt).multiplyScalar(yn).round())},this.getScissorTest=function(){return Zt},this.setScissorTest=function(he){Jt.setScissorTest(Zt=he)},this.setOpaqueSort=function(he){qn=he},this.setTransparentSort=function(he){Dn=he},this.getClearColor=function(he){return he.copy(qt.getClearColor())},this.setClearColor=function(){qt.setClearColor(...arguments)},this.getClearAlpha=function(){return qt.getClearAlpha()},this.setClearAlpha=function(){qt.setClearAlpha(...arguments)},this.clear=function(he=!0,He=!0,ft=!0){let lt=0;if(he){let Je=!1;if($e!==null){const Bt=$e.texture.format;Je=V.has(Bt)}if(Je){const Bt=$e.texture.type,an=I.has(Bt),tn=qt.getClearColor(),Qt=qt.getClearAlpha(),Cn=tn.r,Hn=tn.g,jn=tn.b;an?(K[0]=Cn,K[1]=Hn,K[2]=jn,K[3]=Qt,De.clearBufferuiv(De.COLOR,0,K)):(ue[0]=Cn,ue[1]=Hn,ue[2]=jn,ue[3]=Qt,De.clearBufferiv(De.COLOR,0,ue))}else lt|=De.COLOR_BUFFER_BIT}He&&(lt|=De.DEPTH_BUFFER_BIT),ft&&(lt|=De.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),De.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Sn,!1),n.removeEventListener("webglcontextrestored",_r,!1),n.removeEventListener("webglcontextcreationerror",en,!1),qt.dispose(),At.dispose(),Kt.dispose(),ie.dispose(),St.dispose(),_t.dispose(),Wt.dispose(),Xt.dispose(),Ct.dispose(),dn.dispose(),Yt.dispose(),Yt.removeEventListener("sessionstart",li),Yt.removeEventListener("sessionend",hr),yr.stop()};function Sn(he){he.preventDefault(),e3("WebGLRenderer: Context Lost."),oe=!0}function _r(){e3("WebGLRenderer: Context Restored."),oe=!1;const he=we.autoReset,He=mn.enabled,ft=mn.autoUpdate,lt=mn.needsUpdate,Je=mn.type;Mt(),we.autoReset=he,mn.enabled=He,mn.autoUpdate=ft,mn.needsUpdate=lt,mn.type=Je}function en(he){ar("WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function vn(he){const He=he.target;He.removeEventListener("dispose",vn),rr(He)}function rr(he){rn(he),ie.remove(he)}function rn(he){const He=ie.get(he).programs;He!==void 0&&(He.forEach(function(ft){dn.releaseProgram(ft)}),he.isShaderMaterial&&dn.releaseShaderCache(he))}this.renderBufferDirect=function(he,He,ft,lt,Je,Bt){He===null&&(He=nr);const an=Je.isMesh&&Je.matrixWorld.determinant()<0,tn=yi(he,He,ft,lt,Je);Jt.setMaterial(lt,an);let Qt=ft.index,Cn=1;if(lt.wireframe===!0){if(Qt=ln.getWireframeAttribute(ft),Qt===void 0)return;Cn=2}const Hn=ft.drawRange,jn=ft.attributes.position;let lr=Hn.start*Cn,xr=(Hn.start+Hn.count)*Cn;Bt!==null&&(lr=Math.max(lr,Bt.start*Cn),xr=Math.min(xr,(Bt.start+Bt.count)*Cn)),Qt!==null?(lr=Math.max(lr,0),xr=Math.min(xr,Qt.count)):jn!=null&&(lr=Math.max(lr,0),xr=Math.min(xr,jn.count));const $r=xr-lr;if($r<0||$r===1/0)return;Xt.setup(Je,lt,tn,ft,Qt);let Zr,Ir=Ae;if(Qt!==null&&(Zr=mt.get(Qt),Ir=Gt,Ir.setIndex(Zr)),Je.isMesh)lt.wireframe===!0?(Jt.setLineWidth(lt.wireframeLinewidth*st()),Ir.setMode(De.LINES)):Ir.setMode(De.TRIANGLES);else if(Je.isLine){let Ln=lt.linewidth;Ln===void 0&&(Ln=1),Jt.setLineWidth(Ln*st()),Je.isLineSegments?Ir.setMode(De.LINES):Je.isLineLoop?Ir.setMode(De.LINE_LOOP):Ir.setMode(De.LINE_STRIP)}else Je.isPoints?Ir.setMode(De.POINTS):Je.isSprite&&Ir.setMode(De.TRIANGLES);if(Je.isBatchedMesh)if(Je._multiDrawInstances!==null)Rw("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ir.renderMultiDrawInstances(Je._multiDrawStarts,Je._multiDrawCounts,Je._multiDrawCount,Je._multiDrawInstances);else if(sr.get("WEBGL_multi_draw"))Ir.renderMultiDraw(Je._multiDrawStarts,Je._multiDrawCounts,Je._multiDrawCount);else{const Ln=Je._multiDrawStarts,Nr=Je._multiDrawCounts,wr=Je._multiDrawCount,ma=Qt?mt.get(Qt).bytesPerElement:1,Fa=ie.get(lt).currentProgram.getUniforms();for(let ra=0;ra<wr;ra++)Fa.setValue(De,"_gl_DrawID",ra),Ir.render(Ln[ra]/ma,Nr[ra])}else if(Je.isInstancedMesh)Ir.renderInstances(lr,$r,Je.count);else if(ft.isInstancedBufferGeometry){const Ln=ft._maxInstanceCount!==void 0?ft._maxInstanceCount:1/0,Nr=Math.min(ft.instanceCount,Ln);Ir.renderInstances(lr,$r,Nr)}else Ir.render(lr,$r)};function kn(he,He,ft){he.transparent===!0&&he.side===wc&&he.forceSinglePass===!1?(he.side=os,he.needsUpdate=!0,Mr(he,He,ft),he.side=Rc,he.needsUpdate=!0,Mr(he,He,ft),he.side=wc):Mr(he,He,ft)}this.compile=function(he,He,ft=null){ft===null&&(ft=he),ae=Kt.get(ft),ae.init(He),me.push(ae),ft.traverseVisible(function(Je){Je.isLight&&Je.layers.test(He.layers)&&(ae.pushLight(Je),Je.castShadow&&ae.pushShadow(Je))}),he!==ft&&he.traverseVisible(function(Je){Je.isLight&&Je.layers.test(He.layers)&&(ae.pushLight(Je),Je.castShadow&&ae.pushShadow(Je))}),ae.setupLights();const lt=new Set;return he.traverse(function(Je){if(!(Je.isMesh||Je.isPoints||Je.isLine||Je.isSprite))return;const Bt=Je.material;if(Bt)if(Array.isArray(Bt))for(let an=0;an<Bt.length;an++){const tn=Bt[an];kn(tn,ft,Je),lt.add(tn)}else kn(Bt,ft,Je),lt.add(Bt)}),ae=me.pop(),lt},this.compileAsync=function(he,He,ft=null){const lt=this.compile(he,He,ft);return new Promise(Je=>{function Bt(){if(lt.forEach(function(an){ie.get(an).currentProgram.isReady()&&lt.delete(an)}),lt.size===0){Je(he);return}setTimeout(Bt,10)}sr.get("KHR_parallel_shader_compile")!==null?Bt():setTimeout(Bt,10)})};let gn=null;function $n(he){gn&&gn(he)}function li(){yr.stop()}function hr(){yr.start()}const yr=new Ace;yr.setAnimationLoop($n),typeof self<"u"&&yr.setContext(self),this.setAnimationLoop=function(he){gn=he,Yt.setAnimationLoop(he),he===null?yr.stop():yr.start()},Yt.addEventListener("sessionstart",li),Yt.addEventListener("sessionend",hr),this.render=function(he,He){if(He!==void 0&&He.isCamera!==!0){ar("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(oe===!0)return;const ft=Yt.enabled===!0&&Yt.isPresenting===!0,lt=J!==null&&($e===null||ft)&&J.begin(te,$e);if(he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),He.parent===null&&He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),Yt.enabled===!0&&Yt.isPresenting===!0&&(J===null||J.isCompositing()===!1)&&(Yt.cameraAutoUpdate===!0&&Yt.updateCamera(He),He=Yt.getCamera()),he.isScene===!0&&he.onBeforeRender(te,he,He,$e),ae=Kt.get(he,me.length),ae.init(He),me.push(ae),fr.multiplyMatrices(He.projectionMatrix,He.matrixWorldInverse),Mn.setFromProjectionMatrix(fr,Mc,He.reversedDepth),Fn=this.localClippingEnabled,sn=hn.init(this.clippingPlanes,Fn),P=At.get(he,ge.length),P.init(),ge.push(P),Yt.enabled===!0&&Yt.isPresenting===!0){const an=te.xr.getDepthSensingMesh();an!==null&&ui(an,He,-1/0,te.sortObjects)}ui(he,He,0,te.sortObjects),P.finish(),te.sortObjects===!0&&P.sort(qn,Dn),Un=Yt.enabled===!1||Yt.isPresenting===!1||Yt.hasDepthSensing()===!1,Un&&qt.addToRenderList(P,he),this.info.render.frame++,sn===!0&&hn.beginShadows();const Je=ae.state.shadowsArray;if(mn.render(Je,he,He),sn===!0&&hn.endShadows(),this.info.autoReset===!0&&this.info.reset(),(lt&&J.hasRenderPass())===!1){const an=P.opaque,tn=P.transmissive;if(ae.setupLights(),He.isArrayCamera){const Qt=He.cameras;if(tn.length>0)for(let Cn=0,Hn=Qt.length;Cn<Hn;Cn++){const jn=Qt[Cn];jr(an,tn,he,jn)}Un&&qt.render(he);for(let Cn=0,Hn=Qt.length;Cn<Hn;Cn++){const jn=Qt[Cn];Yr(P,he,jn,jn.viewport)}}else tn.length>0&&jr(an,tn,he,He),Un&&qt.render(he),Yr(P,he,He)}$e!==null&&ke===0&&(ze.updateMultisampleRenderTarget($e),ze.updateRenderTargetMipmap($e)),lt&&J.end(te),he.isScene===!0&&he.onAfterRender(te,he,He),Xt.resetDefaultState(),ot=-1,Qe=null,me.pop(),me.length>0?(ae=me[me.length-1],sn===!0&&hn.setGlobalState(te.clippingPlanes,ae.state.camera)):ae=null,ge.pop(),ge.length>0?P=ge[ge.length-1]:P=null};function ui(he,He,ft,lt){if(he.visible===!1)return;if(he.layers.test(He.layers)){if(he.isGroup)ft=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(He);else if(he.isLight)ae.pushLight(he),he.castShadow&&ae.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||Mn.intersectsSprite(he)){lt&&zn.setFromMatrixPosition(he.matrixWorld).applyMatrix4(fr);const an=Wt.update(he),tn=he.material;tn.visible&&P.push(he,an,tn,ft,zn.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(!he.frustumCulled||Mn.intersectsObject(he))){const an=Wt.update(he),tn=he.material;if(lt&&(he.boundingSphere!==void 0?(he.boundingSphere===null&&he.computeBoundingSphere(),zn.copy(he.boundingSphere.center)):(an.boundingSphere===null&&an.computeBoundingSphere(),zn.copy(an.boundingSphere.center)),zn.applyMatrix4(he.matrixWorld).applyMatrix4(fr)),Array.isArray(tn)){const Qt=an.groups;for(let Cn=0,Hn=Qt.length;Cn<Hn;Cn++){const jn=Qt[Cn],lr=tn[jn.materialIndex];lr&&lr.visible&&P.push(he,an,lr,ft,zn.z,jn)}}else tn.visible&&P.push(he,an,tn,ft,zn.z,null)}}const Bt=he.children;for(let an=0,tn=Bt.length;an<tn;an++)ui(Bt[an],He,ft,lt)}function Yr(he,He,ft,lt){const{opaque:Je,transmissive:Bt,transparent:an}=he;ae.setupLightsView(ft),sn===!0&&hn.setGlobalState(te.clippingPlanes,ft),lt&&Jt.viewport(pe.copy(lt)),Je.length>0&&mr(Je,He,ft),Bt.length>0&&mr(Bt,He,ft),an.length>0&&mr(an,He,ft),Jt.buffers.depth.setTest(!0),Jt.buffers.depth.setMask(!0),Jt.buffers.color.setMask(!0),Jt.setPolygonOffset(!1)}function jr(he,He,ft,lt){if((ft.isScene===!0?ft.overrideMaterial:null)!==null)return;if(ae.state.transmissionRenderTarget[lt.id]===void 0){const lr=sr.has("EXT_color_buffer_half_float")||sr.has("EXT_color_buffer_float");ae.state.transmissionRenderTarget[lt.id]=new Ol(1,1,{generateMipmaps:!0,type:lr?lf:$s,minFilter:tf,samples:Pn.samples,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Or.workingColorSpace})}const Bt=ae.state.transmissionRenderTarget[lt.id],an=lt.viewport||pe;Bt.setSize(an.z*te.transmissionResolutionScale,an.w*te.transmissionResolutionScale);const tn=te.getRenderTarget(),Qt=te.getActiveCubeFace(),Cn=te.getActiveMipmapLevel();te.setRenderTarget(Bt),te.getClearColor(Pt),Me=te.getClearAlpha(),Me<1&&te.setClearColor(16777215,.5),te.clear(),Un&&qt.render(ft);const Hn=te.toneMapping;te.toneMapping=Ac;const jn=lt.viewport;if(lt.viewport!==void 0&&(lt.viewport=void 0),ae.setupLightsView(lt),sn===!0&&hn.setGlobalState(te.clippingPlanes,lt),mr(he,ft,lt),ze.updateMultisampleRenderTarget(Bt),ze.updateRenderTargetMipmap(Bt),sr.has("WEBGL_multisampled_render_to_texture")===!1){let lr=!1;for(let xr=0,$r=He.length;xr<$r;xr++){const Zr=He[xr],{object:Ir,geometry:Ln,material:Nr,group:wr}=Zr;if(Nr.side===wc&&Ir.layers.test(lt.layers)){const ma=Nr.side;Nr.side=os,Nr.needsUpdate=!0,na(Ir,ft,lt,Ln,Nr,wr),Nr.side=ma,Nr.needsUpdate=!0,lr=!0}}lr===!0&&(ze.updateMultisampleRenderTarget(Bt),ze.updateRenderTargetMipmap(Bt))}te.setRenderTarget(tn,Qt,Cn),te.setClearColor(Pt,Me),jn!==void 0&&(lt.viewport=jn),te.toneMapping=Hn}function mr(he,He,ft){const lt=He.isScene===!0?He.overrideMaterial:null;for(let Je=0,Bt=he.length;Je<Bt;Je++){const an=he[Je],{object:tn,geometry:Qt,group:Cn}=an;let Hn=an.material;Hn.allowOverride===!0&&lt!==null&&(Hn=lt),tn.layers.test(ft.layers)&&na(tn,He,ft,Qt,Hn,Cn)}}function na(he,He,ft,lt,Je,Bt){he.onBeforeRender(te,He,ft,lt,Je,Bt),he.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),Je.onBeforeRender(te,He,ft,lt,he,Bt),Je.transparent===!0&&Je.side===wc&&Je.forceSinglePass===!1?(Je.side=os,Je.needsUpdate=!0,te.renderBufferDirect(ft,He,lt,Je,he,Bt),Je.side=Rc,Je.needsUpdate=!0,te.renderBufferDirect(ft,He,lt,Je,he,Bt),Je.side=wc):te.renderBufferDirect(ft,He,lt,Je,he,Bt),he.onAfterRender(te,He,ft,lt,Je,Bt)}function Mr(he,He,ft){He.isScene!==!0&&(He=nr);const lt=ie.get(he),Je=ae.state.lights,Bt=ae.state.shadowsArray,an=Je.state.version,tn=dn.getParameters(he,Je.state,Bt,He,ft),Qt=dn.getProgramCacheKey(tn);let Cn=lt.programs;lt.environment=he.isMeshStandardMaterial?He.environment:null,lt.fog=He.fog,lt.envMap=(he.isMeshStandardMaterial?_t:St).get(he.envMap||lt.environment),lt.envMapRotation=lt.environment!==null&&he.envMap===null?He.environmentRotation:he.envMapRotation,Cn===void 0&&(he.addEventListener("dispose",vn),Cn=new Map,lt.programs=Cn);let Hn=Cn.get(Qt);if(Hn!==void 0){if(lt.currentProgram===Hn&&lt.lightsStateVersion===an)return pa(he,tn),Hn}else tn.uniforms=dn.getUniforms(he),he.onBeforeCompile(tn,te),Hn=dn.acquireProgram(tn,Qt),Cn.set(Qt,Hn),lt.uniforms=tn.uniforms;const jn=lt.uniforms;return(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(jn.clippingPlanes=hn.uniform),pa(he,tn),lt.needsLights=Oi(he),lt.lightsStateVersion=an,lt.needsLights&&(jn.ambientLightColor.value=Je.state.ambient,jn.lightProbe.value=Je.state.probe,jn.directionalLights.value=Je.state.directional,jn.directionalLightShadows.value=Je.state.directionalShadow,jn.spotLights.value=Je.state.spot,jn.spotLightShadows.value=Je.state.spotShadow,jn.rectAreaLights.value=Je.state.rectArea,jn.ltc_1.value=Je.state.rectAreaLTC1,jn.ltc_2.value=Je.state.rectAreaLTC2,jn.pointLights.value=Je.state.point,jn.pointLightShadows.value=Je.state.pointShadow,jn.hemisphereLights.value=Je.state.hemi,jn.directionalShadowMap.value=Je.state.directionalShadowMap,jn.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,jn.spotShadowMap.value=Je.state.spotShadowMap,jn.spotLightMatrix.value=Je.state.spotLightMatrix,jn.spotLightMap.value=Je.state.spotLightMap,jn.pointShadowMap.value=Je.state.pointShadowMap,jn.pointShadowMatrix.value=Je.state.pointShadowMatrix),lt.currentProgram=Hn,lt.uniformsList=null,Hn}function Mi(he){if(he.uniformsList===null){const He=he.currentProgram.getUniforms();he.uniformsList=jI.seqWithValue(He.seq,he.uniforms)}return he.uniformsList}function pa(he,He){const ft=ie.get(he);ft.outputColorSpace=He.outputColorSpace,ft.batching=He.batching,ft.batchingColor=He.batchingColor,ft.instancing=He.instancing,ft.instancingColor=He.instancingColor,ft.instancingMorph=He.instancingMorph,ft.skinning=He.skinning,ft.morphTargets=He.morphTargets,ft.morphNormals=He.morphNormals,ft.morphColors=He.morphColors,ft.morphTargetsCount=He.morphTargetsCount,ft.numClippingPlanes=He.numClippingPlanes,ft.numIntersection=He.numClipIntersection,ft.vertexAlphas=He.vertexAlphas,ft.vertexTangents=He.vertexTangents,ft.toneMapping=He.toneMapping}function yi(he,He,ft,lt,Je){He.isScene!==!0&&(He=nr),ze.resetTextureUnits();const Bt=He.fog,an=lt.isMeshStandardMaterial?He.environment:null,tn=$e===null?te.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:Oo,Qt=(lt.isMeshStandardMaterial?_t:St).get(lt.envMap||an),Cn=lt.vertexColors===!0&&!!ft.attributes.color&&ft.attributes.color.itemSize===4,Hn=!!ft.attributes.tangent&&(!!lt.normalMap||lt.anisotropy>0),jn=!!ft.morphAttributes.position,lr=!!ft.morphAttributes.normal,xr=!!ft.morphAttributes.color;let $r=Ac;lt.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&($r=te.toneMapping);const Zr=ft.morphAttributes.position||ft.morphAttributes.normal||ft.morphAttributes.color,Ir=Zr!==void 0?Zr.length:0,Ln=ie.get(lt),Nr=ae.state.lights;if(sn===!0&&(Fn===!0||he!==Qe)){const Fi=he===Qe&&lt.id===ot;hn.setState(lt,he,Fi)}let wr=!1;lt.version===Ln.__version?(Ln.needsLights&&Ln.lightsStateVersion!==Nr.state.version||Ln.outputColorSpace!==tn||Je.isBatchedMesh&&Ln.batching===!1||!Je.isBatchedMesh&&Ln.batching===!0||Je.isBatchedMesh&&Ln.batchingColor===!0&&Je.colorTexture===null||Je.isBatchedMesh&&Ln.batchingColor===!1&&Je.colorTexture!==null||Je.isInstancedMesh&&Ln.instancing===!1||!Je.isInstancedMesh&&Ln.instancing===!0||Je.isSkinnedMesh&&Ln.skinning===!1||!Je.isSkinnedMesh&&Ln.skinning===!0||Je.isInstancedMesh&&Ln.instancingColor===!0&&Je.instanceColor===null||Je.isInstancedMesh&&Ln.instancingColor===!1&&Je.instanceColor!==null||Je.isInstancedMesh&&Ln.instancingMorph===!0&&Je.morphTexture===null||Je.isInstancedMesh&&Ln.instancingMorph===!1&&Je.morphTexture!==null||Ln.envMap!==Qt||lt.fog===!0&&Ln.fog!==Bt||Ln.numClippingPlanes!==void 0&&(Ln.numClippingPlanes!==hn.numPlanes||Ln.numIntersection!==hn.numIntersection)||Ln.vertexAlphas!==Cn||Ln.vertexTangents!==Hn||Ln.morphTargets!==jn||Ln.morphNormals!==lr||Ln.morphColors!==xr||Ln.toneMapping!==$r||Ln.morphTargetsCount!==Ir)&&(wr=!0):(wr=!0,Ln.__version=lt.version);let ma=Ln.currentProgram;wr===!0&&(ma=Mr(lt,He,Je));let Fa=!1,ra=!1,Cs=!1;const Lr=ma.getUniforms(),ia=Ln.uniforms;if(Jt.useProgram(ma.program)&&(Fa=!0,ra=!0,Cs=!0),lt.id!==ot&&(ot=lt.id,ra=!0),Fa||Qe!==he){Jt.buffers.depth.getReversed()&&he.reversedDepth!==!0&&(he._reversedDepth=!0,he.updateProjectionMatrix()),Lr.setValue(De,"projectionMatrix",he.projectionMatrix),Lr.setValue(De,"viewMatrix",he.matrixWorldInverse);const ga=Lr.map.cameraPosition;ga!==void 0&&ga.setValue(De,pn.setFromMatrixPosition(he.matrixWorld)),Pn.logarithmicDepthBuffer&&Lr.setValue(De,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial)&&Lr.setValue(De,"isOrthographic",he.isOrthographicCamera===!0),Qe!==he&&(Qe=he,ra=!0,Cs=!0)}if(Ln.needsLights&&(Nr.state.directionalShadowMap.length>0&&Lr.setValue(De,"directionalShadowMap",Nr.state.directionalShadowMap,ze),Nr.state.spotShadowMap.length>0&&Lr.setValue(De,"spotShadowMap",Nr.state.spotShadowMap,ze),Nr.state.pointShadowMap.length>0&&Lr.setValue(De,"pointShadowMap",Nr.state.pointShadowMap,ze)),Je.isSkinnedMesh){Lr.setOptional(De,Je,"bindMatrix"),Lr.setOptional(De,Je,"bindMatrixInverse");const Fi=Je.skeleton;Fi&&(Fi.boneTexture===null&&Fi.computeBoneTexture(),Lr.setValue(De,"boneTexture",Fi.boneTexture,ze))}Je.isBatchedMesh&&(Lr.setOptional(De,Je,"batchingTexture"),Lr.setValue(De,"batchingTexture",Je._matricesTexture,ze),Lr.setOptional(De,Je,"batchingIdTexture"),Lr.setValue(De,"batchingIdTexture",Je._indirectTexture,ze),Lr.setOptional(De,Je,"batchingColorTexture"),Je._colorsTexture!==null&&Lr.setValue(De,"batchingColorTexture",Je._colorsTexture,ze));const bi=ft.morphAttributes;if((bi.position!==void 0||bi.normal!==void 0||bi.color!==void 0)&&Xn.update(Je,ft,ma),(ra||Ln.receiveShadow!==Je.receiveShadow)&&(Ln.receiveShadow=Je.receiveShadow,Lr.setValue(De,"receiveShadow",Je.receiveShadow)),lt.isMeshGouraudMaterial&&lt.envMap!==null&&(ia.envMap.value=Qt,ia.flipEnvMap.value=Qt.isCubeTexture&&Qt.isRenderTargetTexture===!1?-1:1),lt.isMeshStandardMaterial&&lt.envMap===null&&He.environment!==null&&(ia.envMapIntensity.value=He.environmentIntensity),ia.dfgLUT!==void 0&&(ia.dfgLUT.value=XPe()),ra&&(Lr.setValue(De,"toneMappingExposure",te.toneMappingExposure),Ln.needsLights&&Pi(ia,Cs),Bt&&lt.fog===!0&&fn.refreshFogUniforms(ia,Bt),fn.refreshMaterialUniforms(ia,lt,yn,Tn,ae.state.transmissionRenderTarget[he.id]),jI.upload(De,Mi(Ln),ia,ze)),lt.isShaderMaterial&&lt.uniformsNeedUpdate===!0&&(jI.upload(De,Mi(Ln),ia,ze),lt.uniformsNeedUpdate=!1),lt.isSpriteMaterial&&Lr.setValue(De,"center",Je.center),Lr.setValue(De,"modelViewMatrix",Je.modelViewMatrix),Lr.setValue(De,"normalMatrix",Je.normalMatrix),Lr.setValue(De,"modelMatrix",Je.matrixWorld),lt.isShaderMaterial||lt.isRawShaderMaterial){const Fi=lt.uniformsGroups;for(let ga=0,Lo=Fi.length;ga<Lo;ga++){const ss=Fi[ga];Ct.update(ss,ma),Ct.bind(ss,ma)}}return ma}function Pi(he,He){he.ambientLightColor.needsUpdate=He,he.lightProbe.needsUpdate=He,he.directionalLights.needsUpdate=He,he.directionalLightShadows.needsUpdate=He,he.pointLights.needsUpdate=He,he.pointLightShadows.needsUpdate=He,he.spotLights.needsUpdate=He,he.spotLightShadows.needsUpdate=He,he.rectAreaLights.needsUpdate=He,he.hemisphereLights.needsUpdate=He}function Oi(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return ke},this.getRenderTarget=function(){return $e},this.setRenderTargetTextures=function(he,He,ft){const lt=ie.get(he);lt.__autoAllocateDepthBuffer=he.resolveDepthBuffer===!1,lt.__autoAllocateDepthBuffer===!1&&(lt.__useRenderToTexture=!1),ie.get(he.texture).__webglTexture=He,ie.get(he.depthTexture).__webglTexture=lt.__autoAllocateDepthBuffer?void 0:ft,lt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(he,He){const ft=ie.get(he);ft.__webglFramebuffer=He,ft.__useDefaultFramebuffer=He===void 0};const Ni=De.createFramebuffer();this.setRenderTarget=function(he,He=0,ft=0){$e=he,Y=He,ke=ft;let lt=null,Je=!1,Bt=!1;if(he){const tn=ie.get(he);if(tn.__useDefaultFramebuffer!==void 0){Jt.bindFramebuffer(De.FRAMEBUFFER,tn.__webglFramebuffer),pe.copy(he.viewport),Ve.copy(he.scissor),Ue=he.scissorTest,Jt.viewport(pe),Jt.scissor(Ve),Jt.setScissorTest(Ue),ot=-1;return}else if(tn.__webglFramebuffer===void 0)ze.setupRenderTarget(he);else if(tn.__hasExternalTextures)ze.rebindTextures(he,ie.get(he.texture).__webglTexture,ie.get(he.depthTexture).__webglTexture);else if(he.depthBuffer){const Hn=he.depthTexture;if(tn.__boundDepthTexture!==Hn){if(Hn!==null&&ie.has(Hn)&&(he.width!==Hn.image.width||he.height!==Hn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ze.setupDepthRenderbuffer(he)}}const Qt=he.texture;(Qt.isData3DTexture||Qt.isDataArrayTexture||Qt.isCompressedArrayTexture)&&(Bt=!0);const Cn=ie.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(Array.isArray(Cn[He])?lt=Cn[He][ft]:lt=Cn[He],Je=!0):he.samples>0&&ze.useMultisampledRTT(he)===!1?lt=ie.get(he).__webglMultisampledFramebuffer:Array.isArray(Cn)?lt=Cn[ft]:lt=Cn,pe.copy(he.viewport),Ve.copy(he.scissor),Ue=he.scissorTest}else pe.copy(xt).multiplyScalar(yn).floor(),Ve.copy(vt).multiplyScalar(yn).floor(),Ue=Zt;if(ft!==0&&(lt=Ni),Jt.bindFramebuffer(De.FRAMEBUFFER,lt)&&Jt.drawBuffers(he,lt),Jt.viewport(pe),Jt.scissor(Ve),Jt.setScissorTest(Ue),Je){const tn=ie.get(he.texture);De.framebufferTexture2D(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_CUBE_MAP_POSITIVE_X+He,tn.__webglTexture,ft)}else if(Bt){const tn=He;for(let Qt=0;Qt<he.textures.length;Qt++){const Cn=ie.get(he.textures[Qt]);De.framebufferTextureLayer(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0+Qt,Cn.__webglTexture,ft,tn)}}else if(he!==null&&ft!==0){const tn=ie.get(he.texture);De.framebufferTexture2D(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_2D,tn.__webglTexture,ft)}ot=-1},this.readRenderTargetPixels=function(he,He,ft,lt,Je,Bt,an,tn=0){if(!(he&&he.isWebGLRenderTarget)){ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Qt=ie.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&an!==void 0&&(Qt=Qt[an]),Qt){Jt.bindFramebuffer(De.FRAMEBUFFER,Qt);try{const Cn=he.textures[tn],Hn=Cn.format,jn=Cn.type;if(!Pn.textureFormatReadable(Hn)){ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pn.textureTypeReadable(jn)){ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}He>=0&&He<=he.width-lt&&ft>=0&&ft<=he.height-Je&&(he.textures.length>1&&De.readBuffer(De.COLOR_ATTACHMENT0+tn),De.readPixels(He,ft,lt,Je,Dt.convert(Hn),Dt.convert(jn),Bt))}finally{const Cn=$e!==null?ie.get($e).__webglFramebuffer:null;Jt.bindFramebuffer(De.FRAMEBUFFER,Cn)}}},this.readRenderTargetPixelsAsync=async function(he,He,ft,lt,Je,Bt,an,tn=0){if(!(he&&he.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qt=ie.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&an!==void 0&&(Qt=Qt[an]),Qt)if(He>=0&&He<=he.width-lt&&ft>=0&&ft<=he.height-Je){Jt.bindFramebuffer(De.FRAMEBUFFER,Qt);const Cn=he.textures[tn],Hn=Cn.format,jn=Cn.type;if(!Pn.textureFormatReadable(Hn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pn.textureTypeReadable(jn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const lr=De.createBuffer();De.bindBuffer(De.PIXEL_PACK_BUFFER,lr),De.bufferData(De.PIXEL_PACK_BUFFER,Bt.byteLength,De.STREAM_READ),he.textures.length>1&&De.readBuffer(De.COLOR_ATTACHMENT0+tn),De.readPixels(He,ft,lt,Je,Dt.convert(Hn),Dt.convert(jn),0);const xr=$e!==null?ie.get($e).__webglFramebuffer:null;Jt.bindFramebuffer(De.FRAMEBUFFER,xr);const $r=De.fenceSync(De.SYNC_GPU_COMMANDS_COMPLETE,0);return De.flush(),await w1e(De,$r,4),De.bindBuffer(De.PIXEL_PACK_BUFFER,lr),De.getBufferSubData(De.PIXEL_PACK_BUFFER,0,Bt),De.deleteBuffer(lr),De.deleteSync($r),Bt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(he,He=null,ft=0){const lt=Math.pow(2,-ft),Je=Math.floor(he.image.width*lt),Bt=Math.floor(he.image.height*lt),an=He!==null?He.x:0,tn=He!==null?He.y:0;ze.setTexture2D(he,0),De.copyTexSubImage2D(De.TEXTURE_2D,ft,0,0,an,tn,Je,Bt),Jt.unbindTexture()};const La=De.createFramebuffer(),Li=De.createFramebuffer();this.copyTextureToTexture=function(he,He,ft=null,lt=null,Je=0,Bt=null){Bt===null&&(Je!==0?(Rw("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Bt=Je,Je=0):Bt=0);let an,tn,Qt,Cn,Hn,jn,lr,xr,$r;const Zr=he.isCompressedTexture?he.mipmaps[Bt]:he.image;if(ft!==null)an=ft.max.x-ft.min.x,tn=ft.max.y-ft.min.y,Qt=ft.isBox3?ft.max.z-ft.min.z:1,Cn=ft.min.x,Hn=ft.min.y,jn=ft.isBox3?ft.min.z:0;else{const bi=Math.pow(2,-Je);an=Math.floor(Zr.width*bi),tn=Math.floor(Zr.height*bi),he.isDataArrayTexture?Qt=Zr.depth:he.isData3DTexture?Qt=Math.floor(Zr.depth*bi):Qt=1,Cn=0,Hn=0,jn=0}lt!==null?(lr=lt.x,xr=lt.y,$r=lt.z):(lr=0,xr=0,$r=0);const Ir=Dt.convert(He.format),Ln=Dt.convert(He.type);let Nr;He.isData3DTexture?(ze.setTexture3D(He,0),Nr=De.TEXTURE_3D):He.isDataArrayTexture||He.isCompressedArrayTexture?(ze.setTexture2DArray(He,0),Nr=De.TEXTURE_2D_ARRAY):(ze.setTexture2D(He,0),Nr=De.TEXTURE_2D),De.pixelStorei(De.UNPACK_FLIP_Y_WEBGL,He.flipY),De.pixelStorei(De.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),De.pixelStorei(De.UNPACK_ALIGNMENT,He.unpackAlignment);const wr=De.getParameter(De.UNPACK_ROW_LENGTH),ma=De.getParameter(De.UNPACK_IMAGE_HEIGHT),Fa=De.getParameter(De.UNPACK_SKIP_PIXELS),ra=De.getParameter(De.UNPACK_SKIP_ROWS),Cs=De.getParameter(De.UNPACK_SKIP_IMAGES);De.pixelStorei(De.UNPACK_ROW_LENGTH,Zr.width),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,Zr.height),De.pixelStorei(De.UNPACK_SKIP_PIXELS,Cn),De.pixelStorei(De.UNPACK_SKIP_ROWS,Hn),De.pixelStorei(De.UNPACK_SKIP_IMAGES,jn);const Lr=he.isDataArrayTexture||he.isData3DTexture,ia=He.isDataArrayTexture||He.isData3DTexture;if(he.isDepthTexture){const bi=ie.get(he),Fi=ie.get(He),ga=ie.get(bi.__renderTarget),Lo=ie.get(Fi.__renderTarget);Jt.bindFramebuffer(De.READ_FRAMEBUFFER,ga.__webglFramebuffer),Jt.bindFramebuffer(De.DRAW_FRAMEBUFFER,Lo.__webglFramebuffer);for(let ss=0;ss<Qt;ss++)Lr&&(De.framebufferTextureLayer(De.READ_FRAMEBUFFER,De.COLOR_ATTACHMENT0,ie.get(he).__webglTexture,Je,jn+ss),De.framebufferTextureLayer(De.DRAW_FRAMEBUFFER,De.COLOR_ATTACHMENT0,ie.get(He).__webglTexture,Bt,$r+ss)),De.blitFramebuffer(Cn,Hn,an,tn,lr,xr,an,tn,De.DEPTH_BUFFER_BIT,De.NEAREST);Jt.bindFramebuffer(De.READ_FRAMEBUFFER,null),Jt.bindFramebuffer(De.DRAW_FRAMEBUFFER,null)}else if(Je!==0||he.isRenderTargetTexture||ie.has(he)){const bi=ie.get(he),Fi=ie.get(He);Jt.bindFramebuffer(De.READ_FRAMEBUFFER,La),Jt.bindFramebuffer(De.DRAW_FRAMEBUFFER,Li);for(let ga=0;ga<Qt;ga++)Lr?De.framebufferTextureLayer(De.READ_FRAMEBUFFER,De.COLOR_ATTACHMENT0,bi.__webglTexture,Je,jn+ga):De.framebufferTexture2D(De.READ_FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_2D,bi.__webglTexture,Je),ia?De.framebufferTextureLayer(De.DRAW_FRAMEBUFFER,De.COLOR_ATTACHMENT0,Fi.__webglTexture,Bt,$r+ga):De.framebufferTexture2D(De.DRAW_FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_2D,Fi.__webglTexture,Bt),Je!==0?De.blitFramebuffer(Cn,Hn,an,tn,lr,xr,an,tn,De.COLOR_BUFFER_BIT,De.NEAREST):ia?De.copyTexSubImage3D(Nr,Bt,lr,xr,$r+ga,Cn,Hn,an,tn):De.copyTexSubImage2D(Nr,Bt,lr,xr,Cn,Hn,an,tn);Jt.bindFramebuffer(De.READ_FRAMEBUFFER,null),Jt.bindFramebuffer(De.DRAW_FRAMEBUFFER,null)}else ia?he.isDataTexture||he.isData3DTexture?De.texSubImage3D(Nr,Bt,lr,xr,$r,an,tn,Qt,Ir,Ln,Zr.data):He.isCompressedArrayTexture?De.compressedTexSubImage3D(Nr,Bt,lr,xr,$r,an,tn,Qt,Ir,Zr.data):De.texSubImage3D(Nr,Bt,lr,xr,$r,an,tn,Qt,Ir,Ln,Zr):he.isDataTexture?De.texSubImage2D(De.TEXTURE_2D,Bt,lr,xr,an,tn,Ir,Ln,Zr.data):he.isCompressedTexture?De.compressedTexSubImage2D(De.TEXTURE_2D,Bt,lr,xr,Zr.width,Zr.height,Ir,Zr.data):De.texSubImage2D(De.TEXTURE_2D,Bt,lr,xr,an,tn,Ir,Ln,Zr);De.pixelStorei(De.UNPACK_ROW_LENGTH,wr),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,ma),De.pixelStorei(De.UNPACK_SKIP_PIXELS,Fa),De.pixelStorei(De.UNPACK_SKIP_ROWS,ra),De.pixelStorei(De.UNPACK_SKIP_IMAGES,Cs),Bt===0&&He.generateMipmaps&&De.generateMipmap(Nr),Jt.unbindTexture()},this.initRenderTarget=function(he){ie.get(he).__webglFramebuffer===void 0&&ze.setupRenderTarget(he)},this.initTexture=function(he){he.isCubeTexture?ze.setTextureCube(he,0):he.isData3DTexture?ze.setTexture3D(he,0):he.isDataArrayTexture||he.isCompressedArrayTexture?ze.setTexture2DArray(he,0):ze.setTexture2D(he,0),Jt.unbindTexture()},this.resetState=function(){Y=0,ke=0,$e=null,Jt.reset(),Xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Or._getDrawingBufferColorSpace(e),n.unpackColorSpace=Or._getUnpackColorSpace()}}const tue={type:"change"},Hj={type:"start"},Oce={type:"end"},yI=new Hw,nue=new Jd,YPe=Math.cos(70*ug.DEG2RAD),ka=new Xe,xs=2*Math.PI,hi={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},A4=1e-6;class $Pe extends JSe{constructor(e,n=null){super(e,n),this.state=hi.NONE,this.target=new Xe,this.cursor=new Xe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ey.ROTATE,MIDDLE:ey.DOLLY,RIGHT:ey.PAN},this.touches={ONE:$_.ROTATE,TWO:$_.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Xe,this._lastQuaternion=new Oc,this._lastTargetPosition=new Xe,this._quat=new Oc().setFromUnitVectors(e.up,new Xe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new kle,this._sphericalDelta=new kle,this._scale=1,this._panOffset=new Xe,this._rotateStart=new gr,this._rotateEnd=new gr,this._rotateDelta=new gr,this._panStart=new gr,this._panEnd=new gr,this._panDelta=new gr,this._dollyStart=new gr,this._dollyEnd=new gr,this._dollyDelta=new gr,this._dollyDirection=new Xe,this._mouse=new gr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=JPe.bind(this),this._onPointerDown=ZPe.bind(this),this._onPointerUp=QPe.bind(this),this._onContextMenu=oCe.bind(this),this._onMouseWheel=nCe.bind(this),this._onKeyDown=rCe.bind(this),this._onTouchStart=iCe.bind(this),this._onTouchMove=aCe.bind(this),this._onMouseDown=eCe.bind(this),this._onMouseMove=tCe.bind(this),this._interceptControlDown=sCe.bind(this),this._interceptControlUp=lCe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(tue),this.update(),this.state=hi.NONE}update(e=null){const n=this.object.position;ka.copy(n).sub(this.target),ka.applyQuaternion(this._quat),this._spherical.setFromVector3(ka),this.autoRotate&&this.state===hi.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(r)&&isFinite(o)&&(r<-Math.PI?r+=xs:r>Math.PI&&(r-=xs),o<-Math.PI?o+=xs:o>Math.PI&&(o-=xs),r<=o?this._spherical.theta=Math.max(r,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+o)/2?Math.max(r,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let u=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const h=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),u=h!=this._spherical.radius}if(ka.setFromSpherical(this._spherical),ka.applyQuaternion(this._quatInverse),n.copy(this.target).add(ka),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let h=null;if(this.object.isPerspectiveCamera){const m=ka.length();h=this._clampDistance(m*this._scale);const b=m-h;this.object.position.addScaledVector(this._dollyDirection,b),this.object.updateMatrixWorld(),u=!!b}else if(this.object.isOrthographicCamera){const m=new Xe(this._mouse.x,this._mouse.y,0);m.unproject(this.object);const b=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),u=b!==this.object.zoom;const S=new Xe(this._mouse.x,this._mouse.y,0);S.unproject(this.object),this.object.position.sub(S).add(m),this.object.updateMatrixWorld(),h=ka.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;h!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(h).add(this.object.position):(yI.origin.copy(this.object.position),yI.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(yI.direction))<YPe?this.object.lookAt(this.target):(nue.setFromNormalAndCoplanarPoint(this.object.up,this.target),yI.intersectPlane(nue,this.target))))}else if(this.object.isOrthographicCamera){const h=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),h!==this.object.zoom&&(this.object.updateProjectionMatrix(),u=!0)}return this._scale=1,this._performCursorZoom=!1,u||this._lastPosition.distanceToSquared(this.object.position)>A4||8*(1-this._lastQuaternion.dot(this.object.quaternion))>A4||this._lastTargetPosition.distanceToSquared(this.target)>A4?(this.dispatchEvent(tue),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?xs/60*this.autoRotateSpeed*e:xs/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){ka.setFromMatrixColumn(n,0),ka.multiplyScalar(-e),this._panOffset.add(ka)}_panUp(e,n){this.screenSpacePanning===!0?ka.setFromMatrixColumn(n,1):(ka.setFromMatrixColumn(n,0),ka.crossVectors(this.object.up,ka)),ka.multiplyScalar(e),this._panOffset.add(ka)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;ka.copy(o).sub(this.target);let u=ka.length();u*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*u/r.clientHeight,this.object.matrix),this._panUp(2*n*u/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),o=e-r.left,u=n-r.top,h=r.width,m=r.height;this._mouse.x=o/h*2-1,this._mouse.y=-(u/m)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(xs*this._rotateDelta.x/n.clientHeight),this._rotateUp(xs*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(xs*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-xs*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(xs*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-xs*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._rotateStart.set(r,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._panStart.set(r,o)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,o=e.pageY-n.y,u=Math.sqrt(r*r+o*o);this._dollyStart.set(0,u)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),o=.5*(e.pageX+r.x),u=.5*(e.pageY+r.y);this._rotateEnd.set(o,u)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(xs*this._rotateDelta.x/n.clientHeight),this._rotateUp(xs*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._panEnd.set(r,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,o=e.pageY-n.y,u=Math.sqrt(r*r+o*o);this._dollyEnd.set(0,u),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const h=(e.pageX+n.x)*.5,m=(e.pageY+n.y)*.5;this._updateZoomParameters(h,m)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new gr,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function ZPe(c){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(c.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(c)&&(this._addPointer(c),c.pointerType==="touch"?this._onTouchStart(c):this._onMouseDown(c)))}function JPe(c){this.enabled!==!1&&(c.pointerType==="touch"?this._onTouchMove(c):this._onMouseMove(c))}function QPe(c){switch(this._removePointer(c),this._pointers.length){case 0:this.domElement.releasePointerCapture(c.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Oce),this.state=hi.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function eCe(c){let e;switch(c.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ey.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(c),this.state=hi.DOLLY;break;case ey.ROTATE:if(c.ctrlKey||c.metaKey||c.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(c),this.state=hi.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(c),this.state=hi.ROTATE}break;case ey.PAN:if(c.ctrlKey||c.metaKey||c.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(c),this.state=hi.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(c),this.state=hi.PAN}break;default:this.state=hi.NONE}this.state!==hi.NONE&&this.dispatchEvent(Hj)}function tCe(c){switch(this.state){case hi.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(c);break;case hi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(c);break;case hi.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(c);break}}function nCe(c){this.enabled===!1||this.enableZoom===!1||this.state!==hi.NONE||(c.preventDefault(),this.dispatchEvent(Hj),this._handleMouseWheel(this._customWheelEvent(c)),this.dispatchEvent(Oce))}function rCe(c){this.enabled!==!1&&this._handleKeyDown(c)}function iCe(c){switch(this._trackPointer(c),this._pointers.length){case 1:switch(this.touches.ONE){case $_.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(c),this.state=hi.TOUCH_ROTATE;break;case $_.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(c),this.state=hi.TOUCH_PAN;break;default:this.state=hi.NONE}break;case 2:switch(this.touches.TWO){case $_.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(c),this.state=hi.TOUCH_DOLLY_PAN;break;case $_.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(c),this.state=hi.TOUCH_DOLLY_ROTATE;break;default:this.state=hi.NONE}break;default:this.state=hi.NONE}this.state!==hi.NONE&&this.dispatchEvent(Hj)}function aCe(c){switch(this._trackPointer(c),this.state){case hi.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(c),this.update();break;case hi.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(c),this.update();break;case hi.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(c),this.update();break;case hi.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(c),this.update();break;default:this.state=hi.NONE}}function oCe(c){this.enabled!==!1&&c.preventDefault()}function sCe(c){c.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function lCe(c){c.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class uCe{constructor(){this.instance=null,this.init()}init(){this.instance=new ko(60,window.innerWidth/window.innerHeight,.1,1e4),this.instance.position.set(-3266,71,3408),this.instance.rotateY(-41)}resize(){this.instance.aspect=window.innerWidth/window.innerHeight,this.instance.updateProjectionMatrix()}update(){}}class cCe{constructor(e){this.scene=e,this.ambientLight=null,this.directionalLight=null,this.underwaterLight=null,this.init()}init(){this.ambientLight=new zSe(16777215,.5),this.scene.add(this.ambientLight),this.directionalLight=new Gz(16777215,1),this.directionalLight.position.set(1,1,1),this.scene.add(this.directionalLight),this.underwaterLight=new Gz(16777215,100),this.underwaterLight.position.set(0,0,0),this.underwaterLight.target.position.set(0,-100,0),this.underwaterLight.visible=!1,this.scene.add(this.underwaterLight),this.scene.add(this.underwaterLight.target)}setUnderwater(e){this.underwaterLight&&(this.underwaterLight.visible=e)}update(){}}class dCe{constructor(e){const n=document.querySelector(e);if(!n)throw new Error(`Container not found: ${e}`);this.canvas=document.createElement("canvas"),n.appendChild(this.canvas),this.scene=new xce,this.renderer=new KPe({canvas:this.canvas,antialias:!0}),this.camera=new uCe,this.light=new cCe(this.scene),this.controls=null,this.updateCallbacks=[],this.init(),this.setupEventListeners(),this.animate()}init(){this.scene.background=new tr(1718858),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.toneMapping=Sj,this.renderer.toneMappingExposure=.6,this.renderer.outputColorSpace=da}getScene(){return this.scene}getCamera(){return this.camera}getRenderer(){return this.renderer}getLight(){return this.light}addObject(e){this.scene.add(e)}removeObject(e){this.scene.remove(e)}addUpdateCallback(e){this.updateCallbacks.push(e)}enableOrbitControls(e={}){return this.controls||(this.controls=new $Pe(this.camera.instance,this.canvas),this.controls.enableDamping=e.enableDamping??!0,this.controls.dampingFactor=e.dampingFactor??.05,this.controls.enableZoom=e.enableZoom??!0,this.controls.enablePan=e.enablePan??!0),this.controls}getControls(){return this.controls}setupEventListeners(){window.addEventListener("resize",()=>this.onResize())}onResize(){this.camera.resize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}animate=()=>{requestAnimationFrame(this.animate),this.camera.update(),this.light.update(),this.updateCallbacks.forEach(e=>e()),this.renderer.render(this.scene,this.camera.instance)}}var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fCe(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var nw={exports:{}},k4={},rue;function Ut(){return rue||(rue=1,(function(c){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(ee,xe,Be)=>xe in ee?e(ee,xe,{enumerable:!0,configurable:!0,writable:!0,value:Be}):ee[xe]=Be,b=(ee,xe)=>{for(var Be in xe||(xe={}))u.call(xe,Be)&&m(ee,Be,xe[Be]);if(o)for(var Be of o(xe))h.call(xe,Be)&&m(ee,Be,xe[Be]);return ee},S=(ee,xe)=>n(ee,r(xe)),T=ee=>e(ee,"__esModule",{value:!0}),k=(ee,xe)=>{T(ee);for(var Be in xe)e(ee,Be,{get:xe[Be],enumerable:!0})};k(c,{Atom:()=>mp,PointerProxy:()=>Qg,Ticker:()=>Jg,getPointerParts:()=>Cu,isPointer:()=>Ul,isPrism:()=>ll,iterateAndCountTicks:()=>Zg,iterateOver:()=>vp,pointer:()=>sp,pointerToPrism:()=>mf,prism:()=>Bl,val:()=>Yc});var O=Array.isArray,L=O,H=typeof qi=="object"&&qi&&qi.Object===Object&&qi,G=H,V=typeof self=="object"&&self&&self.Object===Object&&self,I=G||V||Function("return this")(),K=I,ue=K.Symbol,P=ue,ae=Object.prototype,ge=ae.hasOwnProperty,me=ae.toString,J=P?P.toStringTag:void 0;function te(ee){var xe=ge.call(ee,J),Be=ee[J];try{ee[J]=void 0;var yt=!0}catch{}var Zn=me.call(ee);return yt&&(xe?ee[J]=Be:delete ee[J]),Zn}var oe=te,Y=Object.prototype,ke=Y.toString;function $e(ee){return ke.call(ee)}var ot=$e,Qe="[object Null]",pe="[object Undefined]",Ve=P?P.toStringTag:void 0;function Ue(ee){return ee==null?ee===void 0?pe:Qe:Ve&&Ve in Object(ee)?oe(ee):ot(ee)}var Pt=Ue;function Me(ee){return ee!=null&&typeof ee=="object"}var Ot=Me,Tn="[object Symbol]";function yn(ee){return typeof ee=="symbol"||Ot(ee)&&Pt(ee)==Tn}var qn=yn,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/;function vt(ee,xe){if(L(ee))return!1;var Be=typeof ee;return Be=="number"||Be=="symbol"||Be=="boolean"||ee==null||qn(ee)?!0:xt.test(ee)||!Dn.test(ee)||xe!=null&&ee in Object(xe)}var Zt=vt;function Mn(ee){var xe=typeof ee;return ee!=null&&(xe=="object"||xe=="function")}var sn=Mn,Fn="[object AsyncFunction]",fr="[object Function]",pn="[object GeneratorFunction]",zn="[object Proxy]";function nr(ee){if(!sn(ee))return!1;var xe=Pt(ee);return xe==fr||xe==pn||xe==Fn||xe==zn}var Un=nr,st=K["__core-js_shared__"],De=st,or=(function(){var ee=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""})();function sr(ee){return!!or&&or in ee}var Pn=sr,Jt=Function.prototype,we=Jt.toString;function ie(ee){if(ee!=null){try{return we.call(ee)}catch{}try{return ee+""}catch{}}return""}var ze=ie,St=/[\\^$.*+?()[\]{}|]/g,_t=/^\[object .+?Constructor\]$/,mt=Function.prototype,ln=Object.prototype,Wt=mt.toString,dn=ln.hasOwnProperty,fn=RegExp("^"+Wt.call(dn).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(ee){if(!sn(ee)||Pn(ee))return!1;var xe=Un(ee)?fn:_t;return xe.test(ze(ee))}var Kt=At;function hn(ee,xe){return ee?.[xe]}var mn=hn;function qt(ee,xe){var Be=mn(ee,xe);return Kt(Be)?Be:void 0}var Xn=qt,Ae=Xn(Object,"create"),Gt=Ae;function Dt(){this.__data__=Gt?Gt(null):{},this.size=0}var Xt=Dt;function Ct(ee){var xe=this.has(ee)&&delete this.__data__[ee];return this.size-=xe?1:0,xe}var Mt=Ct,Yt="__lodash_hash_undefined__",Sn=Object.prototype,_r=Sn.hasOwnProperty;function en(ee){var xe=this.__data__;if(Gt){var Be=xe[ee];return Be===Yt?void 0:Be}return _r.call(xe,ee)?xe[ee]:void 0}var vn=en,rr=Object.prototype,rn=rr.hasOwnProperty;function kn(ee){var xe=this.__data__;return Gt?xe[ee]!==void 0:rn.call(xe,ee)}var gn=kn,$n="__lodash_hash_undefined__";function li(ee,xe){var Be=this.__data__;return this.size+=this.has(ee)?0:1,Be[ee]=Gt&&xe===void 0?$n:xe,this}var hr=li;function yr(ee){var xe=-1,Be=ee==null?0:ee.length;for(this.clear();++xe<Be;){var yt=ee[xe];this.set(yt[0],yt[1])}}yr.prototype.clear=Xt,yr.prototype.delete=Mt,yr.prototype.get=vn,yr.prototype.has=gn,yr.prototype.set=hr;var ui=yr;function Yr(){this.__data__=[],this.size=0}var jr=Yr;function mr(ee,xe){return ee===xe||ee!==ee&&xe!==xe}var na=mr;function Mr(ee,xe){for(var Be=ee.length;Be--;)if(na(ee[Be][0],xe))return Be;return-1}var Mi=Mr,pa=Array.prototype,yi=pa.splice;function Pi(ee){var xe=this.__data__,Be=Mi(xe,ee);if(Be<0)return!1;var yt=xe.length-1;return Be==yt?xe.pop():yi.call(xe,Be,1),--this.size,!0}var Oi=Pi;function Ni(ee){var xe=this.__data__,Be=Mi(xe,ee);return Be<0?void 0:xe[Be][1]}var La=Ni;function Li(ee){return Mi(this.__data__,ee)>-1}var he=Li;function He(ee,xe){var Be=this.__data__,yt=Mi(Be,ee);return yt<0?(++this.size,Be.push([ee,xe])):Be[yt][1]=xe,this}var ft=He;function lt(ee){var xe=-1,Be=ee==null?0:ee.length;for(this.clear();++xe<Be;){var yt=ee[xe];this.set(yt[0],yt[1])}}lt.prototype.clear=jr,lt.prototype.delete=Oi,lt.prototype.get=La,lt.prototype.has=he,lt.prototype.set=ft;var Je=lt,Bt=Xn(K,"Map"),an=Bt;function tn(){this.size=0,this.__data__={hash:new ui,map:new(an||Je),string:new ui}}var Qt=tn;function Cn(ee){var xe=typeof ee;return xe=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?ee!=="__proto__":ee===null}var Hn=Cn;function jn(ee,xe){var Be=ee.__data__;return Hn(xe)?Be[typeof xe=="string"?"string":"hash"]:Be.map}var lr=jn;function xr(ee){var xe=lr(this,ee).delete(ee);return this.size-=xe?1:0,xe}var $r=xr;function Zr(ee){return lr(this,ee).get(ee)}var Ir=Zr;function Ln(ee){return lr(this,ee).has(ee)}var Nr=Ln;function wr(ee,xe){var Be=lr(this,ee),yt=Be.size;return Be.set(ee,xe),this.size+=Be.size==yt?0:1,this}var ma=wr;function Fa(ee){var xe=-1,Be=ee==null?0:ee.length;for(this.clear();++xe<Be;){var yt=ee[xe];this.set(yt[0],yt[1])}}Fa.prototype.clear=Qt,Fa.prototype.delete=$r,Fa.prototype.get=Ir,Fa.prototype.has=Nr,Fa.prototype.set=ma;var ra=Fa,Cs="Expected a function";function Lr(ee,xe){if(typeof ee!="function"||xe!=null&&typeof xe!="function")throw new TypeError(Cs);var Be=function(){var yt=arguments,Zn=xe?xe.apply(this,yt):yt[0],Pr=Be.cache;if(Pr.has(Zn))return Pr.get(Zn);var Ji=ee.apply(this,yt);return Be.cache=Pr.set(Zn,Ji)||Pr,Ji};return Be.cache=new(Lr.Cache||ra),Be}Lr.Cache=ra;var ia=Lr,bi=500;function Fi(ee){var xe=ia(ee,function(yt){return Be.size===bi&&Be.clear(),yt}),Be=xe.cache;return xe}var ga=Fi,Lo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ss=/\\(\\)?/g,ky=ga(function(ee){var xe=[];return ee.charCodeAt(0)===46&&xe.push(""),ee.replace(Lo,function(Be,yt,Zn,Pr){xe.push(Zn?Pr.replace(ss,"$1"):yt||Be)}),xe}),Iy=ky;function Eg(ee,xe){for(var Be=-1,yt=ee==null?0:ee.length,Zn=Array(yt);++Be<yt;)Zn[Be]=xe(ee[Be],Be,ee);return Zn}var Tg=Eg,mo=P?P.prototype:void 0,ip=mo?mo.toString:void 0;function Mg(ee){if(typeof ee=="string")return ee;if(L(ee))return Tg(ee,Mg)+"";if(qn(ee))return ip?ip.call(ee):"";var xe=ee+"";return xe=="0"&&1/ee==-1/0?"-0":xe}var Pg=Mg;function Cg(ee){return ee==null?"":Pg(ee)}var Ag=Cg;function kg(ee,xe){return L(ee)?ee:Zt(ee,xe)?[ee]:Iy(Ag(ee))}var Ig=kg;function Rg(ee){if(typeof ee=="string"||qn(ee))return ee;var xe=ee+"";return xe=="0"&&1/ee==-1/0?"-0":xe}var Ll=Rg;function Bc(ee,xe){xe=Ig(xe,ee);for(var Be=0,yt=xe.length;ee!=null&&Be<yt;)ee=ee[Ll(xe[Be++])];return Be&&Be==yt?ee:void 0}var Ry=Bc;function ap(ee,xe,Be){var yt=ee==null?void 0:Ry(ee,xe);return yt===void 0?Be:yt}var Dg=ap;function Dy(ee,xe){return function(Be){return ee(xe(Be))}}var Oy=Dy,sl=Oy(Object.getPrototypeOf,Object),Fl=sl,Og="[object Object]",hf=Function.prototype,Ny=Object.prototype,Ng=hf.toString,Lg=Ny.hasOwnProperty,Fg=Ng.call(Object);function Ug(ee){if(!Ot(ee)||Pt(ee)!=Og)return!1;var xe=Fl(ee);if(xe===null)return!0;var Be=Lg.call(xe,"constructor")&&xe.constructor;return typeof Be=="function"&&Be instanceof Be&&Ng.call(Be)==Fg}var op=Ug;function Bg(ee){var xe=ee==null?0:ee.length;return xe?ee[xe-1]:void 0}var Ly=Bg,zc=new WeakMap,zg=new WeakMap,jc=Symbol("pointerMeta"),jg={get(ee,xe){if(xe===jc)return zc.get(ee);let Be=zg.get(ee);Be||(Be=new Map,zg.set(ee,Be));const yt=Be.get(xe);if(yt!==void 0)return yt;const Zn=zc.get(ee),Pr=Vc({root:Zn.root,path:[...Zn.path,xe]});return Be.set(xe,Pr),Pr}},ls=ee=>ee[jc],Cu=ee=>{const{root:xe,path:Be}=ls(ee);return{root:xe,path:Be}};function Vc(ee){var xe;const Be={root:ee.root,path:(xe=ee.path)!=null?xe:[]},yt={};return zc.set(yt,Be),new Proxy(yt,jg)}var sp=Vc,Ul=ee=>ee&&!!ls(ee);function lp(ee,xe,Be){return xe.length===0?Be(ee):Au(ee,xe,Be)}var Au=(ee,xe,Be)=>{if(xe.length===0)return Be(ee);if(Array.isArray(ee)){let[yt,...Zn]=xe;yt=parseInt(String(yt),10),isNaN(yt)&&(yt=0);const Pr=ee[yt],Ji=Au(Pr,Zn,Be);if(Pr===Ji)return ee;const us=[...ee];return us.splice(yt,1,Ji),us}else if(typeof ee=="object"&&ee!==null){const[yt,...Zn]=xe,Pr=ee[yt],Ji=Au(Pr,Zn,Be);return Pr===Ji?ee:S(b({},ee),{[yt]:Ji})}else{const[yt,...Zn]=xe;return{[yt]:Au(void 0,Zn,Be)}}},Zi=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const ee=this._head;if(ee)return this._head=ee.next,ee.data}push(ee){const xe={next:this._head,data:ee};this._head=xe}};function ll(ee){return!!(ee&&ee.isPrism&&ee.isPrism===!0)}function pf(){const ee=()=>{},xe=new Zi,Be=ee;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{xe.push(Be)},stopIgnoringDependencies:()=>{xe.peek()!==Be||xe.pop()},reportResolutionStart:Iu=>{const $c=xe.peek();$c&&$c(Iu),xe.push(Be)},reportResolutionEnd:Iu=>{xe.pop()},pushCollector:Iu=>{xe.push(Iu)},popCollector:Iu=>{if(xe.peek()!==Iu)throw new Error("Popped collector is not on top of the stack");xe.pop()}}}function Vg(){const ee="__dataverse_discoveryMechanism_sharedStack",xe=typeof window<"u"?window:typeof qi<"u"?qi:{};if(xe){const Be=xe[ee];if(Be&&typeof Be=="object"&&Be.type==="Dataverse_discoveryMechanism")return Be;{const yt=pf();return xe[ee]=yt,yt}}else return pf()}var{startIgnoringDependencies:ul,stopIgnoringDependencies:Hc,reportResolutionEnd:Hg,reportResolutionStart:Gg,pushCollector:up,popCollector:Fy}=Vg(),Gc=()=>{},cp=class{constructor(ee,xe){this._fn=ee,this._prismInstance=xe,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new qg(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=Be=>{this._possiblyStaleDeps.add(Be),this._markAsStale()};for(const Be of this._dependencies)Be._addDependent(this._reactToDependencyGoingStale);ul(),this.getValue(),Hc()}get hasDependents(){return this._dependents.size>0}removeDependent(ee){this._dependents.delete(ee)}addDependent(ee){this._dependents.add(ee)}destroy(){for(const ee of this._dependencies)ee._removeDependent(this._reactToDependencyGoingStale);Xg(this._scope)}getValue(){if(!this._isFresh){const ee=this._recalculate();this._lastValue=ee,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let ee;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let yt=!1;ul();for(const Zn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Zn)!==Zn.getValue()){yt=!0;break}if(Hc(),this._possiblyStaleDeps.clear(),!yt)return this._lastValue}const xe=new Set;this._cacheOfDendencyValues.clear();const Be=yt=>{xe.add(yt),this._addDependency(yt)};up(Be),va.push(this._scope);try{ee=this._fn()}catch(yt){console.error(yt)}finally{va.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}Fy(Be);for(const yt of this._dependencies)xe.has(yt)||this._removeDependency(yt);this._dependencies=xe,ul();for(const yt of xe)this._cacheOfDendencyValues.set(yt,yt.getValue());return Hc(),ee}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const ee of this._dependents)ee(this._prismInstance)}}_addDependency(ee){this._dependencies.has(ee)||(this._dependencies.add(ee),ee._addDependent(this._reactToDependencyGoingStale))}_removeDependency(ee){this._dependencies.has(ee)&&(this._dependencies.delete(ee),ee._removeDependent(this._reactToDependencyGoingStale))}},dp={},Wg=class{constructor(ee){this._fn=ee,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(ee,xe,Be=!1){const yt=()=>{ee.onThisOrNextTick(Pr)};let Zn=dp;const Pr=()=>{const us=this.getValue();us!==Zn&&(Zn=us,xe(us))};return this._addDependent(yt),Be&&(Zn=this.getValue(),xe(Zn)),()=>{this._removeDependent(yt),ee.offThisOrNextTick(Pr),ee.offNextTick(Pr)}}onStale(ee){const xe=()=>{this._removeDependent(Be)},Be=()=>ee();return this._addDependent(Be),xe}keepHot(){return this.onStale(()=>{})}_addDependent(ee){this._state.hot||this._goHot(),this._state.handle.addDependent(ee)}_goHot(){const ee=new cp(this._fn,this);this._state={hot:!0,handle:ee}}_removeDependent(ee){const xe=this._state;if(!xe.hot)return;const Be=xe.handle;Be.removeDependent(ee),Be.hasDependents||(this._state={hot:!1,handle:void 0},Be.destroy())}getValue(){Gg(this);const ee=this._state;let xe;return ee.hot?xe=ee.handle.getValue():xe=cl(this._fn),Hg(this),xe}},qg=class{constructor(ee){this._hotHandle=ee,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(ee,xe){let Be=this._refs.get(ee);if(Be!==void 0)return Be;{const yt={current:xe};return this._refs.set(ee,yt),yt}}effect(ee,xe,Be){let yt=this.effects.get(ee);yt===void 0&&(yt={cleanup:Gc,deps:void 0},this.effects.set(ee,yt)),fp(yt.deps,Be)&&(yt.cleanup(),ul(),yt.cleanup=Wc(xe,Gc).value,Hc(),yt.deps=Be)}memo(ee,xe,Be){let yt=this.memos.get(ee);return yt===void 0&&(yt={cachedValue:null,deps:void 0},this.memos.set(ee,yt)),fp(yt.deps,Be)&&(ul(),yt.cachedValue=Wc(xe,void 0).value,Hc(),yt.deps=Be),yt.cachedValue}state(ee,xe){const{value:Be,setValue:yt}=this.memo("state/"+ee,()=>{const Zn={current:xe};return{value:Zn,setValue:Ji=>{Zn.current=Ji,this._hotHandle.forceStale()}}},[]);return[Be.current,yt]}sub(ee){return this.subs[ee]||(this.subs[ee]=new qg(this._hotHandle)),this.subs[ee]}cleanupEffects(){for(const ee of this.effects.values())Wc(ee.cleanup,void 0);this.effects.clear()}source(ee,xe){return this.effect("$$source/blah",()=>ee(()=>{this._hotHandle.forceStale()}),[ee]),xe()}};function Xg(ee){for(const xe of Object.values(ee.subs))Xg(xe);ee.cleanupEffects()}function Wc(ee,xe){try{return{value:ee(),ok:!0}}catch(Be){return setTimeout(function(){throw Be}),{value:xe,ok:!1}}}var va=new Zi;function Uy(ee,xe){const Be=va.peek();if(!Be)throw new Error("prism.ref() is called outside of a prism() call.");return Be.ref(ee,xe)}function qc(ee,xe,Be){const yt=va.peek();if(!yt)throw new Error("prism.effect() is called outside of a prism() call.");return yt.effect(ee,xe,Be)}function fp(ee,xe){if(ee===void 0||xe===void 0)return!0;const Be=ee.length;if(Be!==xe.length)return!0;for(let yt=0;yt<Be;yt++)if(ee[yt]!==xe[yt])return!0;return!1}function Kg(ee,xe,Be){const yt=va.peek();if(!yt)throw new Error("prism.memo() is called outside of a prism() call.");return yt.memo(ee,xe,Be)}function Ua(ee,xe){const Be=va.peek();if(!Be)throw new Error("prism.state() is called outside of a prism() call.");return Be.state(ee,xe)}function By(){if(!va.peek())throw new Error("The parent function is called outside of a prism() call.")}function zy(ee,xe){const Be=va.peek();if(!Be)throw new Error("prism.scope() is called outside of a prism() call.");const yt=Be.sub(ee);va.push(yt);const Zn=Wc(xe,void 0).value;return va.pop(),Zn}function Yg(ee,xe,Be){return Kg(ee,()=>Ui(xe),Be).getValue()}function hp(){return!!va.peek()}function Xc(ee,xe){const Be=va.peek();if(!Be)throw new Error("prism.source() is called outside of a prism() call.");return Be.source(ee,xe)}var Ui=ee=>new Wg(ee),Kc=class{effect(ee,xe,Be){console.warn("prism.effect() does not run in cold prisms")}memo(ee,xe,Be){return xe()}state(ee,xe){return[xe,()=>{}]}ref(ee,xe){return{current:xe}}sub(ee){return new Kc}source(ee,xe){return xe()}};function cl(ee){const xe=new Kc;va.push(xe);let Be;try{Be=ee()}catch(yt){console.error(yt)}finally{va.pop()!==xe&&console.warn("The Prism hook stack has slipped. This is a bug.")}return Be}Ui.ref=Uy,Ui.effect=qc,Ui.memo=Kg,Ui.ensurePrism=By,Ui.state=Ua,Ui.scope=zy,Ui.sub=Yg,Ui.inPrism=hp,Ui.source=Xc;var Bl=Ui,$g;(function(ee){ee[ee.Dict=0]="Dict",ee[ee.Array=1]="Array",ee[ee.Other=2]="Other"})($g||($g={}));var Fr=ee=>Array.isArray(ee)?1:op(ee)?0:2,ku=(ee,xe,Be=Fr(ee))=>Be===0&&typeof xe=="string"||Be===1&&jy(xe)?ee[xe]:void 0,jy=ee=>{const xe=typeof ee=="number"?ee:parseInt(ee,10);return!isNaN(xe)&&xe>=0&&xe<1/0&&(xe|0)===xe},pp=class{constructor(ee,xe){this._parent=ee,this._path=xe,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(ee){this.identityChangeListeners.add(ee)}removeIdentityChangeListener(ee){this.identityChangeListeners.delete(ee),this._checkForGC()}removeChild(ee){this.children.delete(ee),this._checkForGC()}getChild(ee){return this.children.get(ee)}getOrCreateChild(ee){let xe=this.children.get(ee);return xe||(xe=xe=new pp(this,this._path.concat([ee])),this.children.set(ee,xe)),xe}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(Ly(this._path))}},mp=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this.pointer=sp({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(xe,Be)=>{const{path:yt}=Cu(xe),Zn=this._getOrCreateScopeForPath(yt);return Zn.identityChangeListeners.add(Be),()=>{Zn.identityChangeListeners.delete(Be)}},this._currentState=ee,this._rootScope=new pp(void 0,[])}set(ee){const xe=this._currentState;this._currentState=ee,this._checkUpdates(this._rootScope,xe,ee)}get(){return this._currentState}getByPointer(ee){const xe=Ul(ee)?ee:ee(this.pointer),Be=Cu(xe).path;return this._getIn(Be)}_getIn(ee){return ee.length===0?this.get():Dg(this.get(),ee)}reduce(ee){this.set(ee(this.get()))}reduceByPointer(ee,xe){const Be=Ul(ee)?ee:ee(this.pointer),yt=Cu(Be).path,Zn=lp(this.get(),yt,xe);this.set(Zn)}setByPointer(ee,xe){this.reduceByPointer(ee,()=>xe)}_checkUpdates(ee,xe,Be){if(xe===Be)return;for(const Pr of ee.identityChangeListeners)Pr(Be);if(ee.children.size===0)return;const yt=Fr(xe),Zn=Fr(Be);if(!(yt===2&&yt===Zn))for(const[Pr,Ji]of ee.children){const us=ku(xe,Pr,yt),gf=ku(Be,Pr,Zn);this._checkUpdates(Ji,us,gf)}}_getOrCreateScopeForPath(ee){let xe=this._rootScope;for(const Be of ee)xe=xe.getOrCreateChild(Be);return xe}pointerToPrism(ee){const{path:xe}=Cu(ee),Be=Zn=>this._onPointerValueChange(ee,Zn),yt=()=>this._getIn(xe);return Bl(()=>Bl.source(Be,yt))}},gp=new WeakMap;function Vy(ee){return typeof ee=="object"&&ee!==null&&ee.$$isPointerToPrismProvider===!0}var mf=ee=>{const xe=ls(ee);let Be=gp.get(xe);if(!Be){const yt=xe.root;if(!Vy(yt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");Be=yt.pointerToPrism(ee),gp.set(xe,Be)}return Be},Yc=ee=>Ul(ee)?mf(ee).getValue():ll(ee)?ee.getValue():ee;function*Zg(ee){let xe;if(Ul(ee))xe=mf(ee);else if(ll(ee))xe=ee;else throw new Error("Only pointers and prisms are supported");let Be=0;const yt=xe.onStale(()=>{Be++});try{for(;;){const Zn=Be;Be=0,yield{value:xe.getValue(),ticks:Zn}}}finally{yt()}}var Hy=180,Jg=class{constructor(ee){this._conf=ee,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(ee){this._scheduledForThisOrNextTick.add(ee),this._dormant&&this._goActive()}onNextTick(ee){this._scheduledForNextTick.add(ee),this._dormant&&this._goActive()}offThisOrNextTick(ee){this._scheduledForThisOrNextTick.delete(ee)}offNextTick(ee){this._scheduledForNextTick.delete(ee)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var ee,xe;this._dormant&&(this._dormant=!1,(xe=(ee=this._conf)==null?void 0:ee.onActive)==null||xe.call(ee))}_goDormant(){var ee,xe;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(xe=(ee=this._conf)==null?void 0:ee.onDormant)==null||xe.call(ee))}tick(ee=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Hy)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=ee;for(const xe of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(xe);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(ee){const xe=this.time;if(ee>10&&console.warn("_tick() recursing for 10 times"),ee>100)throw new Error("Maximum recursion limit for _tick()");const Be=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const yt of Be)yt(xe);if(this._scheduledForThisOrNextTick.size>0)return this._tick(ee+1)}};function*vp(ee){let xe;if(Ul(ee))xe=mf(ee);else if(ll(ee))xe=ee;else throw new Error("Only pointers and prisms are supported");const Be=new Jg,yt=xe.onChange(Be,Zn=>{});try{for(;;)Be.tick(),yield xe.getValue()}finally{yt()}}var Qg=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new mp(ee),this.pointer=sp({root:this,path:[]})}setPointer(ee){this._currentPointerBox.set(ee)}pointerToPrism(ee){const{path:xe}=ls(ee);return Bl(()=>{const Be=this._currentPointerBox.prism.getValue(),yt=xe.reduce((Zn,Pr)=>Zn[Pr],Be);return Yc(yt)})}}})(k4)),k4}nw.exports;var iue;function hCe(){return iue||(iue=1,(function(c,e){var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,O=(g,E,U)=>E in g?r(g,E,{enumerable:!0,configurable:!0,writable:!0,value:U}):g[E]=U,L=(g,E)=>{for(var U in E||(E={}))T.call(E,U)&&O(g,U,E[U]);if(b)for(var U of b(E))k.call(E,U)&&O(g,U,E[U]);return g},H=(g,E)=>o(g,h(E)),G=(g,E)=>function(){return E||(0,g[m(g)[0]])((E={exports:{}}).exports,E),E.exports},V=(g,E)=>{for(var U in E)r(g,U,{get:E[U],enumerable:!0})},I=(g,E,U,X)=>{if(E&&typeof E=="object"||typeof E=="function")for(let se of m(E))!T.call(g,se)&&se!==U&&r(g,se,{get:()=>E[se],enumerable:!(X=u(E,se))||X.enumerable});return g},K=(g,E,U)=>(U=g!=null?n(S(g)):{},I(!g||!g.__esModule?r(U,"default",{value:g,enumerable:!0}):U,g)),ue=g=>I(r({},"__esModule",{value:!0}),g),P=(g,E,U)=>(O(g,typeof E!="symbol"?E+"":E,U),U),ae=G({"../node_modules/timing-function/lib/UnitBezier.js"(g,E){E.exports=(function(){function U(X,se,ve,Oe){this.set(X,se,ve,Oe)}return U.prototype.set=function(X,se,ve,Oe){this._cx=3*X,this._bx=3*(ve-X)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*se,this._by=3*(Oe-se)-this._cy,this._ay=1-this._cy-this._by},U.epsilon=1e-6,U.prototype._sampleCurveX=function(X){return((this._ax*X+this._bx)*X+this._cx)*X},U.prototype._sampleCurveY=function(X){return((this._ay*X+this._by)*X+this._cy)*X},U.prototype._sampleCurveDerivativeX=function(X){return(3*this._ax*X+2*this._bx)*X+this._cx},U.prototype._solveCurveX=function(X,se){var ve,Oe,Ze,it,bt,jt;for(Ze=void 0,it=void 0,bt=void 0,jt=void 0,ve=void 0,Oe=void 0,bt=X,Oe=0;Oe<8;){if(jt=this._sampleCurveX(bt)-X,Math.abs(jt)<se)return bt;if(ve=this._sampleCurveDerivativeX(bt),Math.abs(ve)<se)break;bt=bt-jt/ve,Oe++}if(Ze=0,it=1,bt=X,bt<Ze)return Ze;if(bt>it)return it;for(;Ze<it;){if(jt=this._sampleCurveX(bt),Math.abs(jt-X)<se)return bt;X>jt?Ze=bt:it=bt,bt=(it-Ze)*.5+Ze}return bt},U.prototype.solve=function(X,se){return this._sampleCurveY(this._solveCurveX(X,se))},U.prototype.solveSimple=function(X){return this._sampleCurveY(this._solveCurveX(X,1e-6))},U})()}}),ge=G({"../node_modules/levenshtein-edit-distance/index.js"(g,E){var U,X;U=[],X=[];function se(ve,Oe,Ze){var it,bt,jt,Vt,on,On,wn,_e;if(ve===Oe)return 0;if(it=ve.length,bt=Oe.length,it===0)return bt;if(bt===0)return it;for(Ze&&(ve=ve.toLowerCase(),Oe=Oe.toLowerCase()),wn=0;wn<it;)X[wn]=ve.charCodeAt(wn),U[wn]=++wn;for(_e=0;_e<bt;)for(jt=Oe.charCodeAt(_e),Vt=on=_e++,wn=-1;++wn<it;)On=jt===X[wn]?on:on+1,on=U[wn],U[wn]=Vt=on>Vt?On>Vt?Vt+1:On:On>on?on+1:On;return Vt}E.exports=se}}),me=G({"../node_modules/propose/propose.js"(g,E){var U=ge();function X(){var se,ve,Oe,Ze,it,bt=0,jt=arguments[0],Vt=arguments[1],on=Vt.length,On=arguments[2];On&&(Ze=On.threshold,it=On.ignoreCase),Ze===void 0&&(Ze=0);for(var wn=0;wn<on;++wn)it?ve=U(jt,Vt[wn],!0):ve=U(jt,Vt[wn]),ve>jt.length?se=1-ve/Vt[wn].length:se=1-ve/jt.length,se>bt&&(bt=se,Oe=Vt[wn]);return bt>=Ze?Oe:null}E.exports=X}}),J=G({"../node_modules/fast-deep-equal/index.js"(g,E){E.exports=function U(X,se){if(X===se)return!0;if(X&&se&&typeof X=="object"&&typeof se=="object"){if(X.constructor!==se.constructor)return!1;var ve,Oe,Ze;if(Array.isArray(X)){if(ve=X.length,ve!=se.length)return!1;for(Oe=ve;Oe--!==0;)if(!U(X[Oe],se[Oe]))return!1;return!0}if(X.constructor===RegExp)return X.source===se.source&&X.flags===se.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===se.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===se.toString();if(Ze=Object.keys(X),ve=Ze.length,ve!==Object.keys(se).length)return!1;for(Oe=ve;Oe--!==0;)if(!Object.prototype.hasOwnProperty.call(se,Ze[Oe]))return!1;for(Oe=ve;Oe--!==0;){var it=Ze[Oe];if(!U(X[it],se[it]))return!1}return!0}return X!==X&&se!==se}}}),te={};V(te,{createRafDriver:()=>H0,getProject:()=>kx,notify:()=>rd,onChange:()=>sv,types:()=>dx,val:()=>Gp}),c.exports=ue(te);var oe={};V(oe,{createRafDriver:()=>H0,getProject:()=>kx,notify:()=>rd,onChange:()=>sv,types:()=>dx,val:()=>Gp});var Y=Ut(),ke=class{constructor(){P(this,"atom",new Y.Atom({projects:{}}))}add(g,E){this.atom.setByPointer(U=>U.projects[g],E)}get(g){return this.atom.get().projects[g]}has(g){return!!this.get(g)}},$e=new ke,ot=$e,Qe=new WeakMap;function pe(g){return Qe.get(g)}function Ve(g,E){Qe.set(g,E)}var Ue=[],Pt=Array.isArray,Me=Pt,Ot=typeof qi=="object"&&qi&&qi.Object===Object&&qi,Tn=Ot,yn=typeof self=="object"&&self&&self.Object===Object&&self,qn=Tn||yn||Function("return this")(),Dn=qn,xt=Dn.Symbol,vt=xt,Zt=Object.prototype,Mn=Zt.hasOwnProperty,sn=Zt.toString,Fn=vt?vt.toStringTag:void 0;function fr(g){var E=Mn.call(g,Fn),U=g[Fn];try{g[Fn]=void 0;var X=!0}catch{}var se=sn.call(g);return X&&(E?g[Fn]=U:delete g[Fn]),se}var pn=fr,zn=Object.prototype,nr=zn.toString;function Un(g){return nr.call(g)}var st=Un,De="[object Null]",or="[object Undefined]",sr=vt?vt.toStringTag:void 0;function Pn(g){return g==null?g===void 0?or:De:sr&&sr in Object(g)?pn(g):st(g)}var Jt=Pn;function we(g){return g!=null&&typeof g=="object"}var ie=we,ze="[object Symbol]";function St(g){return typeof g=="symbol"||ie(g)&&Jt(g)==ze}var _t=St,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ln=/^\w*$/;function Wt(g,E){if(Me(g))return!1;var U=typeof g;return U=="number"||U=="symbol"||U=="boolean"||g==null||_t(g)?!0:ln.test(g)||!mt.test(g)||E!=null&&g in Object(E)}var dn=Wt;function fn(g){var E=typeof g;return g!=null&&(E=="object"||E=="function")}var At=fn,Kt="[object AsyncFunction]",hn="[object Function]",mn="[object GeneratorFunction]",qt="[object Proxy]";function Xn(g){if(!At(g))return!1;var E=Jt(g);return E==hn||E==mn||E==Kt||E==qt}var Ae=Xn,Gt=Dn["__core-js_shared__"],Dt=Gt,Xt=(function(){var g=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""})();function Ct(g){return!!Xt&&Xt in g}var Mt=Ct,Yt=Function.prototype,Sn=Yt.toString;function _r(g){if(g!=null){try{return Sn.call(g)}catch{}try{return g+""}catch{}}return""}var en=_r,vn=/[\\^$.*+?()[\]{}|]/g,rr=/^\[object .+?Constructor\]$/,rn=Function.prototype,kn=Object.prototype,gn=rn.toString,$n=kn.hasOwnProperty,li=RegExp("^"+gn.call($n).replace(vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hr(g){if(!At(g)||Mt(g))return!1;var E=Ae(g)?li:rr;return E.test(en(g))}var yr=hr;function ui(g,E){return g?.[E]}var Yr=ui;function jr(g,E){var U=Yr(g,E);return yr(U)?U:void 0}var mr=jr,na=mr(Object,"create"),Mr=na;function Mi(){this.__data__=Mr?Mr(null):{},this.size=0}var pa=Mi;function yi(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}var Pi=yi,Oi="__lodash_hash_undefined__",Ni=Object.prototype,La=Ni.hasOwnProperty;function Li(g){var E=this.__data__;if(Mr){var U=E[g];return U===Oi?void 0:U}return La.call(E,g)?E[g]:void 0}var he=Li,He=Object.prototype,ft=He.hasOwnProperty;function lt(g){var E=this.__data__;return Mr?E[g]!==void 0:ft.call(E,g)}var Je=lt,Bt="__lodash_hash_undefined__";function an(g,E){var U=this.__data__;return this.size+=this.has(g)?0:1,U[g]=Mr&&E===void 0?Bt:E,this}var tn=an;function Qt(g){var E=-1,U=g==null?0:g.length;for(this.clear();++E<U;){var X=g[E];this.set(X[0],X[1])}}Qt.prototype.clear=pa,Qt.prototype.delete=Pi,Qt.prototype.get=he,Qt.prototype.has=Je,Qt.prototype.set=tn;var Cn=Qt;function Hn(){this.__data__=[],this.size=0}var jn=Hn;function lr(g,E){return g===E||g!==g&&E!==E}var xr=lr;function $r(g,E){for(var U=g.length;U--;)if(xr(g[U][0],E))return U;return-1}var Zr=$r,Ir=Array.prototype,Ln=Ir.splice;function Nr(g){var E=this.__data__,U=Zr(E,g);if(U<0)return!1;var X=E.length-1;return U==X?E.pop():Ln.call(E,U,1),--this.size,!0}var wr=Nr;function ma(g){var E=this.__data__,U=Zr(E,g);return U<0?void 0:E[U][1]}var Fa=ma;function ra(g){return Zr(this.__data__,g)>-1}var Cs=ra;function Lr(g,E){var U=this.__data__,X=Zr(U,g);return X<0?(++this.size,U.push([g,E])):U[X][1]=E,this}var ia=Lr;function bi(g){var E=-1,U=g==null?0:g.length;for(this.clear();++E<U;){var X=g[E];this.set(X[0],X[1])}}bi.prototype.clear=jn,bi.prototype.delete=wr,bi.prototype.get=Fa,bi.prototype.has=Cs,bi.prototype.set=ia;var Fi=bi,ga=mr(Dn,"Map"),Lo=ga;function ss(){this.size=0,this.__data__={hash:new Cn,map:new(Lo||Fi),string:new Cn}}var ky=ss;function Iy(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}var Eg=Iy;function Tg(g,E){var U=g.__data__;return Eg(E)?U[typeof E=="string"?"string":"hash"]:U.map}var mo=Tg;function ip(g){var E=mo(this,g).delete(g);return this.size-=E?1:0,E}var Mg=ip;function Pg(g){return mo(this,g).get(g)}var Cg=Pg;function Ag(g){return mo(this,g).has(g)}var kg=Ag;function Ig(g,E){var U=mo(this,g),X=U.size;return U.set(g,E),this.size+=U.size==X?0:1,this}var Rg=Ig;function Ll(g){var E=-1,U=g==null?0:g.length;for(this.clear();++E<U;){var X=g[E];this.set(X[0],X[1])}}Ll.prototype.clear=ky,Ll.prototype.delete=Mg,Ll.prototype.get=Cg,Ll.prototype.has=kg,Ll.prototype.set=Rg;var Bc=Ll,Ry="Expected a function";function ap(g,E){if(typeof g!="function"||E!=null&&typeof E!="function")throw new TypeError(Ry);var U=function(){var X=arguments,se=E?E.apply(this,X):X[0],ve=U.cache;if(ve.has(se))return ve.get(se);var Oe=g.apply(this,X);return U.cache=ve.set(se,Oe)||ve,Oe};return U.cache=new(ap.Cache||Bc),U}ap.Cache=Bc;var Dg=ap,Dy=500;function Oy(g){var E=Dg(g,function(X){return U.size===Dy&&U.clear(),X}),U=E.cache;return E}var sl=Oy,Fl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Og=/\\(\\)?/g,hf=sl(function(g){var E=[];return g.charCodeAt(0)===46&&E.push(""),g.replace(Fl,function(U,X,se,ve){E.push(se?ve.replace(Og,"$1"):X||U)}),E}),Ny=hf;function Ng(g,E){for(var U=-1,X=g==null?0:g.length,se=Array(X);++U<X;)se[U]=E(g[U],U,g);return se}var Lg=Ng,Fg=vt?vt.prototype:void 0,Ug=Fg?Fg.toString:void 0;function op(g){if(typeof g=="string")return g;if(Me(g))return Lg(g,op)+"";if(_t(g))return Ug?Ug.call(g):"";var E=g+"";return E=="0"&&1/g==-1/0?"-0":E}var Bg=op;function Ly(g){return g==null?"":Bg(g)}var zc=Ly;function zg(g,E){return Me(g)?g:dn(g,E)?[g]:Ny(zc(g))}var jc=zg;function jg(g){if(typeof g=="string"||_t(g))return g;var E=g+"";return E=="0"&&1/g==-1/0?"-0":E}var ls=jg;function Cu(g,E){E=jc(E,g);for(var U=0,X=E.length;g!=null&&U<X;)g=g[ls(E[U++])];return U&&U==X?g:void 0}var Vc=Cu;function sp(g,E,U){var X=g==null?void 0:Vc(g,E);return X===void 0?U:X}var Ul=sp;function lp(g,E){return E.length===0?g:Ul(g,E)}var Au=class{constructor(){P(this,"_values",{})}get(g,E){if(this.has(g))return this._values[g];{const U=E();return this._values[g]=U,U}}has(g){return this._values.hasOwnProperty(g)}},Zi=Ut(),ll=(function(){try{var g=mr(Object,"defineProperty");return g({},"",{}),g}catch{}})(),pf=ll;function Vg(g,E,U){E=="__proto__"&&pf?pf(g,E,{configurable:!0,enumerable:!0,value:U,writable:!0}):g[E]=U}var ul=Vg,Hc=Object.prototype,Hg=Hc.hasOwnProperty;function Gg(g,E,U){var X=g[E];(!(Hg.call(g,E)&&xr(X,U))||U===void 0&&!(E in g))&&ul(g,E,U)}var up=Gg,Fy=9007199254740991,Gc=/^(?:0|[1-9]\d*)$/;function cp(g,E){var U=typeof g;return E=E??Fy,!!E&&(U=="number"||U!="symbol"&&Gc.test(g))&&g>-1&&g%1==0&&g<E}var dp=cp;function Wg(g,E,U,X){if(!At(g))return g;E=jc(E,g);for(var se=-1,ve=E.length,Oe=ve-1,Ze=g;Ze!=null&&++se<ve;){var it=ls(E[se]),bt=U;if(it==="__proto__"||it==="constructor"||it==="prototype")return g;if(se!=Oe){var jt=Ze[it];bt=X?X(jt,it,Ze):void 0,bt===void 0&&(bt=At(jt)?jt:dp(E[se+1])?[]:{})}up(Ze,it,bt),Ze=Ze[it]}return g}var qg=Wg;function Xg(g,E,U){return g==null?g:qg(g,E,U)}var Wc=Xg,va=new WeakMap;function Uy(g){return qc(g)}function qc(g){if(va.has(g))return va.get(g);const E=g.type==="compound"?Kg(g):g.type==="enum"?fp(g):g.default;return va.set(g,E),E}function fp(g){const E={$case:g.defaultCase};for(const[U,X]of Object.entries(g.cases))E[U]=qc(X);return E}function Kg(g){const E={};for(const[U,X]of Object.entries(g.props))E[U]=qc(X);return E}var Ua=Ut(),By=K(ae());function zy(g,E,U){return(0,Ua.prism)(()=>{const X=(0,Ua.val)(E);return Ua.prism.memo("driver",()=>X?X.type==="BasicKeyframedTrack"?Yg(g,X,U):(g.logger.error("Track type not yet supported."),(0,Ua.prism)(()=>{})):(0,Ua.prism)(()=>{}),[X]).getValue()})}function Yg(g,E,U){return(0,Ua.prism)(()=>{let X=Ua.prism.ref("state",{started:!1}),se=X.current;const ve=U.getValue();return(!se.started||ve<se.validFrom||se.validTo<=ve)&&(X.current=se=Xc(g,U,E)),se.der.getValue()})}var hp=(0,Ua.prism)(()=>{});function Xc(g,E,U){const X=E.getValue();if(U.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:hp};let se=0;for(;;){const ve=U.keyframes[se];if(!ve)return Ui.error;const Oe=se===U.keyframes.length-1;if(X<ve.position)return se===0?Ui.beforeFirstKeyframe(ve):Ui.error;if(ve.position===X)return Oe?Ui.lastKeyframe(ve):Ui.between(ve,U.keyframes[se+1],E);if(se===U.keyframes.length-1)return Ui.lastKeyframe(ve);{const Ze=se+1;if(U.keyframes[Ze].position<=X){se=Ze;continue}else return Ui.between(ve,U.keyframes[se+1],E)}}}var Ui={beforeFirstKeyframe(g){return{started:!0,validFrom:-1/0,validTo:g.position,der:(0,Ua.prism)(()=>({left:g.value,progression:0}))}},lastKeyframe(g){return{started:!0,validFrom:g.position,validTo:1/0,der:(0,Ua.prism)(()=>({left:g.value,progression:0}))}},between(g,E,U){if(!g.connectedRight)return{started:!0,validFrom:g.position,validTo:E.position,der:(0,Ua.prism)(()=>({left:g.value,progression:0}))};const X=ve=>(ve-g.position)/(E.position-g.position);if(!g.type||g.type==="bezier"){const ve=new By.default(g.handles[2],g.handles[3],E.handles[0],E.handles[1]),Oe=(0,Ua.prism)(()=>{const Ze=X(U.getValue()),it=ve.solveSimple(Ze);return{left:g.value,right:E.value,progression:it}});return{started:!0,validFrom:g.position,validTo:E.position,der:Oe}}const se=(0,Ua.prism)(()=>{const ve=X(U.getValue()),Oe=Math.floor(ve);return{left:g.value,right:E.value,progression:Oe}});return{started:!0,validFrom:g.position,validTo:E.position,der:se}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:hp}};function Kc(g,E,U){const se=U.get(g);if(se&&se.override===E)return se.merged;const ve=L({},g);for(const Oe of Object.keys(E)){const Ze=E[Oe],it=g[Oe];ve[Oe]=typeof Ze=="object"&&typeof it=="object"?Kc(it,Ze,U):Ze===void 0?it:Ze}return U.set(g,{override:E,merged:ve}),ve}function cl(g,E){let U=g;for(const X of E)U=U[X];return U}var Bl=Ut(),$g=(g,E)=>{const U=Bl.prism.memo(g,()=>new Bl.Atom(E),[]);return U.set(E),U},Fr=Ut(),ku=Ut(),jy=/\s/;function pp(g){for(var E=g.length;E--&&jy.test(g.charAt(E)););return E}var mp=pp,gp=/^\s+/;function Vy(g){return g&&g.slice(0,mp(g)+1).replace(gp,"")}var mf=Vy,Yc=NaN,Zg=/^[-+]0x[0-9a-f]+$/i,Hy=/^0b[01]+$/i,Jg=/^0o[0-7]+$/i,vp=parseInt;function Qg(g){if(typeof g=="number")return g;if(_t(g))return Yc;if(At(g)){var E=typeof g.valueOf=="function"?g.valueOf():g;g=At(E)?E+"":E}if(typeof g!="string")return g===0?g:+g;g=mf(g);var U=Hy.test(g);return U||Jg.test(g)?vp(g.slice(2),U?2:8):Zg.test(g)?Yc:+g}var ee=Qg,xe=1/0,Be=17976931348623157e292;function yt(g){if(!g)return g===0?g:0;if(g=ee(g),g===xe||g===-xe){var E=g<0?-1:1;return E*Be}return g===g?g:0}var Zn=yt;function Pr(g){var E=Zn(g),U=E%1;return E===E?U?E-U:E:0}var Ji=Pr;function us(g){return g}var gf=us,Iu=mr(Dn,"WeakMap"),$c=Iu,Gy=Object.create,Xw=(function(){function g(){}return function(E){if(!At(E))return{};if(Gy)return Gy(E);g.prototype=E;var U=new g;return g.prototype=void 0,U}})(),P3=Xw;function C3(g,E){var U=-1,X=g.length;for(E||(E=Array(X));++U<X;)E[U]=g[U];return E}var Kw=C3;function A3(g,E){for(var U=-1,X=g==null?0:g.length;++U<X&&E(g[U],U,g)!==!1;);return g}var k3=A3;function Yw(g,E,U,X){var se=!U;U||(U={});for(var ve=-1,Oe=E.length;++ve<Oe;){var Ze=E[ve],it=X?X(U[Ze],g[Ze],Ze,U,g):void 0;it===void 0&&(it=g[Ze]),se?ul(U,Ze,it):up(U,Ze,it)}return U}var vf=Yw,I3=9007199254740991;function Wy(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=I3}var e0=Wy;function $w(g){return g!=null&&e0(g.length)&&!Ae(g)}var qy=$w,t0=Object.prototype;function Xy(g){var E=g&&g.constructor,U=typeof E=="function"&&E.prototype||t0;return g===U}var Ky=Xy;function Zw(g,E){for(var U=-1,X=Array(g);++U<g;)X[U]=E(U);return X}var R3=Zw,Yy="[object Arguments]";function $y(g){return ie(g)&&Jt(g)==Yy}var Zy=$y,n0=Object.prototype,Jw=n0.hasOwnProperty,Qw=n0.propertyIsEnumerable,r0=Zy((function(){return arguments})())?Zy:function(g){return ie(g)&&Jw.call(g,"callee")&&!Qw.call(g,"callee")},Jy=r0;function D3(){return!1}var eE=D3,Qy=e&&!e.nodeType&&e,eb=Qy&&!0&&c&&!c.nodeType&&c,tE=eb&&eb.exports===Qy,tb=tE?Dn.Buffer:void 0,nE=tb?tb.isBuffer:void 0,rE=nE||eE,_p=rE,iE="[object Arguments]",aE="[object Array]",oE="[object Boolean]",sE="[object Date]",lE="[object Error]",uE="[object Function]",cE="[object Map]",dE="[object Number]",fE="[object Object]",hE="[object RegExp]",pE="[object Set]",mE="[object String]",gE="[object WeakMap]",vE="[object ArrayBuffer]",_E="[object DataView]",yE="[object Float32Array]",ci="[object Float64Array]",bE="[object Int8Array]",O3="[object Int16Array]",N3="[object Int32Array]",i0="[object Uint8Array]",nb="[object Uint8ClampedArray]",rb="[object Uint16Array]",_f="[object Uint32Array]",di={};di[yE]=di[ci]=di[bE]=di[O3]=di[N3]=di[i0]=di[nb]=di[rb]=di[_f]=!0,di[iE]=di[aE]=di[vE]=di[oE]=di[_E]=di[sE]=di[lE]=di[uE]=di[cE]=di[dE]=di[fE]=di[hE]=di[pE]=di[mE]=di[gE]=!1;function a0(g){return ie(g)&&e0(g.length)&&!!di[Jt(g)]}var xE=a0;function ib(g){return function(E){return g(E)}}var ab=ib,o0=e&&!e.nodeType&&e,yf=o0&&!0&&c&&!c.nodeType&&c,ob=yf&&yf.exports===o0,s0=ob&&Tn.process,L3=(function(){try{var g=yf&&yf.require&&yf.require("util").types;return g||s0&&s0.binding&&s0.binding("util")}catch{}})(),Zc=L3,sb=Zc&&Zc.isTypedArray,SE=sb?ab(sb):xE,wE=SE,F3=Object.prototype,lb=F3.hasOwnProperty;function EE(g,E){var U=Me(g),X=!U&&Jy(g),se=!U&&!X&&_p(g),ve=!U&&!X&&!se&&wE(g),Oe=U||X||se||ve,Ze=Oe?R3(g.length,String):[],it=Ze.length;for(var bt in g)(E||lb.call(g,bt))&&!(Oe&&(bt=="length"||se&&(bt=="offset"||bt=="parent")||ve&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||dp(bt,it)))&&Ze.push(bt);return Ze}var ub=EE;function TE(g,E){return function(U){return g(E(U))}}var ME=TE,U3=ME(Object.keys,Object),PE=U3,CE=Object.prototype,AE=CE.hasOwnProperty;function B3(g){if(!Ky(g))return PE(g);var E=[];for(var U in Object(g))AE.call(g,U)&&U!="constructor"&&E.push(U);return E}var z3=B3;function l0(g){return qy(g)?ub(g):z3(g)}var Jc=l0;function j3(g){var E=[];if(g!=null)for(var U in Object(g))E.push(U);return E}var kE=j3,IE=Object.prototype,u0=IE.hasOwnProperty;function cb(g){if(!At(g))return kE(g);var E=Ky(g),U=[];for(var X in g)X=="constructor"&&(E||!u0.call(g,X))||U.push(X);return U}var RE=cb;function bf(g){return qy(g)?ub(g,!0):RE(g)}var xf=bf;function V3(g,E){for(var U=-1,X=E.length,se=g.length;++U<X;)g[se+U]=E[U];return g}var db=V3,H3=ME(Object.getPrototypeOf,Object),fb=H3,DE="[object Object]",G3=Function.prototype,W3=Object.prototype,hb=G3.toString,OE=W3.hasOwnProperty,NE=hb.call(Object);function LE(g){if(!ie(g)||Jt(g)!=DE)return!1;var E=fb(g);if(E===null)return!0;var U=OE.call(E,"constructor")&&E.constructor;return typeof U=="function"&&U instanceof U&&hb.call(U)==NE}var q3=LE;function X3(g,E,U){var X=-1,se=g.length;E<0&&(E=-E>se?0:se+E),U=U>se?se:U,U<0&&(U+=se),se=E>U?0:U-E>>>0,E>>>=0;for(var ve=Array(se);++X<se;)ve[X]=g[X+E];return ve}var pb=X3;function FE(g,E,U){var X=g.length;return U=U===void 0?X:U,!E&&U>=X?g:pb(g,E,U)}var UE=FE,K3="\\ud800-\\udfff",Y3="\\u0300-\\u036f",BE="\\ufe20-\\ufe2f",zE="\\u20d0-\\u20ff",$3=Y3+BE+zE,Sf="\\ufe0e\\ufe0f",mb="\\u200d",Z3=RegExp("["+mb+K3+$3+Sf+"]");function J3(g){return Z3.test(g)}var c0=J3;function Q3(g){return g.split("")}var eR=Q3,wf="\\ud800-\\udfff",d0="\\u0300-\\u036f",tR="\\ufe20-\\ufe2f",jE="\\u20d0-\\u20ff",VE=d0+tR+jE,HE="\\ufe0e\\ufe0f",nR="["+wf+"]",gb="["+VE+"]",f0="\\ud83c[\\udffb-\\udfff]",rR="(?:"+gb+"|"+f0+")",GE="[^"+wf+"]",vb="(?:\\ud83c[\\udde6-\\uddff]){2}",WE="[\\ud800-\\udbff][\\udc00-\\udfff]",iR="\\u200d",_b=rR+"?",qE="["+HE+"]?",Ef="(?:"+iR+"(?:"+[GE,vb,WE].join("|")+")"+qE+_b+")*",yp=qE+_b+Ef,h0="(?:"+[GE+gb+"?",gb,vb,WE,nR].join("|")+")",XE=RegExp(f0+"(?="+f0+")|"+h0+yp,"g");function Tf(g){return g.match(XE)||[]}var yb=Tf;function aR(g){return c0(g)?yb(g):eR(g)}var KE=aR;function oR(g,E,U){return g===g&&(U!==void 0&&(g=g<=U?g:U),E!==void 0&&(g=g>=E?g:E)),g}var sR=oR;function YE(g,E,U){return U===void 0&&(U=E,E=void 0),U!==void 0&&(U=ee(U),U=U===U?U:0),E!==void 0&&(E=ee(E),E=E===E?E:0),sR(ee(g),E,U)}var $E=YE;function lR(){this.__data__=new Fi,this.size=0}var bp=lR;function p0(g){var E=this.__data__,U=E.delete(g);return this.size=E.size,U}var uR=p0;function ZE(g){return this.__data__.get(g)}var cR=ZE;function dR(g){return this.__data__.has(g)}var JE=dR,fR=200;function hR(g,E){var U=this.__data__;if(U instanceof Fi){var X=U.__data__;if(!Lo||X.length<fR-1)return X.push([g,E]),this.size=++U.size,this;U=this.__data__=new Bc(X)}return U.set(g,E),this.size=U.size,this}var QE=hR;function Mf(g){var E=this.__data__=new Fi(g);this.size=E.size}Mf.prototype.clear=bp,Mf.prototype.delete=uR,Mf.prototype.get=cR,Mf.prototype.has=JE,Mf.prototype.set=QE;var xp=Mf;function eT(g,E){return g&&vf(E,Jc(E),g)}var pR=eT;function Pf(g,E){return g&&vf(E,xf(E),g)}var Sp=Pf,m0=e&&!e.nodeType&&e,g0=m0&&!0&&c&&!c.nodeType&&c,tT=g0&&g0.exports===m0,v0=tT?Dn.Buffer:void 0,bb=v0?v0.allocUnsafe:void 0;function mR(g,E){if(E)return g.slice();var U=g.length,X=bb?bb(U):new g.constructor(U);return g.copy(X),X}var nT=mR;function rT(g,E){for(var U=-1,X=g==null?0:g.length,se=0,ve=[];++U<X;){var Oe=g[U];E(Oe,U,g)&&(ve[se++]=Oe)}return ve}var gR=rT;function iT(){return[]}var xb=iT,aT=Object.prototype,oT=aT.propertyIsEnumerable,sT=Object.getOwnPropertySymbols,vR=sT?function(g){return g==null?[]:(g=Object(g),gR(sT(g),function(E){return oT.call(g,E)}))}:xb,Cf=vR;function lT(g,E){return vf(g,Cf(g),E)}var _R=lT,_0=Object.getOwnPropertySymbols,Sb=_0?function(g){for(var E=[];g;)db(E,Cf(g)),g=fb(g);return E}:xb,uT=Sb;function cT(g,E){return vf(g,uT(g),E)}var Af=cT;function wp(g,E,U){var X=E(g);return Me(g)?X:db(X,U(g))}var dT=wp;function y0(g){return dT(g,Jc,Cf)}var Ep=y0;function yR(g){return dT(g,xf,uT)}var Qc=yR,Tp=mr(Dn,"DataView"),wb=Tp,Eb=mr(Dn,"Promise"),b0=Eb,bR=mr(Dn,"Set"),Mp=bR,Tb="[object Map]",xR="[object Object]",Mb="[object Promise]",Pb="[object Set]",fT="[object WeakMap]",Cb="[object DataView]",hT=en(wb),SR=en(Lo),wR=en(b0),pT=en(Mp),mT=en($c),Ru=Jt;(wb&&Ru(new wb(new ArrayBuffer(1)))!=Cb||Lo&&Ru(new Lo)!=Tb||b0&&Ru(b0.resolve())!=Mb||Mp&&Ru(new Mp)!=Pb||$c&&Ru(new $c)!=fT)&&(Ru=function(g){var E=Jt(g),U=E==xR?g.constructor:void 0,X=U?en(U):"";if(X)switch(X){case hT:return Cb;case SR:return Tb;case wR:return Mb;case pT:return Pb;case mT:return fT}return E});var ed=Ru,gT=Object.prototype,vT=gT.hasOwnProperty;function x0(g){var E=g.length,U=new g.constructor(E);return E&&typeof g[0]=="string"&&vT.call(g,"index")&&(U.index=g.index,U.input=g.input),U}var _T=x0,ER=Dn.Uint8Array,Pp=ER;function yT(g){var E=new g.constructor(g.byteLength);return new Pp(E).set(new Pp(g)),E}var S0=yT;function TR(g,E){var U=E?S0(g.buffer):g.buffer;return new g.constructor(U,g.byteOffset,g.byteLength)}var MR=TR,bT=/\w*$/;function PR(g){var E=new g.constructor(g.source,bT.exec(g));return E.lastIndex=g.lastIndex,E}var CR=PR,pi=vt?vt.prototype:void 0,Cp=pi?pi.valueOf:void 0;function AR(g){return Cp?Object(Cp.call(g)):{}}var xT=AR;function kR(g,E){var U=E?S0(g.buffer):g.buffer;return new g.constructor(U,g.byteOffset,g.length)}var IR=kR,ST="[object Boolean]",RR="[object Date]",DR="[object Map]",wT="[object Number]",OR="[object RegExp]",NR="[object Set]",ET="[object String]",LR="[object Symbol]",FR="[object ArrayBuffer]",TT="[object DataView]",MT="[object Float32Array]",UR="[object Float64Array]",kf="[object Int8Array]",Ap="[object Int16Array]",PT="[object Int32Array]",BR="[object Uint8Array]",CT="[object Uint8ClampedArray]",zR="[object Uint16Array]",jR="[object Uint32Array]";function AT(g,E,U){var X=g.constructor;switch(E){case FR:return S0(g);case ST:case RR:return new X(+g);case TT:return MR(g,U);case MT:case UR:case kf:case Ap:case PT:case BR:case CT:case zR:case jR:return IR(g,U);case DR:return new X;case wT:case ET:return new X(g);case OR:return CR(g);case NR:return new X;case LR:return xT(g)}}var VR=AT;function kT(g){return typeof g.constructor=="function"&&!Ky(g)?P3(fb(g)):{}}var IT=kT,Ab="[object Map]";function RT(g){return ie(g)&&ed(g)==Ab}var DT=RT,OT=Zc&&Zc.isMap,HR=OT?ab(OT):DT,NT=HR,GR="[object Set]";function WR(g){return ie(g)&&ed(g)==GR}var kb=WR,LT=Zc&&Zc.isSet,FT=LT?ab(LT):kb,w0=FT,qR=1,UT=2,E0=4,BT="[object Arguments]",zT="[object Array]",td="[object Boolean]",jT="[object Date]",Ib="[object Error]",Rb="[object Function]",Db="[object GeneratorFunction]",Ob="[object Map]",Nb="[object Number]",T0="[object Object]",VT="[object RegExp]",HT="[object Set]",GT="[object String]",WT="[object Symbol]",qT="[object WeakMap]",Du="[object ArrayBuffer]",Lb="[object DataView]",XR="[object Float32Array]",XT="[object Float64Array]",Fb="[object Int8Array]",KR="[object Int16Array]",YR="[object Int32Array]",KT="[object Uint8Array]",YT="[object Uint8ClampedArray]",$R="[object Uint16Array]",ZR="[object Uint32Array]",ti={};ti[BT]=ti[zT]=ti[Du]=ti[Lb]=ti[td]=ti[jT]=ti[XR]=ti[XT]=ti[Fb]=ti[KR]=ti[YR]=ti[Ob]=ti[Nb]=ti[T0]=ti[VT]=ti[HT]=ti[GT]=ti[WT]=ti[KT]=ti[YT]=ti[$R]=ti[ZR]=!0,ti[Ib]=ti[Rb]=ti[qT]=!1;function M0(g,E,U,X,se,ve){var Oe,Ze=E&qR,it=E&UT,bt=E&E0;if(U&&(Oe=se?U(g,X,se,ve):U(g)),Oe!==void 0)return Oe;if(!At(g))return g;var jt=Me(g);if(jt){if(Oe=_T(g),!Ze)return Kw(g,Oe)}else{var Vt=ed(g),on=Vt==Rb||Vt==Db;if(_p(g))return nT(g,Ze);if(Vt==T0||Vt==BT||on&&!se){if(Oe=it||on?{}:IT(g),!Ze)return it?Af(g,Sp(Oe,g)):_R(g,pR(Oe,g))}else{if(!ti[Vt])return se?g:{};Oe=VR(g,Vt,Ze)}}ve||(ve=new xp);var On=ve.get(g);if(On)return On;ve.set(g,Oe),w0(g)?g.forEach(function(ht){Oe.add(M0(ht,E,U,ht,g,ve))}):NT(g)&&g.forEach(function(ht,er){Oe.set(er,M0(ht,E,U,er,g,ve))});var wn=bt?it?Qc:Ep:it?xf:Jc,_e=jt?void 0:wn(g);return k3(_e||g,function(ht,er){_e&&(er=ht,ht=g[er]),up(Oe,er,M0(ht,E,U,er,g,ve))}),Oe}var P0=M0,Ub=1,$T=4;function JR(g){return P0(g,Ub|$T)}var ZT=JR,QR="__lodash_hash_undefined__";function eD(g){return this.__data__.set(g,QR),this}var Bb=eD;function JT(g){return this.__data__.has(g)}var tD=JT;function kp(g){var E=-1,U=g==null?0:g.length;for(this.__data__=new Bc;++E<U;)this.add(g[E])}kp.prototype.add=kp.prototype.push=Bb,kp.prototype.has=tD;var QT=kp;function zb(g,E){for(var U=-1,X=g==null?0:g.length;++U<X;)if(E(g[U],U,g))return!0;return!1}var eM=zb;function nD(g,E){return g.has(E)}var tM=nD,rD=1,iD=2;function C0(g,E,U,X,se,ve){var Oe=U&rD,Ze=g.length,it=E.length;if(Ze!=it&&!(Oe&&it>Ze))return!1;var bt=ve.get(g),jt=ve.get(E);if(bt&&jt)return bt==E&&jt==g;var Vt=-1,on=!0,On=U&iD?new QT:void 0;for(ve.set(g,E),ve.set(E,g);++Vt<Ze;){var wn=g[Vt],_e=E[Vt];if(X)var ht=Oe?X(_e,wn,Vt,E,g,ve):X(wn,_e,Vt,g,E,ve);if(ht!==void 0){if(ht)continue;on=!1;break}if(On){if(!eM(E,function(er,Vr){if(!tM(On,Vr)&&(wn===er||se(wn,er,U,X,ve)))return On.push(Vr)})){on=!1;break}}else if(!(wn===_e||se(wn,_e,U,X,ve))){on=!1;break}}return ve.delete(g),ve.delete(E),on}var A0=C0;function aD(g){var E=-1,U=Array(g.size);return g.forEach(function(X,se){U[++E]=[se,X]}),U}var nM=aD;function rM(g){var E=-1,U=Array(g.size);return g.forEach(function(X){U[++E]=X}),U}var iM=rM,aM=1,oM=2,sM="[object Boolean]",lM="[object Date]",uM="[object Error]",cM="[object Map]",dM="[object Number]",fM="[object RegExp]",hM="[object Set]",pM="[object String]",jb="[object Symbol]",k0="[object ArrayBuffer]",mM="[object DataView]",gM=vt?vt.prototype:void 0,Vb=gM?gM.valueOf:void 0;function vM(g,E,U,X,se,ve,Oe){switch(U){case mM:if(g.byteLength!=E.byteLength||g.byteOffset!=E.byteOffset)return!1;g=g.buffer,E=E.buffer;case k0:return!(g.byteLength!=E.byteLength||!ve(new Pp(g),new Pp(E)));case sM:case lM:case dM:return xr(+g,+E);case uM:return g.name==E.name&&g.message==E.message;case fM:case pM:return g==E+"";case cM:var Ze=nM;case hM:var it=X&aM;if(Ze||(Ze=iM),g.size!=E.size&&!it)return!1;var bt=Oe.get(g);if(bt)return bt==E;X|=oM,Oe.set(g,E);var jt=A0(Ze(g),Ze(E),X,se,ve,Oe);return Oe.delete(g),jt;case jb:if(Vb)return Vb.call(g)==Vb.call(E)}return!1}var _M=vM,yM=1,bM=Object.prototype,oD=bM.hasOwnProperty;function sD(g,E,U,X,se,ve){var Oe=U&yM,Ze=Ep(g),it=Ze.length,bt=Ep(E),jt=bt.length;if(it!=jt&&!Oe)return!1;for(var Vt=it;Vt--;){var on=Ze[Vt];if(!(Oe?on in E:oD.call(E,on)))return!1}var On=ve.get(g),wn=ve.get(E);if(On&&wn)return On==E&&wn==g;var _e=!0;ve.set(g,E),ve.set(E,g);for(var ht=Oe;++Vt<it;){on=Ze[Vt];var er=g[on],Vr=E[on];if(X)var Ba=Oe?X(Vr,er,on,E,g,ve):X(er,Vr,on,g,E,ve);if(!(Ba===void 0?er===Vr||se(er,Vr,U,X,ve):Ba)){_e=!1;break}ht||(ht=on=="constructor")}if(_e&&!ht){var go=g.constructor,Qi=E.constructor;go!=Qi&&"constructor"in g&&"constructor"in E&&!(typeof go=="function"&&go instanceof go&&typeof Qi=="function"&&Qi instanceof Qi)&&(_e=!1)}return ve.delete(g),ve.delete(E),_e}var xM=sD,Hb=1,I0="[object Arguments]",If="[object Array]",Ip="[object Object]",Gb=Object.prototype,Wb=Gb.hasOwnProperty;function lD(g,E,U,X,se,ve){var Oe=Me(g),Ze=Me(E),it=Oe?If:ed(g),bt=Ze?If:ed(E);it=it==I0?Ip:it,bt=bt==I0?Ip:bt;var jt=it==Ip,Vt=bt==Ip,on=it==bt;if(on&&_p(g)){if(!_p(E))return!1;Oe=!0,jt=!1}if(on&&!jt)return ve||(ve=new xp),Oe||wE(g)?A0(g,E,U,X,se,ve):_M(g,E,it,U,X,se,ve);if(!(U&Hb)){var On=jt&&Wb.call(g,"__wrapped__"),wn=Vt&&Wb.call(E,"__wrapped__");if(On||wn){var _e=On?g.value():g,ht=wn?E.value():E;return ve||(ve=new xp),se(_e,ht,U,X,ve)}}return on?(ve||(ve=new xp),xM(g,E,U,X,se,ve)):!1}var SM=lD;function R0(g,E,U,X,se){return g===E?!0:g==null||E==null||!ie(g)&&!ie(E)?g!==g&&E!==E:SM(g,E,U,X,R0,se)}var qb=R0,uD=1,wM=2;function EM(g,E,U,X){var se=U.length,ve=se,Oe=!X;if(g==null)return!ve;for(g=Object(g);se--;){var Ze=U[se];if(Oe&&Ze[2]?Ze[1]!==g[Ze[0]]:!(Ze[0]in g))return!1}for(;++se<ve;){Ze=U[se];var it=Ze[0],bt=g[it],jt=Ze[1];if(Oe&&Ze[2]){if(bt===void 0&&!(it in g))return!1}else{var Vt=new xp;if(X)var on=X(bt,jt,it,g,E,Vt);if(!(on===void 0?qb(jt,bt,uD|wM,X,Vt):on))return!1}}return!0}var TM=EM;function cD(g){return g===g&&!At(g)}var MM=cD;function Xb(g){for(var E=Jc(g),U=E.length;U--;){var X=E[U],se=g[X];E[U]=[X,se,MM(se)]}return E}var PM=Xb;function dD(g,E){return function(U){return U==null?!1:U[g]===E&&(E!==void 0||g in Object(U))}}var Kb=dD;function fD(g){var E=PM(g);return E.length==1&&E[0][2]?Kb(E[0][0],E[0][1]):function(U){return U===g||TM(U,g,E)}}var hD=fD;function Yb(g,E){return g!=null&&E in Object(g)}var CM=Yb;function pD(g,E,U){E=jc(E,g);for(var X=-1,se=E.length,ve=!1;++X<se;){var Oe=ls(E[X]);if(!(ve=g!=null&&U(g,Oe)))break;g=g[Oe]}return ve||++X!=se?ve:(se=g==null?0:g.length,!!se&&e0(se)&&dp(Oe,se)&&(Me(g)||Jy(g)))}var AM=pD;function mD(g,E){return g!=null&&AM(g,E,CM)}var gD=mD,kM=1,vD=2;function _D(g,E){return dn(g)&&MM(E)?Kb(ls(g),E):function(U){var X=Ul(U,g);return X===void 0&&X===E?gD(U,g):qb(E,X,kM|vD)}}var IM=_D;function yD(g){return function(E){return E?.[g]}}var RM=yD;function DM(g){return function(E){return Vc(E,g)}}var bD=DM;function xD(g){return dn(g)?RM(ls(g)):bD(g)}var OM=xD;function NM(g){return typeof g=="function"?g:g==null?gf:typeof g=="object"?Me(g)?IM(g[0],g[1]):hD(g):OM(g)}var LM=NM;function SD(g){return function(E,U,X){for(var se=-1,ve=Object(E),Oe=X(E),Ze=Oe.length;Ze--;){var it=Oe[g?Ze:++se];if(U(ve[it],it,ve)===!1)break}return E}}var wD=SD,FM=wD(),ED=FM;function TD(g,E){return g&&ED(g,E,Jc)}var UM=TD,MD=function(){return Dn.Date.now()},$b=MD,BM="Expected a function",PD=Math.max,CD=Math.min;function Rf(g,E,U){var X,se,ve,Oe,Ze,it,bt=0,jt=!1,Vt=!1,on=!0;if(typeof g!="function")throw new TypeError(BM);E=ee(E)||0,At(U)&&(jt=!!U.leading,Vt="maxWait"in U,ve=Vt?PD(ee(U.maxWait)||0,E):ve,on="trailing"in U?!!U.trailing:on);function On(Jr){var za=X,Bo=se;return X=se=void 0,bt=Jr,Oe=g.apply(Bo,za),Oe}function wn(Jr){return bt=Jr,Ze=setTimeout(er,E),jt?On(Jr):Oe}function _e(Jr){var za=Jr-it,Bo=Jr-bt,ds=E-za;return Vt?CD(ds,ve-Bo):ds}function ht(Jr){var za=Jr-it,Bo=Jr-bt;return it===void 0||za>=E||za<0||Vt&&Bo>=ve}function er(){var Jr=$b();if(ht(Jr))return Vr(Jr);Ze=setTimeout(er,_e(Jr))}function Vr(Jr){return Ze=void 0,on&&X?On(Jr):(X=se=void 0,Oe)}function Ba(){Ze!==void 0&&clearTimeout(Ze),bt=0,X=it=se=Ze=void 0}function go(){return Ze===void 0?Oe:Vr($b())}function Qi(){var Jr=$b(),za=ht(Jr);if(X=arguments,se=this,it=Jr,za){if(Ze===void 0)return wn(it);if(Vt)return clearTimeout(Ze),Ze=setTimeout(er,E),On(it)}return Ze===void 0&&(Ze=setTimeout(er,E)),Oe}return Qi.cancel=Ba,Qi.flush=go,Qi}var Rp=Rf;function AD(g){var E=g==null?0:g.length;return E?g[E-1]:void 0}var zM=AD;function kD(g,E){return E.length<2?g:Vc(g,pb(E,0,-1))}var ID=kD;function jM(g){return typeof g=="number"&&g==Ji(g)}var RD=jM;function VM(g,E){var U={};return E=LM(E),UM(g,function(X,se,ve){ul(U,se,E(X,se,ve))}),U}var HM=VM;function DD(g,E){return E=jc(E,g),g=ID(g,E),g==null||delete g[ls(zM(E))]}var OD=DD,Zb=9007199254740991,GM=Math.floor;function ND(g,E){var U="";if(!g||E<1||E>Zb)return U;do E%2&&(U+=g),E=GM(E/2),E&&(g+=g);while(E);return U}var Jb=ND,LD=RM("length"),WM=LD,D0="\\ud800-\\udfff",qM="\\u0300-\\u036f",FD="\\ufe20-\\ufe2f",XM="\\u20d0-\\u20ff",UD=qM+FD+XM,BD="\\ufe0e\\ufe0f",KM="["+D0+"]",Qb="["+UD+"]",O0="\\ud83c[\\udffb-\\udfff]",N0="(?:"+Qb+"|"+O0+")",YM="[^"+D0+"]",$M="(?:\\ud83c[\\udde6-\\uddff]){2}",ex="[\\ud800-\\udbff][\\udc00-\\udfff]",ZM="\\u200d",tx=N0+"?",L0="["+BD+"]?",JM="(?:"+ZM+"(?:"+[YM,$M,ex].join("|")+")"+L0+tx+")*",zD=L0+tx+JM,QM="(?:"+[YM+Qb+"?",Qb,$M,ex,KM].join("|")+")",eP=RegExp(O0+"(?="+O0+")|"+QM+zD,"g");function jD(g){for(var E=eP.lastIndex=0;eP.test(g);)++E;return E}var nd=jD;function F0(g){return c0(g)?nd(g):WM(g)}var tP=F0,nP=Math.ceil;function nx(g,E){E=E===void 0?" ":Bg(E);var U=E.length;if(U<2)return U?Jb(E,g):E;var X=Jb(E,nP(g/tP(E)));return c0(E)?UE(KE(X),0,g).join(""):X.slice(0,g)}var VD=nx;function HD(g,E,U){g=zc(g),E=Ji(E);var X=E?tP(g):0;return E&&X<E?VD(E-X,U)+g:g}var Df=HD;function rP(g,E){return g==null?!0:OD(g,E)}var rx=rP,GD=5*1e3,WD=class{constructor(g){P(this,"_cache",new Au),P(this,"_keepHotUntapDebounce"),Ve(this,g)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return pe(this).propsP}get sheet(){return pe(this).sheet.publicApi}get project(){return pe(this).sheet.project.publicApi}get address(){return L({},pe(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const g=pe(this);return(0,ku.prism)(()=>(0,ku.val)(g.getValues().getValue()))})}onValuesChange(g,E){return sv(this._valuesPrism(),g,E)}get value(){const g=this._valuesPrism();{if(!g.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const E=g.keepHot();this._keepHotUntapDebounce=Rp(()=>{E(),this._keepHotUntapDebounce=void 0},GD)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return g.getValue()}set initialValue(g){pe(this).setInitialValue(g)}};function iP(g){const E=new WeakMap;return U=>(E.has(U)||E.set(U,g(U)),E.get(U))}function U0(g){return g.type==="compound"||g.type==="enum"}function ix(g,E){if(!g)return;const[U,...X]=E;if(U===void 0)return g;if(!U0(g))return;const se=g.type==="enum"?g.cases[U]:g.props[U];return ix(se,X)}function aP(g){return!U0(g)}var oP=class{constructor(g,E,U){this.sheet=g,this.template=E,this.nativeObject=U,P(this,"$$isPointerToPrismProvider",!0),P(this,"address"),P(this,"publicApi"),P(this,"_initialValue",new Fr.Atom({})),P(this,"_cache",new Au),P(this,"_logger"),P(this,"_internalUtilCtx"),this._logger=g._logger.named("SheetObject",E.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=H(L({},E.address),{sheetInstanceId:g.address.sheetInstanceId}),this.publicApi=new WD(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,Fr.prism)(()=>{const g=(0,Fr.val)(this.template.getDefaultValues()),E=(0,Fr.val)(this._initialValue.pointer),U=Fr.prism.memo("withInitialCache",()=>new WeakMap,[]),X=Kc(g,E,U),se=(0,Fr.val)(this.template.getStaticValues()),ve=Fr.prism.memo("withStatics",()=>new WeakMap,[]);let Ze=Kc(X,se,ve),it;{const jt=Fr.prism.memo("seq",()=>this.getSequencedValues(),[]),Vt=Fr.prism.memo("withSeqsCache",()=>new WeakMap,[]);it=(0,Fr.val)((0,Fr.val)(jt)),Ze=Kc(Ze,it,Vt)}return $g("finalAtom",Ze).pointer}))}getValueByPointer(g){const E=(0,Fr.val)(this.getValues()),{path:U}=(0,Fr.getPointerParts)(g);return(0,Fr.val)(cl(E,U))}pointerToPrism(g){const{path:E}=(0,Fr.getPointerParts)(g);return(0,Fr.prism)(()=>{const U=(0,Fr.val)(this.getValues());return(0,Fr.val)(cl(U,E))})}getSequencedValues(){return(0,Fr.prism)(()=>{const g=Fr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),E=(0,Fr.val)(g),U=new Fr.Atom({}),X=(0,Fr.val)(this.template.configPointer);return Fr.prism.effect("processTracks",()=>{const se=[];for(const{trackId:ve,pathToProp:Oe}of E){const Ze=this._trackIdToPrism(ve),it=ix(X,Oe),bt=it.deserializeAndSanitize,jt=it.interpolate,Vt=()=>{const On=Ze.getValue();if(!On)return U.setByPointer(Vr=>cl(Vr,Oe),void 0);const wn=bt(On.left),_e=wn===void 0?it.default:wn;if(On.right===void 0)return U.setByPointer(Vr=>cl(Vr,Oe),_e);const ht=bt(On.right),er=ht===void 0?it.default:ht;return U.setByPointer(Vr=>cl(Vr,Oe),jt(_e,er,On.progression))},on=Ze.onStale(Vt);Vt(),se.push(on)}return()=>{for(const ve of se)ve()}},[X,...E]),U.pointer})}_trackIdToPrism(g){const E=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[g],U=this.sheet.getSequence().positionPrism;return zy(this._internalUtilCtx,E,U)}get propsP(){return this._cache.get("propsP",()=>(0,Fr.pointer)({root:this,path:[]}))}validateValue(g,E){}setInitialValue(g){this.validateValue(this.propsP,g),this._initialValue.set(g)}};function ni(g){return function(U,X){return g(U,X())}}var Fo={_hmm:Uo(524),_todo:Uo(522),_error:Uo(521),errorDev:Uo(529),errorPublic:Uo(545),_kapow:Uo(268),_warn:Uo(265),warnDev:Uo(273),warnPublic:Uo(289),_debug:Uo(137),debugDev:Uo(145),_trace:Uo(73),traceDev:Uo(81)};function Uo(g){return Object.freeze({audience:zl(g,8)?"internal":zl(g,16)?"dev":"public",category:zl(g,4)?"troubleshooting":zl(g,2)?"todo":"general",level:zl(g,512)?512:zl(g,256)?256:zl(g,128)?128:64})}function zl(g,E){return(g&E)===E}function fi(g,E){return((E&32)===32?!0:(E&16)===16?g.dev:(E&8)===8?g.internal:!1)&&g.min<=E}var jl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(g,E,U){return this.create({names:[...g.names,{name:E,key:U}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(g){if(g.length<5)return g;const E=g.replace(this.collapseOnRE,"");return this.cssMemo.has(E)||this.cssMemo.set(E,this.css(g)),E},css(g){var E,U,X,se;const ve=this.cssMemo.get(g);if(ve)return ve;let Oe="color:".concat((U=(E=this.color)==null?void 0:E.call(this,g))!=null?U:"hsl(".concat((g.charCodeAt(0)+g.charCodeAt(g.length-1))%360,", 100%, 60%)"));return(X=this.bold)!=null&&X.test(g)&&(Oe+=";font-weight:600"),(se=this.italic)!=null&&se.test(g)&&(Oe+=";font-style:italic"),this.cssMemo.set(g,Oe),Oe}}};function B0(g=console,E={}){const U=H(L({},jl),{includes:L({},jl.includes)}),X={styled:Dp.bind(U,g),noStyle:XD.bind(U,g)},se=lP.bind(U);function ve(){return U.loggingConsoleStyle&&U.loggerConsoleStyle?X.styled:X.noStyle}return U.create=ve(),{configureLogger(Oe){var Ze;Oe==="console"?(U.loggerConsoleStyle=jl.loggerConsoleStyle,U.create=ve()):Oe.type==="console"?(U.loggerConsoleStyle=(Ze=Oe.style)!=null?Ze:jl.loggerConsoleStyle,U.create=ve()):Oe.type==="keyed"?(U.creatExt=it=>Oe.keyed(it.names),U.create=se):Oe.type==="named"&&(U.creatExt=sP.bind(null,Oe.named),U.create=se)},configureLogging(Oe){var Ze,it,bt,jt,Vt;U.includes.dev=(Ze=Oe.dev)!=null?Ze:jl.includes.dev,U.includes.internal=(it=Oe.internal)!=null?it:jl.includes.internal,U.includes.min=(bt=Oe.min)!=null?bt:jl.includes.min,U.include=(jt=Oe.include)!=null?jt:jl.include,U.loggingConsoleStyle=(Vt=Oe.consoleStyle)!=null?Vt:jl.loggingConsoleStyle,U.create=ve()},getLogger(){return U.create({names:[]})}}}function sP(g,E){const U=[];for(let{name:X,key:se}of E.names)U.push(se==null?X:"".concat(X," (").concat(se,")"));return g(U)}function lP(g){const E=L(L({},this.includes),this.include(g)),U=this.filtered,X=this.named.bind(this,g),se=this.creatExt(g),ve=fi(E,524),Oe=fi(E,522),Ze=fi(E,521),it=fi(E,529),bt=fi(E,545),jt=fi(E,265),Vt=fi(E,268),on=fi(E,273),On=fi(E,289),wn=fi(E,137),_e=fi(E,145),ht=fi(E,73),er=fi(E,81),Vr=ve?se.error.bind(se,Fo._hmm):U.bind(g,524),Ba=Oe?se.error.bind(se,Fo._todo):U.bind(g,522),go=Ze?se.error.bind(se,Fo._error):U.bind(g,521),Qi=it?se.error.bind(se,Fo.errorDev):U.bind(g,529),Jr=bt?se.error.bind(se,Fo.errorPublic):U.bind(g,545),za=Vt?se.warn.bind(se,Fo._kapow):U.bind(g,268),Bo=jt?se.warn.bind(se,Fo._warn):U.bind(g,265),ds=on?se.warn.bind(se,Fo.warnDev):U.bind(g,273),fd=On?se.warn.bind(se,Fo.warnPublic):U.bind(g,273),hd=wn?se.debug.bind(se,Fo._debug):U.bind(g,137),pd=_e?se.debug.bind(se,Fo.debugDev):U.bind(g,145),md=ht?se.trace.bind(se,Fo._trace):U.bind(g,73),gd=er?se.trace.bind(se,Fo.traceDev):U.bind(g,81),Ai={_hmm:Vr,_todo:Ba,_error:go,errorDev:Qi,errorPublic:Jr,_kapow:za,_warn:Bo,warnDev:ds,warnPublic:fd,_debug:hd,debugDev:pd,_trace:md,traceDev:gd,lazy:{_hmm:ve?ni(Vr):Vr,_todo:Oe?ni(Ba):Ba,_error:Ze?ni(go):go,errorDev:it?ni(Qi):Qi,errorPublic:bt?ni(Jr):Jr,_kapow:Vt?ni(za):za,_warn:jt?ni(Bo):Bo,warnDev:on?ni(ds):ds,warnPublic:On?ni(fd):fd,_debug:wn?ni(hd):hd,debugDev:_e?ni(pd):pd,_trace:ht?ni(md):md,traceDev:er?ni(gd):gd},named:X,utilFor:{internal(){return{debug:Ai._debug,error:Ai._error,warn:Ai._warn,trace:Ai._trace,named(zo,Qr){return Ai.named(zo,Qr).utilFor.internal()}}},dev(){return{debug:Ai.debugDev,error:Ai.errorDev,warn:Ai.warnDev,trace:Ai.traceDev,named(zo,Qr){return Ai.named(zo,Qr).utilFor.dev()}}},public(){return{error:Ai.errorPublic,warn:Ai.warnPublic,debug(zo,Qr){Ai._warn('(public "debug" filtered out) '.concat(zo),Qr)},trace(zo,Qr){Ai._warn('(public "trace" filtered out) '.concat(zo),Qr)},named(zo,Qr){return Ai.named(zo,Qr).utilFor.public()}}}}};return Ai}function Dp(g,E){const U=L(L({},this.includes),this.include(E)),X=[];let se="";for(let it=0;it<E.names.length;it++){const{name:bt,key:jt}=E.names[it];if(se+=" %c".concat(bt),X.push(this.style.css(bt)),jt!=null){const Vt="%c#".concat(jt);se+=Vt,X.push(this.style.css(Vt))}}const ve=this.filtered,Oe=this.named.bind(this,E),Ze=[se,...X];return Ou(ve,E,U,g,Ze,qD(Ze),Oe)}function qD(g){const E=g.slice(0);for(let U=1;U<E.length;U++)E[U]+=";background-color:#e0005a;padding:2px;color:white";return E}function XD(g,E){const U=L(L({},this.includes),this.include(E));let X="";for(let Ze=0;Ze<E.names.length;Ze++){const{name:it,key:bt}=E.names[Ze];X+=" ".concat(it),bt!=null&&(X+="#".concat(bt))}const se=this.filtered,ve=this.named.bind(this,E),Oe=[X];return Ou(se,E,U,g,Oe,Oe,ve)}function Ou(g,E,U,X,se,ve,Oe){const Ze=fi(U,524),it=fi(U,522),bt=fi(U,521),jt=fi(U,529),Vt=fi(U,545),on=fi(U,265),On=fi(U,268),wn=fi(U,273),_e=fi(U,289),ht=fi(U,137),er=fi(U,145),Vr=fi(U,73),Ba=fi(U,81),go=Ze?X.error.bind(X,...se):g.bind(E,524),Qi=it?X.error.bind(X,...se):g.bind(E,522),Jr=bt?X.error.bind(X,...se):g.bind(E,521),za=jt?X.error.bind(X,...se):g.bind(E,529),Bo=Vt?X.error.bind(X,...se):g.bind(E,545),ds=On?X.warn.bind(X,...ve):g.bind(E,268),fd=on?X.warn.bind(X,...se):g.bind(E,265),hd=wn?X.warn.bind(X,...se):g.bind(E,273),pd=_e?X.warn.bind(X,...se):g.bind(E,273),md=ht?X.info.bind(X,...se):g.bind(E,137),gd=er?X.info.bind(X,...se):g.bind(E,145),Ai=Vr?X.debug.bind(X,...se):g.bind(E,73),zo=Ba?X.debug.bind(X,...se):g.bind(E,81),Qr={_hmm:go,_todo:Qi,_error:Jr,errorDev:za,errorPublic:Bo,_kapow:ds,_warn:fd,warnDev:hd,warnPublic:pd,_debug:md,debugDev:gd,_trace:Ai,traceDev:zo,lazy:{_hmm:Ze?ni(go):go,_todo:it?ni(Qi):Qi,_error:bt?ni(Jr):Jr,errorDev:jt?ni(za):za,errorPublic:Vt?ni(Bo):Bo,_kapow:On?ni(ds):ds,_warn:on?ni(fd):fd,warnDev:wn?ni(hd):hd,warnPublic:_e?ni(pd):pd,_debug:ht?ni(md):md,debugDev:er?ni(gd):gd,_trace:Vr?ni(Ai):Ai,traceDev:Ba?ni(zo):zo},named:Oe,utilFor:{internal(){return{debug:Qr._debug,error:Qr._error,warn:Qr._warn,trace:Qr._trace,named(ql,Xl){return Qr.named(ql,Xl).utilFor.internal()}}},dev(){return{debug:Qr.debugDev,error:Qr.errorDev,warn:Qr.warnDev,trace:Qr.traceDev,named(ql,Xl){return Qr.named(ql,Xl).utilFor.dev()}}},public(){return{error:Qr.errorPublic,warn:Qr.warnPublic,debug(ql,Xl){Qr._warn('(public "debug" filtered out) '.concat(ql),Xl)},trace(ql,Xl){Qr._warn('(public "trace" filtered out) '.concat(ql),Xl)},named(ql,Xl){return Qr.named(ql,Xl).utilFor.public()}}}}};return Qr}var ax=B0(console,{});ax.configureLogging({dev:!0,min:64});var z0=ax.getLogger().named("Theatre.js (default logger)").utilFor.dev(),ox=new WeakMap;function KD(g){const E=ox.get(g);if(E)return E;const U=new Map;return ox.set(g,U),uP([],g,U),U}function uP(g,E,U){for(const[X,se]of Object.entries(E.props))if(!U0(se)){const ve=[...g,X];U.set(JSON.stringify(ve),U.size),sx(ve,se,U)}for(const[X,se]of Object.entries(E.props))if(U0(se)){const ve=[...g,X];U.set(JSON.stringify(ve),U.size),sx(ve,se,U)}}function sx(g,E,U){if(E.type==="compound")uP(g,E,U);else{if(E.type==="enum")throw new Error("Enums aren't supported yet");U.set(JSON.stringify(g),U.size)}}function cP(g){return typeof g=="object"&&g!==null&&Object.keys(g).length===0}var YD=class{constructor(g,E,U,X,se){this.sheetTemplate=g,P(this,"address"),P(this,"type","Theatre_SheetObjectTemplate"),P(this,"_config"),P(this,"_temp_actions_atom"),P(this,"_cache",new Au),P(this,"project"),P(this,"pointerToSheetState"),P(this,"pointerToStaticOverrides"),this.address=H(L({},g.address),{objectKey:E}),this._config=new Zi.Atom(X),this._temp_actions_atom=new Zi.Atom(se),this.project=g.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(g,E,U){return this._config.set(U),new oP(g,this,E)}reconfigure(g){this._config.set(g)}_temp_setActions(g){this._temp_actions_atom.set(g)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,Zi.prism)(()=>{const g=(0,Zi.val)(this.configPointer);return Uy(g)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,Zi.prism)(()=>{var g;const E=(g=(0,Zi.val)(this.pointerToStaticOverrides))!=null?g:{};return(0,Zi.val)(this.configPointer).deserializeAndSanitize(E)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,Zi.prism)(()=>{const g=this.project.pointers.historic.sheetsById[this.address.sheetId],E=(0,Zi.val)(g.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!E)return Ue;const U=[];if(!E)return Ue;const X=(0,Zi.val)(this.configPointer),se=Object.entries(E);for(const[Oe,Ze]of se){const it=dP(Oe);if(!it)continue;const bt=ix(X,it);bt&&aP(bt)&&U.push({pathToProp:it,trackId:Ze})}const ve=KD(X);return U.sort((Oe,Ze)=>{const it=Oe.pathToProp,bt=Ze.pathToProp,jt=ve.get(JSON.stringify(it)),Vt=ve.get(JSON.stringify(bt));return jt>Vt?1:-1}),U.length===0?Ue:U}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,Zi.prism)(()=>{const g=(0,Zi.val)(this.getArrayOfValidSequenceTracks());let E={};for(const{pathToProp:U,trackId:X}of g)Wc(E,U,X);return E}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,Zi.prism)(()=>{const g=(0,Zi.val)(this.getStaticValues()),E=(0,Zi.val)(this.getArrayOfValidSequenceTracks()),U=ZT(g);for(const{pathToProp:X}of E){rx(U,X);let se=X.slice(0,-1);for(;se.length>0;){const ve=lp(U,se);if(!cP(ve))break;rx(U,se),se=se.slice(0,-1)}}if(!cP(U))return U}))}getDefaultsAtPointer(g){const{path:E}=(0,Zi.getPointerParts)(g),U=this.getDefaultValues().getValue();return lp(U,E)}};function dP(g){try{return JSON.parse(g)}catch{z0.warn("property ".concat(JSON.stringify(g)," cannot be parsed. Skipping."));return}}var fP=Ut(),$D=iP(g=>JSON.stringify(g));K(me());var hP=class extends Error{},Op=class extends hP{},pP=Ut(),mP=Ut(),ZD=Ut(),_a=Ut();function Vl(){let g,E;const U=new Promise((se,ve)=>{g=Oe=>{se(Oe),X.status="resolved"},E=Oe=>{ve(Oe),X.status="rejected"}}),X={resolve:g,reject:E,promise:U,status:"pending"};return X}var JD=()=>{},j0=JD,gP=Ut(),lx=class{constructor(){P(this,"_stopPlayCallback",j0),P(this,"_state",new gP.Atom({position:0,playing:!1})),P(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=j0}gotoPosition(g){this._updatePositionInState(g)}_updatePositionInState(g){this._state.setByPointer(E=>E.position,g)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(g){this._state.setByPointer(E=>E.playing,g)}play(g,E,U,X,se){this.playing&&this.pause(),this.playing=!0;const ve=E[1]-E[0];{const on=this.getCurrentPosition();on<E[0]||on>E[1]?X==="normal"||X==="alternate"?this._updatePositionInState(E[0]):(X==="reverse"||X==="alternateReverse")&&this._updatePositionInState(E[1]):X==="normal"||X==="alternate"?on===E[1]&&this._updatePositionInState(E[0]):on===E[0]&&this._updatePositionInState(E[1])}const Oe=Vl(),Ze=se.time,it=ve*g;let bt=this.getCurrentPosition()-E[0];(X==="reverse"||X==="alternateReverse")&&(bt=E[1]-this.getCurrentPosition());const jt=on=>{const wn=Math.max(on-Ze,0)/1e3,_e=Math.min(wn*U+bt,it);if(_e!==it){const ht=Math.floor(_e/ve);let er=_e/ve%1*ve;if(X!=="normal")if(X==="reverse")er=ve-er;else{const Vr=ht%2===0;X==="alternate"?Vr||(er=ve-er):Vr&&(er=ve-er)}this._updatePositionInState(er+E[0]),Vt()}else{if(X==="normal")this._updatePositionInState(E[1]);else if(X==="reverse")this._updatePositionInState(E[0]);else{const ht=(g-1)%2===0;X==="alternate"?ht?this._updatePositionInState(E[1]):this._updatePositionInState(E[0]):ht?this._updatePositionInState(E[0]):this._updatePositionInState(E[1])}this.playing=!1,Oe.resolve(!0)}};this._stopPlayCallback=()=>{se.offThisOrNextTick(jt),se.offNextTick(jt),this.playing&&Oe.resolve(!1)};const Vt=()=>se.onNextTick(jt);return se.onThisOrNextTick(jt),Oe.promise}playDynamicRange(g,E){this.playing&&this.pause(),this.playing=!0;const U=Vl(),X=g.keepHot();U.promise.then(X,X);let se=E.time;const ve=Ze=>{const it=Math.max(Ze-se,0);se=Ze;const bt=it/1e3,jt=this.getCurrentPosition(),Vt=g.getValue();if(jt<Vt[0]||jt>Vt[1])this.gotoPosition(Vt[0]);else{let on=jt+bt;on>Vt[1]&&(on=Vt[0]+(on-Vt[1])),this.gotoPosition(on)}Oe()};this._stopPlayCallback=()=>{E.offThisOrNextTick(ve),E.offNextTick(ve),U.resolve(!1)};const Oe=()=>E.onNextTick(ve);return E.onThisOrNextTick(ve),U.promise}},vP=Ut(),QD="__TheatreJS_StudioBundle",ux="__TheatreJS_CoreBundle",_P="__TheatreJS_Notifications",V0=g=>(...E)=>{var U;switch(g){case"success":{z0.debug(E.slice(0,2).join(`
`));break}case"info":{z0.debug(E.slice(0,2).join(`
`));break}case"warning":{z0.warn(E.slice(0,2).join(`
`));break}}return typeof window<"u"?(U=window[_P])==null?void 0:U.notify[g](...E):void 0},rd={warning:V0("warning"),success:V0("success"),info:V0("info"),error:V0("error")};typeof window<"u"&&(window.addEventListener("error",g=>{rd.error("An error occurred","<pre>".concat(g.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",g=>{rd.error("An error occurred","<pre>".concat(g.reason,`</pre>

See **console** for details.`))}));var yP=class{constructor(g,E,U){this._decodedBuffer=g,this._audioContext=E,this._nodeDestination=U,P(this,"_mainGain"),P(this,"_state",new vP.Atom({position:0,playing:!1})),P(this,"statePointer"),P(this,"_stopPlayCallback",j0),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(g,E){const U=Vl();this._playing&&this.pause(),this._playing=!0;let X;const se=()=>{X?.(),X=this._loopInRange(g.getValue(),E).stop},ve=g.onStale(se);return se(),this._stopPlayCallback=()=>{X?.(),ve(),U.resolve(!1)},U.promise}_loopInRange(g,E){let X=this.getCurrentPosition();const se=g[1]-g[0];X<g[0]||X>g[1]?this._updatePositionInState(g[0]):X===g[1]&&this._updatePositionInState(g[0]),X=this.getCurrentPosition();const ve=this._audioContext.createBufferSource();ve.buffer=this._decodedBuffer,ve.connect(this._mainGain),ve.playbackRate.value=1,ve.loop=!0,ve.loopStart=g[0],ve.loopEnd=g[1];const Oe=E.time;let Ze=X-g[0];ve.start(0,X);const it=Vt=>{let _e=(Math.max(Vt-Oe,0)/1e3*1+Ze)/se%1*se;this._updatePositionInState(_e+g[0]),bt()},bt=()=>E.onNextTick(it);return E.onThisOrNextTick(it),{stop:()=>{ve.stop(),ve.disconnect(),E.offThisOrNextTick(it),E.offNextTick(it)}}}get _playing(){return this._state.get().playing}set _playing(g){this._state.setByPointer(E=>E.playing,g)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=j0}gotoPosition(g){this._updatePositionInState(g)}_updatePositionInState(g){this._state.reduce(E=>H(L({},E),{position:g}))}getCurrentPosition(){return this._state.get().position}play(g,E,U,X,se){this._playing&&this.pause(),this._playing=!0;let ve=this.getCurrentPosition();const Oe=E[1]-E[0];if(X!=="normal")throw new Op('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(X,"' given."));ve<E[0]||ve>E[1]?this._updatePositionInState(E[0]):ve===E[1]&&this._updatePositionInState(E[0]),ve=this.getCurrentPosition();const Ze=Vl(),it=this._audioContext.createBufferSource();it.buffer=this._decodedBuffer,it.connect(this._mainGain),it.playbackRate.value=U,g>1e3&&(rd.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(g,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),g=1e3),g>1&&(it.loop=!0,it.loopStart=E[0],it.loopEnd=E[1]);const bt=se.time;let jt=ve-E[0];const Vt=Oe*g;it.start(0,ve,Vt-jt);const on=_e=>{const er=Math.max(_e-bt,0)/1e3,Vr=Math.min(er*U+jt,Vt);if(Vr!==Vt){let Ba=Vr/Oe%1*Oe;this._updatePositionInState(Ba+E[0]),wn()}else this._updatePositionInState(E[1]),this._playing=!1,On(),Ze.resolve(!0)},On=()=>{it.stop(),it.disconnect()};this._stopPlayCallback=()=>{On(),se.offThisOrNextTick(on),se.offNextTick(on),this._playing&&Ze.resolve(!1)};const wn=()=>se.onNextTick(on);return se.onThisOrNextTick(on),Ze.promise}},eO=Ut(),cx=0;function H0(g){var E;const U=Oe=>{X.tick(Oe)},X=new eO.Ticker({onActive(){var Oe;(Oe=g?.start)==null||Oe.call(g)},onDormant(){var Oe;(Oe=g?.stop)==null||Oe.call(g)}}),se={tick:U,id:cx++,name:(E=g?.name)!=null?E:"CustomRafDriver-".concat(cx),type:"Theatre_RafDriver_PublicAPI"},ve={type:"Theatre_RafDriver_PrivateAPI",publicApi:se,ticker:X,start:g?.start,stop:g?.stop};return Ve(se,ve),se}function tO(){let g=null;const X=H0({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const se=ve=>{X.tick(ve),g=window.requestAnimationFrame(se)};g=window.requestAnimationFrame(se)}else X.tick(0),setTimeout(()=>X.tick(1),0)},stop:()=>{typeof window<"u"&&g!==null&&window.cancelAnimationFrame(g)}});return X}var G0;function id(){return G0||bP(tO()),G0}function W0(){return id().ticker}function bP(g){if(G0)throw new Error("`setCoreRafDriver()` is already called.");G0=pe(g)}var xP=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(g){Ve(this,g)}play(g){const E=pe(this);if(E._project.isReady()){const U=g?.rafDriver?pe(g.rafDriver).ticker:W0();return E.play(g??{},U)}else{const U=Vl();return U.resolve(!0),U.promise}}pause(){pe(this).pause()}get position(){return pe(this).position}set position(g){pe(this).position=g}__experimental_getKeyframes(g){return pe(this).getKeyframesOfSimpleProp(g)}async attachAudio(g){const{audioContext:E,destinationNode:U,decodedBuffer:X,gainNode:se}=await nO(g),ve=new yP(X,E,se);return pe(this).replacePlaybackController(ve),{audioContext:E,destinationNode:U,decodedBuffer:X,gainNode:se}}get pointer(){return pe(this).pointer}};async function nO(g){function E(){if(g.audioContext)return Promise.resolve(g.audioContext);const bt=new AudioContext;return bt.state==="running"||typeof window>"u"?Promise.resolve(bt):new Promise(jt=>{const Vt=()=>{bt.resume().catch(wn=>{console.error(wn)})},on=["mousedown","keydown","touchstart"],On={capture:!0,passive:!1};on.forEach(wn=>{window.addEventListener(wn,Vt,On)}),bt.addEventListener("statechange",()=>{bt.state==="running"&&(on.forEach(wn=>{window.removeEventListener(wn,Vt,On)}),jt(bt))})})}async function U(){if(g.source instanceof AudioBuffer)return g.source;const bt=Vl();if(typeof g.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let jt;try{jt=await fetch(g.source)}catch(wn){throw console.error(wn),new Error("Could not fetch '".concat(g.source,"'. Network error logged above."))}let Vt;try{Vt=await jt.arrayBuffer()}catch(wn){throw console.error(wn),new Error("Could not read '".concat(g.source,"' as an arrayBuffer."))}(await X).decodeAudioData(Vt,bt.resolve,bt.reject);let On;try{On=await bt.promise}catch(wn){throw console.error(wn),new Error("Could not decode ".concat(g.source," as an audio file."))}return On}const X=E(),se=U(),[ve,Oe]=await Promise.all([X,se]),Ze=g.destinationNode||ve.destination,it=ve.createGain();return it.connect(Ze),{audioContext:ve,decodedBuffer:Oe,gainNode:it,destinationNode:Ze}}var SP=wP("Theatre_SheetObject");function wP(g){return E=>typeof E=="object"&&!!E&&E.type===g}var EP=class{constructor(g,E,U,X,se){this._project=g,this._sheet=E,this._lengthD=U,this._subUnitsPerUnitD=X,P(this,"address"),P(this,"publicApi"),P(this,"_playbackControllerBox"),P(this,"_prismOfStatePointer"),P(this,"_positionD"),P(this,"_positionFormatterD"),P(this,"_playableRangeD"),P(this,"pointer",(0,ZD.pointer)({root:this,path:[]})),P(this,"$$isPointerToPrismProvider",!0),P(this,"_logger"),P(this,"closestGridPosition",ve=>{const Ze=1/this.subUnitsPerUnit;return parseFloat((Math.round(ve/Ze)*Ze).toFixed(3))}),this._logger=g._logger.named("Sheet",E.address.sheetId).named("Instance",E.address.sheetInstanceId),this.address=H(L({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new xP(this),this._playbackControllerBox=new mP.Atom(se??new lx),this._prismOfStatePointer=(0,_a.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,_a.prism)(()=>{const ve=this._prismOfStatePointer.getValue();return(0,_a.val)(ve.position)}),this._positionFormatterD=(0,_a.prism)(()=>{const ve=(0,_a.val)(this._subUnitsPerUnitD);return new rO(ve)})}get type(){return"Theatre_Sequence"}pointerToPrism(g){const{path:E}=(0,pP.getPointerParts)(g);if(E.length===0)return(0,_a.prism)(()=>({length:(0,_a.val)(this.pointer.length),playing:(0,_a.val)(this.pointer.playing),position:(0,_a.val)(this.pointer.position),subUnitsPerUnit:(0,_a.val)(this.pointer.subUnitsPerUnit)}));if(E.length>1)return(0,_a.prism)(()=>{});const[U]=E;return U==="length"?this._lengthD:U==="subUnitsPerUnit"?this._subUnitsPerUnitD:U==="position"?this._positionD:U==="playing"?(0,_a.prism)(()=>(0,_a.val)(this._prismOfStatePointer.getValue().playing)):(0,_a.prism)(()=>{})}getKeyframesOfSimpleProp(g){const{path:E,root:U}=(0,pP.getPointerParts)(g);if(!SP(U))throw new Op("Argument prop must be a pointer to a SheetObject property");const X=(0,_a.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[U.address.objectKey]);if(!X)return[];const{trackData:se,trackIdByPropPath:ve}=X,Oe=$D(E),Ze=ve[Oe];if(!Ze)return[];const it=se[Ze];return it?it.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(g){let E=g;this.pause(),E>this.length&&(E=this.length);const U=this.length;this._playbackControllerBox.get().gotoPosition(E>U?U:E)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,_a.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,_a.prism)(()=>[0,(0,_a.val)(this._lengthD)])}playDynamicRange(g,E){return this._playbackControllerBox.get().playDynamicRange(g,E)}async play(g,E){const U=this.length,X=g&&g.range?g.range:[0,U],se=g&&typeof g.iterationCount=="number"?g.iterationCount:1,ve=g&&typeof g.rate<"u"?g.rate:1,Oe=g&&g.direction?g.direction:"normal";return await this._play(se,[X[0],X[1]],ve,Oe,E)}_play(g,E,U,X,se){return this._playbackControllerBox.get().play(g,E,U,X,se)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(g){this.pause();const E=this._playbackControllerBox.get();this._playbackControllerBox.set(g);const U=E.getCurrentPosition();E.destroy(),g.gotoPosition(U)}},rO=class{constructor(g){this._fps=g}formatSubUnitForGrid(g){const E=g%1,U=1/this._fps;return Math.round(E/U)+"f"}formatFullUnitForGrid(g){let E=g,U="";if(E>=od){const se=Math.floor(E/od);U+=se+"h",E=E%od}if(E>=Nu){const se=Math.floor(E/Nu);U+=se+"m",E=E%Nu}if(E>=ad){const se=Math.floor(E/ad);U+=se+"s",E=E%ad}const X=1/this._fps;if(E>=X){const se=Math.floor(E/X);U+=se+"f",E=E%X}return U.length===0?"0s":U}formatForPlayhead(g){let E=g,U="";if(E>=od){const se=Math.floor(E/od);U+=Df(se.toString(),2,"0")+"h",E=E%od}if(E>=Nu){const se=Math.floor(E/Nu);U+=Df(se.toString(),2,"0")+"m",E=E%Nu}else U.length>0&&(U+="00m");if(E>=ad){const se=Math.floor(E/ad);U+=Df(se.toString(),2,"0")+"s",E=E%ad}else U+="00s";const X=1/this._fps;if(E>=X){const se=Math.round(E/X);U+=Df(se.toString(),2,"0")+"f",E=E%X}else E/X>.98?(U+=Df("1",2,"0")+"f",E=E%X):U+="00f";return U.length===0?"00s00f":U}formatBasic(g){return g.toFixed(2)+"s"}},ad=1,Nu=ad*60,od=Nu*60,dx={};V(dx,{boolean:()=>px,compound:()=>Np,file:()=>q0,image:()=>Fu,number:()=>Uu,rgba:()=>Of,string:()=>DP,stringLiteral:()=>OP});function TP(g,E){return g.length<=E?g:g.substr(0,E-3)+"..."}var Lu=g=>typeof g=="string"?'string("'.concat(TP(g,10),'")'):typeof g=="number"?"number(".concat(TP(String(g),10),")"):g===null?"null":g===void 0?"undefined":typeof g=="boolean"?String(g):Array.isArray(g)?"array":typeof g=="object"?"object":"unknown",MP=Lu;function aa(g,{removeAlphaIfOpaque:E=!1}={}){const U=(g.a*255|256).toString(16).slice(1),X=(g.r*255|256).toString(16).slice(1)+(g.g*255|256).toString(16).slice(1)+(g.b*255|256).toString(16).slice(1)+(E&&U==="ff"?"":U);return"#".concat(X)}function fx(g){return H(L({},g),{toString(){return aa(this,{removeAlphaIfOpaque:!0})}})}function iO(g){return Object.fromEntries(Object.entries(g).map(([E,U])=>[E,$E(U,0,1)]))}function Fe(g){function E(U){return U>=.0031308?1.055*U**(1/2.4)-.055:12.92*U}return iO({r:E(g.r),g:E(g.g),b:E(g.b),a:g.a})}function PP(g){function E(U){return U>=.04045?((U+.055)/(1+.055))**2.4:U/12.92}return{r:E(g.r),g:E(g.g),b:E(g.b),a:g.a}}function CP(g){let E=.4122214708*g.r+.5363325363*g.g+.0514459929*g.b,U=.2119034982*g.r+.6806995451*g.g+.1073969566*g.b,X=.0883024619*g.r+.2817188376*g.g+.6299787005*g.b,se=Math.cbrt(E),ve=Math.cbrt(U),Oe=Math.cbrt(X);return{L:.2104542553*se+.793617785*ve-.0040720468*Oe,a:1.9779984951*se-2.428592205*ve+.4505937099*Oe,b:.0259040371*se+.7827717662*ve-.808675766*Oe,alpha:g.a}}function aO(g){let E=g.L+.3963377774*g.a+.2158037573*g.b,U=g.L-.1055613458*g.a-.0638541728*g.b,X=g.L-.0894841775*g.a-1.291485548*g.b,se=E*E*E,ve=U*U*U,Oe=X*X*X;return{r:4.0767416621*se-3.3077115913*ve+.2309699292*Oe,g:-1.2684380046*se+2.6097574011*ve-.3413193965*Oe,b:-.0041960863*se-.7034186147*ve+1.707614701*Oe,a:g.alpha}}var Ma=Symbol("TheatrePropType_Basic");function AP(g){return typeof g=="object"&&!!g&&g[Ma]==="TheatrePropType"}function ur(g){if(typeof g=="number")return Uu(g);if(typeof g=="boolean")return px(g);if(typeof g=="string")return DP(g);if(typeof g=="object"&&g){if(AP(g))return g;if(q3(g))return Np(g);throw new Op("This value is not a valid prop type: ".concat(MP(g)))}else throw new Op("This value is not a valid prop type: ".concat(MP(g)))}function oO(g){const E={};for(const U of Object.keys(g)){const X=g[U];AP(X)?E[U]=X:E[U]=ur(X)}return E}var Np=(g,E={})=>{const U=oO(g),X=new WeakMap;return{type:"compound",props:U,valueType:null,[Ma]:"TheatrePropType",label:E.label,default:HM(U,ve=>ve.default),deserializeAndSanitize:ve=>{if(typeof ve!="object"||!ve)return;if(X.has(ve))return X.get(ve);const Oe={};let Ze=!1;for(const[it,bt]of Object.entries(U))if(Object.prototype.hasOwnProperty.call(ve,it)){const jt=bt.deserializeAndSanitize(ve[it]);jt!=null&&(Ze=!0,Oe[it]=jt)}if(X.set(ve,Oe),Ze)return Oe}}},q0=(g,E={})=>{const U=(X,se,ve)=>{var Oe;return{type:"file",id:((Oe=E.interpolate)!=null?Oe:bn)(X.id,se.id,ve)}};return{type:"file",default:{type:"file",id:g},valueType:null,[Ma]:"TheatrePropType",label:E.label,interpolate:U,deserializeAndSanitize:kP}},kP=g=>{if(!g)return;let E=!0;if(typeof g.id!="string"&&![null,void 0].includes(g.id)&&(E=!1),g.type!=="file"&&(E=!1),!!E)return g},Fu=(g,E={})=>{const U=(X,se,ve)=>{var Oe;return{type:"image",id:((Oe=E.interpolate)!=null?Oe:bn)(X.id,se.id,ve)}};return{type:"image",default:{type:"image",id:g},valueType:null,[Ma]:"TheatrePropType",label:E.label,interpolate:U,deserializeAndSanitize:IP}},IP=g=>{if(!g)return;let E=!0;if(typeof g.id!="string"&&![null,void 0].includes(g.id)&&(E=!1),g.type!=="image"&&(E=!1),!!E)return g},Uu=(g,E={})=>{var U;return H(L({type:"number",valueType:0,default:g,[Ma]:"TheatrePropType"},E||{}),{label:E.label,nudgeFn:(U=E.nudgeFn)!=null?U:lO,nudgeMultiplier:typeof E.nudgeMultiplier=="number"?E.nudgeMultiplier:void 0,interpolate:As,deserializeAndSanitize:pr(E.range)})},pr=g=>g?E=>{if(typeof E=="number"&&isFinite(E))return $E(E,g[0],g[1])}:hx,hx=g=>typeof g=="number"&&isFinite(g)?g:void 0,As=(g,E,U)=>g+U*(E-g),Of=(g={r:0,g:0,b:0,a:1},E={})=>{const U={};for(const X of["r","g","b","a"])U[X]=Math.min(Math.max(g[X],0),1);return{type:"rgba",valueType:null,default:fx(U),[Ma]:"TheatrePropType",label:E.label,interpolate:RP,deserializeAndSanitize:X0}},X0=g=>{if(!g)return;let E=!0;for(const X of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(g,X)||typeof g[X]!="number")&&(E=!1);if(!E)return;const U={};for(const X of["r","g","b","a"])U[X]=Math.min(Math.max(g[X],0),1);return fx(U)},RP=(g,E,U)=>{const X=CP(PP(g)),se=CP(PP(E)),ve={L:(1-U)*X.L+U*se.L,a:(1-U)*X.a+U*se.a,b:(1-U)*X.b+U*se.b,alpha:(1-U)*X.alpha+U*se.alpha},Oe=Fe(aO(ve));return fx(Oe)},px=(g,E={})=>{var U;return{type:"boolean",default:g,valueType:null,[Ma]:"TheatrePropType",label:E.label,interpolate:(U=E.interpolate)!=null?U:bn,deserializeAndSanitize:mx}},mx=g=>typeof g=="boolean"?g:void 0;function bn(g){return g}var DP=(g,E={})=>{var U;return{type:"string",default:g,valueType:null,[Ma]:"TheatrePropType",label:E.label,interpolate:(U=E.interpolate)!=null?U:bn,deserializeAndSanitize:sO}};function sO(g){return typeof g=="string"?g:void 0}function OP(g,E,U={}){var X,se;return{type:"stringLiteral",default:g,valuesAndLabels:L({},E),[Ma]:"TheatrePropType",valueType:null,as:(X=U.as)!=null?X:"menu",label:U.label,interpolate:(se=U.interpolate)!=null?se:bn,deserializeAndSanitize(ve){if(typeof ve=="string"&&Object.prototype.hasOwnProperty.call(E,ve))return ve}}}var lO=({config:g,deltaX:E,deltaFraction:U,magnitude:X})=>{var se;const{range:ve}=g;return!g.nudgeMultiplier&&ve&&!ve.includes(1/0)&&!ve.includes(-1/0)?U*(ve[1]-ve[0])*X:E*X*((se=g.nudgeMultiplier)!=null?se:1)},NP=g=>g.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function K0(g,E){return NP(g)}K(J());var LP=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(g){Ve(this,g)}object(g,E,U){const X=pe(this),se=K0(g),ve=X.getObject(se),Oe=null,Ze=U?.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(ve)return Ze&&ve.template._temp_setActions(Ze),ve.publicApi;{const it=Np(E);return X.createObject(se,Oe,it,Ze).publicApi}}__experimental_getExistingObject(g){const E=pe(this),U=K0(g),X=E.getObject(U);return X?.publicApi}get sequence(){return pe(this).getSequence().publicApi}get project(){return pe(this).project.publicApi}get address(){return L({},pe(this).address)}detachObject(g){const E=pe(this),U=K0(g);if(!E.getObject(U)){rd.warning(`Couldn't delete object "`.concat(U,'"'),'There is no object with key "'.concat(U,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(U,'")` with the correct key.')),console.warn('Object key "'.concat(U,'" does not exist.'));return}E.deleteObject(U)}},Nf=Ut(),uO=class{constructor(g,E){this.template=g,this.instanceId=E,P(this,"_objects",new Nf.Atom({})),P(this,"_sequence"),P(this,"address"),P(this,"publicApi"),P(this,"project"),P(this,"objectsP",this._objects.pointer),P(this,"type","Theatre_Sheet"),P(this,"_logger"),this._logger=g.project._logger.named("Sheet",E),this._logger._trace("creating sheet"),this.project=g.project,this.address=H(L({},g.address),{sheetInstanceId:this.instanceId}),this.publicApi=new LP(this)}createObject(g,E,U,X={}){const ve=this.template.getObjectTemplate(g,E,U,X).createInstance(this,E,U);return this._objects.setByPointer(Oe=>Oe[g],ve),ve}getObject(g){return this._objects.get()[g]}deleteObject(g){this._objects.reduce(E=>{const U=L({},E);return delete U[g],U})}getSequence(){if(!this._sequence){const g=(0,Nf.prism)(()=>{const U=(0,Nf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return cO(U)}),E=(0,Nf.prism)(()=>{const U=(0,Nf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return FP(U)});this._sequence=new EP(this.template.project,this,g,E)}return this._sequence}},cO=g=>typeof g=="number"&&isFinite(g)&&g>0?g:10,FP=g=>typeof g=="number"&&RD(g)&&g>=1&&g<=1e3?g:30,dO=class{constructor(g,E){this.project=g,P(this,"type","Theatre_SheetTemplate"),P(this,"address"),P(this,"_instances",new fP.Atom({})),P(this,"instancesP",this._instances.pointer),P(this,"_objectTemplates",new fP.Atom({})),P(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=H(L({},g.address),{sheetId:E})}getInstance(g){let E=this._instances.get()[g];return E||(E=new uO(this,g),this._instances.setByPointer(U=>U[g],E)),E}getObjectTemplate(g,E,U,X){let se=this._objectTemplates.get()[g];return se||(se=new YD(this,g,E,U,X),this._objectTemplates.setByPointer(ve=>ve[g],se)),se}},Y0=Ut(),gx=Ut(),vx=g=>new Promise(E=>setTimeout(E,g)),fO=vx;function cs(g){for(var E=arguments.length,U=Array(E>1?E-1:0),X=1;X<E;X++)U[X-1]=arguments[X];throw Error("[Immer] minified error nr: "+g+(U.length?" "+U.map(function(se){return"'"+se+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sd(g){return!!g&&!!g[Za]}function ld(g){return!!g&&((function(E){if(!E||typeof E!="object")return!1;var U=Object.getPrototypeOf(E);if(U===null)return!0;var X=Object.hasOwnProperty.call(U,"constructor")&&U.constructor;return X===Object||typeof X=="function"&&Function.toString.call(X)===zP})(g)||Array.isArray(g)||!!g[Mx]||!!g.constructor[Mx]||Z0(g)||Fp(g))}function ks(g){return sd(g)||cs(23,g),g[Za].t}function Hl(g,E,U){U===void 0&&(U=!1),ud(g)===0?(U?Object.keys:tv)(g).forEach(function(X){U&&typeof X=="symbol"||E(X,g[X],g)}):g.forEach(function(X,se){return E(se,X,g)})}function ud(g){var E=g[Za];return E?E.i>3?E.i-4:E.i:Array.isArray(g)?1:Z0(g)?2:Fp(g)?3:0}function Lp(g,E){return ud(g)===2?g.has(E):Object.prototype.hasOwnProperty.call(g,E)}function Gl(g,E){return ud(g)===2?g.get(E):g[E]}function $0(g,E,U){var X=ud(g);X===2?g.set(E,U):X===3?(g.delete(E),g.add(U)):g[E]=U}function UP(g,E){return g===E?g!==0||1/g==1/E:g!=g&&E!=E}function Z0(g){return zf&&g instanceof Map}function Fp(g){return jp&&g instanceof Set}function Bu(g){return g.o||g.t}function J0(g){if(Array.isArray(g))return Array.prototype.slice.call(g);var E=nv(g);delete E[Za];for(var U=tv(E),X=0;X<U.length;X++){var se=U[X],ve=E[se];ve.writable===!1&&(ve.writable=!0,ve.configurable=!0),(ve.get||ve.set)&&(E[se]={configurable:!0,writable:!0,enumerable:ve.enumerable,value:g[se]})}return Object.create(Object.getPrototypeOf(g),E)}function Q0(g,E){return E===void 0&&(E=!1),$a(g)||sd(g)||!ld(g)||(ud(g)>1&&(g.set=g.add=g.clear=g.delete=cd),Object.freeze(g),E&&Hl(g,function(U,X){return Q0(X,!0)},!0)),g}function cd(){cs(2)}function $a(g){return g==null||typeof g!="object"||Object.isFrozen(g)}function Is(g){var E=Px[g];return E||cs(18,g),E}function Up(){return Wl}function _x(g,E){E&&(Is("Patches"),g.u=[],g.s=[],g.v=E)}function Bp(g){ev(g),g.p.forEach(bx),g.p=null}function ev(g){g===Wl&&(Wl=g.l)}function yx(g){return Wl={p:[],l:Wl,h:g,m:!0,_:0}}function bx(g){var E=g[Za];E.i===0||E.i===1?E.j():E.O=!0}function Ci(g,E){E._=E.p.length;var U=E.p[0],X=g!==void 0&&g!==U;return E.h.g||Is("ES5").S(E,g,X),X?(U[Za].P&&(Bp(E),cs(4)),ld(g)&&(g=zp(E,g),E.l||Lf(E,g)),E.u&&Is("Patches").M(U[Za],g,E.u,E.s)):g=zp(E,U,[]),Bp(E),E.u&&E.v(E.u,E.s),g!==Tx?g:void 0}function zp(g,E,U){if($a(E))return E;var X=E[Za];if(!X)return Hl(E,function(ve,Oe){return xx(g,X,E,ve,Oe,U)},!0),E;if(X.A!==g)return E;if(!X.P)return Lf(g,X.t,!0),X.t;if(!X.I){X.I=!0,X.A._--;var se=X.i===4||X.i===5?X.o=J0(X.k):X.o;Hl(X.i===3?new Set(se):se,function(ve,Oe){return xx(g,X,se,ve,Oe,U)}),Lf(g,se,!1),U&&g.u&&Is("Patches").R(X,U,g.u,g.s)}return X.o}function xx(g,E,U,X,se,ve){if(sd(se)){var Oe=zp(g,se,ve&&E&&E.i!==3&&!Lp(E.D,X)?ve.concat(X):void 0);if($0(U,X,Oe),!sd(Oe))return;g.m=!1}if(ld(se)&&!$a(se)){if(!g.h.F&&g._<1)return;zp(g,se),E&&E.A.l||Lf(g,se)}}function Lf(g,E,U){U===void 0&&(U=!1),g.h.F&&g.m&&Q0(E,U)}function Ff(g,E){var U=g[Za];return(U?Bu(U):g)[E]}function Uf(g,E){if(E in g)for(var U=Object.getPrototypeOf(g);U;){var X=Object.getOwnPropertyDescriptor(U,E);if(X)return X;U=Object.getPrototypeOf(U)}}function Rs(g){g.P||(g.P=!0,g.l&&Rs(g.l))}function Ds(g){g.o||(g.o=J0(g.t))}function Bf(g,E,U){var X=Z0(E)?Is("MapSet").N(E,U):Fp(E)?Is("MapSet").T(E,U):g.g?(function(se,ve){var Oe=Array.isArray(se),Ze={i:Oe?1:0,A:ve?ve.A:Up(),P:!1,I:!1,D:{},l:ve,t:se,k:null,o:null,j:null,C:!1},it=Ze,bt=Vp;Oe&&(it=[Ze],bt=Hp);var jt=Proxy.revocable(it,bt),Vt=jt.revoke,on=jt.proxy;return Ze.k=on,Ze.j=Vt,on})(E,U):Is("ES5").J(E,U);return(U?U.A:Up()).p.push(X),X}function BP(g){return sd(g)||cs(22,g),(function E(U){if(!ld(U))return U;var X,se=U[Za],ve=ud(U);if(se){if(!se.P&&(se.i<4||!Is("ES5").K(se)))return se.t;se.I=!0,X=Sx(U,ve),se.I=!1}else X=Sx(U,ve);return Hl(X,function(Oe,Ze){se&&Gl(se.t,Oe)===Ze||$0(X,Oe,E(Ze))}),ve===3?new Set(X):X})(g)}function Sx(g,E){switch(E){case 2:return new Map(g);case 3:return Array.from(g)}return J0(g)}var wx,Wl,dd=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zf=typeof Map<"u",jp=typeof Set<"u",Ex=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Tx=dd?Symbol.for("immer-nothing"):((wx={})["immer-nothing"]=!0,wx),Mx=dd?Symbol.for("immer-draftable"):"__$immer_draftable",Za=dd?Symbol.for("immer-state"):"__$immer_state",zP=""+Object.prototype.constructor,tv=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:Object.getOwnPropertyNames,nv=Object.getOwnPropertyDescriptors||function(g){var E={};return tv(g).forEach(function(U){E[U]=Object.getOwnPropertyDescriptor(g,U)}),E},Px={},Vp={get:function(g,E){if(E===Za)return g;var U=Bu(g);if(!Lp(U,E))return(function(se,ve,Oe){var Ze,it=Uf(ve,Oe);return it?"value"in it?it.value:(Ze=it.get)===null||Ze===void 0?void 0:Ze.call(se.k):void 0})(g,U,E);var X=U[E];return g.I||!ld(X)?X:X===Ff(g.t,E)?(Ds(g),g.o[E]=Bf(g.A.h,X,g)):X},has:function(g,E){return E in Bu(g)},ownKeys:function(g){return Reflect.ownKeys(Bu(g))},set:function(g,E,U){var X=Uf(Bu(g),E);if(X?.set)return X.set.call(g.k,U),!0;if(!g.P){var se=Ff(Bu(g),E),ve=se?.[Za];if(ve&&ve.t===U)return g.o[E]=U,g.D[E]=!1,!0;if(UP(U,se)&&(U!==void 0||Lp(g.t,E)))return!0;Ds(g),Rs(g)}return g.o[E]===U&&typeof U!="number"&&(U!==void 0||E in g.o)||(g.o[E]=U,g.D[E]=!0,!0)},deleteProperty:function(g,E){return Ff(g.t,E)!==void 0||E in g.t?(g.D[E]=!1,Ds(g),Rs(g)):delete g.D[E],g.o&&delete g.o[E],!0},getOwnPropertyDescriptor:function(g,E){var U=Bu(g),X=Reflect.getOwnPropertyDescriptor(U,E);return X&&{writable:!0,configurable:g.i!==1||E!=="length",enumerable:X.enumerable,value:U[E]}},defineProperty:function(){cs(11)},getPrototypeOf:function(g){return Object.getPrototypeOf(g.t)},setPrototypeOf:function(){cs(12)}},Hp={};Hl(Vp,function(g,E){Hp[g]=function(){return arguments[0]=arguments[0][0],E.apply(this,arguments)}}),Hp.deleteProperty=function(g,E){return Vp.deleteProperty.call(this,g[0],E)},Hp.set=function(g,E,U){return Vp.set.call(this,g[0],E,U,g[0])};var jP=(function(){function g(U){var X=this;this.g=Ex,this.F=!0,this.produce=function(se,ve,Oe){if(typeof se=="function"&&typeof ve!="function"){var Ze=ve;ve=se;var it=X;return function(On){var wn=this;On===void 0&&(On=Ze);for(var _e=arguments.length,ht=Array(_e>1?_e-1:0),er=1;er<_e;er++)ht[er-1]=arguments[er];return it.produce(On,function(Vr){var Ba;return(Ba=ve).call.apply(Ba,[wn,Vr].concat(ht))})}}var bt;if(typeof ve!="function"&&cs(6),Oe!==void 0&&typeof Oe!="function"&&cs(7),ld(se)){var jt=yx(X),Vt=Bf(X,se,void 0),on=!0;try{bt=ve(Vt),on=!1}finally{on?Bp(jt):ev(jt)}return typeof Promise<"u"&&bt instanceof Promise?bt.then(function(On){return _x(jt,Oe),Ci(On,jt)},function(On){throw Bp(jt),On}):(_x(jt,Oe),Ci(bt,jt))}if(!se||typeof se!="object")return(bt=ve(se))===Tx?void 0:(bt===void 0&&(bt=se),X.F&&Q0(bt,!0),bt);cs(21,se)},this.produceWithPatches=function(se,ve){return typeof se=="function"?function(it){for(var bt=arguments.length,jt=Array(bt>1?bt-1:0),Vt=1;Vt<bt;Vt++)jt[Vt-1]=arguments[Vt];return X.produceWithPatches(it,function(on){return se.apply(void 0,[on].concat(jt))})}:[X.produce(se,ve,function(it,bt){Oe=it,Ze=bt}),Oe,Ze];var Oe,Ze},typeof U?.useProxies=="boolean"&&this.setUseProxies(U.useProxies),typeof U?.autoFreeze=="boolean"&&this.setAutoFreeze(U.autoFreeze)}var E=g.prototype;return E.createDraft=function(U){ld(U)||cs(8),sd(U)&&(U=BP(U));var X=yx(this),se=Bf(this,U,void 0);return se[Za].C=!0,ev(X),se},E.finishDraft=function(U,X){var se=U&&U[Za],ve=se.A;return _x(ve,X),Ci(void 0,ve)},E.setAutoFreeze=function(U){this.F=U},E.setUseProxies=function(U){U&&!Ex&&cs(20),this.g=U},E.applyPatches=function(U,X){var se;for(se=X.length-1;se>=0;se--){var ve=X[se];if(ve.path.length===0&&ve.op==="replace"){U=ve.value;break}}var Oe=Is("Patches").$;return sd(U)?Oe(U,X):this.produce(U,function(Ze){return Oe(Ze,X.slice(se+1))})},g})(),Ja=new jP;Ja.produce,Ja.produceWithPatches.bind(Ja),Ja.setAutoFreeze.bind(Ja),Ja.setUseProxies.bind(Ja),Ja.applyPatches.bind(Ja),Ja.createDraft.bind(Ja),Ja.finishDraft.bind(Ja);var VP={currentProjectStateDefinitionVersion:"0.4.0"},zu=VP;async function HP(g,E,U){await fO(0),g.transaction(({drafts:X})=>{var se;const ve=E.address.projectId;X.ephemeral.coreByProject[ve]={lastExportedObject:null,loadingState:{type:"loading"}},X.ahistoric.coreByProject[ve]={ahistoricStuff:""};function Oe(){X.ephemeral.coreByProject[ve].loadingState={type:"loaded"},X.historic.coreByProject[ve]={sheetsById:{},definitionVersion:zu.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ze(Vt){X.ephemeral.coreByProject[ve].loadingState={type:"loaded"},X.historic.coreByProject[ve]=Vt}function it(){X.ephemeral.coreByProject[ve].loadingState={type:"loaded"}}function bt(Vt){X.ephemeral.coreByProject[ve].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Vt}}const jt=(se=ks(X.historic))==null?void 0:se.coreByProject[E.address.projectId];jt?U&&jt.revisionHistory.indexOf(U.revisionHistory[0])==-1?bt(U):it():U?Ze(U):Oe()})}function rv(){}function ju(g){var E,U;const X=(E=g?.logging)!=null&&E.internal?(U=g.logging.min)!=null?U:256:1/0,se=X<=128,ve=X<=512,Oe=B0(void 0,{_debug:se?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):rv,_error:ve?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):rv});if(g){const{logger:Ze,logging:it}=g;Ze&&Oe.configureLogger(Ze),it?Oe.configureLogging(it):Oe.configureLogging({dev:!1})}return Oe.getLogger().named("Theatre")}var Cx=class{constructor(g,E={},U){this.config=E,this.publicApi=U,P(this,"pointers"),P(this,"_pointerProxies"),P(this,"address"),P(this,"_studioReadyDeferred"),P(this,"_assetStorageReadyDeferred"),P(this,"_readyPromise"),P(this,"_sheetTemplates",new gx.Atom({})),P(this,"sheetTemplatesP",this._sheetTemplates.pointer),P(this,"_studio"),P(this,"assetStorage"),P(this,"type","Theatre_Project"),P(this,"_logger");var X;this._logger=ju({logging:{dev:!0}}).named("Project",g),this._logger.traceDev("creating project"),this.address={projectId:g};const se=new gx.Atom({ahistoric:{ahistoricStuff:""},historic:(X=E.state)!=null?X:{sheetsById:{},definitionVersion:zu.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Vl(),this.assetStorage={getAssetUrl:ve=>{var Oe;return"".concat((Oe=E.assets)==null?void 0:Oe.baseUrl,"/").concat(ve)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new Y0.PointerProxy(se.pointer.historic),ahistoric:new Y0.PointerProxy(se.pointer.ahistoric),ephemeral:new Y0.PointerProxy(se.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},ot.add(g,this),this._studioReadyDeferred=Vl(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),E.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(g,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(g,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(g,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(g){if(this._studio){if(this._studio!==g)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=g,g.initialized.then(async()=>{var E;await HP(g,this,this.config.state),this._pointerProxies.historic.setPointer(g.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(g.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(g.atomP.ephemeral.coreByProject[this.address.projectId]),await g.createAssetStorage(this,(E=this.config.assets)==null?void 0:E.baseUrl).then(U=>{this.assetStorage=U,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(E=>{throw console.error(E),E})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(g,E="default"){let U=this._sheetTemplates.get()[g];return U||(U=new dO(this,g),this._sheetTemplates.reduce(X=>H(L({},X),{[g]:U}))),U.getInstance(E)}},GP=class{get type(){return"Theatre_Project_PublicAPI"}constructor(g,E={}){Ve(this,new Cx(g,E,this))}get ready(){return pe(this).ready}get isReady(){return pe(this).isReady()}get address(){return L({},pe(this).address)}getAssetUrl(g){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return g.id?pe(this).assetStorage.getAssetUrl(g.id):void 0}sheet(g,E="default"){const U=K0(g);return pe(this).getOrCreateSheet(U,E).publicApi}};K(J());var Ax=Ut(),iv=Ut();function kx(g,E={}){const U=ot.get(g);if(U)return U.publicApi;const se=ju().named("Project",g);return E.state?(ov(g,E.state),se._debug("deep validated config.state on disk")):se._debug("no config.state"),new GP(g,E)}var av=(g,E)=>{if(Array.isArray(E)||E==null||E.definitionVersion!==zu.currentProjectStateDefinitionVersion)throw new Op("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(g),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},ov=(g,E)=>{av(g,E)};function sv(g,E,U){const X=U?pe(U).ticker:W0();if((0,Ax.isPointer)(g))return(0,iv.pointerToPrism)(g).onChange(X,E,!0);if((0,iv.isPrism)(g))return g.onChange(X,E,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Gp(g){if((0,Ax.isPointer)(g))return(0,iv.pointerToPrism)(g).getValue();throw new Error("Called val(p) where p is not a pointer.")}var WP=class{constructor(){P(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.2"}getBitsForStudio(g,E){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=g;const U={projectsP:ot.atom.pointer.projects,privateAPI:pe,coreExports:oe,getCoreRafDriver:id};E(U)}};qP();function qP(){if(typeof window>"u")return;const g=window[ux];if(typeof g<"u")throw typeof g=="object"&&g&&typeof g.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(ux," seems to be already set by a module other than @theatre/core."));const E=new WP;window[ux]=E;const U=window[QD];U&&U!==null&&U.type==="Theatre_StudioBundle"&&U.registerCoreBundle(E)}})(nw,nw.exports)),nw.exports}var pCe=hCe();function bI(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rw={exports:{}};rw.exports;var aue;function mCe(){return aue||(aue=1,(function(c,e){var n={},r=Object.create,o=Object.freeze,u=Object.defineProperty,h=Object.defineProperties,m=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,k=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,H=(t,i)=>{if(i=Symbol[t])return i;throw Error("Symbol."+t+" is not defined")},G=Math.pow,V=(t,i,a)=>i in t?u(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,I=(t,i)=>{for(var a in i||(i={}))O.call(i,a)&&V(t,a,i[a]);if(T)for(var a of T(i))L.call(i,a)&&V(t,a,i[a]);return t},K=(t,i)=>h(t,b(i)),ue=(t,i)=>{var a={};for(var l in t)O.call(t,l)&&i.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&T)for(var l of T(t))i.indexOf(l)<0&&L.call(t,l)&&(a[l]=t[l]);return a},P=(t,i)=>()=>(t&&(i=t(t=0)),i),ae=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),ge=(t,i)=>{for(var a in i)u(t,a,{get:i[a],enumerable:!0})},me=(t,i,a,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let f of S(i))!O.call(t,f)&&f!==a&&u(t,f,{get:()=>i[f],enumerable:!(l=m(i,f))||l.enumerable});return t},J=(t,i,a)=>(a=t!=null?r(k(t)):{},me(i||!t||!t.__esModule?u(a,"default",{value:t,enumerable:!0}):a,t)),te=t=>me(u({},"__esModule",{value:!0}),t),oe=(t,i,a)=>(V(t,typeof i!="symbol"?i+"":i,a),a),Y=(t,i)=>o(u(t,"raw",{value:o(t.slice())})),ke=(t,i,a)=>new Promise((l,f)=>{var p=x=>{try{_(a.next(x))}catch(w){f(w)}},v=x=>{try{_(a.throw(x))}catch(w){f(w)}},_=x=>x.done?l(x.value):Promise.resolve(x.value).then(p,v);_((a=a.apply(t,i)).next())}),$e=function(t,i){this[0]=t,this[1]=i},ot=t=>{var i=t[H("asyncIterator")],a=!1,l,f={};return i==null?(i=t[H("iterator")](),l=p=>f[p]=v=>i[p](v)):(i=i.call(t),l=p=>f[p]=v=>{if(a){if(a=!1,p==="throw")throw v;return v}return a=!0,{done:!1,value:new $e(new Promise(_=>{var x=i[p](v);if(!(x instanceof Object))throw TypeError("Object expected");_(x)}),1)}}),f[H("iterator")]=()=>f,l("next"),"throw"in i?l("throw"):f.throw=p=>{throw p},"return"in i&&l("return"),f};function Qe(t){Ve=t}function pe(){return Ve}var Ve,Ue=P(()=>{});function Pt(t,i,a=[]){if(typeof t=="object"&&t){if(Me(t)||Ot(t)){i(t,a);return}for(let[l,f]of Object.entries(t))Pt(f,i,[...a,l])}else{if(t==null)return;i(t,a)}}var Me,Ot,Tn=P(()=>{Me=t=>typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,"type")&&t.type==="image"&&Object.hasOwnProperty.call(t,"id")&&typeof t.id=="string"&&t.id!=="",Ot=t=>typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,"r")&&Object.hasOwnProperty.call(t,"g")&&Object.hasOwnProperty.call(t,"b")&&Object.hasOwnProperty.call(t,"a")&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"&&typeof t.a=="number"});function yn(t){return i=>typeof i=="object"&&!!i&&i.type===t}var qn,Dn,xt,vt,Zt,Mn,sn,Fn,fr=P(()=>{qn=yn("Theatre_Project"),Dn=yn("Theatre_Sheet"),xt=yn("Theatre_SheetTemplate"),vt=yn("Theatre_SheetObject"),Zt=yn("Theatre_Sequence"),Mn=yn("Theatre_SheetObjectTemplate"),sn=yn("Theatre_Sheet_PublicAPI"),Fn=yn("Theatre_SheetObject_PublicAPI")}),pn,zn,nr=P(()=>{pn=typeof qi=="object"&&qi&&qi.Object===Object&&qi,zn=pn}),Un,st,De,or=P(()=>{nr(),Un=typeof self=="object"&&self&&self.Object===Object&&self,st=zn||Un||Function("return this")(),De=st}),sr,Pn,Jt=P(()=>{or(),sr=De.Symbol,Pn=sr});function we(t){var i=ze.call(t,_t),a=t[_t];try{t[_t]=void 0;var l=!0}catch{}var f=St.call(t);return l&&(i?t[_t]=a:delete t[_t]),f}var ie,ze,St,_t,mt,ln=P(()=>{Jt(),ie=Object.prototype,ze=ie.hasOwnProperty,St=ie.toString,_t=Pn?Pn.toStringTag:void 0,mt=we});function Wt(t){return fn.call(t)}var dn,fn,At,Kt=P(()=>{dn=Object.prototype,fn=dn.toString,At=Wt});function hn(t){return t==null?t===void 0?qt:mn:Xn&&Xn in Object(t)?mt(t):At(t)}var mn,qt,Xn,Ae,Gt=P(()=>{Jt(),ln(),Kt(),mn="[object Null]",qt="[object Undefined]",Xn=Pn?Pn.toStringTag:void 0,Ae=hn});function Dt(t){return t!=null&&typeof t=="object"}var Xt,Ct=P(()=>{Xt=Dt});function Mt(t){return typeof t=="symbol"||Xt(t)&&Ae(t)==Yt}var Yt,Sn,_r=P(()=>{Gt(),Ct(),Yt="[object Symbol]",Sn=Mt});function en(t,i){for(var a=-1,l=t==null?0:t.length,f=Array(l);++a<l;)f[a]=i(t[a],a,t);return f}var vn,rr=P(()=>{vn=en}),rn,kn,gn=P(()=>{rn=Array.isArray,kn=rn});function $n(t){if(typeof t=="string")return t;if(kn(t))return vn(t,$n)+"";if(Sn(t))return yr?yr.call(t):"";var i=t+"";return i=="0"&&1/t==-li?"-0":i}var li,hr,yr,ui,Yr=P(()=>{Jt(),rr(),gn(),_r(),li=1/0,hr=Pn?Pn.prototype:void 0,yr=hr?hr.toString:void 0,ui=$n});function jr(t){for(var i=t.length;i--&&mr.test(t.charAt(i)););return i}var mr,na,Mr=P(()=>{mr=/\s/,na=jr});function Mi(t){return t&&t.slice(0,na(t)+1).replace(pa,"")}var pa,yi,Pi=P(()=>{Mr(),pa=/^\s+/,yi=Mi});function Oi(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var Ni,La=P(()=>{Ni=Oi});function Li(t){if(typeof t=="number")return t;if(Sn(t))return he;if(Ni(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Ni(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=yi(t);var a=ft.test(t);return a||lt.test(t)?Je(t.slice(2),a?2:8):He.test(t)?he:+t}var he,He,ft,lt,Je,Bt,an=P(()=>{Pi(),La(),_r(),he=NaN,He=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,lt=/^0o[0-7]+$/i,Je=parseInt,Bt=Li});function tn(t){if(!t)return t===0?t:0;if(t=Bt(t),t===Qt||t===-Qt){var i=t<0?-1:1;return i*Cn}return t===t?t:0}var Qt,Cn,Hn,jn=P(()=>{an(),Qt=1/0,Cn=17976931348623157e292,Hn=tn});function lr(t){var i=Hn(t),a=i%1;return i===i?a?i-a:i:0}var xr,$r=P(()=>{jn(),xr=lr});function Zr(t){return t}var Ir,Ln=P(()=>{Ir=Zr});function Nr(t){if(!Ni(t))return!1;var i=Ae(t);return i==ma||i==Fa||i==wr||i==ra}var wr,ma,Fa,ra,Cs,Lr=P(()=>{Gt(),La(),wr="[object AsyncFunction]",ma="[object Function]",Fa="[object GeneratorFunction]",ra="[object Proxy]",Cs=Nr}),ia,bi,Fi=P(()=>{or(),ia=De["__core-js_shared__"],bi=ia});function ga(t){return!!Lo&&Lo in t}var Lo,ss,ky=P(()=>{Fi(),Lo=(function(){var t=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})(),ss=ga});function Iy(t){if(t!=null){try{return Tg.call(t)}catch{}try{return t+""}catch{}}return""}var Eg,Tg,mo,ip=P(()=>{Eg=Function.prototype,Tg=Eg.toString,mo=Iy});function Mg(t){if(!Ni(t)||ss(t))return!1;var i=Cs(t)?Ll:Cg;return i.test(mo(t))}var Pg,Cg,Ag,kg,Ig,Rg,Ll,Bc,Ry=P(()=>{Lr(),ky(),La(),ip(),Pg=/[\\^$.*+?()[\]{}|]/g,Cg=/^\[object .+?Constructor\]$/,Ag=Function.prototype,kg=Object.prototype,Ig=Ag.toString,Rg=kg.hasOwnProperty,Ll=RegExp("^"+Ig.call(Rg).replace(Pg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bc=Mg});function ap(t,i){return t?.[i]}var Dg,Dy=P(()=>{Dg=ap});function Oy(t,i){var a=Dg(t,i);return Bc(a)?a:void 0}var sl,Fl=P(()=>{Ry(),Dy(),sl=Oy}),Og,hf,Ny=P(()=>{Fl(),or(),Og=sl(De,"WeakMap"),hf=Og});function Ng(t,i,a){switch(a.length){case 0:return t.call(i);case 1:return t.call(i,a[0]);case 2:return t.call(i,a[0],a[1]);case 3:return t.call(i,a[0],a[1],a[2])}return t.apply(i,a)}var Lg,Fg=P(()=>{Lg=Ng});function Ug(){}var op,Bg=P(()=>{op=Ug});function Ly(t,i){var a=-1,l=t.length;for(i||(i=Array(l));++a<l;)i[a]=t[a];return i}var zc,zg=P(()=>{zc=Ly});function jc(t){var i=0,a=0;return function(){var l=Cu(),f=ls-(l-a);if(a=l,f>0){if(++i>=jg)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}var jg,ls,Cu,Vc,sp=P(()=>{jg=800,ls=16,Cu=Date.now,Vc=jc});function Ul(t){return function(){return t}}var lp,Au=P(()=>{lp=Ul}),Zi,ll,pf=P(()=>{Fl(),Zi=(function(){try{var t=sl(Object,"defineProperty");return t({},"",{}),t}catch{}})(),ll=Zi}),Vg,ul,Hc=P(()=>{Au(),pf(),Ln(),Vg=ll?function(t,i){return ll(t,"toString",{configurable:!0,enumerable:!1,value:lp(i),writable:!0})}:Ir,ul=Vg}),Hg,Gg,up=P(()=>{Hc(),sp(),Hg=Vc(ul),Gg=Hg});function Fy(t,i,a,l){for(var f=t.length,p=a+(l?1:-1);l?p--:++p<f;)if(i(t[p],p,t))return p;return-1}var Gc,cp=P(()=>{Gc=Fy});function dp(t){return t!==t}var Wg,qg=P(()=>{Wg=dp});function Xg(t,i,a){for(var l=a-1,f=t.length;++l<f;)if(t[l]===i)return l;return-1}var Wc,va=P(()=>{Wc=Xg});function Uy(t,i,a){return i===i?Wc(t,i,a):Gc(t,Wg,a)}var qc,fp=P(()=>{cp(),qg(),va(),qc=Uy});function Kg(t,i){var a=t==null?0:t.length;return!!a&&qc(t,i,0)>-1}var Ua,By=P(()=>{fp(),Ua=Kg});function zy(t,i){var a=typeof t;return i=i??Yg,!!i&&(a=="number"||a!="symbol"&&hp.test(t))&&t>-1&&t%1==0&&t<i}var Yg,hp,Xc,Ui=P(()=>{Yg=9007199254740991,hp=/^(?:0|[1-9]\d*)$/,Xc=zy});function Kc(t,i,a){i=="__proto__"&&ll?ll(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}var cl,Bl=P(()=>{pf(),cl=Kc});function $g(t,i){return t===i||t!==t&&i!==i}var Fr,ku=P(()=>{Fr=$g});function jy(t,i,a){var l=t[i];(!(mp.call(t,i)&&Fr(l,a))||a===void 0&&!(i in t))&&cl(t,i,a)}var pp,mp,gp,Vy=P(()=>{Bl(),ku(),pp=Object.prototype,mp=pp.hasOwnProperty,gp=jy});function mf(t,i,a){return i=Yc(i===void 0?t.length-1:i,0),function(){for(var l=arguments,f=-1,p=Yc(l.length-i,0),v=Array(p);++f<p;)v[f]=l[i+f];f=-1;for(var _=Array(i+1);++f<i;)_[f]=l[f];return _[i]=a(v),Lg(t,this,_)}}var Yc,Zg,Hy=P(()=>{Fg(),Yc=Math.max,Zg=mf});function Jg(t,i){return Gg(Zg(t,i,Ir),t+"")}var vp,Qg=P(()=>{Ln(),Hy(),up(),vp=Jg});function ee(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=xe}var xe,Be,yt=P(()=>{xe=9007199254740991,Be=ee});function Zn(t){return t!=null&&Be(t.length)&&!Cs(t)}var Pr,Ji=P(()=>{Lr(),yt(),Pr=Zn});function us(t,i,a){if(!Ni(a))return!1;var l=typeof i;return(l=="number"?Pr(a)&&Xc(i,a.length):l=="string"&&i in a)?Fr(a[i],t):!1}var gf,Iu=P(()=>{ku(),Ji(),Ui(),La(),gf=us});function $c(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||Gy;return t===a}var Gy,Xw,P3=P(()=>{Gy=Object.prototype,Xw=$c});function C3(t,i){for(var a=-1,l=Array(t);++a<t;)l[a]=i(a);return l}var Kw,A3=P(()=>{Kw=C3});function k3(t){return Xt(t)&&Ae(t)==Yw}var Yw,vf,I3=P(()=>{Gt(),Ct(),Yw="[object Arguments]",vf=k3}),Wy,e0,$w,qy,t0,Xy=P(()=>{I3(),Ct(),Wy=Object.prototype,e0=Wy.hasOwnProperty,$w=Wy.propertyIsEnumerable,qy=vf((function(){return arguments})())?vf:function(t){return Xt(t)&&e0.call(t,"callee")&&!$w.call(t,"callee")},t0=qy});function Ky(){return!1}var Zw,R3=P(()=>{Zw=Ky}),Yy,$y,Zy,n0,Jw,Qw,r0,Jy=P(()=>{or(),R3(),Yy=e&&!e.nodeType&&e,$y=Yy&&!0&&c&&!c.nodeType&&c,Zy=$y&&$y.exports===Yy,n0=Zy?De.Buffer:void 0,Jw=n0?n0.isBuffer:void 0,Qw=Jw||Zw,r0=Qw});function D3(t){return Xt(t)&&Be(t.length)&&!!ci[Ae(t)]}var eE,Qy,eb,tE,tb,nE,rE,_p,iE,aE,oE,sE,lE,uE,cE,dE,fE,hE,pE,mE,gE,vE,_E,yE,ci,bE,O3=P(()=>{Gt(),yt(),Ct(),eE="[object Arguments]",Qy="[object Array]",eb="[object Boolean]",tE="[object Date]",tb="[object Error]",nE="[object Function]",rE="[object Map]",_p="[object Number]",iE="[object Object]",aE="[object RegExp]",oE="[object Set]",sE="[object String]",lE="[object WeakMap]",uE="[object ArrayBuffer]",cE="[object DataView]",dE="[object Float32Array]",fE="[object Float64Array]",hE="[object Int8Array]",pE="[object Int16Array]",mE="[object Int32Array]",gE="[object Uint8Array]",vE="[object Uint8ClampedArray]",_E="[object Uint16Array]",yE="[object Uint32Array]",ci={},ci[dE]=ci[fE]=ci[hE]=ci[pE]=ci[mE]=ci[gE]=ci[vE]=ci[_E]=ci[yE]=!0,ci[eE]=ci[Qy]=ci[uE]=ci[eb]=ci[cE]=ci[tE]=ci[tb]=ci[nE]=ci[rE]=ci[_p]=ci[iE]=ci[aE]=ci[oE]=ci[sE]=ci[lE]=!1,bE=D3});function N3(t){return function(i){return t(i)}}var i0,nb=P(()=>{i0=N3}),rb,_f,di,a0,xE,ib,ab=P(()=>{nr(),rb=e&&!e.nodeType&&e,_f=rb&&!0&&c&&!c.nodeType&&c,di=_f&&_f.exports===rb,a0=di&&zn.process,xE=(function(){try{var t=_f&&_f.require&&_f.require("util").types;return t||a0&&a0.binding&&a0.binding("util")}catch{}})(),ib=xE}),o0,yf,ob,s0=P(()=>{O3(),nb(),ab(),o0=ib&&ib.isTypedArray,yf=o0?i0(o0):bE,ob=yf});function L3(t,i){var a=kn(t),l=!a&&t0(t),f=!a&&!l&&r0(t),p=!a&&!l&&!f&&ob(t),v=a||l||f||p,_=v?Kw(t.length,String):[],x=_.length;for(var w in t)(i||sb.call(t,w))&&!(v&&(w=="length"||f&&(w=="offset"||w=="parent")||p&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Xc(w,x)))&&_.push(w);return _}var Zc,sb,SE,wE=P(()=>{A3(),Xy(),gn(),Jy(),Ui(),s0(),Zc=Object.prototype,sb=Zc.hasOwnProperty,SE=L3});function F3(t,i){return function(a){return t(i(a))}}var lb,EE=P(()=>{lb=F3}),ub,TE,ME=P(()=>{EE(),ub=lb(Object.keys,Object),TE=ub});function U3(t){if(!Xw(t))return TE(t);var i=[];for(var a in Object(t))CE.call(t,a)&&a!="constructor"&&i.push(a);return i}var PE,CE,AE,B3=P(()=>{P3(),ME(),PE=Object.prototype,CE=PE.hasOwnProperty,AE=U3});function z3(t){return Pr(t)?SE(t):AE(t)}var l0,Jc=P(()=>{wE(),B3(),Ji(),l0=z3});function j3(t,i){if(kn(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Sn(t)?!0:IE.test(t)||!kE.test(t)||i!=null&&t in Object(i)}var kE,IE,u0,cb=P(()=>{gn(),_r(),kE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IE=/^\w*$/,u0=j3}),RE,bf,xf=P(()=>{Fl(),RE=sl(Object,"create"),bf=RE});function V3(){this.__data__=bf?bf(null):{},this.size=0}var db,H3=P(()=>{xf(),db=V3});function fb(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}var DE,G3=P(()=>{DE=fb});function W3(t){var i=this.__data__;if(bf){var a=i[t];return a===hb?void 0:a}return NE.call(i,t)?i[t]:void 0}var hb,OE,NE,LE,q3=P(()=>{xf(),hb="__lodash_hash_undefined__",OE=Object.prototype,NE=OE.hasOwnProperty,LE=W3});function X3(t){var i=this.__data__;return bf?i[t]!==void 0:FE.call(i,t)}var pb,FE,UE,K3=P(()=>{xf(),pb=Object.prototype,FE=pb.hasOwnProperty,UE=X3});function Y3(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=bf&&i===void 0?BE:i,this}var BE,zE,$3=P(()=>{xf(),BE="__lodash_hash_undefined__",zE=Y3});function Sf(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}var mb,Z3=P(()=>{H3(),G3(),q3(),K3(),$3(),Sf.prototype.clear=db,Sf.prototype.delete=DE,Sf.prototype.get=LE,Sf.prototype.has=UE,Sf.prototype.set=zE,mb=Sf});function J3(){this.__data__=[],this.size=0}var c0,Q3=P(()=>{c0=J3});function eR(t,i){for(var a=t.length;a--;)if(Fr(t[a][0],i))return a;return-1}var wf,d0=P(()=>{ku(),wf=eR});function tR(t){var i=this.__data__,a=wf(i,t);if(a<0)return!1;var l=i.length-1;return a==l?i.pop():VE.call(i,a,1),--this.size,!0}var jE,VE,HE,nR=P(()=>{d0(),jE=Array.prototype,VE=jE.splice,HE=tR});function gb(t){var i=this.__data__,a=wf(i,t);return a<0?void 0:i[a][1]}var f0,rR=P(()=>{d0(),f0=gb});function GE(t){return wf(this.__data__,t)>-1}var vb,WE=P(()=>{d0(),vb=GE});function iR(t,i){var a=this.__data__,l=wf(a,t);return l<0?(++this.size,a.push([t,i])):a[l][1]=i,this}var _b,qE=P(()=>{d0(),_b=iR});function Ef(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}var yp,h0=P(()=>{Q3(),nR(),rR(),WE(),qE(),Ef.prototype.clear=c0,Ef.prototype.delete=HE,Ef.prototype.get=f0,Ef.prototype.has=vb,Ef.prototype.set=_b,yp=Ef}),XE,Tf,yb=P(()=>{Fl(),or(),XE=sl(De,"Map"),Tf=XE});function aR(){this.size=0,this.__data__={hash:new mb,map:new(Tf||yp),string:new mb}}var KE,oR=P(()=>{Z3(),h0(),yb(),KE=aR});function sR(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}var YE,$E=P(()=>{YE=sR});function lR(t,i){var a=t.__data__;return YE(i)?a[typeof i=="string"?"string":"hash"]:a.map}var bp,p0=P(()=>{$E(),bp=lR});function uR(t){var i=bp(this,t).delete(t);return this.size-=i?1:0,i}var ZE,cR=P(()=>{p0(),ZE=uR});function dR(t){return bp(this,t).get(t)}var JE,fR=P(()=>{p0(),JE=dR});function hR(t){return bp(this,t).has(t)}var QE,Mf=P(()=>{p0(),QE=hR});function xp(t,i){var a=bp(this,t),l=a.size;return a.set(t,i),this.size+=a.size==l?0:1,this}var eT,pR=P(()=>{p0(),eT=xp});function Pf(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}var Sp,m0=P(()=>{oR(),cR(),fR(),Mf(),pR(),Pf.prototype.clear=KE,Pf.prototype.delete=ZE,Pf.prototype.get=JE,Pf.prototype.has=QE,Pf.prototype.set=eT,Sp=Pf});function g0(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new TypeError(tT);var a=function(){var l=arguments,f=i?i.apply(this,l):l[0],p=a.cache;if(p.has(f))return p.get(f);var v=t.apply(this,l);return a.cache=p.set(f,v)||p,v};return a.cache=new(g0.Cache||Sp),a}var tT,v0,bb=P(()=>{m0(),tT="Expected a function",g0.Cache=Sp,v0=g0});function mR(t){var i=v0(t,function(l){return a.size===nT&&a.clear(),l}),a=i.cache;return i}var nT,rT,gR=P(()=>{bb(),nT=500,rT=mR}),iT,xb,aT,oT,sT=P(()=>{gR(),iT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xb=/\\(\\)?/g,aT=rT(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(iT,function(a,l,f,p){i.push(f?p.replace(xb,"$1"):l||a)}),i}),oT=aT});function vR(t){return t==null?"":ui(t)}var Cf,lT=P(()=>{Yr(),Cf=vR});function _R(t,i){return kn(t)?t:u0(t,i)?[t]:oT(Cf(t))}var _0,Sb=P(()=>{gn(),cb(),sT(),lT(),_0=_R});function uT(t){if(typeof t=="string"||Sn(t))return t;var i=t+"";return i=="0"&&1/t==-cT?"-0":i}var cT,Af,wp=P(()=>{_r(),cT=1/0,Af=uT});function dT(t,i){i=_0(i,t);for(var a=0,l=i.length;t!=null&&a<l;)t=t[Af(i[a++])];return a&&a==l?t:void 0}var y0,Ep=P(()=>{Sb(),wp(),y0=dT});function yR(t,i,a){var l=t==null?void 0:y0(t,i);return l===void 0?a:l}var Qc,Tp=P(()=>{Ep(),Qc=yR});function wb(t,i){for(var a=-1,l=i.length,f=t.length;++a<l;)t[f+a]=i[a];return t}var Eb,b0=P(()=>{Eb=wb});function bR(t){return kn(t)||t0(t)||!!(Mp&&t&&t[Mp])}var Mp,Tb,xR=P(()=>{Jt(),Xy(),gn(),Mp=Pn?Pn.isConcatSpreadable:void 0,Tb=bR});function Mb(t,i,a,l,f){var p=-1,v=t.length;for(a||(a=Tb),f||(f=[]);++p<v;){var _=t[p];i>0&&a(_)?i>1?Mb(_,i-1,a,l,f):Eb(f,_):l||(f[f.length]=_)}return f}var Pb,fT=P(()=>{b0(),xR(),Pb=Mb}),Cb,hT,SR=P(()=>{EE(),Cb=lb(Object.getPrototypeOf,Object),hT=Cb});function wR(t){if(!Xt(t)||Ae(t)!=pT)return!1;var i=hT(t);if(i===null)return!0;var a=gT.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&ed.call(a)==vT}var pT,mT,Ru,ed,gT,vT,x0,_T=P(()=>{Gt(),SR(),Ct(),pT="[object Object]",mT=Function.prototype,Ru=Object.prototype,ed=mT.toString,gT=Ru.hasOwnProperty,vT=ed.call(Object),x0=wR});function ER(t){var i=Math[t];return function(a,l){if(a=Bt(a),l=l==null?0:yT(xr(l),292),l&&Pp(a)){var f=(Cf(a)+"e").split("e"),p=i(f[0]+"e"+(+f[1]+l));return f=(Cf(p)+"e").split("e"),+(f[0]+"e"+(+f[1]-l))}return i(a)}}var Pp,yT,S0,TR=P(()=>{or(),$r(),an(),lT(),Pp=De.isFinite,yT=Math.min,S0=ER});function MR(t,i,a){return t===t&&(a!==void 0&&(t=t<=a?t:a),i!==void 0&&(t=t>=i?t:i)),t}var bT,PR=P(()=>{bT=MR});function CR(t,i,a){return a===void 0&&(a=i,i=void 0),a!==void 0&&(a=Bt(a),a=a===a?a:0),i!==void 0&&(i=Bt(i),i=i===i?i:0),bT(Bt(t),i,a)}var pi,Cp=P(()=>{PR(),an(),pi=CR});function AR(){this.__data__=new yp,this.size=0}var xT,kR=P(()=>{h0(),xT=AR});function IR(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}var ST,RR=P(()=>{ST=IR});function DR(t){return this.__data__.get(t)}var wT,OR=P(()=>{wT=DR});function NR(t){return this.__data__.has(t)}var ET,LR=P(()=>{ET=NR});function FR(t,i){var a=this.__data__;if(a instanceof yp){var l=a.__data__;if(!Tf||l.length<TT-1)return l.push([t,i]),this.size=++a.size,this;a=this.__data__=new Sp(l)}return a.set(t,i),this.size=a.size,this}var TT,MT,UR=P(()=>{h0(),yb(),m0(),TT=200,MT=FR});function kf(t){var i=this.__data__=new yp(t);this.size=i.size}var Ap,PT=P(()=>{h0(),kR(),RR(),OR(),LR(),UR(),kf.prototype.clear=xT,kf.prototype.delete=ST,kf.prototype.get=wT,kf.prototype.has=ET,kf.prototype.set=MT,Ap=kf});function BR(t,i){for(var a=-1,l=t==null?0:t.length,f=0,p=[];++a<l;){var v=t[a];i(v,a,t)&&(p[f++]=v)}return p}var CT,zR=P(()=>{CT=BR});function jR(){return[]}var AT,VR=P(()=>{AT=jR}),kT,IT,Ab,RT,DT,OT=P(()=>{zR(),VR(),kT=Object.prototype,IT=kT.propertyIsEnumerable,Ab=Object.getOwnPropertySymbols,RT=Ab?function(t){return t==null?[]:(t=Object(t),CT(Ab(t),function(i){return IT.call(t,i)}))}:AT,DT=RT});function HR(t,i,a){var l=i(t);return kn(t)?l:Eb(l,a(t))}var NT,GR=P(()=>{b0(),gn(),NT=HR});function WR(t){return NT(t,l0,DT)}var kb,LT=P(()=>{GR(),OT(),Jc(),kb=WR}),FT,w0,qR=P(()=>{Fl(),or(),FT=sl(De,"DataView"),w0=FT}),UT,E0,BT=P(()=>{Fl(),or(),UT=sl(De,"Promise"),E0=UT}),zT,td,jT=P(()=>{Fl(),or(),zT=sl(De,"Set"),td=zT}),Ib,Rb,Db,Ob,Nb,T0,VT,HT,GT,WT,qT,Du,Lb,XR=P(()=>{qR(),yb(),BT(),jT(),Ny(),Gt(),ip(),Ib="[object Map]",Rb="[object Object]",Db="[object Promise]",Ob="[object Set]",Nb="[object WeakMap]",T0="[object DataView]",VT=mo(w0),HT=mo(Tf),GT=mo(E0),WT=mo(td),qT=mo(hf),Du=Ae,(w0&&Du(new w0(new ArrayBuffer(1)))!=T0||Tf&&Du(new Tf)!=Ib||E0&&Du(E0.resolve())!=Db||td&&Du(new td)!=Ob||hf&&Du(new hf)!=Nb)&&(Du=function(t){var i=Ae(t),a=i==Rb?t.constructor:void 0,l=a?mo(a):"";if(l)switch(l){case VT:return T0;case HT:return Ib;case GT:return Db;case WT:return Ob;case qT:return Nb}return i}),Lb=Du}),XT,Fb,KR=P(()=>{or(),XT=De.Uint8Array,Fb=XT});function YR(t){return this.__data__.set(t,KT),this}var KT,YT,$R=P(()=>{KT="__lodash_hash_undefined__",YT=YR});function ZR(t){return this.__data__.has(t)}var ti,M0=P(()=>{ti=ZR});function P0(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Sp;++i<a;)this.add(t[i])}var Ub,$T=P(()=>{m0(),$R(),M0(),P0.prototype.add=P0.prototype.push=YT,P0.prototype.has=ti,Ub=P0});function JR(t,i){for(var a=-1,l=t==null?0:t.length;++a<l;)if(i(t[a],a,t))return!0;return!1}var ZT,QR=P(()=>{ZT=JR});function eD(t,i){return t.has(i)}var Bb,JT=P(()=>{Bb=eD});function tD(t,i,a,l,f,p){var v=a&kp,_=t.length,x=i.length;if(_!=x&&!(v&&x>_))return!1;var w=p.get(t),A=p.get(i);if(w&&A)return w==i&&A==t;var D=-1,R=!0,C=a&QT?new Ub:void 0;for(p.set(t,i),p.set(i,t);++D<_;){var F=t[D],N=i[D];if(l)var B=v?l(N,F,D,i,t,p):l(F,N,D,t,i,p);if(B!==void 0){if(B)continue;R=!1;break}if(C){if(!ZT(i,function(j,W){if(!Bb(C,W)&&(F===j||f(F,j,a,l,p)))return C.push(W)})){R=!1;break}}else if(!(F===N||f(F,N,a,l,p))){R=!1;break}}return p.delete(t),p.delete(i),R}var kp,QT,zb,eM=P(()=>{$T(),QR(),JT(),kp=1,QT=2,zb=tD});function nD(t){var i=-1,a=Array(t.size);return t.forEach(function(l,f){a[++i]=[f,l]}),a}var tM,rD=P(()=>{tM=nD});function iD(t){var i=-1,a=Array(t.size);return t.forEach(function(l){a[++i]=l}),a}var C0,A0=P(()=>{C0=iD});function aD(t,i,a,l,f,p,v){switch(a){case pM:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case hM:return!(t.byteLength!=i.byteLength||!p(new Fb(t),new Fb(i)));case iM:case aM:case lM:return Fr(+t,+i);case oM:return t.name==i.name&&t.message==i.message;case uM:case dM:return t==i+"";case sM:var _=tM;case cM:var x=l&nM;if(_||(_=C0),t.size!=i.size&&!x)return!1;var w=v.get(t);if(w)return w==i;l|=rM,v.set(t,i);var A=zb(_(t),_(i),l,f,p,v);return v.delete(t),A;case fM:if(k0)return k0.call(t)==k0.call(i)}return!1}var nM,rM,iM,aM,oM,sM,lM,uM,cM,dM,fM,hM,pM,jb,k0,mM,gM=P(()=>{Jt(),KR(),ku(),eM(),rD(),A0(),nM=1,rM=2,iM="[object Boolean]",aM="[object Date]",oM="[object Error]",sM="[object Map]",lM="[object Number]",uM="[object RegExp]",cM="[object Set]",dM="[object String]",fM="[object Symbol]",hM="[object ArrayBuffer]",pM="[object DataView]",jb=Pn?Pn.prototype:void 0,k0=jb?jb.valueOf:void 0,mM=aD});function Vb(t,i,a,l,f,p){var v=a&vM,_=kb(t),x=_.length,w=kb(i),A=w.length;if(x!=A&&!v)return!1;for(var D=x;D--;){var R=_[D];if(!(v?R in i:yM.call(i,R)))return!1}var C=p.get(t),F=p.get(i);if(C&&F)return C==i&&F==t;var N=!0;p.set(t,i),p.set(i,t);for(var B=v;++D<x;){R=_[D];var j=t[R],W=i[R];if(l)var $=v?l(W,j,R,i,t,p):l(j,W,R,t,i,p);if(!($===void 0?j===W||f(j,W,a,l,p):$)){N=!1;break}B||(B=R=="constructor")}if(N&&!B){var re=t.constructor,ne=i.constructor;re!=ne&&"constructor"in t&&"constructor"in i&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(N=!1)}return p.delete(t),p.delete(i),N}var vM,_M,yM,bM,oD=P(()=>{LT(),vM=1,_M=Object.prototype,yM=_M.hasOwnProperty,bM=Vb});function sD(t,i,a,l,f,p){var v=kn(t),_=kn(i),x=v?I0:Lb(t),w=_?I0:Lb(i);x=x==Hb?If:x,w=w==Hb?If:w;var A=x==If,D=w==If,R=x==w;if(R&&r0(t)){if(!r0(i))return!1;v=!0,A=!1}if(R&&!A)return p||(p=new Ap),v||ob(t)?zb(t,i,a,l,f,p):mM(t,i,x,a,l,f,p);if(!(a&xM)){var C=A&&Gb.call(t,"__wrapped__"),F=D&&Gb.call(i,"__wrapped__");if(C||F){var N=C?t.value():t,B=F?i.value():i;return p||(p=new Ap),f(N,B,a,l,p)}}return R?(p||(p=new Ap),bM(t,i,a,l,f,p)):!1}var xM,Hb,I0,If,Ip,Gb,Wb,lD=P(()=>{PT(),eM(),gM(),oD(),XR(),gn(),Jy(),s0(),xM=1,Hb="[object Arguments]",I0="[object Array]",If="[object Object]",Ip=Object.prototype,Gb=Ip.hasOwnProperty,Wb=sD});function SM(t,i,a,l,f){return t===i?!0:t==null||i==null||!Xt(t)&&!Xt(i)?t!==t&&i!==i:Wb(t,i,a,l,SM,f)}var R0,qb=P(()=>{lD(),Ct(),R0=SM});function uD(t,i,a,l){var f=a.length,p=f,v=!l;if(t==null)return!p;for(t=Object(t);f--;){var _=a[f];if(v&&_[2]?_[1]!==t[_[0]]:!(_[0]in t))return!1}for(;++f<p;){_=a[f];var x=_[0],w=t[x],A=_[1];if(v&&_[2]){if(w===void 0&&!(x in t))return!1}else{var D=new Ap;if(l)var R=l(w,A,x,t,i,D);if(!(R===void 0?R0(A,w,wM|EM,l,D):R))return!1}}return!0}var wM,EM,TM,cD=P(()=>{PT(),qb(),wM=1,EM=2,TM=uD});function MM(t){return t===t&&!Ni(t)}var Xb,PM=P(()=>{La(),Xb=MM});function dD(t){for(var i=l0(t),a=i.length;a--;){var l=i[a],f=t[l];i[a]=[l,f,Xb(f)]}return i}var Kb,fD=P(()=>{PM(),Jc(),Kb=dD});function hD(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==void 0||t in Object(a))}}var Yb,CM=P(()=>{Yb=hD});function pD(t){var i=Kb(t);return i.length==1&&i[0][2]?Yb(i[0][0],i[0][1]):function(a){return a===t||TM(a,t,i)}}var AM,mD=P(()=>{cD(),fD(),CM(),AM=pD});function gD(t,i){return t!=null&&i in Object(t)}var kM,vD=P(()=>{kM=gD});function _D(t,i,a){i=_0(i,t);for(var l=-1,f=i.length,p=!1;++l<f;){var v=Af(i[l]);if(!(p=t!=null&&a(t,v)))break;t=t[v]}return p||++l!=f?p:(f=t==null?0:t.length,!!f&&Be(f)&&Xc(v,f)&&(kn(t)||t0(t)))}var IM,yD=P(()=>{Sb(),Xy(),gn(),Ui(),yt(),wp(),IM=_D});function RM(t,i){return t!=null&&IM(t,i,kM)}var DM,bD=P(()=>{vD(),yD(),DM=RM});function xD(t,i){return u0(t)&&Xb(i)?Yb(Af(t),i):function(a){var l=Qc(a,t);return l===void 0&&l===i?DM(a,t):R0(i,l,OM|NM)}}var OM,NM,LM,SD=P(()=>{qb(),Tp(),bD(),cb(),PM(),CM(),wp(),OM=1,NM=2,LM=xD});function wD(t){return function(i){return i?.[t]}}var FM,ED=P(()=>{FM=wD});function TD(t){return function(i){return y0(i,t)}}var UM,MD=P(()=>{Ep(),UM=TD});function $b(t){return u0(t)?FM(Af(t)):UM(t)}var BM,PD=P(()=>{ED(),MD(),cb(),wp(),BM=$b});function CD(t){return typeof t=="function"?t:t==null?Ir:typeof t=="object"?kn(t)?LM(t[0],t[1]):AM(t):BM(t)}var Rf,Rp=P(()=>{mD(),SD(),Ln(),gn(),PD(),Rf=CD});function AD(t,i,a,l){for(var f=-1,p=t==null?0:t.length;++f<p;){var v=t[f];i(l,v,a(v),t)}return l}var zM,kD=P(()=>{zM=AD});function ID(t){return function(i,a,l){for(var f=-1,p=Object(i),v=l(i),_=v.length;_--;){var x=v[t?_:++f];if(a(p[x],x,p)===!1)break}return i}}var jM,RD=P(()=>{jM=ID}),VM,HM,DD=P(()=>{RD(),VM=jM(),HM=VM});function OD(t,i){return t&&HM(t,i,l0)}var Zb,GM=P(()=>{DD(),Jc(),Zb=OD});function ND(t,i){return function(a,l){if(a==null)return a;if(!Pr(a))return t(a,l);for(var f=a.length,p=i?f:-1,v=Object(a);(i?p--:++p<f)&&l(v[p],p,v)!==!1;);return a}}var Jb,LD=P(()=>{Ji(),Jb=ND}),WM,D0,qM=P(()=>{GM(),LD(),WM=Jb(Zb),D0=WM});function FD(t,i,a,l){return D0(t,function(f,p,v){i(l,f,a(f),v)}),l}var XM,UD=P(()=>{qM(),XM=FD});function BD(t,i){return function(a,l){var f=kn(a)?zM:XM,p=i?i():{};return f(a,t,Rf(l,2),p)}}var KM,Qb=P(()=>{kD(),UD(),Rp(),gn(),KM=BD}),O0,N0,YM=P(()=>{or(),O0=function(){return De.Date.now()},N0=O0});function $M(t,i,a){var l,f,p,v,_,x,w=0,A=!1,D=!1,R=!0;if(typeof t!="function")throw new TypeError(ex);i=Bt(i)||0,Ni(a)&&(A=!!a.leading,D="maxWait"in a,p=D?ZM(Bt(a.maxWait)||0,i):p,R="trailing"in a?!!a.trailing:R);function C(ce){var Te=l,Ie=f;return l=f=void 0,w=ce,v=t.apply(Ie,Te),v}function F(ce){return w=ce,_=setTimeout(j,i),A?C(ce):v}function N(ce){var Te=ce-x,Ie=ce-w,ye=i-Te;return D?tx(ye,p-Ie):ye}function B(ce){var Te=ce-x,Ie=ce-w;return x===void 0||Te>=i||Te<0||D&&Ie>=p}function j(){var ce=N0();if(B(ce))return W(ce);_=setTimeout(j,N(ce))}function W(ce){return _=void 0,R&&l?C(ce):(l=f=void 0,v)}function $(){_!==void 0&&clearTimeout(_),w=0,l=x=f=_=void 0}function re(){return _===void 0?v:W(N0())}function ne(){var ce=N0(),Te=B(ce);if(l=arguments,f=this,x=ce,Te){if(_===void 0)return F(x);if(D)return clearTimeout(_),_=setTimeout(j,i),C(x)}return _===void 0&&(_=setTimeout(j,i)),v}return ne.cancel=$,ne.flush=re,ne}var ex,ZM,tx,L0,JM=P(()=>{La(),YM(),an(),ex="Expected a function",ZM=Math.max,tx=Math.min,L0=$M});function zD(t,i,a){for(var l=-1,f=t==null?0:t.length;++l<f;)if(a(i,t[l]))return!0;return!1}var QM,eP=P(()=>{QM=zD});function jD(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}var nd,F0=P(()=>{nd=jD});function tP(t,i,a){var l=t==null?0:t.length;if(!l)return-1;var f=a==null?0:xr(a);return f<0&&(f=nP(l+f,0)),Gc(t,Rf(i,3),f)}var nP,nx,VD=P(()=>{cp(),Rp(),$r(),nP=Math.max,nx=tP});function HD(t,i,a){var l=t==null?0:t.length;if(!l)return-1;var f=l-1;return a!==void 0&&(f=xr(a),f=a<0?Df(l+f,0):rP(f,l-1)),Gc(t,Rf(i,3),f,!0)}var Df,rP,rx,GD=P(()=>{cp(),Rp(),$r(),Df=Math.max,rP=Math.min,rx=HD});function WD(t,i){var a=-1,l=Pr(t)?Array(t.length):[];return D0(t,function(f,p,v){l[++a]=i(f,p,v)}),l}var iP,U0=P(()=>{qM(),Ji(),iP=WD});function ix(t,i,a){return t>=oP(i,a)&&t<aP(i,a)}var aP,oP,ni,Fo=P(()=>{aP=Math.max,oP=Math.min,ni=ix});function Uo(t,i,a){return i=Hn(i),a===void 0?(a=i,i=0):a=Hn(a),t=Bt(t),ni(t,i,a)}var zl,fi=P(()=>{Fo(),jn(),an(),zl=Uo});function jl(t){return typeof t=="number"&&t==xr(t)}var B0,sP=P(()=>{$r(),B0=jl}),lP,Dp,qD=P(()=>{Bl(),Qb(),lP=KM(function(t,i,a){cl(t,a,i)}),Dp=lP});function XD(t,i){var a={};return i=Rf(i,3),Zb(t,function(l,f,p){cl(a,f,i(l,f,p))}),a}var Ou,ax=P(()=>{Bl(),GM(),Rp(),Ou=XD});function z0(t,i,a,l){if(!Ni(t))return t;i=_0(i,t);for(var f=-1,p=i.length,v=p-1,_=t;_!=null&&++f<p;){var x=Af(i[f]),w=a;if(x==="__proto__"||x==="constructor"||x==="prototype")return t;if(f!=v){var A=_[x];w=l?l(A,x,_):void 0,w===void 0&&(w=Ni(A)?A:Xc(i[f+1])?[]:{})}gp(_,x,w),_=_[x]}return t}var ox,KD=P(()=>{Vy(),Sb(),Ui(),La(),wp(),ox=z0});function uP(t,i){var a=t.length;for(t.sort(i);a--;)t[a]=t[a].value;return t}var sx,cP=P(()=>{sx=uP});function YD(t,i){if(t!==i){var a=t!==void 0,l=t===null,f=t===t,p=Sn(t),v=i!==void 0,_=i===null,x=i===i,w=Sn(i);if(!_&&!w&&!p&&t>i||p&&v&&x&&!_&&!w||l&&v&&x||!a&&x||!f)return 1;if(!l&&!p&&!w&&t<i||w&&a&&f&&!l&&!p||_&&a&&f||!v&&f||!x)return-1}return 0}var dP,fP=P(()=>{_r(),dP=YD});function $D(t,i,a){for(var l=-1,f=t.criteria,p=i.criteria,v=f.length,_=a.length;++l<v;){var x=dP(f[l],p[l]);if(x){if(l>=_)return x;var w=a[l];return x*(w=="desc"?-1:1)}}return t.index-i.index}var hP,Op=P(()=>{fP(),hP=$D});function pP(t,i,a){i.length?i=vn(i,function(p){return kn(p)?function(v){return y0(v,p.length===1?p[0]:p)}:p}):i=[Ir];var l=-1;i=vn(i,i0(Rf));var f=iP(t,function(p,v,_){var x=vn(i,function(w){return w(p)});return{criteria:x,index:++l,value:p}});return sx(f,function(p,v){return hP(p,v,a)})}var mP,ZD=P(()=>{rr(),Ep(),Rp(),U0(),cP(),nb(),Op(),Ln(),gn(),mP=pP});function _a(t,i,a,l){for(var f=a-1,p=t.length;++f<p;)if(l(t[f],i))return f;return-1}var Vl,JD=P(()=>{Vl=_a});function j0(t,i,a,l){var f=l?Vl:qc,p=-1,v=i.length,_=t;for(t===i&&(i=zc(i)),a&&(_=vn(t,i0(a)));++p<v;)for(var x=0,w=i[p],A=a?a(w):w;(x=f(_,A,x,l))>-1;)_!==t&&lx.call(_,x,1),lx.call(t,x,1);return t}var gP,lx,vP,QD=P(()=>{rr(),fp(),JD(),nb(),zg(),gP=Array.prototype,lx=gP.splice,vP=j0});function ux(t,i){return t&&t.length&&i&&i.length?vP(t,i):t}var _P,V0=P(()=>{QD(),_P=ux}),rd,yP,eO=P(()=>{Qg(),V0(),rd=vp(_P),yP=rd}),cx,H0,tO=P(()=>{TR(),cx=S0("round"),H0=cx});function G0(t,i,a){return t==null?t:ox(t,i,a)}var id,W0=P(()=>{KD(),id=G0}),bP,xP,nO=P(()=>{fT(),ZD(),Qg(),Iu(),bP=vp(function(t,i){if(t==null)return[];var a=i.length;return a>1&&gf(t,i[0],i[1])?i=[]:a>2&&gf(i[0],i[1],i[2])&&(i=[i[0]]),mP(t,Pb(i,1),[])}),xP=bP}),SP,wP,EP,rO=P(()=>{jT(),Bg(),A0(),SP=1/0,wP=td&&1/C0(new td([,-0]))[1]==SP?function(t){return new td(t)}:op,EP=wP});function ad(t,i,a){var l=-1,f=Ua,p=t.length,v=!0,_=[],x=_;if(a)v=!1,f=QM;else if(p>=Nu){var w=i?null:EP(t);if(w)return C0(w);v=!1,f=Bb,x=new Ub}else x=i?[]:_;e:for(;++l<p;){var A=t[l],D=i?i(A):A;if(A=a||A!==0?A:0,v&&D===D){for(var R=x.length;R--;)if(x[R]===D)continue e;i&&x.push(D),_.push(A)}else f(x,D,a)||(x!==_&&x.push(D),_.push(A))}return _}var Nu,od,dx=P(()=>{$T(),By(),eP(),JT(),rO(),A0(),Nu=200,od=ad});function TP(t){return t&&t.length?od(t):[]}var Lu,MP=P(()=>{dx(),Lu=TP}),aa=P(()=>{Cp(),JM(),VD(),fi(),sP(),_T(),F0(),ax(),bb(),tO(),MP()}),fx=ae((t,i)=>{var a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:qi):l=>(a||(a=Promise.resolve())).then(l).catch(f=>setTimeout(()=>{throw f},0))}),iO=ae(t=>{var i=Symbol.for("react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.iterator;function C(fe){return fe===null||typeof fe!="object"?null:(fe=R&&fe[R]||fe["@@iterator"],typeof fe=="function"?fe:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,B={};function j(fe,be,tt){this.props=fe,this.context=be,this.refs=B,this.updater=tt||F}j.prototype.isReactComponent={},j.prototype.setState=function(fe,be){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,be,"setState")},j.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function W(){}W.prototype=j.prototype;function $(fe,be,tt){this.props=fe,this.context=be,this.refs=B,this.updater=tt||F}var re=$.prototype=new W;re.constructor=$,N(re,j.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,ce=Object.prototype.hasOwnProperty,Te={current:null},Ie={key:!0,ref:!0,__self:!0,__source:!0};function ye(fe,be,tt){var at,ct={},Ke=null,cn=null;if(be!=null)for(at in be.ref!==void 0&&(cn=be.ref),be.key!==void 0&&(Ke=""+be.key),be)ce.call(be,at)&&!Ie.hasOwnProperty(at)&&(ct[at]=be[at]);var wt=arguments.length-2;if(wt===1)ct.children=tt;else if(1<wt){for(var nn=Array(wt),In=0;In<wt;In++)nn[In]=arguments[In+2];ct.children=nn}if(fe&&fe.defaultProps)for(at in wt=fe.defaultProps,wt)ct[at]===void 0&&(ct[at]=wt[at]);return{$$typeof:i,type:fe,key:Ke,ref:cn,props:ct,_owner:Te.current}}function Ne(fe,be){return{$$typeof:i,type:fe.type,key:be,ref:fe.ref,props:fe.props,_owner:fe._owner}}function et(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===i}function de(fe){var be={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(tt){return be[tt]})}var Le=/\/+/g;function Z(fe,be){return typeof fe=="object"&&fe!==null&&fe.key!=null?de(""+fe.key):be.toString(36)}function Ge(fe,be,tt,at,ct){var Ke=typeof fe;(Ke==="undefined"||Ke==="boolean")&&(fe=null);var cn=!1;if(fe===null)cn=!0;else switch(Ke){case"string":case"number":cn=!0;break;case"object":switch(fe.$$typeof){case i:case a:cn=!0}}if(cn)return cn=fe,ct=ct(cn),fe=at===""?"."+Z(cn,0):at,ne(ct)?(tt="",fe!=null&&(tt=fe.replace(Le,"$&/")+"/"),Ge(ct,be,tt,"",function(In){return In})):ct!=null&&(et(ct)&&(ct=Ne(ct,tt+(!ct.key||cn&&cn.key===ct.key?"":(""+ct.key).replace(Le,"$&/")+"/")+fe)),be.push(ct)),1;if(cn=0,at=at===""?".":at+":",ne(fe))for(var wt=0;wt<fe.length;wt++){Ke=fe[wt];var nn=at+Z(Ke,wt);cn+=Ge(Ke,be,tt,nn,ct)}else if(nn=C(fe),typeof nn=="function")for(fe=nn.call(fe),wt=0;!(Ke=fe.next()).done;)Ke=Ke.value,nn=at+Z(Ke,wt++),cn+=Ge(Ke,be,tt,nn,ct);else if(Ke==="object")throw be=String(fe),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.");return cn}function Nt(fe,be,tt){if(fe==null)return fe;var at=[],ct=0;return Ge(fe,at,"","",function(Ke){return be.call(tt,Ke,ct++)}),at}function Re(fe){if(fe._status===-1){var be=fe._result;be=be(),be.then(function(tt){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=tt)},function(tt){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=tt)}),fe._status===-1&&(fe._status=0,fe._result=be)}if(fe._status===1)return fe._result.default;throw fe._result}var Ce={current:null},qe={transition:null},Et={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:qe,ReactCurrentOwner:Te};t.Children={map:Nt,forEach:function(fe,be,tt){Nt(fe,function(){be.apply(this,arguments)},tt)},count:function(fe){var be=0;return Nt(fe,function(){be++}),be},toArray:function(fe){return Nt(fe,function(be){return be})||[]},only:function(fe){if(!et(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},t.Component=j,t.Fragment=l,t.Profiler=p,t.PureComponent=$,t.StrictMode=f,t.Suspense=w,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Et,t.cloneElement=function(fe,be,tt){if(fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+fe+".");var at=N({},fe.props),ct=fe.key,Ke=fe.ref,cn=fe._owner;if(be!=null){if(be.ref!==void 0&&(Ke=be.ref,cn=Te.current),be.key!==void 0&&(ct=""+be.key),fe.type&&fe.type.defaultProps)var wt=fe.type.defaultProps;for(nn in be)ce.call(be,nn)&&!Ie.hasOwnProperty(nn)&&(at[nn]=be[nn]===void 0&&wt!==void 0?wt[nn]:be[nn])}var nn=arguments.length-2;if(nn===1)at.children=tt;else if(1<nn){wt=Array(nn);for(var In=0;In<nn;In++)wt[In]=arguments[In+2];at.children=wt}return{$$typeof:i,type:fe.type,key:ct,ref:Ke,props:at,_owner:cn}},t.createContext=function(fe){return fe={$$typeof:_,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},fe.Provider={$$typeof:v,_context:fe},fe.Consumer=fe},t.createElement=ye,t.createFactory=function(fe){var be=ye.bind(null,fe);return be.type=fe,be},t.createRef=function(){return{current:null}},t.forwardRef=function(fe){return{$$typeof:x,render:fe}},t.isValidElement=et,t.lazy=function(fe){return{$$typeof:D,_payload:{_status:-1,_result:fe},_init:Re}},t.memo=function(fe,be){return{$$typeof:A,type:fe,compare:be===void 0?null:be}},t.startTransition=function(fe){var be=qe.transition;qe.transition={};try{fe()}finally{qe.transition=be}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(fe,be){return Ce.current.useCallback(fe,be)},t.useContext=function(fe){return Ce.current.useContext(fe)},t.useDebugValue=function(){},t.useDeferredValue=function(fe){return Ce.current.useDeferredValue(fe)},t.useEffect=function(fe,be){return Ce.current.useEffect(fe,be)},t.useId=function(){return Ce.current.useId()},t.useImperativeHandle=function(fe,be,tt){return Ce.current.useImperativeHandle(fe,be,tt)},t.useInsertionEffect=function(fe,be){return Ce.current.useInsertionEffect(fe,be)},t.useLayoutEffect=function(fe,be){return Ce.current.useLayoutEffect(fe,be)},t.useMemo=function(fe,be){return Ce.current.useMemo(fe,be)},t.useReducer=function(fe,be,tt){return Ce.current.useReducer(fe,be,tt)},t.useRef=function(fe){return Ce.current.useRef(fe)},t.useState=function(fe){return Ce.current.useState(fe)},t.useSyncExternalStore=function(fe,be,tt){return Ce.current.useSyncExternalStore(fe,be,tt)},t.useTransition=function(){return Ce.current.useTransition()},t.version="18.2.0"}),Fe=ae((t,i)=>{i.exports=iO()}),PP=ae(t=>{function i(Ce,qe){var Et=Ce.length;Ce.push(qe);e:for(;0<Et;){var fe=Et-1>>>1,be=Ce[fe];if(0<f(be,qe))Ce[fe]=qe,Ce[Et]=be,Et=fe;else break e}}function a(Ce){return Ce.length===0?null:Ce[0]}function l(Ce){if(Ce.length===0)return null;var qe=Ce[0],Et=Ce.pop();if(Et!==qe){Ce[0]=Et;e:for(var fe=0,be=Ce.length,tt=be>>>1;fe<tt;){var at=2*(fe+1)-1,ct=Ce[at],Ke=at+1,cn=Ce[Ke];if(0>f(ct,Et))Ke<be&&0>f(cn,ct)?(Ce[fe]=cn,Ce[Ke]=Et,fe=Ke):(Ce[fe]=ct,Ce[at]=Et,fe=at);else if(Ke<be&&0>f(cn,Et))Ce[fe]=cn,Ce[Ke]=Et,fe=Ke;else break e}}return qe}function f(Ce,qe){var Et=Ce.sortIndex-qe.sortIndex;return Et!==0?Et:Ce.id-qe.id}typeof performance=="object"&&typeof performance.now=="function"?(p=performance,t.unstable_now=function(){return p.now()}):(v=Date,_=v.now(),t.unstable_now=function(){return v.now()-_});var p,v,_,x=[],w=[],A=1,D=null,R=3,C=!1,F=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(Ce){for(var qe=a(w);qe!==null;){if(qe.callback===null)l(w);else if(qe.startTime<=Ce)l(w),qe.sortIndex=qe.expirationTime,i(x,qe);else break;qe=a(w)}}function re(Ce){if(N=!1,$(Ce),!F)if(a(x)!==null)F=!0,Nt(ne);else{var qe=a(w);qe!==null&&Re(re,qe.startTime-Ce)}}function ne(Ce,qe){F=!1,N&&(N=!1,j(Ie),Ie=-1),C=!0;var Et=R;try{for($(qe),D=a(x);D!==null&&(!(D.expirationTime>qe)||Ce&&!et());){var fe=D.callback;if(typeof fe=="function"){D.callback=null,R=D.priorityLevel;var be=fe(D.expirationTime<=qe);qe=t.unstable_now(),typeof be=="function"?D.callback=be:D===a(x)&&l(x),$(qe)}else l(x);D=a(x)}if(D!==null)var tt=!0;else{var at=a(w);at!==null&&Re(re,at.startTime-qe),tt=!1}return tt}finally{D=null,R=Et,C=!1}}var ce=!1,Te=null,Ie=-1,ye=5,Ne=-1;function et(){return!(t.unstable_now()-Ne<ye)}function de(){if(Te!==null){var Ce=t.unstable_now();Ne=Ce;var qe=!0;try{qe=Te(!0,Ce)}finally{qe?Le():(ce=!1,Te=null)}}else ce=!1}var Le;typeof W=="function"?Le=function(){W(de)}:typeof MessageChannel<"u"?(Z=new MessageChannel,Ge=Z.port2,Z.port1.onmessage=de,Le=function(){Ge.postMessage(null)}):Le=function(){B(de,0)};var Z,Ge;function Nt(Ce){Te=Ce,ce||(ce=!0,Le())}function Re(Ce,qe){Ie=B(function(){Ce(t.unstable_now())},qe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_continueExecution=function(){F||C||(F=!0,Nt(ne))},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return a(x)},t.unstable_next=function(Ce){switch(R){case 1:case 2:case 3:var qe=3;break;default:qe=R}var Et=R;R=qe;try{return Ce()}finally{R=Et}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ce,qe){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Et=R;R=Ce;try{return qe()}finally{R=Et}},t.unstable_scheduleCallback=function(Ce,qe,Et){var fe=t.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?fe+Et:fe):Et=fe,Ce){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Et+be,Ce={id:A++,callback:qe,priorityLevel:Ce,startTime:Et,expirationTime:be,sortIndex:-1},Et>fe?(Ce.sortIndex=Et,i(w,Ce),a(x)===null&&Ce===a(w)&&(N?(j(Ie),Ie=-1):N=!0,Re(re,Et-fe))):(Ce.sortIndex=be,i(x,Ce),F||C||(F=!0,Nt(ne))),Ce},t.unstable_shouldYield=et,t.unstable_wrapCallback=function(Ce){var qe=R;return function(){var Et=R;R=qe;try{return Ce.apply(this,arguments)}finally{R=Et}}}}),CP=ae((t,i)=>{i.exports=PP()}),aO=ae(t=>{var i=Fe(),a=CP();function l(s){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+s,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+s+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function v(s,d){_(s,d),_(s+"Capture",d)}function _(s,d){for(p[s]=d,s=0;s<d.length;s++)f.add(d[s])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},R={};function C(s){return w.call(R,s)?!0:w.call(D,s)?!1:A.test(s)?R[s]=!0:(D[s]=!0,!1)}function F(s,d,y,M){if(y!==null&&y.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return M?!1:y!==null?!y.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function N(s,d,y,M){if(d===null||typeof d>"u"||F(s,d,y,M))return!0;if(M)return!1;if(y!==null)switch(y.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function B(s,d,y,M,z,q,le){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=M,this.attributeNamespace=z,this.mustUseProperty=y,this.propertyName=s,this.type=d,this.sanitizeURL=q,this.removeEmptyString=le}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){j[s]=new B(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var d=s[0];j[d]=new B(d,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){j[s]=new B(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){j[s]=new B(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){j[s]=new B(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){j[s]=new B(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){j[s]=new B(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){j[s]=new B(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){j[s]=new B(s,5,!1,s.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function $(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var d=s.replace(W,$);j[d]=new B(d,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var d=s.replace(W,$);j[d]=new B(d,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var d=s.replace(W,$);j[d]=new B(d,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){j[s]=new B(s,1,!1,s.toLowerCase(),null,!1,!1)}),j.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){j[s]=new B(s,1,!1,s.toLowerCase(),null,!0,!0)});function re(s,d,y,M){var z=j.hasOwnProperty(d)?j[d]:null;(z!==null?z.type!==0:M||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(N(d,y,z,M)&&(y=null),M||z===null?C(d)&&(y===null?s.removeAttribute(d):s.setAttribute(d,""+y)):z.mustUseProperty?s[z.propertyName]=y===null?z.type===3?!1:"":y:(d=z.attributeName,M=z.attributeNamespace,y===null?s.removeAttribute(d):(z=z.type,y=z===3||z===4&&y===!0?"":""+y,M?s.setAttributeNS(M,d,y):s.setAttribute(d,y))))}var ne=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),Te=Symbol.for("react.portal"),Ie=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),de=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),Nt=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),qe=Symbol.iterator;function Et(s){return s===null||typeof s!="object"?null:(s=qe&&s[qe]||s["@@iterator"],typeof s=="function"?s:null)}var fe=Object.assign,be;function tt(s){if(be===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);be=d&&d[1]||""}return`
`+be+s}var at=!1;function ct(s,d){if(!s||at)return"";at=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(gt){var M=gt}Reflect.construct(s,[],d)}else{try{d.call()}catch(gt){M=gt}s.call(d.prototype)}else{try{throw Error()}catch(gt){M=gt}s()}}catch(gt){if(gt&&M&&typeof gt.stack=="string"){for(var z=gt.stack.split(`
`),q=M.stack.split(`
`),le=z.length-1,Pe=q.length-1;1<=le&&0<=Pe&&z[le]!==q[Pe];)Pe--;for(;1<=le&&0<=Pe;le--,Pe--)if(z[le]!==q[Pe]){if(le!==1||Pe!==1)do if(le--,Pe--,0>Pe||z[le]!==q[Pe]){var je=`
`+z[le].replace(" at new "," at ");return s.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",s.displayName)),je}while(1<=le&&0<=Pe);break}}}finally{at=!1,Error.prepareStackTrace=y}return(s=s?s.displayName||s.name:"")?tt(s):""}function Ke(s){switch(s.tag){case 5:return tt(s.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 2:case 15:return s=ct(s.type,!1),s;case 11:return s=ct(s.type.render,!1),s;case 1:return s=ct(s.type,!0),s;default:return""}}function cn(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Ie:return"Fragment";case Te:return"Portal";case Ne:return"Profiler";case ye:return"StrictMode";case Z:return"Suspense";case Ge:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case de:return(s.displayName||"Context")+".Consumer";case et:return(s._context.displayName||"Context")+".Provider";case Le:var d=s.render;return s=s.displayName,s||(s=d.displayName||d.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Nt:return d=s.displayName||null,d!==null?d:cn(s.type)||"Memo";case Re:d=s._payload,s=s._init;try{return cn(s(d))}catch{}}return null}function wt(s){var d=s.type;switch(s.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=d.render,s=s.displayName||s.name||"",d.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cn(d);case 8:return d===ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function nn(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function In(s){var d=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Yn(s){var d=In(s)?"checked":"value",y=Object.getOwnPropertyDescriptor(s.constructor.prototype,d),M=""+s[d];if(!s.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var z=y.get,q=y.set;return Object.defineProperty(s,d,{configurable:!0,get:function(){return z.call(this)},set:function(le){M=""+le,q.call(this,le)}}),Object.defineProperty(s,d,{enumerable:y.enumerable}),{getValue:function(){return M},setValue:function(le){M=""+le},stopTracking:function(){s._valueTracker=null,delete s[d]}}}}function Gn(s){s._valueTracker||(s._valueTracker=Yn(s))}function Xr(s){if(!s)return!1;var d=s._valueTracker;if(!d)return!0;var y=d.getValue(),M="";return s&&(M=In(s)?s.checked?"true":"false":s.value),s=M,s!==y?(d.setValue(s),!0):!1}function Q(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function pt(s,d){var y=d.checked;return fe({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??s._wrapperState.initialChecked})}function dt(s,d){var y=d.defaultValue==null?"":d.defaultValue,M=d.checked!=null?d.checked:d.defaultChecked;y=nn(d.value!=null?d.value:y),s._wrapperState={initialChecked:M,initialValue:y,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ee(s,d){d=d.checked,d!=null&&re(s,"checked",d,!1)}function Se(s,d){Ee(s,d);var y=nn(d.value),M=d.type;if(y!=null)M==="number"?(y===0&&s.value===""||s.value!=y)&&(s.value=""+y):s.value!==""+y&&(s.value=""+y);else if(M==="submit"||M==="reset"){s.removeAttribute("value");return}d.hasOwnProperty("value")?Tt(s,d.type,y):d.hasOwnProperty("defaultValue")&&Tt(s,d.type,nn(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(s.defaultChecked=!!d.defaultChecked)}function Ye(s,d,y){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var M=d.type;if(!(M!=="submit"&&M!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+s._wrapperState.initialValue,y||d===s.value||(s.value=d),s.defaultValue=d}y=s.name,y!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,y!==""&&(s.name=y)}function Tt(s,d,y){(d!=="number"||Q(s.ownerDocument)!==s)&&(y==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+y&&(s.defaultValue=""+y))}var It=Array.isArray;function nt(s,d,y,M){if(s=s.options,d){d={};for(var z=0;z<y.length;z++)d["$"+y[z]]=!0;for(y=0;y<s.length;y++)z=d.hasOwnProperty("$"+s[y].value),s[y].selected!==z&&(s[y].selected=z),z&&M&&(s[y].defaultSelected=!0)}else{for(y=""+nn(y),d=null,z=0;z<s.length;z++){if(s[z].value===y){s[z].selected=!0,M&&(s[z].defaultSelected=!0);return}d!==null||s[z].disabled||(d=s[z])}d!==null&&(d.selected=!0)}}function Lt(s,d){if(d.dangerouslySetInnerHTML!=null)throw Error(l(91));return fe({},d,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function kt(s,d){var y=d.value;if(y==null){if(y=d.children,d=d.defaultValue,y!=null){if(d!=null)throw Error(l(92));if(It(y)){if(1<y.length)throw Error(l(93));y=y[0]}d=y}d==null&&(d=""),y=d}s._wrapperState={initialValue:nn(y)}}function Rt(s,d){var y=nn(d.value),M=nn(d.defaultValue);y!=null&&(y=""+y,y!==s.value&&(s.value=y),d.defaultValue==null&&s.defaultValue!==y&&(s.defaultValue=y)),M!=null&&(s.defaultValue=""+M)}function Vn(s){var d=s.textContent;d===s._wrapperState.initialValue&&d!==""&&d!==null&&(s.value=d)}function Wr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cr(s,d){return s==null||s==="http://www.w3.org/1999/xhtml"?Wr(d):s==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var lo,ph=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,y,M,z){MSApp.execUnsafeLocalFunction(function(){return s(d,y,M,z)})}:s})(function(s,d){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=d;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=lo.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;d.firstChild;)s.appendChild(d.firstChild)}});function xo(s,d){if(d){var y=s.firstChild;if(y&&y===s.lastChild&&y.nodeType===3){y.nodeValue=d;return}}s.textContent=d}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hi=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(s){Hi.forEach(function(d){d=d+s.charAt(0).toUpperCase()+s.substring(1),uu[d]=uu[s]})});function Im(s,d,y){return d==null||typeof d=="boolean"||d===""?"":y||typeof d!="number"||d===0||uu.hasOwnProperty(s)&&uu[s]?(""+d).trim():d+"px"}function r_(s,d){s=s.style;for(var y in d)if(d.hasOwnProperty(y)){var M=y.indexOf("--")===0,z=Im(y,d[y],M);y==="float"&&(y="cssFloat"),M?s.setProperty(y,z):s[y]=z}}var cu=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i_(s,d){if(d){if(cu[s]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(l(137,s));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(l(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(l(61))}if(d.style!=null&&typeof d.style!="object")throw Error(l(62))}}function tS(s,d){if(s.indexOf("-")===-1)return typeof d.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nS=null;function rS(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var a_=null,yl=null,du=null;function Qie(s){if(s=ES(s)){if(typeof a_!="function")throw Error(l(280));var d=s.stateNode;d&&(d=u2(d),a_(s.stateNode,s.type,d))}}function eae(s){yl?du?du.push(s):du=[s]:yl=s}function tae(){if(yl){var s=yl,d=du;if(du=yl=null,Qie(s),d)for(s=0;s<d.length;s++)Qie(d[s])}}function nae(s,d){return s(d)}function rae(){}var m5=!1;function iae(s,d,y){if(m5)return s(d,y);m5=!0;try{return nae(s,d,y)}finally{m5=!1,(yl!==null||du!==null)&&(rae(),tae())}}function iS(s,d){var y=s.stateNode;if(y===null)return null;var M=u2(y);if(M===null)return null;y=M[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(s=s.type,M=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!M;break e;default:s=!1}if(s)return null;if(y&&typeof y!="function")throw Error(l(231,d,typeof y));return y}var g5=!1;if(x)try{o_={},Object.defineProperty(o_,"passive",{get:function(){g5=!0}}),window.addEventListener("test",o_,o_),window.removeEventListener("test",o_,o_)}catch{g5=!1}var o_;function Yye(s,d,y,M,z,q,le,Pe,je){var gt=Array.prototype.slice.call(arguments,3);try{d.apply(y,gt)}catch(zt){this.onError(zt)}}var aS=!1,Uk=null,Bk=!1,v5=null,$ye={onError:function(s){aS=!0,Uk=s}};function Zye(s,d,y,M,z,q,le,Pe,je){aS=!1,Uk=null,Yye.apply($ye,arguments)}function Jye(s,d,y,M,z,q,le,Pe,je){if(Zye.apply(this,arguments),aS){if(aS){var gt=Uk;aS=!1,Uk=null}else throw Error(l(198));Bk||(Bk=!0,v5=gt)}}function Rm(s){var d=s,y=s;if(s.alternate)for(;d.return;)d=d.return;else{s=d;do d=s,d.flags&4098&&(y=d.return),s=d.return;while(s)}return d.tag===3?y:null}function aae(s){if(s.tag===13){var d=s.memoizedState;if(d===null&&(s=s.alternate,s!==null&&(d=s.memoizedState)),d!==null)return d.dehydrated}return null}function oae(s){if(Rm(s)!==s)throw Error(l(188))}function Qye(s){var d=s.alternate;if(!d){if(d=Rm(s),d===null)throw Error(l(188));return d!==s?null:s}for(var y=s,M=d;;){var z=y.return;if(z===null)break;var q=z.alternate;if(q===null){if(M=z.return,M!==null){y=M;continue}break}if(z.child===q.child){for(q=z.child;q;){if(q===y)return oae(z),s;if(q===M)return oae(z),d;q=q.sibling}throw Error(l(188))}if(y.return!==M.return)y=z,M=q;else{for(var le=!1,Pe=z.child;Pe;){if(Pe===y){le=!0,y=z,M=q;break}if(Pe===M){le=!0,M=z,y=q;break}Pe=Pe.sibling}if(!le){for(Pe=q.child;Pe;){if(Pe===y){le=!0,y=q,M=z;break}if(Pe===M){le=!0,M=q,y=z;break}Pe=Pe.sibling}if(!le)throw Error(l(189))}}if(y.alternate!==M)throw Error(l(190))}if(y.tag!==3)throw Error(l(188));return y.stateNode.current===y?s:d}function sae(s){return s=Qye(s),s!==null?lae(s):null}function lae(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var d=lae(s);if(d!==null)return d;s=s.sibling}return null}var uae=a.unstable_scheduleCallback,cae=a.unstable_cancelCallback,ebe=a.unstable_shouldYield,tbe=a.unstable_requestPaint,la=a.unstable_now,nbe=a.unstable_getCurrentPriorityLevel,_5=a.unstable_ImmediatePriority,dae=a.unstable_UserBlockingPriority,zk=a.unstable_NormalPriority,rbe=a.unstable_LowPriority,fae=a.unstable_IdlePriority,jk=null,hc=null;function ibe(s){if(hc&&typeof hc.onCommitFiberRoot=="function")try{hc.onCommitFiberRoot(jk,s,void 0,(s.current.flags&128)===128)}catch{}}var fu=Math.clz32?Math.clz32:sbe,abe=Math.log,obe=Math.LN2;function sbe(s){return s>>>=0,s===0?32:31-(abe(s)/obe|0)|0}var Vk=64,Hk=4194304;function oS(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Gk(s,d){var y=s.pendingLanes;if(y===0)return 0;var M=0,z=s.suspendedLanes,q=s.pingedLanes,le=y&268435455;if(le!==0){var Pe=le&~z;Pe!==0?M=oS(Pe):(q&=le,q!==0&&(M=oS(q)))}else le=y&~z,le!==0?M=oS(le):q!==0&&(M=oS(q));if(M===0)return 0;if(d!==0&&d!==M&&!(d&z)&&(z=M&-M,q=d&-d,z>=q||z===16&&(q&4194240)!==0))return d;if(M&4&&(M|=y&16),d=s.entangledLanes,d!==0)for(s=s.entanglements,d&=M;0<d;)y=31-fu(d),z=1<<y,M|=s[y],d&=~z;return M}function lbe(s,d){switch(s){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ube(s,d){for(var y=s.suspendedLanes,M=s.pingedLanes,z=s.expirationTimes,q=s.pendingLanes;0<q;){var le=31-fu(q),Pe=1<<le,je=z[le];je===-1?(!(Pe&y)||Pe&M)&&(z[le]=lbe(Pe,d)):je<=d&&(s.expiredLanes|=Pe),q&=~Pe}}function y5(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function hae(){var s=Vk;return Vk<<=1,!(Vk&4194240)&&(Vk=64),s}function b5(s){for(var d=[],y=0;31>y;y++)d.push(s);return d}function sS(s,d,y){s.pendingLanes|=d,d!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,d=31-fu(d),s[d]=y}function cbe(s,d){var y=s.pendingLanes&~d;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=d,s.mutableReadLanes&=d,s.entangledLanes&=d,d=s.entanglements;var M=s.eventTimes;for(s=s.expirationTimes;0<y;){var z=31-fu(y),q=1<<z;d[z]=0,M[z]=-1,s[z]=-1,y&=~q}}function x5(s,d){var y=s.entangledLanes|=d;for(s=s.entanglements;y;){var M=31-fu(y),z=1<<M;z&d|s[M]&d&&(s[M]|=d),y&=~z}}var ii=0;function pae(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var mae,S5,gae,vae,_ae,w5=!1,Wk=[],mh=null,gh=null,vh=null,lS=new Map,uS=new Map,_h=[],dbe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yae(s,d){switch(s){case"focusin":case"focusout":mh=null;break;case"dragenter":case"dragleave":gh=null;break;case"mouseover":case"mouseout":vh=null;break;case"pointerover":case"pointerout":lS.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":uS.delete(d.pointerId)}}function cS(s,d,y,M,z,q){return s===null||s.nativeEvent!==q?(s={blockedOn:d,domEventName:y,eventSystemFlags:M,nativeEvent:q,targetContainers:[z]},d!==null&&(d=ES(d),d!==null&&S5(d)),s):(s.eventSystemFlags|=M,d=s.targetContainers,z!==null&&d.indexOf(z)===-1&&d.push(z),s)}function fbe(s,d,y,M,z){switch(d){case"focusin":return mh=cS(mh,s,d,y,M,z),!0;case"dragenter":return gh=cS(gh,s,d,y,M,z),!0;case"mouseover":return vh=cS(vh,s,d,y,M,z),!0;case"pointerover":var q=z.pointerId;return lS.set(q,cS(lS.get(q)||null,s,d,y,M,z)),!0;case"gotpointercapture":return q=z.pointerId,uS.set(q,cS(uS.get(q)||null,s,d,y,M,z)),!0}return!1}function bae(s){var d=Dm(s.target);if(d!==null){var y=Rm(d);if(y!==null){if(d=y.tag,d===13){if(d=aae(y),d!==null){s.blockedOn=d,_ae(s.priority,function(){gae(y)});return}}else if(d===3&&y.stateNode.current.memoizedState.isDehydrated){s.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qk(s){if(s.blockedOn!==null)return!1;for(var d=s.targetContainers;0<d.length;){var y=T5(s.domEventName,s.eventSystemFlags,d[0],s.nativeEvent);if(y===null){y=s.nativeEvent;var M=new y.constructor(y.type,y);nS=M,y.target.dispatchEvent(M),nS=null}else return d=ES(y),d!==null&&S5(d),s.blockedOn=y,!1;d.shift()}return!0}function xae(s,d,y){qk(s)&&y.delete(d)}function hbe(){w5=!1,mh!==null&&qk(mh)&&(mh=null),gh!==null&&qk(gh)&&(gh=null),vh!==null&&qk(vh)&&(vh=null),lS.forEach(xae),uS.forEach(xae)}function dS(s,d){s.blockedOn===d&&(s.blockedOn=null,w5||(w5=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,hbe)))}function fS(s){function d(z){return dS(z,s)}if(0<Wk.length){dS(Wk[0],s);for(var y=1;y<Wk.length;y++){var M=Wk[y];M.blockedOn===s&&(M.blockedOn=null)}}for(mh!==null&&dS(mh,s),gh!==null&&dS(gh,s),vh!==null&&dS(vh,s),lS.forEach(d),uS.forEach(d),y=0;y<_h.length;y++)M=_h[y],M.blockedOn===s&&(M.blockedOn=null);for(;0<_h.length&&(y=_h[0],y.blockedOn===null);)bae(y),y.blockedOn===null&&_h.shift()}var s_=ne.ReactCurrentBatchConfig,Xk=!0;function pbe(s,d,y,M){var z=ii,q=s_.transition;s_.transition=null;try{ii=1,E5(s,d,y,M)}finally{ii=z,s_.transition=q}}function mbe(s,d,y,M){var z=ii,q=s_.transition;s_.transition=null;try{ii=4,E5(s,d,y,M)}finally{ii=z,s_.transition=q}}function E5(s,d,y,M){if(Xk){var z=T5(s,d,y,M);if(z===null)z5(s,d,M,Kk,y),yae(s,M);else if(fbe(z,s,d,y,M))M.stopPropagation();else if(yae(s,M),d&4&&-1<dbe.indexOf(s)){for(;z!==null;){var q=ES(z);if(q!==null&&mae(q),q=T5(s,d,y,M),q===null&&z5(s,d,M,Kk,y),q===z)break;z=q}z!==null&&M.stopPropagation()}else z5(s,d,M,null,y)}}var Kk=null;function T5(s,d,y,M){if(Kk=null,s=rS(M),s=Dm(s),s!==null)if(d=Rm(s),d===null)s=null;else if(y=d.tag,y===13){if(s=aae(d),s!==null)return s;s=null}else if(y===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;s=null}else d!==s&&(s=null);return Kk=s,null}function Sae(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nbe()){case _5:return 1;case dae:return 4;case zk:case rbe:return 16;case fae:return 536870912;default:return 16}default:return 16}}var yh=null,M5=null,Yk=null;function wae(){if(Yk)return Yk;var s,d=M5,y=d.length,M,z="value"in yh?yh.value:yh.textContent,q=z.length;for(s=0;s<y&&d[s]===z[s];s++);var le=y-s;for(M=1;M<=le&&d[y-M]===z[q-M];M++);return Yk=z.slice(s,1<M?1-M:void 0)}function $k(s){var d=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&d===13&&(s=13)):s=d,s===10&&(s=13),32<=s||s===13?s:0}function Zk(){return!0}function Eae(){return!1}function zs(s){function d(y,M,z,q,le){this._reactName=y,this._targetInst=z,this.type=M,this.nativeEvent=q,this.target=le,this.currentTarget=null;for(var Pe in s)s.hasOwnProperty(Pe)&&(y=s[Pe],this[Pe]=y?y(q):q[Pe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Zk:Eae,this.isPropagationStopped=Eae,this}return fe(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Zk)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Zk)},persist:function(){},isPersistent:Zk}),d}var l_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P5=zs(l_),hS=fe({},l_,{view:0,detail:0}),gbe=zs(hS),C5,A5,pS,Jk=fe({},hS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I5,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pS&&(pS&&s.type==="mousemove"?(C5=s.screenX-pS.screenX,A5=s.screenY-pS.screenY):A5=C5=0,pS=s),C5)},movementY:function(s){return"movementY"in s?s.movementY:A5}}),Tae=zs(Jk),vbe=fe({},Jk,{dataTransfer:0}),_be=zs(vbe),ybe=fe({},hS,{relatedTarget:0}),k5=zs(ybe),bbe=fe({},l_,{animationName:0,elapsedTime:0,pseudoElement:0}),xbe=zs(bbe),Sbe=fe({},l_,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wbe=zs(Sbe),Ebe=fe({},l_,{data:0}),Mae=zs(Ebe),Tbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mbe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pbe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cbe(s){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(s):(s=Pbe[s])?!!d[s]:!1}function I5(){return Cbe}var Abe=fe({},hS,{key:function(s){if(s.key){var d=Tbe[s.key]||s.key;if(d!=="Unidentified")return d}return s.type==="keypress"?(s=$k(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Mbe[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I5,charCode:function(s){return s.type==="keypress"?$k(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$k(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),kbe=zs(Abe),Ibe=fe({},Jk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pae=zs(Ibe),Rbe=fe({},hS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I5}),Dbe=zs(Rbe),Obe=fe({},l_,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nbe=zs(Obe),Lbe=fe({},Jk,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fbe=zs(Lbe),Ube=[9,13,27,32],R5=x&&"CompositionEvent"in window,mS=null;x&&"documentMode"in document&&(mS=document.documentMode);var Bbe=x&&"TextEvent"in window&&!mS,Cae=x&&(!R5||mS&&8<mS&&11>=mS),Aae=" ",kae=!1;function Iae(s,d){switch(s){case"keyup":return Ube.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rae(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var u_=!1;function zbe(s,d){switch(s){case"compositionend":return Rae(d);case"keypress":return d.which!==32?null:(kae=!0,Aae);case"textInput":return s=d.data,s===Aae&&kae?null:s;default:return null}}function jbe(s,d){if(u_)return s==="compositionend"||!R5&&Iae(s,d)?(s=wae(),Yk=M5=yh=null,u_=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Cae&&d.locale!=="ko"?null:d.data;default:return null}}var Vbe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dae(s){var d=s&&s.nodeName&&s.nodeName.toLowerCase();return d==="input"?!!Vbe[s.type]:d==="textarea"}function Oae(s,d,y,M){eae(M),d=o2(d,"onChange"),0<d.length&&(y=new P5("onChange","change",null,y,M),s.push({event:y,listeners:d}))}var gS=null,vS=null;function Hbe(s){Qae(s,0)}function Qk(s){var d=p_(s);if(Xr(d))return s}function Gbe(s,d){if(s==="change")return d}var Nae=!1;x&&(x?(e2="oninput"in document,e2||(O5=document.createElement("div"),O5.setAttribute("oninput","return;"),e2=typeof O5.oninput=="function"),D5=e2):D5=!1,Nae=D5&&(!document.documentMode||9<document.documentMode));var D5,e2,O5;function Lae(){gS&&(gS.detachEvent("onpropertychange",Fae),vS=gS=null)}function Fae(s){if(s.propertyName==="value"&&Qk(vS)){var d=[];Oae(d,vS,s,rS(s)),iae(Hbe,d)}}function Wbe(s,d,y){s==="focusin"?(Lae(),gS=d,vS=y,gS.attachEvent("onpropertychange",Fae)):s==="focusout"&&Lae()}function qbe(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qk(vS)}function Xbe(s,d){if(s==="click")return Qk(d)}function Kbe(s,d){if(s==="input"||s==="change")return Qk(d)}function Ybe(s,d){return s===d&&(s!==0||1/s===1/d)||s!==s&&d!==d}var hu=typeof Object.is=="function"?Object.is:Ybe;function _S(s,d){if(hu(s,d))return!0;if(typeof s!="object"||s===null||typeof d!="object"||d===null)return!1;var y=Object.keys(s),M=Object.keys(d);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var z=y[M];if(!w.call(d,z)||!hu(s[z],d[z]))return!1}return!0}function Uae(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bae(s,d){var y=Uae(s);s=0;for(var M;y;){if(y.nodeType===3){if(M=s+y.textContent.length,s<=d&&M>=d)return{node:y,offset:d-s};s=M}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Uae(y)}}function zae(s,d){return s&&d?s===d?!0:s&&s.nodeType===3?!1:d&&d.nodeType===3?zae(s,d.parentNode):"contains"in s?s.contains(d):s.compareDocumentPosition?!!(s.compareDocumentPosition(d)&16):!1:!1}function jae(){for(var s=window,d=Q();d instanceof s.HTMLIFrameElement;){try{var y=typeof d.contentWindow.location.href=="string"}catch{y=!1}if(y)s=d.contentWindow;else break;d=Q(s.document)}return d}function N5(s){var d=s&&s.nodeName&&s.nodeName.toLowerCase();return d&&(d==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||d==="textarea"||s.contentEditable==="true")}function $be(s){var d=jae(),y=s.focusedElem,M=s.selectionRange;if(d!==y&&y&&y.ownerDocument&&zae(y.ownerDocument.documentElement,y)){if(M!==null&&N5(y)){if(d=M.start,s=M.end,s===void 0&&(s=d),"selectionStart"in y)y.selectionStart=d,y.selectionEnd=Math.min(s,y.value.length);else if(s=(d=y.ownerDocument||document)&&d.defaultView||window,s.getSelection){s=s.getSelection();var z=y.textContent.length,q=Math.min(M.start,z);M=M.end===void 0?q:Math.min(M.end,z),!s.extend&&q>M&&(z=M,M=q,q=z),z=Bae(y,q);var le=Bae(y,M);z&&le&&(s.rangeCount!==1||s.anchorNode!==z.node||s.anchorOffset!==z.offset||s.focusNode!==le.node||s.focusOffset!==le.offset)&&(d=d.createRange(),d.setStart(z.node,z.offset),s.removeAllRanges(),q>M?(s.addRange(d),s.extend(le.node,le.offset)):(d.setEnd(le.node,le.offset),s.addRange(d)))}}for(d=[],s=y;s=s.parentNode;)s.nodeType===1&&d.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<d.length;y++)s=d[y],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Zbe=x&&"documentMode"in document&&11>=document.documentMode,c_=null,L5=null,yS=null,F5=!1;function Vae(s,d,y){var M=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;F5||c_==null||c_!==Q(M)||(M=c_,"selectionStart"in M&&N5(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),yS&&_S(yS,M)||(yS=M,M=o2(L5,"onSelect"),0<M.length&&(d=new P5("onSelect","select",null,d,y),s.push({event:d,listeners:M}),d.target=c_)))}function t2(s,d){var y={};return y[s.toLowerCase()]=d.toLowerCase(),y["Webkit"+s]="webkit"+d,y["Moz"+s]="moz"+d,y}var d_={animationend:t2("Animation","AnimationEnd"),animationiteration:t2("Animation","AnimationIteration"),animationstart:t2("Animation","AnimationStart"),transitionend:t2("Transition","TransitionEnd")},U5={},Hae={};x&&(Hae=document.createElement("div").style,"AnimationEvent"in window||(delete d_.animationend.animation,delete d_.animationiteration.animation,delete d_.animationstart.animation),"TransitionEvent"in window||delete d_.transitionend.transition);function n2(s){if(U5[s])return U5[s];if(!d_[s])return s;var d=d_[s],y;for(y in d)if(d.hasOwnProperty(y)&&y in Hae)return U5[s]=d[y];return s}var Gae=n2("animationend"),Wae=n2("animationiteration"),qae=n2("animationstart"),Xae=n2("transitionend"),Kae=new Map,Yae="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bh(s,d){Kae.set(s,d),v(d,[s])}for(i2=0;i2<Yae.length;i2++)r2=Yae[i2],$ae=r2.toLowerCase(),Zae=r2[0].toUpperCase()+r2.slice(1),bh($ae,"on"+Zae);var r2,$ae,Zae,i2;bh(Gae,"onAnimationEnd"),bh(Wae,"onAnimationIteration"),bh(qae,"onAnimationStart"),bh("dblclick","onDoubleClick"),bh("focusin","onFocus"),bh("focusout","onBlur"),bh(Xae,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),v("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),v("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),v("onBeforeInput",["compositionend","keypress","textInput","paste"]),v("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),v("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),v("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jbe=new Set("cancel close invalid load scroll toggle".split(" ").concat(bS));function Jae(s,d,y){var M=s.type||"unknown-event";s.currentTarget=y,Jye(M,d,void 0,s),s.currentTarget=null}function Qae(s,d){d=(d&4)!==0;for(var y=0;y<s.length;y++){var M=s[y],z=M.event;M=M.listeners;e:{var q=void 0;if(d)for(var le=M.length-1;0<=le;le--){var Pe=M[le],je=Pe.instance,gt=Pe.currentTarget;if(Pe=Pe.listener,je!==q&&z.isPropagationStopped())break e;Jae(z,Pe,gt),q=je}else for(le=0;le<M.length;le++){if(Pe=M[le],je=Pe.instance,gt=Pe.currentTarget,Pe=Pe.listener,je!==q&&z.isPropagationStopped())break e;Jae(z,Pe,gt),q=je}}}if(Bk)throw s=v5,Bk=!1,v5=null,s}function Ri(s,d){var y=d[q5];y===void 0&&(y=d[q5]=new Set);var M=s+"__bubble";y.has(M)||(eoe(d,s,2,!1),y.add(M))}function B5(s,d,y){var M=0;d&&(M|=4),eoe(y,s,M,d)}var a2="_reactListening"+Math.random().toString(36).slice(2);function xS(s){if(!s[a2]){s[a2]=!0,f.forEach(function(y){y!=="selectionchange"&&(Jbe.has(y)||B5(y,!1,s),B5(y,!0,s))});var d=s.nodeType===9?s:s.ownerDocument;d===null||d[a2]||(d[a2]=!0,B5("selectionchange",!1,d))}}function eoe(s,d,y,M){switch(Sae(d)){case 1:var z=pbe;break;case 4:z=mbe;break;default:z=E5}y=z.bind(null,d,y,s),z=void 0,!g5||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(z=!0),M?z!==void 0?s.addEventListener(d,y,{capture:!0,passive:z}):s.addEventListener(d,y,!0):z!==void 0?s.addEventListener(d,y,{passive:z}):s.addEventListener(d,y,!1)}function z5(s,d,y,M,z){var q=M;if(!(d&1)&&!(d&2)&&M!==null)e:for(;;){if(M===null)return;var le=M.tag;if(le===3||le===4){var Pe=M.stateNode.containerInfo;if(Pe===z||Pe.nodeType===8&&Pe.parentNode===z)break;if(le===4)for(le=M.return;le!==null;){var je=le.tag;if((je===3||je===4)&&(je=le.stateNode.containerInfo,je===z||je.nodeType===8&&je.parentNode===z))return;le=le.return}for(;Pe!==null;){if(le=Dm(Pe),le===null)return;if(je=le.tag,je===5||je===6){M=q=le;continue e}Pe=Pe.parentNode}}M=M.return}iae(function(){var gt=q,zt=rS(y),Ht=[];e:{var Ft=Kae.get(s);if(Ft!==void 0){var _n=P5,Rn=s;switch(s){case"keypress":if($k(y)===0)break e;case"keydown":case"keyup":_n=kbe;break;case"focusin":Rn="focus",_n=k5;break;case"focusout":Rn="blur",_n=k5;break;case"beforeblur":case"afterblur":_n=k5;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_n=Tae;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_n=_be;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_n=Dbe;break;case Gae:case Wae:case qae:_n=xbe;break;case Xae:_n=Nbe;break;case"scroll":_n=gbe;break;case"wheel":_n=Fbe;break;case"copy":case"cut":case"paste":_n=wbe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_n=Pae}var Nn=(d&4)!==0,ua=!Nn&&s==="scroll",rt=Nn?Ft!==null?Ft+"Capture":null:Ft;Nn=[];for(var We=gt,ut;We!==null;){ut=We;var $t=ut.stateNode;if(ut.tag===5&&$t!==null&&(ut=$t,rt!==null&&($t=iS(We,rt),$t!=null&&Nn.push(SS(We,$t,ut)))),ua)break;We=We.return}0<Nn.length&&(Ft=new _n(Ft,Rn,null,y,zt),Ht.push({event:Ft,listeners:Nn}))}}if(!(d&7)){e:{if(Ft=s==="mouseover"||s==="pointerover",_n=s==="mouseout"||s==="pointerout",Ft&&y!==nS&&(Rn=y.relatedTarget||y.fromElement)&&(Dm(Rn)||Rn[Fd]))break e;if((_n||Ft)&&(Ft=zt.window===zt?zt:(Ft=zt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,_n?(Rn=y.relatedTarget||y.toElement,_n=gt,Rn=Rn?Dm(Rn):null,Rn!==null&&(ua=Rm(Rn),Rn!==ua||Rn.tag!==5&&Rn.tag!==6)&&(Rn=null)):(_n=null,Rn=gt),_n!==Rn)){if(Nn=Tae,$t="onMouseLeave",rt="onMouseEnter",We="mouse",(s==="pointerout"||s==="pointerover")&&(Nn=Pae,$t="onPointerLeave",rt="onPointerEnter",We="pointer"),ua=_n==null?Ft:p_(_n),ut=Rn==null?Ft:p_(Rn),Ft=new Nn($t,We+"leave",_n,y,zt),Ft.target=ua,Ft.relatedTarget=ut,$t=null,Dm(zt)===gt&&(Nn=new Nn(rt,We+"enter",Rn,y,zt),Nn.target=ut,Nn.relatedTarget=ua,$t=Nn),ua=$t,_n&&Rn)t:{for(Nn=_n,rt=Rn,We=0,ut=Nn;ut;ut=f_(ut))We++;for(ut=0,$t=rt;$t;$t=f_($t))ut++;for(;0<We-ut;)Nn=f_(Nn),We--;for(;0<ut-We;)rt=f_(rt),ut--;for(;We--;){if(Nn===rt||rt!==null&&Nn===rt.alternate)break t;Nn=f_(Nn),rt=f_(rt)}Nn=null}else Nn=null;_n!==null&&toe(Ht,Ft,_n,Nn,!1),Rn!==null&&ua!==null&&toe(Ht,ua,Rn,Nn,!0)}}e:{if(Ft=gt?p_(gt):window,_n=Ft.nodeName&&Ft.nodeName.toLowerCase(),_n==="select"||_n==="input"&&Ft.type==="file")var Bn=Gbe;else if(Dae(Ft))if(Nae)Bn=Kbe;else{Bn=qbe;var Jn=Wbe}else(_n=Ft.nodeName)&&_n.toLowerCase()==="input"&&(Ft.type==="checkbox"||Ft.type==="radio")&&(Bn=Xbe);if(Bn&&(Bn=Bn(s,gt))){Oae(Ht,Bn,y,zt);break e}Jn&&Jn(s,Ft,gt),s==="focusout"&&(Jn=Ft._wrapperState)&&Jn.controlled&&Ft.type==="number"&&Tt(Ft,"number",Ft.value)}switch(Jn=gt?p_(gt):window,s){case"focusin":(Dae(Jn)||Jn.contentEditable==="true")&&(c_=Jn,L5=gt,yS=null);break;case"focusout":yS=L5=c_=null;break;case"mousedown":F5=!0;break;case"contextmenu":case"mouseup":case"dragend":F5=!1,Vae(Ht,y,zt);break;case"selectionchange":if(Zbe)break;case"keydown":case"keyup":Vae(Ht,y,zt)}var Qn;if(R5)e:{switch(s){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else u_?Iae(s,y)&&(dr="onCompositionEnd"):s==="keydown"&&y.keyCode===229&&(dr="onCompositionStart");dr&&(Cae&&y.locale!=="ko"&&(u_||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&u_&&(Qn=wae()):(yh=zt,M5="value"in yh?yh.value:yh.textContent,u_=!0)),Jn=o2(gt,dr),0<Jn.length&&(dr=new Mae(dr,s,null,y,zt),Ht.push({event:dr,listeners:Jn}),Qn?dr.data=Qn:(Qn=Rae(y),Qn!==null&&(dr.data=Qn)))),(Qn=Bbe?zbe(s,y):jbe(s,y))&&(gt=o2(gt,"onBeforeInput"),0<gt.length&&(zt=new Mae("onBeforeInput","beforeinput",null,y,zt),Ht.push({event:zt,listeners:gt}),zt.data=Qn))}Qae(Ht,d)})}function SS(s,d,y){return{instance:s,listener:d,currentTarget:y}}function o2(s,d){for(var y=d+"Capture",M=[];s!==null;){var z=s,q=z.stateNode;z.tag===5&&q!==null&&(z=q,q=iS(s,y),q!=null&&M.unshift(SS(s,q,z)),q=iS(s,d),q!=null&&M.push(SS(s,q,z))),s=s.return}return M}function f_(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function toe(s,d,y,M,z){for(var q=d._reactName,le=[];y!==null&&y!==M;){var Pe=y,je=Pe.alternate,gt=Pe.stateNode;if(je!==null&&je===M)break;Pe.tag===5&&gt!==null&&(Pe=gt,z?(je=iS(y,q),je!=null&&le.unshift(SS(y,je,Pe))):z||(je=iS(y,q),je!=null&&le.push(SS(y,je,Pe)))),y=y.return}le.length!==0&&s.push({event:d,listeners:le})}var Qbe=/\r\n?/g,exe=/\u0000|\uFFFD/g;function noe(s){return(typeof s=="string"?s:""+s).replace(Qbe,`
`).replace(exe,"")}function s2(s,d,y){if(d=noe(d),noe(s)!==d&&y)throw Error(l(425))}function l2(){}var j5=null,V5=null;function H5(s,d){return s==="textarea"||s==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var G5=typeof setTimeout=="function"?setTimeout:void 0,txe=typeof clearTimeout=="function"?clearTimeout:void 0,roe=typeof Promise=="function"?Promise:void 0,nxe=typeof queueMicrotask=="function"?queueMicrotask:typeof roe<"u"?function(s){return roe.resolve(null).then(s).catch(rxe)}:G5;function rxe(s){setTimeout(function(){throw s})}function W5(s,d){var y=d,M=0;do{var z=y.nextSibling;if(s.removeChild(y),z&&z.nodeType===8)if(y=z.data,y==="/$"){if(M===0){s.removeChild(z),fS(d);return}M--}else y!=="$"&&y!=="$?"&&y!=="$!"||M++;y=z}while(y);fS(d)}function xh(s){for(;s!=null;s=s.nextSibling){var d=s.nodeType;if(d===1||d===3)break;if(d===8){if(d=s.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return s}function ioe(s){s=s.previousSibling;for(var d=0;s;){if(s.nodeType===8){var y=s.data;if(y==="$"||y==="$!"||y==="$?"){if(d===0)return s;d--}else y==="/$"&&d++}s=s.previousSibling}return null}var h_=Math.random().toString(36).slice(2),pc="__reactFiber$"+h_,wS="__reactProps$"+h_,Fd="__reactContainer$"+h_,q5="__reactEvents$"+h_,ixe="__reactListeners$"+h_,axe="__reactHandles$"+h_;function Dm(s){var d=s[pc];if(d)return d;for(var y=s.parentNode;y;){if(d=y[Fd]||y[pc]){if(y=d.alternate,d.child!==null||y!==null&&y.child!==null)for(s=ioe(s);s!==null;){if(y=s[pc])return y;s=ioe(s)}return d}s=y,y=s.parentNode}return null}function ES(s){return s=s[pc]||s[Fd],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function p_(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(l(33))}function u2(s){return s[wS]||null}var X5=[],m_=-1;function Sh(s){return{current:s}}function Di(s){0>m_||(s.current=X5[m_],X5[m_]=null,m_--)}function Ei(s,d){m_++,X5[m_]=s.current,s.current=d}var wh={},So=Sh(wh),gs=Sh(!1),Om=wh;function g_(s,d){var y=s.type.contextTypes;if(!y)return wh;var M=s.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var z={},q;for(q in y)z[q]=d[q];return M&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=d,s.__reactInternalMemoizedMaskedChildContext=z),z}function vs(s){return s=s.childContextTypes,s!=null}function c2(){Di(gs),Di(So)}function aoe(s,d,y){if(So.current!==wh)throw Error(l(168));Ei(So,d),Ei(gs,y)}function ooe(s,d,y){var M=s.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var z in M)if(!(z in d))throw Error(l(108,wt(s)||"Unknown",z));return fe({},y,M)}function d2(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||wh,Om=So.current,Ei(So,s),Ei(gs,gs.current),!0}function soe(s,d,y){var M=s.stateNode;if(!M)throw Error(l(169));y?(s=ooe(s,d,Om),M.__reactInternalMemoizedMergedChildContext=s,Di(gs),Di(So),Ei(So,s)):Di(gs),Ei(gs,y)}var Ud=null,f2=!1,K5=!1;function loe(s){Ud===null?Ud=[s]:Ud.push(s)}function oxe(s){f2=!0,loe(s)}function Eh(){if(!K5&&Ud!==null){K5=!0;var s=0,d=ii;try{var y=Ud;for(ii=1;s<y.length;s++){var M=y[s];do M=M(!0);while(M!==null)}Ud=null,f2=!1}catch(z){throw Ud!==null&&(Ud=Ud.slice(s+1)),uae(_5,Eh),z}finally{ii=d,K5=!1}}return null}var v_=[],__=0,h2=null,p2=0,bl=[],xl=0,Nm=null,Bd=1,zd="";function Lm(s,d){v_[__++]=p2,v_[__++]=h2,h2=s,p2=d}function uoe(s,d,y){bl[xl++]=Bd,bl[xl++]=zd,bl[xl++]=Nm,Nm=s;var M=Bd;s=zd;var z=32-fu(M)-1;M&=~(1<<z),y+=1;var q=32-fu(d)+z;if(30<q){var le=z-z%5;q=(M&(1<<le)-1).toString(32),M>>=le,z-=le,Bd=1<<32-fu(d)+z|y<<z|M,zd=q+s}else Bd=1<<q|y<<z|M,zd=s}function Y5(s){s.return!==null&&(Lm(s,1),uoe(s,1,0))}function $5(s){for(;s===h2;)h2=v_[--__],v_[__]=null,p2=v_[--__],v_[__]=null;for(;s===Nm;)Nm=bl[--xl],bl[xl]=null,zd=bl[--xl],bl[xl]=null,Bd=bl[--xl],bl[xl]=null}var js=null,Vs=null,Bi=!1,pu=null;function coe(s,d){var y=Tl(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=s,d=s.deletions,d===null?(s.deletions=[y],s.flags|=16):d.push(y)}function doe(s,d){switch(s.tag){case 5:var y=s.type;return d=d.nodeType!==1||y.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(s.stateNode=d,js=s,Vs=xh(d.firstChild),!0):!1;case 6:return d=s.pendingProps===""||d.nodeType!==3?null:d,d!==null?(s.stateNode=d,js=s,Vs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(y=Nm!==null?{id:Bd,overflow:zd}:null,s.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Tl(18,null,null,0),y.stateNode=d,y.return=s,s.child=y,js=s,Vs=null,!0):!1;default:return!1}}function Z5(s){return(s.mode&1)!==0&&(s.flags&128)===0}function J5(s){if(Bi){var d=Vs;if(d){var y=d;if(!doe(s,d)){if(Z5(s))throw Error(l(418));d=xh(y.nextSibling);var M=js;d&&doe(s,d)?coe(M,y):(s.flags=s.flags&-4097|2,Bi=!1,js=s)}}else{if(Z5(s))throw Error(l(418));s.flags=s.flags&-4097|2,Bi=!1,js=s}}}function foe(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;js=s}function m2(s){if(s!==js)return!1;if(!Bi)return foe(s),Bi=!0,!1;var d;if((d=s.tag!==3)&&!(d=s.tag!==5)&&(d=s.type,d=d!=="head"&&d!=="body"&&!H5(s.type,s.memoizedProps)),d&&(d=Vs)){if(Z5(s))throw hoe(),Error(l(418));for(;d;)coe(s,d),d=xh(d.nextSibling)}if(foe(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));e:{for(s=s.nextSibling,d=0;s;){if(s.nodeType===8){var y=s.data;if(y==="/$"){if(d===0){Vs=xh(s.nextSibling);break e}d--}else y!=="$"&&y!=="$!"&&y!=="$?"||d++}s=s.nextSibling}Vs=null}}else Vs=js?xh(s.stateNode.nextSibling):null;return!0}function hoe(){for(var s=Vs;s;)s=xh(s.nextSibling)}function y_(){Vs=js=null,Bi=!1}function Q5(s){pu===null?pu=[s]:pu.push(s)}var sxe=ne.ReactCurrentBatchConfig;function mu(s,d){if(s&&s.defaultProps){d=fe({},d),s=s.defaultProps;for(var y in s)d[y]===void 0&&(d[y]=s[y]);return d}return d}var g2=Sh(null),v2=null,b_=null,eB=null;function tB(){eB=b_=v2=null}function nB(s){var d=g2.current;Di(g2),s._currentValue=d}function rB(s,d,y){for(;s!==null;){var M=s.alternate;if((s.childLanes&d)!==d?(s.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),s===y)break;s=s.return}}function x_(s,d){v2=s,eB=b_=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&d&&(_s=!0),s.firstContext=null)}function Sl(s){var d=s._currentValue;if(eB!==s)if(s={context:s,memoizedValue:d,next:null},b_===null){if(v2===null)throw Error(l(308));b_=s,v2.dependencies={lanes:0,firstContext:s}}else b_=b_.next=s;return d}var Fm=null;function iB(s){Fm===null?Fm=[s]:Fm.push(s)}function poe(s,d,y,M){var z=d.interleaved;return z===null?(y.next=y,iB(d)):(y.next=z.next,z.next=y),d.interleaved=y,jd(s,M)}function jd(s,d){s.lanes|=d;var y=s.alternate;for(y!==null&&(y.lanes|=d),y=s,s=s.return;s!==null;)s.childLanes|=d,y=s.alternate,y!==null&&(y.childLanes|=d),y=s,s=s.return;return y.tag===3?y.stateNode:null}var Th=!1;function aB(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function moe(s,d){s=s.updateQueue,d.updateQueue===s&&(d.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Vd(s,d){return{eventTime:s,lane:d,tag:0,payload:null,callback:null,next:null}}function Mh(s,d,y){var M=s.updateQueue;if(M===null)return null;if(M=M.shared,qr&2){var z=M.pending;return z===null?d.next=d:(d.next=z.next,z.next=d),M.pending=d,jd(s,y)}return z=M.interleaved,z===null?(d.next=d,iB(M)):(d.next=z.next,z.next=d),M.interleaved=d,jd(s,y)}function _2(s,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var M=d.lanes;M&=s.pendingLanes,y|=M,d.lanes=y,x5(s,y)}}function goe(s,d){var y=s.updateQueue,M=s.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var z=null,q=null;if(y=y.firstBaseUpdate,y!==null){do{var le={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};q===null?z=q=le:q=q.next=le,y=y.next}while(y!==null);q===null?z=q=d:q=q.next=d}else z=q=d;y={baseState:M.baseState,firstBaseUpdate:z,lastBaseUpdate:q,shared:M.shared,effects:M.effects},s.updateQueue=y;return}s=y.lastBaseUpdate,s===null?y.firstBaseUpdate=d:s.next=d,y.lastBaseUpdate=d}function y2(s,d,y,M){var z=s.updateQueue;Th=!1;var q=z.firstBaseUpdate,le=z.lastBaseUpdate,Pe=z.shared.pending;if(Pe!==null){z.shared.pending=null;var je=Pe,gt=je.next;je.next=null,le===null?q=gt:le.next=gt,le=je;var zt=s.alternate;zt!==null&&(zt=zt.updateQueue,Pe=zt.lastBaseUpdate,Pe!==le&&(Pe===null?zt.firstBaseUpdate=gt:Pe.next=gt,zt.lastBaseUpdate=je))}if(q!==null){var Ht=z.baseState;le=0,zt=gt=je=null,Pe=q;do{var Ft=Pe.lane,_n=Pe.eventTime;if((M&Ft)===Ft){zt!==null&&(zt=zt.next={eventTime:_n,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var Rn=s,Nn=Pe;switch(Ft=d,_n=y,Nn.tag){case 1:if(Rn=Nn.payload,typeof Rn=="function"){Ht=Rn.call(_n,Ht,Ft);break e}Ht=Rn;break e;case 3:Rn.flags=Rn.flags&-65537|128;case 0:if(Rn=Nn.payload,Ft=typeof Rn=="function"?Rn.call(_n,Ht,Ft):Rn,Ft==null)break e;Ht=fe({},Ht,Ft);break e;case 2:Th=!0}}Pe.callback!==null&&Pe.lane!==0&&(s.flags|=64,Ft=z.effects,Ft===null?z.effects=[Pe]:Ft.push(Pe))}else _n={eventTime:_n,lane:Ft,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},zt===null?(gt=zt=_n,je=Ht):zt=zt.next=_n,le|=Ft;if(Pe=Pe.next,Pe===null){if(Pe=z.shared.pending,Pe===null)break;Ft=Pe,Pe=Ft.next,Ft.next=null,z.lastBaseUpdate=Ft,z.shared.pending=null}}while(!0);if(zt===null&&(je=Ht),z.baseState=je,z.firstBaseUpdate=gt,z.lastBaseUpdate=zt,d=z.shared.interleaved,d!==null){z=d;do le|=z.lane,z=z.next;while(z!==d)}else q===null&&(z.shared.lanes=0);zm|=le,s.lanes=le,s.memoizedState=Ht}}function voe(s,d,y){if(s=d.effects,d.effects=null,s!==null)for(d=0;d<s.length;d++){var M=s[d],z=M.callback;if(z!==null){if(M.callback=null,M=y,typeof z!="function")throw Error(l(191,z));z.call(M)}}}var _oe=new i.Component().refs;function oB(s,d,y,M){d=s.memoizedState,y=y(M,d),y=y==null?d:fe({},d,y),s.memoizedState=y,s.lanes===0&&(s.updateQueue.baseState=y)}var b2={isMounted:function(s){return(s=s._reactInternals)?Rm(s)===s:!1},enqueueSetState:function(s,d,y){s=s._reactInternals;var M=Yo(),z=kh(s),q=Vd(M,z);q.payload=d,y!=null&&(q.callback=y),d=Mh(s,q,z),d!==null&&(_u(d,s,z,M),_2(d,s,z))},enqueueReplaceState:function(s,d,y){s=s._reactInternals;var M=Yo(),z=kh(s),q=Vd(M,z);q.tag=1,q.payload=d,y!=null&&(q.callback=y),d=Mh(s,q,z),d!==null&&(_u(d,s,z,M),_2(d,s,z))},enqueueForceUpdate:function(s,d){s=s._reactInternals;var y=Yo(),M=kh(s),z=Vd(y,M);z.tag=2,d!=null&&(z.callback=d),d=Mh(s,z,M),d!==null&&(_u(d,s,M,y),_2(d,s,M))}};function yoe(s,d,y,M,z,q,le){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(M,q,le):d.prototype&&d.prototype.isPureReactComponent?!_S(y,M)||!_S(z,q):!0}function boe(s,d,y){var M=!1,z=wh,q=d.contextType;return typeof q=="object"&&q!==null?q=Sl(q):(z=vs(d)?Om:So.current,M=d.contextTypes,q=(M=M!=null)?g_(s,z):wh),d=new d(y,q),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=b2,s.stateNode=d,d._reactInternals=s,M&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=z,s.__reactInternalMemoizedMaskedChildContext=q),d}function xoe(s,d,y,M){s=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,M),d.state!==s&&b2.enqueueReplaceState(d,d.state,null)}function sB(s,d,y,M){var z=s.stateNode;z.props=y,z.state=s.memoizedState,z.refs=_oe,aB(s);var q=d.contextType;typeof q=="object"&&q!==null?z.context=Sl(q):(q=vs(d)?Om:So.current,z.context=g_(s,q)),z.state=s.memoizedState,q=d.getDerivedStateFromProps,typeof q=="function"&&(oB(s,d,q,y),z.state=s.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(d=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),d!==z.state&&b2.enqueueReplaceState(z,z.state,null),y2(s,y,z,M),z.state=s.memoizedState),typeof z.componentDidMount=="function"&&(s.flags|=4194308)}function TS(s,d,y){if(s=y.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(l(309));var M=y.stateNode}if(!M)throw Error(l(147,s));var z=M,q=""+s;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===q?d.ref:(d=function(le){var Pe=z.refs;Pe===_oe&&(Pe=z.refs={}),le===null?delete Pe[q]:Pe[q]=le},d._stringRef=q,d)}if(typeof s!="string")throw Error(l(284));if(!y._owner)throw Error(l(290,s))}return s}function x2(s,d){throw s=Object.prototype.toString.call(d),Error(l(31,s==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":s))}function Soe(s){var d=s._init;return d(s._payload)}function woe(s){function d(rt,We){if(s){var ut=rt.deletions;ut===null?(rt.deletions=[We],rt.flags|=16):ut.push(We)}}function y(rt,We){if(!s)return null;for(;We!==null;)d(rt,We),We=We.sibling;return null}function M(rt,We){for(rt=new Map;We!==null;)We.key!==null?rt.set(We.key,We):rt.set(We.index,We),We=We.sibling;return rt}function z(rt,We){return rt=Rh(rt,We),rt.index=0,rt.sibling=null,rt}function q(rt,We,ut){return rt.index=ut,s?(ut=rt.alternate,ut!==null?(ut=ut.index,ut<We?(rt.flags|=2,We):ut):(rt.flags|=2,We)):(rt.flags|=1048576,We)}function le(rt){return s&&rt.alternate===null&&(rt.flags|=2),rt}function Pe(rt,We,ut,$t){return We===null||We.tag!==6?(We=HB(ut,rt.mode,$t),We.return=rt,We):(We=z(We,ut),We.return=rt,We)}function je(rt,We,ut,$t){var Bn=ut.type;return Bn===Ie?zt(rt,We,ut.props.children,$t,ut.key):We!==null&&(We.elementType===Bn||typeof Bn=="object"&&Bn!==null&&Bn.$$typeof===Re&&Soe(Bn)===We.type)?($t=z(We,ut.props),$t.ref=TS(rt,We,ut),$t.return=rt,$t):($t=z2(ut.type,ut.key,ut.props,null,rt.mode,$t),$t.ref=TS(rt,We,ut),$t.return=rt,$t)}function gt(rt,We,ut,$t){return We===null||We.tag!==4||We.stateNode.containerInfo!==ut.containerInfo||We.stateNode.implementation!==ut.implementation?(We=GB(ut,rt.mode,$t),We.return=rt,We):(We=z(We,ut.children||[]),We.return=rt,We)}function zt(rt,We,ut,$t,Bn){return We===null||We.tag!==7?(We=Gm(ut,rt.mode,$t,Bn),We.return=rt,We):(We=z(We,ut),We.return=rt,We)}function Ht(rt,We,ut){if(typeof We=="string"&&We!==""||typeof We=="number")return We=HB(""+We,rt.mode,ut),We.return=rt,We;if(typeof We=="object"&&We!==null){switch(We.$$typeof){case ce:return ut=z2(We.type,We.key,We.props,null,rt.mode,ut),ut.ref=TS(rt,null,We),ut.return=rt,ut;case Te:return We=GB(We,rt.mode,ut),We.return=rt,We;case Re:var $t=We._init;return Ht(rt,$t(We._payload),ut)}if(It(We)||Et(We))return We=Gm(We,rt.mode,ut,null),We.return=rt,We;x2(rt,We)}return null}function Ft(rt,We,ut,$t){var Bn=We!==null?We.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Bn!==null?null:Pe(rt,We,""+ut,$t);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case ce:return ut.key===Bn?je(rt,We,ut,$t):null;case Te:return ut.key===Bn?gt(rt,We,ut,$t):null;case Re:return Bn=ut._init,Ft(rt,We,Bn(ut._payload),$t)}if(It(ut)||Et(ut))return Bn!==null?null:zt(rt,We,ut,$t,null);x2(rt,ut)}return null}function _n(rt,We,ut,$t,Bn){if(typeof $t=="string"&&$t!==""||typeof $t=="number")return rt=rt.get(ut)||null,Pe(We,rt,""+$t,Bn);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case ce:return rt=rt.get($t.key===null?ut:$t.key)||null,je(We,rt,$t,Bn);case Te:return rt=rt.get($t.key===null?ut:$t.key)||null,gt(We,rt,$t,Bn);case Re:var Jn=$t._init;return _n(rt,We,ut,Jn($t._payload),Bn)}if(It($t)||Et($t))return rt=rt.get(ut)||null,zt(We,rt,$t,Bn,null);x2(We,$t)}return null}function Rn(rt,We,ut,$t){for(var Bn=null,Jn=null,Qn=We,dr=We=0,Ga=null;Qn!==null&&dr<ut.length;dr++){Qn.index>dr?(Ga=Qn,Qn=null):Ga=Qn.sibling;var Kr=Ft(rt,Qn,ut[dr],$t);if(Kr===null){Qn===null&&(Qn=Ga);break}s&&Qn&&Kr.alternate===null&&d(rt,Qn),We=q(Kr,We,dr),Jn===null?Bn=Kr:Jn.sibling=Kr,Jn=Kr,Qn=Ga}if(dr===ut.length)return y(rt,Qn),Bi&&Lm(rt,dr),Bn;if(Qn===null){for(;dr<ut.length;dr++)Qn=Ht(rt,ut[dr],$t),Qn!==null&&(We=q(Qn,We,dr),Jn===null?Bn=Qn:Jn.sibling=Qn,Jn=Qn);return Bi&&Lm(rt,dr),Bn}for(Qn=M(rt,Qn);dr<ut.length;dr++)Ga=_n(Qn,rt,dr,ut[dr],$t),Ga!==null&&(s&&Ga.alternate!==null&&Qn.delete(Ga.key===null?dr:Ga.key),We=q(Ga,We,dr),Jn===null?Bn=Ga:Jn.sibling=Ga,Jn=Ga);return s&&Qn.forEach(function(Dh){return d(rt,Dh)}),Bi&&Lm(rt,dr),Bn}function Nn(rt,We,ut,$t){var Bn=Et(ut);if(typeof Bn!="function")throw Error(l(150));if(ut=Bn.call(ut),ut==null)throw Error(l(151));for(var Jn=Bn=null,Qn=We,dr=We=0,Ga=null,Kr=ut.next();Qn!==null&&!Kr.done;dr++,Kr=ut.next()){Qn.index>dr?(Ga=Qn,Qn=null):Ga=Qn.sibling;var Dh=Ft(rt,Qn,Kr.value,$t);if(Dh===null){Qn===null&&(Qn=Ga);break}s&&Qn&&Dh.alternate===null&&d(rt,Qn),We=q(Dh,We,dr),Jn===null?Bn=Dh:Jn.sibling=Dh,Jn=Dh,Qn=Ga}if(Kr.done)return y(rt,Qn),Bi&&Lm(rt,dr),Bn;if(Qn===null){for(;!Kr.done;dr++,Kr=ut.next())Kr=Ht(rt,Kr.value,$t),Kr!==null&&(We=q(Kr,We,dr),Jn===null?Bn=Kr:Jn.sibling=Kr,Jn=Kr);return Bi&&Lm(rt,dr),Bn}for(Qn=M(rt,Qn);!Kr.done;dr++,Kr=ut.next())Kr=_n(Qn,rt,dr,Kr.value,$t),Kr!==null&&(s&&Kr.alternate!==null&&Qn.delete(Kr.key===null?dr:Kr.key),We=q(Kr,We,dr),Jn===null?Bn=Kr:Jn.sibling=Kr,Jn=Kr);return s&&Qn.forEach(function(zxe){return d(rt,zxe)}),Bi&&Lm(rt,dr),Bn}function ua(rt,We,ut,$t){if(typeof ut=="object"&&ut!==null&&ut.type===Ie&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case ce:e:{for(var Bn=ut.key,Jn=We;Jn!==null;){if(Jn.key===Bn){if(Bn=ut.type,Bn===Ie){if(Jn.tag===7){y(rt,Jn.sibling),We=z(Jn,ut.props.children),We.return=rt,rt=We;break e}}else if(Jn.elementType===Bn||typeof Bn=="object"&&Bn!==null&&Bn.$$typeof===Re&&Soe(Bn)===Jn.type){y(rt,Jn.sibling),We=z(Jn,ut.props),We.ref=TS(rt,Jn,ut),We.return=rt,rt=We;break e}y(rt,Jn);break}else d(rt,Jn);Jn=Jn.sibling}ut.type===Ie?(We=Gm(ut.props.children,rt.mode,$t,ut.key),We.return=rt,rt=We):($t=z2(ut.type,ut.key,ut.props,null,rt.mode,$t),$t.ref=TS(rt,We,ut),$t.return=rt,rt=$t)}return le(rt);case Te:e:{for(Jn=ut.key;We!==null;){if(We.key===Jn)if(We.tag===4&&We.stateNode.containerInfo===ut.containerInfo&&We.stateNode.implementation===ut.implementation){y(rt,We.sibling),We=z(We,ut.children||[]),We.return=rt,rt=We;break e}else{y(rt,We);break}else d(rt,We);We=We.sibling}We=GB(ut,rt.mode,$t),We.return=rt,rt=We}return le(rt);case Re:return Jn=ut._init,ua(rt,We,Jn(ut._payload),$t)}if(It(ut))return Rn(rt,We,ut,$t);if(Et(ut))return Nn(rt,We,ut,$t);x2(rt,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"?(ut=""+ut,We!==null&&We.tag===6?(y(rt,We.sibling),We=z(We,ut),We.return=rt,rt=We):(y(rt,We),We=HB(ut,rt.mode,$t),We.return=rt,rt=We),le(rt)):y(rt,We)}return ua}var S_=woe(!0),Eoe=woe(!1),MS={},mc=Sh(MS),PS=Sh(MS),CS=Sh(MS);function Um(s){if(s===MS)throw Error(l(174));return s}function lB(s,d){switch(Ei(CS,d),Ei(PS,s),Ei(mc,MS),s=d.nodeType,s){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:cr(null,"");break;default:s=s===8?d.parentNode:d,d=s.namespaceURI||null,s=s.tagName,d=cr(d,s)}Di(mc),Ei(mc,d)}function w_(){Di(mc),Di(PS),Di(CS)}function Toe(s){Um(CS.current);var d=Um(mc.current),y=cr(d,s.type);d!==y&&(Ei(PS,s),Ei(mc,y))}function uB(s){PS.current===s&&(Di(mc),Di(PS))}var Gi=Sh(0);function S2(s){for(var d=s;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var cB=[];function dB(){for(var s=0;s<cB.length;s++)cB[s]._workInProgressVersionPrimary=null;cB.length=0}var w2=ne.ReactCurrentDispatcher,fB=ne.ReactCurrentBatchConfig,Bm=0,Wi=null,Ca=null,Va=null,E2=!1,AS=!1,kS=0,lxe=0;function wo(){throw Error(l(321))}function hB(s,d){if(d===null)return!1;for(var y=0;y<d.length&&y<s.length;y++)if(!hu(s[y],d[y]))return!1;return!0}function pB(s,d,y,M,z,q){if(Bm=q,Wi=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,w2.current=s===null||s.memoizedState===null?fxe:hxe,s=y(M,z),AS){q=0;do{if(AS=!1,kS=0,25<=q)throw Error(l(301));q+=1,Va=Ca=null,d.updateQueue=null,w2.current=pxe,s=y(M,z)}while(AS)}if(w2.current=P2,d=Ca!==null&&Ca.next!==null,Bm=0,Va=Ca=Wi=null,E2=!1,d)throw Error(l(300));return s}function mB(){var s=kS!==0;return kS=0,s}function gc(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Va===null?Wi.memoizedState=Va=s:Va=Va.next=s,Va}function wl(){if(Ca===null){var s=Wi.alternate;s=s!==null?s.memoizedState:null}else s=Ca.next;var d=Va===null?Wi.memoizedState:Va.next;if(d!==null)Va=d,Ca=s;else{if(s===null)throw Error(l(310));Ca=s,s={memoizedState:Ca.memoizedState,baseState:Ca.baseState,baseQueue:Ca.baseQueue,queue:Ca.queue,next:null},Va===null?Wi.memoizedState=Va=s:Va=Va.next=s}return Va}function IS(s,d){return typeof d=="function"?d(s):d}function gB(s){var d=wl(),y=d.queue;if(y===null)throw Error(l(311));y.lastRenderedReducer=s;var M=Ca,z=M.baseQueue,q=y.pending;if(q!==null){if(z!==null){var le=z.next;z.next=q.next,q.next=le}M.baseQueue=z=q,y.pending=null}if(z!==null){q=z.next,M=M.baseState;var Pe=le=null,je=null,gt=q;do{var zt=gt.lane;if((Bm&zt)===zt)je!==null&&(je=je.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),M=gt.hasEagerState?gt.eagerState:s(M,gt.action);else{var Ht={lane:zt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};je===null?(Pe=je=Ht,le=M):je=je.next=Ht,Wi.lanes|=zt,zm|=zt}gt=gt.next}while(gt!==null&&gt!==q);je===null?le=M:je.next=Pe,hu(M,d.memoizedState)||(_s=!0),d.memoizedState=M,d.baseState=le,d.baseQueue=je,y.lastRenderedState=M}if(s=y.interleaved,s!==null){z=s;do q=z.lane,Wi.lanes|=q,zm|=q,z=z.next;while(z!==s)}else z===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function vB(s){var d=wl(),y=d.queue;if(y===null)throw Error(l(311));y.lastRenderedReducer=s;var M=y.dispatch,z=y.pending,q=d.memoizedState;if(z!==null){y.pending=null;var le=z=z.next;do q=s(q,le.action),le=le.next;while(le!==z);hu(q,d.memoizedState)||(_s=!0),d.memoizedState=q,d.baseQueue===null&&(d.baseState=q),y.lastRenderedState=q}return[q,M]}function Moe(){}function Poe(s,d){var y=Wi,M=wl(),z=d(),q=!hu(M.memoizedState,z);if(q&&(M.memoizedState=z,_s=!0),M=M.queue,_B(koe.bind(null,y,M,s),[s]),M.getSnapshot!==d||q||Va!==null&&Va.memoizedState.tag&1){if(y.flags|=2048,RS(9,Aoe.bind(null,y,M,z,d),void 0,null),Ha===null)throw Error(l(349));Bm&30||Coe(y,d,z)}return z}function Coe(s,d,y){s.flags|=16384,s={getSnapshot:d,value:y},d=Wi.updateQueue,d===null?(d={lastEffect:null,stores:null},Wi.updateQueue=d,d.stores=[s]):(y=d.stores,y===null?d.stores=[s]:y.push(s))}function Aoe(s,d,y,M){d.value=y,d.getSnapshot=M,Ioe(d)&&Roe(s)}function koe(s,d,y){return y(function(){Ioe(d)&&Roe(s)})}function Ioe(s){var d=s.getSnapshot;s=s.value;try{var y=d();return!hu(s,y)}catch{return!0}}function Roe(s){var d=jd(s,1);d!==null&&_u(d,s,1,-1)}function Doe(s){var d=gc();return typeof s=="function"&&(s=s()),d.memoizedState=d.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:IS,lastRenderedState:s},d.queue=s,s=s.dispatch=dxe.bind(null,Wi,s),[d.memoizedState,s]}function RS(s,d,y,M){return s={tag:s,create:d,destroy:y,deps:M,next:null},d=Wi.updateQueue,d===null?(d={lastEffect:null,stores:null},Wi.updateQueue=d,d.lastEffect=s.next=s):(y=d.lastEffect,y===null?d.lastEffect=s.next=s:(M=y.next,y.next=s,s.next=M,d.lastEffect=s)),s}function Ooe(){return wl().memoizedState}function T2(s,d,y,M){var z=gc();Wi.flags|=s,z.memoizedState=RS(1|d,y,void 0,M===void 0?null:M)}function M2(s,d,y,M){var z=wl();M=M===void 0?null:M;var q=void 0;if(Ca!==null){var le=Ca.memoizedState;if(q=le.destroy,M!==null&&hB(M,le.deps)){z.memoizedState=RS(d,y,q,M);return}}Wi.flags|=s,z.memoizedState=RS(1|d,y,q,M)}function Noe(s,d){return T2(8390656,8,s,d)}function _B(s,d){return M2(2048,8,s,d)}function Loe(s,d){return M2(4,2,s,d)}function Foe(s,d){return M2(4,4,s,d)}function Uoe(s,d){if(typeof d=="function")return s=s(),d(s),function(){d(null)};if(d!=null)return s=s(),d.current=s,function(){d.current=null}}function Boe(s,d,y){return y=y!=null?y.concat([s]):null,M2(4,4,Uoe.bind(null,d,s),y)}function yB(){}function zoe(s,d){var y=wl();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&hB(d,M[1])?M[0]:(y.memoizedState=[s,d],s)}function joe(s,d){var y=wl();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&hB(d,M[1])?M[0]:(s=s(),y.memoizedState=[s,d],s)}function Voe(s,d,y){return Bm&21?(hu(y,d)||(y=hae(),Wi.lanes|=y,zm|=y,s.baseState=!0),d):(s.baseState&&(s.baseState=!1,_s=!0),s.memoizedState=y)}function uxe(s,d){var y=ii;ii=y!==0&&4>y?y:4,s(!0);var M=fB.transition;fB.transition={};try{s(!1),d()}finally{ii=y,fB.transition=M}}function Hoe(){return wl().memoizedState}function cxe(s,d,y){var M=kh(s);if(y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},Goe(s))Woe(d,y);else if(y=poe(s,d,y,M),y!==null){var z=Yo();_u(y,s,M,z),qoe(y,d,M)}}function dxe(s,d,y){var M=kh(s),z={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(Goe(s))Woe(d,z);else{var q=s.alternate;if(s.lanes===0&&(q===null||q.lanes===0)&&(q=d.lastRenderedReducer,q!==null))try{var le=d.lastRenderedState,Pe=q(le,y);if(z.hasEagerState=!0,z.eagerState=Pe,hu(Pe,le)){var je=d.interleaved;je===null?(z.next=z,iB(d)):(z.next=je.next,je.next=z),d.interleaved=z;return}}catch{}y=poe(s,d,z,M),y!==null&&(z=Yo(),_u(y,s,M,z),qoe(y,d,M))}}function Goe(s){var d=s.alternate;return s===Wi||d!==null&&d===Wi}function Woe(s,d){AS=E2=!0;var y=s.pending;y===null?d.next=d:(d.next=y.next,y.next=d),s.pending=d}function qoe(s,d,y){if(y&4194240){var M=d.lanes;M&=s.pendingLanes,y|=M,d.lanes=y,x5(s,y)}}var P2={readContext:Sl,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},fxe={readContext:Sl,useCallback:function(s,d){return gc().memoizedState=[s,d===void 0?null:d],s},useContext:Sl,useEffect:Noe,useImperativeHandle:function(s,d,y){return y=y!=null?y.concat([s]):null,T2(4194308,4,Uoe.bind(null,d,s),y)},useLayoutEffect:function(s,d){return T2(4194308,4,s,d)},useInsertionEffect:function(s,d){return T2(4,2,s,d)},useMemo:function(s,d){var y=gc();return d=d===void 0?null:d,s=s(),y.memoizedState=[s,d],s},useReducer:function(s,d,y){var M=gc();return d=y!==void 0?y(d):d,M.memoizedState=M.baseState=d,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},M.queue=s,s=s.dispatch=cxe.bind(null,Wi,s),[M.memoizedState,s]},useRef:function(s){var d=gc();return s={current:s},d.memoizedState=s},useState:Doe,useDebugValue:yB,useDeferredValue:function(s){return gc().memoizedState=s},useTransition:function(){var s=Doe(!1),d=s[0];return s=uxe.bind(null,s[1]),gc().memoizedState=s,[d,s]},useMutableSource:function(){},useSyncExternalStore:function(s,d,y){var M=Wi,z=gc();if(Bi){if(y===void 0)throw Error(l(407));y=y()}else{if(y=d(),Ha===null)throw Error(l(349));Bm&30||Coe(M,d,y)}z.memoizedState=y;var q={value:y,getSnapshot:d};return z.queue=q,Noe(koe.bind(null,M,q,s),[s]),M.flags|=2048,RS(9,Aoe.bind(null,M,q,y,d),void 0,null),y},useId:function(){var s=gc(),d=Ha.identifierPrefix;if(Bi){var y=zd,M=Bd;y=(M&~(1<<32-fu(M)-1)).toString(32)+y,d=":"+d+"R"+y,y=kS++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=lxe++,d=":"+d+"r"+y.toString(32)+":";return s.memoizedState=d},unstable_isNewReconciler:!1},hxe={readContext:Sl,useCallback:zoe,useContext:Sl,useEffect:_B,useImperativeHandle:Boe,useInsertionEffect:Loe,useLayoutEffect:Foe,useMemo:joe,useReducer:gB,useRef:Ooe,useState:function(){return gB(IS)},useDebugValue:yB,useDeferredValue:function(s){var d=wl();return Voe(d,Ca.memoizedState,s)},useTransition:function(){var s=gB(IS)[0],d=wl().memoizedState;return[s,d]},useMutableSource:Moe,useSyncExternalStore:Poe,useId:Hoe,unstable_isNewReconciler:!1},pxe={readContext:Sl,useCallback:zoe,useContext:Sl,useEffect:_B,useImperativeHandle:Boe,useInsertionEffect:Loe,useLayoutEffect:Foe,useMemo:joe,useReducer:vB,useRef:Ooe,useState:function(){return vB(IS)},useDebugValue:yB,useDeferredValue:function(s){var d=wl();return Ca===null?d.memoizedState=s:Voe(d,Ca.memoizedState,s)},useTransition:function(){var s=vB(IS)[0],d=wl().memoizedState;return[s,d]},useMutableSource:Moe,useSyncExternalStore:Poe,useId:Hoe,unstable_isNewReconciler:!1};function E_(s,d){try{var y="",M=d;do y+=Ke(M),M=M.return;while(M);var z=y}catch(q){z=`
Error generating stack: `+q.message+`
`+q.stack}return{value:s,source:d,stack:z,digest:null}}function bB(s,d,y){return{value:s,source:null,stack:y??null,digest:d??null}}function xB(s,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var mxe=typeof WeakMap=="function"?WeakMap:Map;function Xoe(s,d,y){y=Vd(-1,y),y.tag=3,y.payload={element:null};var M=d.value;return y.callback=function(){O2||(O2=!0,NB=M),xB(s,d)},y}function Koe(s,d,y){y=Vd(-1,y),y.tag=3;var M=s.type.getDerivedStateFromError;if(typeof M=="function"){var z=d.value;y.payload=function(){return M(z)},y.callback=function(){xB(s,d)}}var q=s.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(y.callback=function(){xB(s,d),typeof M!="function"&&(Ch===null?Ch=new Set([this]):Ch.add(this));var le=d.stack;this.componentDidCatch(d.value,{componentStack:le!==null?le:""})}),y}function Yoe(s,d,y){var M=s.pingCache;if(M===null){M=s.pingCache=new mxe;var z=new Set;M.set(d,z)}else z=M.get(d),z===void 0&&(z=new Set,M.set(d,z));z.has(y)||(z.add(y),s=Axe.bind(null,s,d,y),d.then(s,s))}function $oe(s){do{var d;if((d=s.tag===13)&&(d=s.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return s;s=s.return}while(s!==null);return null}function Zoe(s,d,y,M,z){return s.mode&1?(s.flags|=65536,s.lanes=z,s):(s===d?s.flags|=65536:(s.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Vd(-1,1),d.tag=2,Mh(y,d,1))),y.lanes|=1),s)}var gxe=ne.ReactCurrentOwner,_s=!1;function Ko(s,d,y,M){d.child=s===null?Eoe(d,null,y,M):S_(d,s.child,y,M)}function Joe(s,d,y,M,z){y=y.render;var q=d.ref;return x_(d,z),M=pB(s,d,y,M,q,z),y=mB(),s!==null&&!_s?(d.updateQueue=s.updateQueue,d.flags&=-2053,s.lanes&=~z,Hd(s,d,z)):(Bi&&y&&Y5(d),d.flags|=1,Ko(s,d,M,z),d.child)}function Qoe(s,d,y,M,z){if(s===null){var q=y.type;return typeof q=="function"&&!VB(q)&&q.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=q,ese(s,d,q,M,z)):(s=z2(y.type,null,M,d,d.mode,z),s.ref=d.ref,s.return=d,d.child=s)}if(q=s.child,!(s.lanes&z)){var le=q.memoizedProps;if(y=y.compare,y=y!==null?y:_S,y(le,M)&&s.ref===d.ref)return Hd(s,d,z)}return d.flags|=1,s=Rh(q,M),s.ref=d.ref,s.return=d,d.child=s}function ese(s,d,y,M,z){if(s!==null){var q=s.memoizedProps;if(_S(q,M)&&s.ref===d.ref)if(_s=!1,d.pendingProps=M=q,(s.lanes&z)!==0)s.flags&131072&&(_s=!0);else return d.lanes=s.lanes,Hd(s,d,z)}return SB(s,d,y,M,z)}function tse(s,d,y){var M=d.pendingProps,z=M.children,q=s!==null?s.memoizedState:null;if(M.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(M_,Hs),Hs|=y;else{if(!(y&1073741824))return s=q!==null?q.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:s,cachePool:null,transitions:null},d.updateQueue=null,Ei(M_,Hs),Hs|=s,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=q!==null?q.baseLanes:y,Ei(M_,Hs),Hs|=M}else q!==null?(M=q.baseLanes|y,d.memoizedState=null):M=y,Ei(M_,Hs),Hs|=M;return Ko(s,d,z,y),d.child}function nse(s,d){var y=d.ref;(s===null&&y!==null||s!==null&&s.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function SB(s,d,y,M,z){var q=vs(y)?Om:So.current;return q=g_(d,q),x_(d,z),y=pB(s,d,y,M,q,z),M=mB(),s!==null&&!_s?(d.updateQueue=s.updateQueue,d.flags&=-2053,s.lanes&=~z,Hd(s,d,z)):(Bi&&M&&Y5(d),d.flags|=1,Ko(s,d,y,z),d.child)}function rse(s,d,y,M,z){if(vs(y)){var q=!0;d2(d)}else q=!1;if(x_(d,z),d.stateNode===null)A2(s,d),boe(d,y,M),sB(d,y,M,z),M=!0;else if(s===null){var le=d.stateNode,Pe=d.memoizedProps;le.props=Pe;var je=le.context,gt=y.contextType;typeof gt=="object"&&gt!==null?gt=Sl(gt):(gt=vs(y)?Om:So.current,gt=g_(d,gt));var zt=y.getDerivedStateFromProps,Ht=typeof zt=="function"||typeof le.getSnapshotBeforeUpdate=="function";Ht||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Pe!==M||je!==gt)&&xoe(d,le,M,gt),Th=!1;var Ft=d.memoizedState;le.state=Ft,y2(d,M,le,z),je=d.memoizedState,Pe!==M||Ft!==je||gs.current||Th?(typeof zt=="function"&&(oB(d,y,zt,M),je=d.memoizedState),(Pe=Th||yoe(d,y,Pe,M,Ft,je,gt))?(Ht||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount()),typeof le.componentDidMount=="function"&&(d.flags|=4194308)):(typeof le.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=je),le.props=M,le.state=je,le.context=gt,M=Pe):(typeof le.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{le=d.stateNode,moe(s,d),Pe=d.memoizedProps,gt=d.type===d.elementType?Pe:mu(d.type,Pe),le.props=gt,Ht=d.pendingProps,Ft=le.context,je=y.contextType,typeof je=="object"&&je!==null?je=Sl(je):(je=vs(y)?Om:So.current,je=g_(d,je));var _n=y.getDerivedStateFromProps;(zt=typeof _n=="function"||typeof le.getSnapshotBeforeUpdate=="function")||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(Pe!==Ht||Ft!==je)&&xoe(d,le,M,je),Th=!1,Ft=d.memoizedState,le.state=Ft,y2(d,M,le,z);var Rn=d.memoizedState;Pe!==Ht||Ft!==Rn||gs.current||Th?(typeof _n=="function"&&(oB(d,y,_n,M),Rn=d.memoizedState),(gt=Th||yoe(d,y,gt,M,Ft,Rn,je)||!1)?(zt||typeof le.UNSAFE_componentWillUpdate!="function"&&typeof le.componentWillUpdate!="function"||(typeof le.componentWillUpdate=="function"&&le.componentWillUpdate(M,Rn,je),typeof le.UNSAFE_componentWillUpdate=="function"&&le.UNSAFE_componentWillUpdate(M,Rn,je)),typeof le.componentDidUpdate=="function"&&(d.flags|=4),typeof le.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof le.componentDidUpdate!="function"||Pe===s.memoizedProps&&Ft===s.memoizedState||(d.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Pe===s.memoizedProps&&Ft===s.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=Rn),le.props=M,le.state=Rn,le.context=je,M=gt):(typeof le.componentDidUpdate!="function"||Pe===s.memoizedProps&&Ft===s.memoizedState||(d.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||Pe===s.memoizedProps&&Ft===s.memoizedState||(d.flags|=1024),M=!1)}return wB(s,d,y,M,q,z)}function wB(s,d,y,M,z,q){nse(s,d);var le=(d.flags&128)!==0;if(!M&&!le)return z&&soe(d,y,!1),Hd(s,d,q);M=d.stateNode,gxe.current=d;var Pe=le&&typeof y.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,s!==null&&le?(d.child=S_(d,s.child,null,q),d.child=S_(d,null,Pe,q)):Ko(s,d,Pe,q),d.memoizedState=M.state,z&&soe(d,y,!0),d.child}function ise(s){var d=s.stateNode;d.pendingContext?aoe(s,d.pendingContext,d.pendingContext!==d.context):d.context&&aoe(s,d.context,!1),lB(s,d.containerInfo)}function ase(s,d,y,M,z){return y_(),Q5(z),d.flags|=256,Ko(s,d,y,M),d.child}var EB={dehydrated:null,treeContext:null,retryLane:0};function TB(s){return{baseLanes:s,cachePool:null,transitions:null}}function ose(s,d,y){var M=d.pendingProps,z=Gi.current,q=!1,le=(d.flags&128)!==0,Pe;if((Pe=le)||(Pe=s!==null&&s.memoizedState===null?!1:(z&2)!==0),Pe?(q=!0,d.flags&=-129):(s===null||s.memoizedState!==null)&&(z|=1),Ei(Gi,z&1),s===null)return J5(d),s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(d.mode&1?s.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(le=M.children,s=M.fallback,q?(M=d.mode,q=d.child,le={mode:"hidden",children:le},!(M&1)&&q!==null?(q.childLanes=0,q.pendingProps=le):q=j2(le,M,0,null),s=Gm(s,M,y,null),q.return=d,s.return=d,q.sibling=s,d.child=q,d.child.memoizedState=TB(y),d.memoizedState=EB,s):MB(d,le));if(z=s.memoizedState,z!==null&&(Pe=z.dehydrated,Pe!==null))return vxe(s,d,le,M,Pe,z,y);if(q){q=M.fallback,le=d.mode,z=s.child,Pe=z.sibling;var je={mode:"hidden",children:M.children};return!(le&1)&&d.child!==z?(M=d.child,M.childLanes=0,M.pendingProps=je,d.deletions=null):(M=Rh(z,je),M.subtreeFlags=z.subtreeFlags&14680064),Pe!==null?q=Rh(Pe,q):(q=Gm(q,le,y,null),q.flags|=2),q.return=d,M.return=d,M.sibling=q,d.child=M,M=q,q=d.child,le=s.child.memoizedState,le=le===null?TB(y):{baseLanes:le.baseLanes|y,cachePool:null,transitions:le.transitions},q.memoizedState=le,q.childLanes=s.childLanes&~y,d.memoizedState=EB,M}return q=s.child,s=q.sibling,M=Rh(q,{mode:"visible",children:M.children}),!(d.mode&1)&&(M.lanes=y),M.return=d,M.sibling=null,s!==null&&(y=d.deletions,y===null?(d.deletions=[s],d.flags|=16):y.push(s)),d.child=M,d.memoizedState=null,M}function MB(s,d){return d=j2({mode:"visible",children:d},s.mode,0,null),d.return=s,s.child=d}function C2(s,d,y,M){return M!==null&&Q5(M),S_(d,s.child,null,y),s=MB(d,d.pendingProps.children),s.flags|=2,d.memoizedState=null,s}function vxe(s,d,y,M,z,q,le){if(y)return d.flags&256?(d.flags&=-257,M=bB(Error(l(422))),C2(s,d,le,M)):d.memoizedState!==null?(d.child=s.child,d.flags|=128,null):(q=M.fallback,z=d.mode,M=j2({mode:"visible",children:M.children},z,0,null),q=Gm(q,z,le,null),q.flags|=2,M.return=d,q.return=d,M.sibling=q,d.child=M,d.mode&1&&S_(d,s.child,null,le),d.child.memoizedState=TB(le),d.memoizedState=EB,q);if(!(d.mode&1))return C2(s,d,le,null);if(z.data==="$!"){if(M=z.nextSibling&&z.nextSibling.dataset,M)var Pe=M.dgst;return M=Pe,q=Error(l(419)),M=bB(q,M,void 0),C2(s,d,le,M)}if(Pe=(le&s.childLanes)!==0,_s||Pe){if(M=Ha,M!==null){switch(le&-le){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=z&(M.suspendedLanes|le)?0:z,z!==0&&z!==q.retryLane&&(q.retryLane=z,jd(s,z),_u(M,s,z,-1))}return jB(),M=bB(Error(l(421))),C2(s,d,le,M)}return z.data==="$?"?(d.flags|=128,d.child=s.child,d=kxe.bind(null,s),z._reactRetry=d,null):(s=q.treeContext,Vs=xh(z.nextSibling),js=d,Bi=!0,pu=null,s!==null&&(bl[xl++]=Bd,bl[xl++]=zd,bl[xl++]=Nm,Bd=s.id,zd=s.overflow,Nm=d),d=MB(d,M.children),d.flags|=4096,d)}function sse(s,d,y){s.lanes|=d;var M=s.alternate;M!==null&&(M.lanes|=d),rB(s.return,d,y)}function PB(s,d,y,M,z){var q=s.memoizedState;q===null?s.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:z}:(q.isBackwards=d,q.rendering=null,q.renderingStartTime=0,q.last=M,q.tail=y,q.tailMode=z)}function lse(s,d,y){var M=d.pendingProps,z=M.revealOrder,q=M.tail;if(Ko(s,d,M.children,y),M=Gi.current,M&2)M=M&1|2,d.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=d.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sse(s,y,d);else if(s.tag===19)sse(s,y,d);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===d)break e;for(;s.sibling===null;){if(s.return===null||s.return===d)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}M&=1}if(Ei(Gi,M),!(d.mode&1))d.memoizedState=null;else switch(z){case"forwards":for(y=d.child,z=null;y!==null;)s=y.alternate,s!==null&&S2(s)===null&&(z=y),y=y.sibling;y=z,y===null?(z=d.child,d.child=null):(z=y.sibling,y.sibling=null),PB(d,!1,z,y,q);break;case"backwards":for(y=null,z=d.child,d.child=null;z!==null;){if(s=z.alternate,s!==null&&S2(s)===null){d.child=z;break}s=z.sibling,z.sibling=y,y=z,z=s}PB(d,!0,y,null,q);break;case"together":PB(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function A2(s,d){!(d.mode&1)&&s!==null&&(s.alternate=null,d.alternate=null,d.flags|=2)}function Hd(s,d,y){if(s!==null&&(d.dependencies=s.dependencies),zm|=d.lanes,!(y&d.childLanes))return null;if(s!==null&&d.child!==s.child)throw Error(l(153));if(d.child!==null){for(s=d.child,y=Rh(s,s.pendingProps),d.child=y,y.return=d;s.sibling!==null;)s=s.sibling,y=y.sibling=Rh(s,s.pendingProps),y.return=d;y.sibling=null}return d.child}function _xe(s,d,y){switch(d.tag){case 3:ise(d),y_();break;case 5:Toe(d);break;case 1:vs(d.type)&&d2(d);break;case 4:lB(d,d.stateNode.containerInfo);break;case 10:var M=d.type._context,z=d.memoizedProps.value;Ei(g2,M._currentValue),M._currentValue=z;break;case 13:if(M=d.memoizedState,M!==null)return M.dehydrated!==null?(Ei(Gi,Gi.current&1),d.flags|=128,null):y&d.child.childLanes?ose(s,d,y):(Ei(Gi,Gi.current&1),s=Hd(s,d,y),s!==null?s.sibling:null);Ei(Gi,Gi.current&1);break;case 19:if(M=(y&d.childLanes)!==0,s.flags&128){if(M)return lse(s,d,y);d.flags|=128}if(z=d.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ei(Gi,Gi.current),M)break;return null;case 22:case 23:return d.lanes=0,tse(s,d,y)}return Hd(s,d,y)}var use,CB,cse,dse;use=function(s,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},CB=function(){},cse=function(s,d,y,M){var z=s.memoizedProps;if(z!==M){s=d.stateNode,Um(mc.current);var q=null;switch(y){case"input":z=pt(s,z),M=pt(s,M),q=[];break;case"select":z=fe({},z,{value:void 0}),M=fe({},M,{value:void 0}),q=[];break;case"textarea":z=Lt(s,z),M=Lt(s,M),q=[];break;default:typeof z.onClick!="function"&&typeof M.onClick=="function"&&(s.onclick=l2)}i_(y,M);var le;y=null;for(gt in z)if(!M.hasOwnProperty(gt)&&z.hasOwnProperty(gt)&&z[gt]!=null)if(gt==="style"){var Pe=z[gt];for(le in Pe)Pe.hasOwnProperty(le)&&(y||(y={}),y[le]="")}else gt!=="dangerouslySetInnerHTML"&&gt!=="children"&&gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(p.hasOwnProperty(gt)?q||(q=[]):(q=q||[]).push(gt,null));for(gt in M){var je=M[gt];if(Pe=z?.[gt],M.hasOwnProperty(gt)&&je!==Pe&&(je!=null||Pe!=null))if(gt==="style")if(Pe){for(le in Pe)!Pe.hasOwnProperty(le)||je&&je.hasOwnProperty(le)||(y||(y={}),y[le]="");for(le in je)je.hasOwnProperty(le)&&Pe[le]!==je[le]&&(y||(y={}),y[le]=je[le])}else y||(q||(q=[]),q.push(gt,y)),y=je;else gt==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,Pe=Pe?Pe.__html:void 0,je!=null&&Pe!==je&&(q=q||[]).push(gt,je)):gt==="children"?typeof je!="string"&&typeof je!="number"||(q=q||[]).push(gt,""+je):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&(p.hasOwnProperty(gt)?(je!=null&&gt==="onScroll"&&Ri("scroll",s),q||Pe===je||(q=[])):(q=q||[]).push(gt,je))}y&&(q=q||[]).push("style",y);var gt=q;(d.updateQueue=gt)&&(d.flags|=4)}},dse=function(s,d,y,M){y!==M&&(d.flags|=4)};function DS(s,d){if(!Bi)switch(s.tailMode){case"hidden":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?s.tail=null:y.sibling=null;break;case"collapsed":y=s.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?d||s.tail===null?s.tail=null:s.tail.sibling=null:M.sibling=null}}function Eo(s){var d=s.alternate!==null&&s.alternate.child===s.child,y=0,M=0;if(d)for(var z=s.child;z!==null;)y|=z.lanes|z.childLanes,M|=z.subtreeFlags&14680064,M|=z.flags&14680064,z.return=s,z=z.sibling;else for(z=s.child;z!==null;)y|=z.lanes|z.childLanes,M|=z.subtreeFlags,M|=z.flags,z.return=s,z=z.sibling;return s.subtreeFlags|=M,s.childLanes=y,d}function yxe(s,d,y){var M=d.pendingProps;switch($5(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Eo(d),null;case 1:return vs(d.type)&&c2(),Eo(d),null;case 3:return M=d.stateNode,w_(),Di(gs),Di(So),dB(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(s===null||s.child===null)&&(m2(d)?d.flags|=4:s===null||s.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,pu!==null&&(UB(pu),pu=null))),CB(s,d),Eo(d),null;case 5:uB(d);var z=Um(CS.current);if(y=d.type,s!==null&&d.stateNode!=null)cse(s,d,y,M,z),s.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(l(166));return Eo(d),null}if(s=Um(mc.current),m2(d)){M=d.stateNode,y=d.type;var q=d.memoizedProps;switch(M[pc]=d,M[wS]=q,s=(d.mode&1)!==0,y){case"dialog":Ri("cancel",M),Ri("close",M);break;case"iframe":case"object":case"embed":Ri("load",M);break;case"video":case"audio":for(z=0;z<bS.length;z++)Ri(bS[z],M);break;case"source":Ri("error",M);break;case"img":case"image":case"link":Ri("error",M),Ri("load",M);break;case"details":Ri("toggle",M);break;case"input":dt(M,q),Ri("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!q.multiple},Ri("invalid",M);break;case"textarea":kt(M,q),Ri("invalid",M)}i_(y,q),z=null;for(var le in q)if(q.hasOwnProperty(le)){var Pe=q[le];le==="children"?typeof Pe=="string"?M.textContent!==Pe&&(q.suppressHydrationWarning!==!0&&s2(M.textContent,Pe,s),z=["children",Pe]):typeof Pe=="number"&&M.textContent!==""+Pe&&(q.suppressHydrationWarning!==!0&&s2(M.textContent,Pe,s),z=["children",""+Pe]):p.hasOwnProperty(le)&&Pe!=null&&le==="onScroll"&&Ri("scroll",M)}switch(y){case"input":Gn(M),Ye(M,q,!0);break;case"textarea":Gn(M),Vn(M);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(M.onclick=l2)}M=z,d.updateQueue=M,M!==null&&(d.flags|=4)}else{le=z.nodeType===9?z:z.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Wr(y)),s==="http://www.w3.org/1999/xhtml"?y==="script"?(s=le.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof M.is=="string"?s=le.createElement(y,{is:M.is}):(s=le.createElement(y),y==="select"&&(le=s,M.multiple?le.multiple=!0:M.size&&(le.size=M.size))):s=le.createElementNS(s,y),s[pc]=d,s[wS]=M,use(s,d,!1,!1),d.stateNode=s;e:{switch(le=tS(y,M),y){case"dialog":Ri("cancel",s),Ri("close",s),z=M;break;case"iframe":case"object":case"embed":Ri("load",s),z=M;break;case"video":case"audio":for(z=0;z<bS.length;z++)Ri(bS[z],s);z=M;break;case"source":Ri("error",s),z=M;break;case"img":case"image":case"link":Ri("error",s),Ri("load",s),z=M;break;case"details":Ri("toggle",s),z=M;break;case"input":dt(s,M),z=pt(s,M),Ri("invalid",s);break;case"option":z=M;break;case"select":s._wrapperState={wasMultiple:!!M.multiple},z=fe({},M,{value:void 0}),Ri("invalid",s);break;case"textarea":kt(s,M),z=Lt(s,M),Ri("invalid",s);break;default:z=M}i_(y,z),Pe=z;for(q in Pe)if(Pe.hasOwnProperty(q)){var je=Pe[q];q==="style"?r_(s,je):q==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,je!=null&&ph(s,je)):q==="children"?typeof je=="string"?(y!=="textarea"||je!=="")&&xo(s,je):typeof je=="number"&&xo(s,""+je):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(p.hasOwnProperty(q)?je!=null&&q==="onScroll"&&Ri("scroll",s):je!=null&&re(s,q,je,le))}switch(y){case"input":Gn(s),Ye(s,M,!1);break;case"textarea":Gn(s),Vn(s);break;case"option":M.value!=null&&s.setAttribute("value",""+nn(M.value));break;case"select":s.multiple=!!M.multiple,q=M.value,q!=null?nt(s,!!M.multiple,q,!1):M.defaultValue!=null&&nt(s,!!M.multiple,M.defaultValue,!0);break;default:typeof z.onClick=="function"&&(s.onclick=l2)}switch(y){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Eo(d),null;case 6:if(s&&d.stateNode!=null)dse(s,d,s.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(l(166));if(y=Um(CS.current),Um(mc.current),m2(d)){if(M=d.stateNode,y=d.memoizedProps,M[pc]=d,(q=M.nodeValue!==y)&&(s=js,s!==null))switch(s.tag){case 3:s2(M.nodeValue,y,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&s2(M.nodeValue,y,(s.mode&1)!==0)}q&&(d.flags|=4)}else M=(y.nodeType===9?y:y.ownerDocument).createTextNode(M),M[pc]=d,d.stateNode=M}return Eo(d),null;case 13:if(Di(Gi),M=d.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bi&&Vs!==null&&d.mode&1&&!(d.flags&128))hoe(),y_(),d.flags|=98560,q=!1;else if(q=m2(d),M!==null&&M.dehydrated!==null){if(s===null){if(!q)throw Error(l(318));if(q=d.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(l(317));q[pc]=d}else y_(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Eo(d),q=!1}else pu!==null&&(UB(pu),pu=null),q=!0;if(!q)return d.flags&65536?d:null}return d.flags&128?(d.lanes=y,d):(M=M!==null,M!==(s!==null&&s.memoizedState!==null)&&M&&(d.child.flags|=8192,d.mode&1&&(s===null||Gi.current&1?Aa===0&&(Aa=3):jB())),d.updateQueue!==null&&(d.flags|=4),Eo(d),null);case 4:return w_(),CB(s,d),s===null&&xS(d.stateNode.containerInfo),Eo(d),null;case 10:return nB(d.type._context),Eo(d),null;case 17:return vs(d.type)&&c2(),Eo(d),null;case 19:if(Di(Gi),q=d.memoizedState,q===null)return Eo(d),null;if(M=(d.flags&128)!==0,le=q.rendering,le===null)if(M)DS(q,!1);else{if(Aa!==0||s!==null&&s.flags&128)for(s=d.child;s!==null;){if(le=S2(s),le!==null){for(d.flags|=128,DS(q,!1),M=le.updateQueue,M!==null&&(d.updateQueue=M,d.flags|=4),d.subtreeFlags=0,M=y,y=d.child;y!==null;)q=y,s=M,q.flags&=14680066,le=q.alternate,le===null?(q.childLanes=0,q.lanes=s,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=le.childLanes,q.lanes=le.lanes,q.child=le.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=le.memoizedProps,q.memoizedState=le.memoizedState,q.updateQueue=le.updateQueue,q.type=le.type,s=le.dependencies,q.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),y=y.sibling;return Ei(Gi,Gi.current&1|2),d.child}s=s.sibling}q.tail!==null&&la()>P_&&(d.flags|=128,M=!0,DS(q,!1),d.lanes=4194304)}else{if(!M)if(s=S2(le),s!==null){if(d.flags|=128,M=!0,y=s.updateQueue,y!==null&&(d.updateQueue=y,d.flags|=4),DS(q,!0),q.tail===null&&q.tailMode==="hidden"&&!le.alternate&&!Bi)return Eo(d),null}else 2*la()-q.renderingStartTime>P_&&y!==1073741824&&(d.flags|=128,M=!0,DS(q,!1),d.lanes=4194304);q.isBackwards?(le.sibling=d.child,d.child=le):(y=q.last,y!==null?y.sibling=le:d.child=le,q.last=le)}return q.tail!==null?(d=q.tail,q.rendering=d,q.tail=d.sibling,q.renderingStartTime=la(),d.sibling=null,y=Gi.current,Ei(Gi,M?y&1|2:y&1),d):(Eo(d),null);case 22:case 23:return zB(),M=d.memoizedState!==null,s!==null&&s.memoizedState!==null!==M&&(d.flags|=8192),M&&d.mode&1?Hs&1073741824&&(Eo(d),d.subtreeFlags&6&&(d.flags|=8192)):Eo(d),null;case 24:return null;case 25:return null}throw Error(l(156,d.tag))}function bxe(s,d){switch($5(d),d.tag){case 1:return vs(d.type)&&c2(),s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 3:return w_(),Di(gs),Di(So),dB(),s=d.flags,s&65536&&!(s&128)?(d.flags=s&-65537|128,d):null;case 5:return uB(d),null;case 13:if(Di(Gi),s=d.memoizedState,s!==null&&s.dehydrated!==null){if(d.alternate===null)throw Error(l(340));y_()}return s=d.flags,s&65536?(d.flags=s&-65537|128,d):null;case 19:return Di(Gi),null;case 4:return w_(),null;case 10:return nB(d.type._context),null;case 22:case 23:return zB(),null;case 24:return null;default:return null}}var k2=!1,To=!1,xxe=typeof WeakSet=="function"?WeakSet:Set,En=null;function T_(s,d){var y=s.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){ea(s,d,M)}else y.current=null}function fse(s,d,y){try{y()}catch(M){ea(s,d,M)}}var hse=!1;function Sxe(s,d){if(j5=Xk,s=jae(),N5(s)){if("selectionStart"in s)var y={start:s.selectionStart,end:s.selectionEnd};else e:{y=(y=s.ownerDocument)&&y.defaultView||window;var M=y.getSelection&&y.getSelection();if(M&&M.rangeCount!==0){y=M.anchorNode;var z=M.anchorOffset,q=M.focusNode;M=M.focusOffset;try{y.nodeType,q.nodeType}catch{y=null;break e}var le=0,Pe=-1,je=-1,gt=0,zt=0,Ht=s,Ft=null;t:for(;;){for(var _n;Ht!==y||z!==0&&Ht.nodeType!==3||(Pe=le+z),Ht!==q||M!==0&&Ht.nodeType!==3||(je=le+M),Ht.nodeType===3&&(le+=Ht.nodeValue.length),(_n=Ht.firstChild)!==null;)Ft=Ht,Ht=_n;for(;;){if(Ht===s)break t;if(Ft===y&&++gt===z&&(Pe=le),Ft===q&&++zt===M&&(je=le),(_n=Ht.nextSibling)!==null)break;Ht=Ft,Ft=Ht.parentNode}Ht=_n}y=Pe===-1||je===-1?null:{start:Pe,end:je}}else y=null}y=y||{start:0,end:0}}else y=null;for(V5={focusedElem:s,selectionRange:y},Xk=!1,En=d;En!==null;)if(d=En,s=d.child,(d.subtreeFlags&1028)!==0&&s!==null)s.return=d,En=s;else for(;En!==null;){d=En;try{var Rn=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Rn!==null){var Nn=Rn.memoizedProps,ua=Rn.memoizedState,rt=d.stateNode,We=rt.getSnapshotBeforeUpdate(d.elementType===d.type?Nn:mu(d.type,Nn),ua);rt.__reactInternalSnapshotBeforeUpdate=We}break;case 3:var ut=d.stateNode.containerInfo;ut.nodeType===1?ut.textContent="":ut.nodeType===9&&ut.documentElement&&ut.removeChild(ut.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch($t){ea(d,d.return,$t)}if(s=d.sibling,s!==null){s.return=d.return,En=s;break}En=d.return}return Rn=hse,hse=!1,Rn}function OS(s,d,y){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var z=M=M.next;do{if((z.tag&s)===s){var q=z.destroy;z.destroy=void 0,q!==void 0&&fse(d,y,q)}z=z.next}while(z!==M)}}function I2(s,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&s)===s){var M=y.create;y.destroy=M()}y=y.next}while(y!==d)}}function AB(s){var d=s.ref;if(d!==null){var y=s.stateNode;s.tag,s=y,typeof d=="function"?d(s):d.current=s}}function pse(s){var d=s.alternate;d!==null&&(s.alternate=null,pse(d)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(d=s.stateNode,d!==null&&(delete d[pc],delete d[wS],delete d[q5],delete d[ixe],delete d[axe])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function mse(s){return s.tag===5||s.tag===3||s.tag===4}function gse(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mse(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kB(s,d,y){var M=s.tag;if(M===5||M===6)s=s.stateNode,d?y.nodeType===8?y.parentNode.insertBefore(s,d):y.insertBefore(s,d):(y.nodeType===8?(d=y.parentNode,d.insertBefore(s,y)):(d=y,d.appendChild(s)),y=y._reactRootContainer,y!=null||d.onclick!==null||(d.onclick=l2));else if(M!==4&&(s=s.child,s!==null))for(kB(s,d,y),s=s.sibling;s!==null;)kB(s,d,y),s=s.sibling}function IB(s,d,y){var M=s.tag;if(M===5||M===6)s=s.stateNode,d?y.insertBefore(s,d):y.appendChild(s);else if(M!==4&&(s=s.child,s!==null))for(IB(s,d,y),s=s.sibling;s!==null;)IB(s,d,y),s=s.sibling}var uo=null,gu=!1;function Ph(s,d,y){for(y=y.child;y!==null;)vse(s,d,y),y=y.sibling}function vse(s,d,y){if(hc&&typeof hc.onCommitFiberUnmount=="function")try{hc.onCommitFiberUnmount(jk,y)}catch{}switch(y.tag){case 5:To||T_(y,d);case 6:var M=uo,z=gu;uo=null,Ph(s,d,y),uo=M,gu=z,uo!==null&&(gu?(s=uo,y=y.stateNode,s.nodeType===8?s.parentNode.removeChild(y):s.removeChild(y)):uo.removeChild(y.stateNode));break;case 18:uo!==null&&(gu?(s=uo,y=y.stateNode,s.nodeType===8?W5(s.parentNode,y):s.nodeType===1&&W5(s,y),fS(s)):W5(uo,y.stateNode));break;case 4:M=uo,z=gu,uo=y.stateNode.containerInfo,gu=!0,Ph(s,d,y),uo=M,gu=z;break;case 0:case 11:case 14:case 15:if(!To&&(M=y.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){z=M=M.next;do{var q=z,le=q.destroy;q=q.tag,le!==void 0&&(q&2||q&4)&&fse(y,d,le),z=z.next}while(z!==M)}Ph(s,d,y);break;case 1:if(!To&&(T_(y,d),M=y.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=y.memoizedProps,M.state=y.memoizedState,M.componentWillUnmount()}catch(Pe){ea(y,d,Pe)}Ph(s,d,y);break;case 21:Ph(s,d,y);break;case 22:y.mode&1?(To=(M=To)||y.memoizedState!==null,Ph(s,d,y),To=M):Ph(s,d,y);break;default:Ph(s,d,y)}}function _se(s){var d=s.updateQueue;if(d!==null){s.updateQueue=null;var y=s.stateNode;y===null&&(y=s.stateNode=new xxe),d.forEach(function(M){var z=Ixe.bind(null,s,M);y.has(M)||(y.add(M),M.then(z,z))})}}function vu(s,d){var y=d.deletions;if(y!==null)for(var M=0;M<y.length;M++){var z=y[M];try{var q=s,le=d,Pe=le;e:for(;Pe!==null;){switch(Pe.tag){case 5:uo=Pe.stateNode,gu=!1;break e;case 3:uo=Pe.stateNode.containerInfo,gu=!0;break e;case 4:uo=Pe.stateNode.containerInfo,gu=!0;break e}Pe=Pe.return}if(uo===null)throw Error(l(160));vse(q,le,z),uo=null,gu=!1;var je=z.alternate;je!==null&&(je.return=null),z.return=null}catch(gt){ea(z,d,gt)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)yse(d,s),d=d.sibling}function yse(s,d){var y=s.alternate,M=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(vu(d,s),vc(s),M&4){try{OS(3,s,s.return),I2(3,s)}catch(Nn){ea(s,s.return,Nn)}try{OS(5,s,s.return)}catch(Nn){ea(s,s.return,Nn)}}break;case 1:vu(d,s),vc(s),M&512&&y!==null&&T_(y,y.return);break;case 5:if(vu(d,s),vc(s),M&512&&y!==null&&T_(y,y.return),s.flags&32){var z=s.stateNode;try{xo(z,"")}catch(Nn){ea(s,s.return,Nn)}}if(M&4&&(z=s.stateNode,z!=null)){var q=s.memoizedProps,le=y!==null?y.memoizedProps:q,Pe=s.type,je=s.updateQueue;if(s.updateQueue=null,je!==null)try{Pe==="input"&&q.type==="radio"&&q.name!=null&&Ee(z,q),tS(Pe,le);var gt=tS(Pe,q);for(le=0;le<je.length;le+=2){var zt=je[le],Ht=je[le+1];zt==="style"?r_(z,Ht):zt==="dangerouslySetInnerHTML"?ph(z,Ht):zt==="children"?xo(z,Ht):re(z,zt,Ht,gt)}switch(Pe){case"input":Se(z,q);break;case"textarea":Rt(z,q);break;case"select":var Ft=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!q.multiple;var _n=q.value;_n!=null?nt(z,!!q.multiple,_n,!1):Ft!==!!q.multiple&&(q.defaultValue!=null?nt(z,!!q.multiple,q.defaultValue,!0):nt(z,!!q.multiple,q.multiple?[]:"",!1))}z[wS]=q}catch(Nn){ea(s,s.return,Nn)}}break;case 6:if(vu(d,s),vc(s),M&4){if(s.stateNode===null)throw Error(l(162));z=s.stateNode,q=s.memoizedProps;try{z.nodeValue=q}catch(Nn){ea(s,s.return,Nn)}}break;case 3:if(vu(d,s),vc(s),M&4&&y!==null&&y.memoizedState.isDehydrated)try{fS(d.containerInfo)}catch(Nn){ea(s,s.return,Nn)}break;case 4:vu(d,s),vc(s);break;case 13:vu(d,s),vc(s),z=s.child,z.flags&8192&&(q=z.memoizedState!==null,z.stateNode.isHidden=q,!q||z.alternate!==null&&z.alternate.memoizedState!==null||(OB=la())),M&4&&_se(s);break;case 22:if(zt=y!==null&&y.memoizedState!==null,s.mode&1?(To=(gt=To)||zt,vu(d,s),To=gt):vu(d,s),vc(s),M&8192){if(gt=s.memoizedState!==null,(s.stateNode.isHidden=gt)&&!zt&&s.mode&1)for(En=s,zt=s.child;zt!==null;){for(Ht=En=zt;En!==null;){switch(Ft=En,_n=Ft.child,Ft.tag){case 0:case 11:case 14:case 15:OS(4,Ft,Ft.return);break;case 1:T_(Ft,Ft.return);var Rn=Ft.stateNode;if(typeof Rn.componentWillUnmount=="function"){M=Ft,y=Ft.return;try{d=M,Rn.props=d.memoizedProps,Rn.state=d.memoizedState,Rn.componentWillUnmount()}catch(Nn){ea(M,y,Nn)}}break;case 5:T_(Ft,Ft.return);break;case 22:if(Ft.memoizedState!==null){Sse(Ht);continue}}_n!==null?(_n.return=Ft,En=_n):Sse(Ht)}zt=zt.sibling}e:for(zt=null,Ht=s;;){if(Ht.tag===5){if(zt===null){zt=Ht;try{z=Ht.stateNode,gt?(q=z.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(Pe=Ht.stateNode,je=Ht.memoizedProps.style,le=je!=null&&je.hasOwnProperty("display")?je.display:null,Pe.style.display=Im("display",le))}catch(Nn){ea(s,s.return,Nn)}}}else if(Ht.tag===6){if(zt===null)try{Ht.stateNode.nodeValue=gt?"":Ht.memoizedProps}catch(Nn){ea(s,s.return,Nn)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===s)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===s)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===s)break e;zt===Ht&&(zt=null),Ht=Ht.return}zt===Ht&&(zt=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:vu(d,s),vc(s),M&4&&_se(s);break;case 21:break;default:vu(d,s),vc(s)}}function vc(s){var d=s.flags;if(d&2){try{e:{for(var y=s.return;y!==null;){if(mse(y)){var M=y;break e}y=y.return}throw Error(l(160))}switch(M.tag){case 5:var z=M.stateNode;M.flags&32&&(xo(z,""),M.flags&=-33);var q=gse(s);IB(s,q,z);break;case 3:case 4:var le=M.stateNode.containerInfo,Pe=gse(s);kB(s,Pe,le);break;default:throw Error(l(161))}}catch(je){ea(s,s.return,je)}s.flags&=-3}d&4096&&(s.flags&=-4097)}function wxe(s,d,y){En=s,bse(s)}function bse(s,d,y){for(var M=(s.mode&1)!==0;En!==null;){var z=En,q=z.child;if(z.tag===22&&M){var le=z.memoizedState!==null||k2;if(!le){var Pe=z.alternate,je=Pe!==null&&Pe.memoizedState!==null||To;Pe=k2;var gt=To;if(k2=le,(To=je)&&!gt)for(En=z;En!==null;)le=En,je=le.child,le.tag===22&&le.memoizedState!==null?wse(z):je!==null?(je.return=le,En=je):wse(z);for(;q!==null;)En=q,bse(q),q=q.sibling;En=z,k2=Pe,To=gt}xse(s)}else z.subtreeFlags&8772&&q!==null?(q.return=z,En=q):xse(s)}}function xse(s){for(;En!==null;){var d=En;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:To||I2(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!To)if(y===null)M.componentDidMount();else{var z=d.elementType===d.type?y.memoizedProps:mu(d.type,y.memoizedProps);M.componentDidUpdate(z,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var q=d.updateQueue;q!==null&&voe(d,q,M);break;case 3:var le=d.updateQueue;if(le!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=d.child.stateNode;break;case 1:y=d.child.stateNode}voe(d,le,y)}break;case 5:var Pe=d.stateNode;if(y===null&&d.flags&4){y=Pe;var je=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":je.autoFocus&&y.focus();break;case"img":je.src&&(y.src=je.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var gt=d.alternate;if(gt!==null){var zt=gt.memoizedState;if(zt!==null){var Ht=zt.dehydrated;Ht!==null&&fS(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}To||d.flags&512&&AB(d)}catch(Ft){ea(d,d.return,Ft)}}if(d===s){En=null;break}if(y=d.sibling,y!==null){y.return=d.return,En=y;break}En=d.return}}function Sse(s){for(;En!==null;){var d=En;if(d===s){En=null;break}var y=d.sibling;if(y!==null){y.return=d.return,En=y;break}En=d.return}}function wse(s){for(;En!==null;){var d=En;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{I2(4,d)}catch(je){ea(d,y,je)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var z=d.return;try{M.componentDidMount()}catch(je){ea(d,z,je)}}var q=d.return;try{AB(d)}catch(je){ea(d,q,je)}break;case 5:var le=d.return;try{AB(d)}catch(je){ea(d,le,je)}}}catch(je){ea(d,d.return,je)}if(d===s){En=null;break}var Pe=d.sibling;if(Pe!==null){Pe.return=d.return,En=Pe;break}En=d.return}}var Exe=Math.ceil,R2=ne.ReactCurrentDispatcher,RB=ne.ReactCurrentOwner,El=ne.ReactCurrentBatchConfig,qr=0,Ha=null,Sa=null,co=0,Hs=0,M_=Sh(0),Aa=0,NS=null,zm=0,D2=0,DB=0,LS=null,ys=null,OB=0,P_=1/0,Gd=null,O2=!1,NB=null,Ch=null,N2=!1,Ah=null,L2=0,FS=0,LB=null,F2=-1,U2=0;function Yo(){return qr&6?la():F2!==-1?F2:F2=la()}function kh(s){return s.mode&1?qr&2&&co!==0?co&-co:sxe.transition!==null?(U2===0&&(U2=hae()),U2):(s=ii,s!==0||(s=window.event,s=s===void 0?16:Sae(s.type)),s):1}function _u(s,d,y,M){if(50<FS)throw FS=0,LB=null,Error(l(185));sS(s,y,M),(!(qr&2)||s!==Ha)&&(s===Ha&&(!(qr&2)&&(D2|=y),Aa===4&&Ih(s,co)),bs(s,M),y===1&&qr===0&&!(d.mode&1)&&(P_=la()+500,f2&&Eh()))}function bs(s,d){var y=s.callbackNode;ube(s,d);var M=Gk(s,s===Ha?co:0);if(M===0)y!==null&&cae(y),s.callbackNode=null,s.callbackPriority=0;else if(d=M&-M,s.callbackPriority!==d){if(y!=null&&cae(y),d===1)s.tag===0?oxe(Tse.bind(null,s)):loe(Tse.bind(null,s)),nxe(function(){!(qr&6)&&Eh()}),y=null;else{switch(pae(M)){case 1:y=_5;break;case 4:y=dae;break;case 16:y=zk;break;case 536870912:y=fae;break;default:y=zk}y=Dse(y,Ese.bind(null,s))}s.callbackPriority=d,s.callbackNode=y}}function Ese(s,d){if(F2=-1,U2=0,qr&6)throw Error(l(327));var y=s.callbackNode;if(C_()&&s.callbackNode!==y)return null;var M=Gk(s,s===Ha?co:0);if(M===0)return null;if(M&30||M&s.expiredLanes||d)d=B2(s,M);else{d=M;var z=qr;qr|=2;var q=Pse();(Ha!==s||co!==d)&&(Gd=null,P_=la()+500,Vm(s,d));do try{Pxe();break}catch(Pe){Mse(s,Pe)}while(!0);tB(),R2.current=q,qr=z,Sa!==null?d=0:(Ha=null,co=0,d=Aa)}if(d!==0){if(d===2&&(z=y5(s),z!==0&&(M=z,d=FB(s,z))),d===1)throw y=NS,Vm(s,0),Ih(s,M),bs(s,la()),y;if(d===6)Ih(s,M);else{if(z=s.current.alternate,!(M&30)&&!Txe(z)&&(d=B2(s,M),d===2&&(q=y5(s),q!==0&&(M=q,d=FB(s,q))),d===1))throw y=NS,Vm(s,0),Ih(s,M),bs(s,la()),y;switch(s.finishedWork=z,s.finishedLanes=M,d){case 0:case 1:throw Error(l(345));case 2:Hm(s,ys,Gd);break;case 3:if(Ih(s,M),(M&130023424)===M&&(d=OB+500-la(),10<d)){if(Gk(s,0)!==0)break;if(z=s.suspendedLanes,(z&M)!==M){Yo(),s.pingedLanes|=s.suspendedLanes&z;break}s.timeoutHandle=G5(Hm.bind(null,s,ys,Gd),d);break}Hm(s,ys,Gd);break;case 4:if(Ih(s,M),(M&4194240)===M)break;for(d=s.eventTimes,z=-1;0<M;){var le=31-fu(M);q=1<<le,le=d[le],le>z&&(z=le),M&=~q}if(M=z,M=la()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*Exe(M/1960))-M,10<M){s.timeoutHandle=G5(Hm.bind(null,s,ys,Gd),M);break}Hm(s,ys,Gd);break;case 5:Hm(s,ys,Gd);break;default:throw Error(l(329))}}}return bs(s,la()),s.callbackNode===y?Ese.bind(null,s):null}function FB(s,d){var y=LS;return s.current.memoizedState.isDehydrated&&(Vm(s,d).flags|=256),s=B2(s,d),s!==2&&(d=ys,ys=y,d!==null&&UB(d)),s}function UB(s){ys===null?ys=s:ys.push.apply(ys,s)}function Txe(s){for(var d=s;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var z=y[M],q=z.getSnapshot;z=z.value;try{if(!hu(q(),z))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ih(s,d){for(d&=~DB,d&=~D2,s.suspendedLanes|=d,s.pingedLanes&=~d,s=s.expirationTimes;0<d;){var y=31-fu(d),M=1<<y;s[y]=-1,d&=~M}}function Tse(s){if(qr&6)throw Error(l(327));C_();var d=Gk(s,0);if(!(d&1))return bs(s,la()),null;var y=B2(s,d);if(s.tag!==0&&y===2){var M=y5(s);M!==0&&(d=M,y=FB(s,M))}if(y===1)throw y=NS,Vm(s,0),Ih(s,d),bs(s,la()),y;if(y===6)throw Error(l(345));return s.finishedWork=s.current.alternate,s.finishedLanes=d,Hm(s,ys,Gd),bs(s,la()),null}function BB(s,d){var y=qr;qr|=1;try{return s(d)}finally{qr=y,qr===0&&(P_=la()+500,f2&&Eh())}}function jm(s){Ah!==null&&Ah.tag===0&&!(qr&6)&&C_();var d=qr;qr|=1;var y=El.transition,M=ii;try{if(El.transition=null,ii=1,s)return s()}finally{ii=M,El.transition=y,qr=d,!(qr&6)&&Eh()}}function zB(){Hs=M_.current,Di(M_)}function Vm(s,d){s.finishedWork=null,s.finishedLanes=0;var y=s.timeoutHandle;if(y!==-1&&(s.timeoutHandle=-1,txe(y)),Sa!==null)for(y=Sa.return;y!==null;){var M=y;switch($5(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&c2();break;case 3:w_(),Di(gs),Di(So),dB();break;case 5:uB(M);break;case 4:w_();break;case 13:Di(Gi);break;case 19:Di(Gi);break;case 10:nB(M.type._context);break;case 22:case 23:zB()}y=y.return}if(Ha=s,Sa=s=Rh(s.current,null),co=Hs=d,Aa=0,NS=null,DB=D2=zm=0,ys=LS=null,Fm!==null){for(d=0;d<Fm.length;d++)if(y=Fm[d],M=y.interleaved,M!==null){y.interleaved=null;var z=M.next,q=y.pending;if(q!==null){var le=q.next;q.next=z,M.next=le}y.pending=M}Fm=null}return s}function Mse(s,d){do{var y=Sa;try{if(tB(),w2.current=P2,E2){for(var M=Wi.memoizedState;M!==null;){var z=M.queue;z!==null&&(z.pending=null),M=M.next}E2=!1}if(Bm=0,Va=Ca=Wi=null,AS=!1,kS=0,RB.current=null,y===null||y.return===null){Aa=1,NS=d,Sa=null;break}e:{var q=s,le=y.return,Pe=y,je=d;if(d=co,Pe.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var gt=je,zt=Pe,Ht=zt.tag;if(!(zt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Ft=zt.alternate;Ft?(zt.updateQueue=Ft.updateQueue,zt.memoizedState=Ft.memoizedState,zt.lanes=Ft.lanes):(zt.updateQueue=null,zt.memoizedState=null)}var _n=$oe(le);if(_n!==null){_n.flags&=-257,Zoe(_n,le,Pe,q,d),_n.mode&1&&Yoe(q,gt,d),d=_n,je=gt;var Rn=d.updateQueue;if(Rn===null){var Nn=new Set;Nn.add(je),d.updateQueue=Nn}else Rn.add(je);break e}else{if(!(d&1)){Yoe(q,gt,d),jB();break e}je=Error(l(426))}}else if(Bi&&Pe.mode&1){var ua=$oe(le);if(ua!==null){!(ua.flags&65536)&&(ua.flags|=256),Zoe(ua,le,Pe,q,d),Q5(E_(je,Pe));break e}}q=je=E_(je,Pe),Aa!==4&&(Aa=2),LS===null?LS=[q]:LS.push(q),q=le;do{switch(q.tag){case 3:q.flags|=65536,d&=-d,q.lanes|=d;var rt=Xoe(q,je,d);goe(q,rt);break e;case 1:Pe=je;var We=q.type,ut=q.stateNode;if(!(q.flags&128)&&(typeof We.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Ch===null||!Ch.has(ut)))){q.flags|=65536,d&=-d,q.lanes|=d;var $t=Koe(q,Pe,d);goe(q,$t);break e}}q=q.return}while(q!==null)}Ase(y)}catch(Bn){d=Bn,Sa===y&&y!==null&&(Sa=y=y.return);continue}break}while(!0)}function Pse(){var s=R2.current;return R2.current=P2,s===null?P2:s}function jB(){(Aa===0||Aa===3||Aa===2)&&(Aa=4),Ha===null||!(zm&268435455)&&!(D2&268435455)||Ih(Ha,co)}function B2(s,d){var y=qr;qr|=2;var M=Pse();(Ha!==s||co!==d)&&(Gd=null,Vm(s,d));do try{Mxe();break}catch(z){Mse(s,z)}while(!0);if(tB(),qr=y,R2.current=M,Sa!==null)throw Error(l(261));return Ha=null,co=0,Aa}function Mxe(){for(;Sa!==null;)Cse(Sa)}function Pxe(){for(;Sa!==null&&!ebe();)Cse(Sa)}function Cse(s){var d=Rse(s.alternate,s,Hs);s.memoizedProps=s.pendingProps,d===null?Ase(s):Sa=d,RB.current=null}function Ase(s){var d=s;do{var y=d.alternate;if(s=d.return,d.flags&32768){if(y=bxe(y,d),y!==null){y.flags&=32767,Sa=y;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Aa=6,Sa=null;return}}else if(y=yxe(y,d,Hs),y!==null){Sa=y;return}if(d=d.sibling,d!==null){Sa=d;return}Sa=d=s}while(d!==null);Aa===0&&(Aa=5)}function Hm(s,d,y){var M=ii,z=El.transition;try{El.transition=null,ii=1,Cxe(s,d,y,M)}finally{El.transition=z,ii=M}return null}function Cxe(s,d,y,M){do C_();while(Ah!==null);if(qr&6)throw Error(l(327));y=s.finishedWork;var z=s.finishedLanes;if(y===null)return null;if(s.finishedWork=null,s.finishedLanes=0,y===s.current)throw Error(l(177));s.callbackNode=null,s.callbackPriority=0;var q=y.lanes|y.childLanes;if(cbe(s,q),s===Ha&&(Sa=Ha=null,co=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||N2||(N2=!0,Dse(zk,function(){return C_(),null})),q=(y.flags&15990)!==0,y.subtreeFlags&15990||q){q=El.transition,El.transition=null;var le=ii;ii=1;var Pe=qr;qr|=4,RB.current=null,Sxe(s,y),yse(y,s),$be(V5),Xk=!!j5,V5=j5=null,s.current=y,wxe(y),tbe(),qr=Pe,ii=le,El.transition=q}else s.current=y;if(N2&&(N2=!1,Ah=s,L2=z),q=s.pendingLanes,q===0&&(Ch=null),ibe(y.stateNode),bs(s,la()),d!==null)for(M=s.onRecoverableError,y=0;y<d.length;y++)z=d[y],M(z.value,{componentStack:z.stack,digest:z.digest});if(O2)throw O2=!1,s=NB,NB=null,s;return L2&1&&s.tag!==0&&C_(),q=s.pendingLanes,q&1?s===LB?FS++:(FS=0,LB=s):FS=0,Eh(),null}function C_(){if(Ah!==null){var s=pae(L2),d=El.transition,y=ii;try{if(El.transition=null,ii=16>s?16:s,Ah===null)var M=!1;else{if(s=Ah,Ah=null,L2=0,qr&6)throw Error(l(331));var z=qr;for(qr|=4,En=s.current;En!==null;){var q=En,le=q.child;if(En.flags&16){var Pe=q.deletions;if(Pe!==null){for(var je=0;je<Pe.length;je++){var gt=Pe[je];for(En=gt;En!==null;){var zt=En;switch(zt.tag){case 0:case 11:case 15:OS(8,zt,q)}var Ht=zt.child;if(Ht!==null)Ht.return=zt,En=Ht;else for(;En!==null;){zt=En;var Ft=zt.sibling,_n=zt.return;if(pse(zt),zt===gt){En=null;break}if(Ft!==null){Ft.return=_n,En=Ft;break}En=_n}}}var Rn=q.alternate;if(Rn!==null){var Nn=Rn.child;if(Nn!==null){Rn.child=null;do{var ua=Nn.sibling;Nn.sibling=null,Nn=ua}while(Nn!==null)}}En=q}}if(q.subtreeFlags&2064&&le!==null)le.return=q,En=le;else e:for(;En!==null;){if(q=En,q.flags&2048)switch(q.tag){case 0:case 11:case 15:OS(9,q,q.return)}var rt=q.sibling;if(rt!==null){rt.return=q.return,En=rt;break e}En=q.return}}var We=s.current;for(En=We;En!==null;){le=En;var ut=le.child;if(le.subtreeFlags&2064&&ut!==null)ut.return=le,En=ut;else e:for(le=We;En!==null;){if(Pe=En,Pe.flags&2048)try{switch(Pe.tag){case 0:case 11:case 15:I2(9,Pe)}}catch(Bn){ea(Pe,Pe.return,Bn)}if(Pe===le){En=null;break e}var $t=Pe.sibling;if($t!==null){$t.return=Pe.return,En=$t;break e}En=Pe.return}}if(qr=z,Eh(),hc&&typeof hc.onPostCommitFiberRoot=="function")try{hc.onPostCommitFiberRoot(jk,s)}catch{}M=!0}return M}finally{ii=y,El.transition=d}}return!1}function kse(s,d,y){d=E_(y,d),d=Xoe(s,d,1),s=Mh(s,d,1),d=Yo(),s!==null&&(sS(s,1,d),bs(s,d))}function ea(s,d,y){if(s.tag===3)kse(s,s,y);else for(;d!==null;){if(d.tag===3){kse(d,s,y);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ch===null||!Ch.has(M))){s=E_(y,s),s=Koe(d,s,1),d=Mh(d,s,1),s=Yo(),d!==null&&(sS(d,1,s),bs(d,s));break}}d=d.return}}function Axe(s,d,y){var M=s.pingCache;M!==null&&M.delete(d),d=Yo(),s.pingedLanes|=s.suspendedLanes&y,Ha===s&&(co&y)===y&&(Aa===4||Aa===3&&(co&130023424)===co&&500>la()-OB?Vm(s,0):DB|=y),bs(s,d)}function Ise(s,d){d===0&&(s.mode&1?(d=Hk,Hk<<=1,!(Hk&130023424)&&(Hk=4194304)):d=1);var y=Yo();s=jd(s,d),s!==null&&(sS(s,d,y),bs(s,y))}function kxe(s){var d=s.memoizedState,y=0;d!==null&&(y=d.retryLane),Ise(s,y)}function Ixe(s,d){var y=0;switch(s.tag){case 13:var M=s.stateNode,z=s.memoizedState;z!==null&&(y=z.retryLane);break;case 19:M=s.stateNode;break;default:throw Error(l(314))}M!==null&&M.delete(d),Ise(s,y)}var Rse;Rse=function(s,d,y){if(s!==null)if(s.memoizedProps!==d.pendingProps||gs.current)_s=!0;else{if(!(s.lanes&y)&&!(d.flags&128))return _s=!1,_xe(s,d,y);_s=!!(s.flags&131072)}else _s=!1,Bi&&d.flags&1048576&&uoe(d,p2,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;A2(s,d),s=d.pendingProps;var z=g_(d,So.current);x_(d,y),z=pB(null,d,M,s,z,y);var q=mB();return d.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,vs(M)?(q=!0,d2(d)):q=!1,d.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,aB(d),z.updater=b2,d.stateNode=z,z._reactInternals=d,sB(d,M,s,y),d=wB(null,d,M,!0,q,y)):(d.tag=0,Bi&&q&&Y5(d),Ko(null,d,z,y),d=d.child),d;case 16:M=d.elementType;e:{switch(A2(s,d),s=d.pendingProps,z=M._init,M=z(M._payload),d.type=M,z=d.tag=Dxe(M),s=mu(M,s),z){case 0:d=SB(null,d,M,s,y);break e;case 1:d=rse(null,d,M,s,y);break e;case 11:d=Joe(null,d,M,s,y);break e;case 14:d=Qoe(null,d,M,mu(M.type,s),y);break e}throw Error(l(306,M,""))}return d;case 0:return M=d.type,z=d.pendingProps,z=d.elementType===M?z:mu(M,z),SB(s,d,M,z,y);case 1:return M=d.type,z=d.pendingProps,z=d.elementType===M?z:mu(M,z),rse(s,d,M,z,y);case 3:e:{if(ise(d),s===null)throw Error(l(387));M=d.pendingProps,q=d.memoizedState,z=q.element,moe(s,d),y2(d,M,null,y);var le=d.memoizedState;if(M=le.element,q.isDehydrated)if(q={element:M,isDehydrated:!1,cache:le.cache,pendingSuspenseBoundaries:le.pendingSuspenseBoundaries,transitions:le.transitions},d.updateQueue.baseState=q,d.memoizedState=q,d.flags&256){z=E_(Error(l(423)),d),d=ase(s,d,M,y,z);break e}else if(M!==z){z=E_(Error(l(424)),d),d=ase(s,d,M,y,z);break e}else for(Vs=xh(d.stateNode.containerInfo.firstChild),js=d,Bi=!0,pu=null,y=Eoe(d,null,M,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(y_(),M===z){d=Hd(s,d,y);break e}Ko(s,d,M,y)}d=d.child}return d;case 5:return Toe(d),s===null&&J5(d),M=d.type,z=d.pendingProps,q=s!==null?s.memoizedProps:null,le=z.children,H5(M,z)?le=null:q!==null&&H5(M,q)&&(d.flags|=32),nse(s,d),Ko(s,d,le,y),d.child;case 6:return s===null&&J5(d),null;case 13:return ose(s,d,y);case 4:return lB(d,d.stateNode.containerInfo),M=d.pendingProps,s===null?d.child=S_(d,null,M,y):Ko(s,d,M,y),d.child;case 11:return M=d.type,z=d.pendingProps,z=d.elementType===M?z:mu(M,z),Joe(s,d,M,z,y);case 7:return Ko(s,d,d.pendingProps,y),d.child;case 8:return Ko(s,d,d.pendingProps.children,y),d.child;case 12:return Ko(s,d,d.pendingProps.children,y),d.child;case 10:e:{if(M=d.type._context,z=d.pendingProps,q=d.memoizedProps,le=z.value,Ei(g2,M._currentValue),M._currentValue=le,q!==null)if(hu(q.value,le)){if(q.children===z.children&&!gs.current){d=Hd(s,d,y);break e}}else for(q=d.child,q!==null&&(q.return=d);q!==null;){var Pe=q.dependencies;if(Pe!==null){le=q.child;for(var je=Pe.firstContext;je!==null;){if(je.context===M){if(q.tag===1){je=Vd(-1,y&-y),je.tag=2;var gt=q.updateQueue;if(gt!==null){gt=gt.shared;var zt=gt.pending;zt===null?je.next=je:(je.next=zt.next,zt.next=je),gt.pending=je}}q.lanes|=y,je=q.alternate,je!==null&&(je.lanes|=y),rB(q.return,y,d),Pe.lanes|=y;break}je=je.next}}else if(q.tag===10)le=q.type===d.type?null:q.child;else if(q.tag===18){if(le=q.return,le===null)throw Error(l(341));le.lanes|=y,Pe=le.alternate,Pe!==null&&(Pe.lanes|=y),rB(le,y,d),le=q.sibling}else le=q.child;if(le!==null)le.return=q;else for(le=q;le!==null;){if(le===d){le=null;break}if(q=le.sibling,q!==null){q.return=le.return,le=q;break}le=le.return}q=le}Ko(s,d,z.children,y),d=d.child}return d;case 9:return z=d.type,M=d.pendingProps.children,x_(d,y),z=Sl(z),M=M(z),d.flags|=1,Ko(s,d,M,y),d.child;case 14:return M=d.type,z=mu(M,d.pendingProps),z=mu(M.type,z),Qoe(s,d,M,z,y);case 15:return ese(s,d,d.type,d.pendingProps,y);case 17:return M=d.type,z=d.pendingProps,z=d.elementType===M?z:mu(M,z),A2(s,d),d.tag=1,vs(M)?(s=!0,d2(d)):s=!1,x_(d,y),boe(d,M,z),sB(d,M,z,y),wB(null,d,M,!0,s,y);case 19:return lse(s,d,y);case 22:return tse(s,d,y)}throw Error(l(156,d.tag))};function Dse(s,d){return uae(s,d)}function Rxe(s,d,y,M){this.tag=s,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tl(s,d,y,M){return new Rxe(s,d,y,M)}function VB(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Dxe(s){if(typeof s=="function")return VB(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Le)return 11;if(s===Nt)return 14}return 2}function Rh(s,d){var y=s.alternate;return y===null?(y=Tl(s.tag,d,s.key,s.mode),y.elementType=s.elementType,y.type=s.type,y.stateNode=s.stateNode,y.alternate=s,s.alternate=y):(y.pendingProps=d,y.type=s.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=s.flags&14680064,y.childLanes=s.childLanes,y.lanes=s.lanes,y.child=s.child,y.memoizedProps=s.memoizedProps,y.memoizedState=s.memoizedState,y.updateQueue=s.updateQueue,d=s.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=s.sibling,y.index=s.index,y.ref=s.ref,y}function z2(s,d,y,M,z,q){var le=2;if(M=s,typeof s=="function")VB(s)&&(le=1);else if(typeof s=="string")le=5;else e:switch(s){case Ie:return Gm(y.children,z,q,d);case ye:le=8,z|=8;break;case Ne:return s=Tl(12,y,d,z|2),s.elementType=Ne,s.lanes=q,s;case Z:return s=Tl(13,y,d,z),s.elementType=Z,s.lanes=q,s;case Ge:return s=Tl(19,y,d,z),s.elementType=Ge,s.lanes=q,s;case Ce:return j2(y,z,q,d);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case et:le=10;break e;case de:le=9;break e;case Le:le=11;break e;case Nt:le=14;break e;case Re:le=16,M=null;break e}throw Error(l(130,s==null?s:typeof s,""))}return d=Tl(le,y,d,z),d.elementType=s,d.type=M,d.lanes=q,d}function Gm(s,d,y,M){return s=Tl(7,s,M,d),s.lanes=y,s}function j2(s,d,y,M){return s=Tl(22,s,M,d),s.elementType=Ce,s.lanes=y,s.stateNode={isHidden:!1},s}function HB(s,d,y){return s=Tl(6,s,null,d),s.lanes=y,s}function GB(s,d,y){return d=Tl(4,s.children!==null?s.children:[],s.key,d),d.lanes=y,d.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},d}function Oxe(s,d,y,M,z){this.tag=d,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b5(0),this.expirationTimes=b5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b5(0),this.identifierPrefix=M,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function WB(s,d,y,M,z,q,le,Pe,je){return s=new Oxe(s,d,y,Pe,je),d===1?(d=1,q===!0&&(d|=8)):d=0,q=Tl(3,null,null,d),s.current=q,q.stateNode=s,q.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},aB(q),s}function Nxe(s,d,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:M==null?null:""+M,children:s,containerInfo:d,implementation:y}}function Ose(s){if(!s)return wh;s=s._reactInternals;e:{if(Rm(s)!==s||s.tag!==1)throw Error(l(170));var d=s;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(vs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(l(171))}if(s.tag===1){var y=s.type;if(vs(y))return ooe(s,y,d)}return d}function Nse(s,d,y,M,z,q,le,Pe,je){return s=WB(y,M,!0,s,z,q,le,Pe,je),s.context=Ose(null),y=s.current,M=Yo(),z=kh(y),q=Vd(M,z),q.callback=d??null,Mh(y,q,z),s.current.lanes=z,sS(s,z,M),bs(s,M),s}function V2(s,d,y,M){var z=d.current,q=Yo(),le=kh(z);return y=Ose(y),d.context===null?d.context=y:d.pendingContext=y,d=Vd(q,le),d.payload={element:s},M=M===void 0?null:M,M!==null&&(d.callback=M),s=Mh(z,d,le),s!==null&&(_u(s,z,le,q),_2(s,z,le)),le}function H2(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function Lse(s,d){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var y=s.retryLane;s.retryLane=y!==0&&y<d?y:d}}function qB(s,d){Lse(s,d),(s=s.alternate)&&Lse(s,d)}function Lxe(){return null}var Fse=typeof reportError=="function"?reportError:function(s){console.error(s)};function XB(s){this._internalRoot=s}G2.prototype.render=XB.prototype.render=function(s){var d=this._internalRoot;if(d===null)throw Error(l(409));V2(s,d,null,null)},G2.prototype.unmount=XB.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var d=s.containerInfo;jm(function(){V2(null,s,null,null)}),d[Fd]=null}};function G2(s){this._internalRoot=s}G2.prototype.unstable_scheduleHydration=function(s){if(s){var d=vae();s={blockedOn:null,target:s,priority:d};for(var y=0;y<_h.length&&d!==0&&d<_h[y].priority;y++);_h.splice(y,0,s),y===0&&bae(s)}};function KB(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function W2(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Use(){}function Fxe(s,d,y,M,z){if(z){if(typeof M=="function"){var q=M;M=function(){var gt=H2(le);q.call(gt)}}var le=Nse(d,M,s,0,null,!1,!1,"",Use);return s._reactRootContainer=le,s[Fd]=le.current,xS(s.nodeType===8?s.parentNode:s),jm(),le}for(;z=s.lastChild;)s.removeChild(z);if(typeof M=="function"){var Pe=M;M=function(){var gt=H2(je);Pe.call(gt)}}var je=WB(s,0,!1,null,null,!1,!1,"",Use);return s._reactRootContainer=je,s[Fd]=je.current,xS(s.nodeType===8?s.parentNode:s),jm(function(){V2(d,je,y,M)}),je}function q2(s,d,y,M,z){var q=y._reactRootContainer;if(q){var le=q;if(typeof z=="function"){var Pe=z;z=function(){var je=H2(le);Pe.call(je)}}V2(d,le,s,z)}else le=Fxe(y,d,s,z,M);return H2(le)}mae=function(s){switch(s.tag){case 3:var d=s.stateNode;if(d.current.memoizedState.isDehydrated){var y=oS(d.pendingLanes);y!==0&&(x5(d,y|1),bs(d,la()),!(qr&6)&&(P_=la()+500,Eh()))}break;case 13:jm(function(){var M=jd(s,1);if(M!==null){var z=Yo();_u(M,s,1,z)}}),qB(s,1)}},S5=function(s){if(s.tag===13){var d=jd(s,134217728);if(d!==null){var y=Yo();_u(d,s,134217728,y)}qB(s,134217728)}},gae=function(s){if(s.tag===13){var d=kh(s),y=jd(s,d);if(y!==null){var M=Yo();_u(y,s,d,M)}qB(s,d)}},vae=function(){return ii},_ae=function(s,d){var y=ii;try{return ii=s,d()}finally{ii=y}},a_=function(s,d,y){switch(d){case"input":if(Se(s,y),d=y.name,y.type==="radio"&&d!=null){for(y=s;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<y.length;d++){var M=y[d];if(M!==s&&M.form===s.form){var z=u2(M);if(!z)throw Error(l(90));Xr(M),Se(M,z)}}}break;case"textarea":Rt(s,y);break;case"select":d=y.value,d!=null&&nt(s,!!y.multiple,d,!1)}},nae=BB,rae=jm;var Uxe={usingClientEntryPoint:!1,Events:[ES,p_,u2,eae,tae,BB]},US={findFiberByHostInstance:Dm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bxe={bundleType:US.bundleType,version:US.version,rendererPackageName:US.rendererPackageName,rendererConfig:US.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=sae(s),s===null?null:s.stateNode},findFiberByHostInstance:US.findFiberByHostInstance||Lxe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(BS=__REACT_DEVTOOLS_GLOBAL_HOOK__,!BS.isDisabled&&BS.supportsFiber))try{jk=BS.inject(Bxe),hc=BS}catch{}var BS;t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uxe,t.createPortal=function(s,d){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KB(d))throw Error(l(200));return Nxe(s,d,null,y)},t.createRoot=function(s,d){if(!KB(s))throw Error(l(299));var y=!1,M="",z=Fse;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onRecoverableError!==void 0&&(z=d.onRecoverableError)),d=WB(s,1,!1,null,null,y,!1,M,z),s[Fd]=d.current,xS(s.nodeType===8?s.parentNode:s),new XB(d)},t.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var d=s._reactInternals;if(d===void 0)throw typeof s.render=="function"?Error(l(188)):(s=Object.keys(s).join(","),Error(l(268,s)));return s=sae(d),s=s===null?null:s.stateNode,s},t.flushSync=function(s){return jm(s)},t.hydrate=function(s,d,y){if(!W2(d))throw Error(l(200));return q2(null,s,d,!0,y)},t.hydrateRoot=function(s,d,y){if(!KB(s))throw Error(l(405));var M=y!=null&&y.hydratedSources||null,z=!1,q="",le=Fse;if(y!=null&&(y.unstable_strictMode===!0&&(z=!0),y.identifierPrefix!==void 0&&(q=y.identifierPrefix),y.onRecoverableError!==void 0&&(le=y.onRecoverableError)),d=Nse(d,null,s,1,y??null,z,!1,q,le),s[Fd]=d.current,xS(s),M)for(s=0;s<M.length;s++)y=M[s],z=y._getVersion,z=z(y._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[y,z]:d.mutableSourceEagerHydrationData.push(y,z);return new G2(d)},t.render=function(s,d,y){if(!W2(d))throw Error(l(200));return q2(null,s,d,!1,y)},t.unmountComponentAtNode=function(s){if(!W2(s))throw Error(l(40));return s._reactRootContainer?(jm(function(){q2(null,null,s,!1,function(){s._reactRootContainer=null,s[Fd]=null})}),!0):!1},t.unstable_batchedUpdates=BB,t.unstable_renderSubtreeIntoContainer=function(s,d,y,M){if(!W2(y))throw Error(l(200));if(s==null||s._reactInternals===void 0)throw Error(l(38));return q2(s,d,y,!1,M)},t.version="18.2.0-next-9e3b772b8-20220608"}),Ma=ae((t,i)=>{function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}a(),i.exports=aO()});function AP(t){let[,i]=(0,Fu.useState)(0);return(0,Fu.useCallback)(()=>{i(a=>a+1)},[])}function ur(t,i,a){let l=(0,Fu.useCallback)(t,i),f=(0,Fu.useRef)(null);f.current?f.current.set(l):f.current=new q0.Atom(l);let p=(0,Fu.useRef)(null);return p.current||(p.current=(0,q0.prism)(()=>f.current.prism.getValue()())),Np(p.current,a)}function oO(){X0||(X0=!0,(0,kP.default)(()=>{(0,IP.unstable_batchedUpdates)(function(){for(var t,i;As.length>0;){let a=As.shift();Of.delete(a);let l;Uu&&((t=a.debug)==null||t.history.push("queue reached"));try{l=a.der.getValue()}catch(f){Uu&&((i=a.debug)==null||i.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(f),a.runUpdate();continue}l!==a.lastValue&&(a.lastValue=l,a.runUpdate())}X0=!1},1)}))}function Np(t,i){var a;let l=AP(),f=(0,Fu.useRef)(void 0);f.current||(hx++,f.current={order:hx,runUpdate:()=>{f.current.unmounted||l()},der:t,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var v;Uu&&((v=f.current.debug)==null||v.history.push("queueUpdate()")),RP(f.current)},untap:t.onStale(()=>{Uu&&f.current.debug.history.push("onStale(cb)"),f.current.queueUpdate()})},Uu&&(f.current.debug={label:i,traceOfFirstTimeRender:new Error,history:[]})),(0,Fu.useLayoutEffect)(()=>function(){f.current.unmounted=!0,f.current.untap(),mx(f.current)},[]),mx(f.current);let p=f.current.der.getValue();return f.current.lastValue=p,Uu&&((a=f.current.debug)==null||a.history.push("rendered")),p}var q0,kP,Fu,IP,Uu,pr,hx,As,Of,X0,RP,px,mx,bn=P(()=>{q0=Ut(),aa(),kP=J(fx()),Fu=J(Fe()),IP=J(Ma()),Uu=!1,pr=(t,i)=>ur(()=>(0,q0.val)(t),[t],i),hx=0,As=[],Of=new Set,X0=!1,RP=t=>{px(t),oO()},px=t=>{if(!Of.has(t))if(Of.add(t),As.length===0)As.push(t);else{let i=nx(As,a=>a.order>=t.order);i===-1?As.push(t):As[i].order>t.order&&As.splice(i,0,t)}},mx=t=>{if(!Of.has(t))return;Of.delete(t);let i=nx(As,a=>a===t);As.splice(i,1)}}),DP=ae(t=>{var i=60103,a=60106,l=60107,f=60108,p=60114,v=60109,_=60110,x=60112,w=60113,A=60120,D=60115,R=60116,C=60121,F=60122,N=60117,B=60129,j=60131;typeof Symbol=="function"&&Symbol.for&&(W=Symbol.for,i=W("react.element"),a=W("react.portal"),l=W("react.fragment"),f=W("react.strict_mode"),p=W("react.profiler"),v=W("react.provider"),_=W("react.context"),x=W("react.forward_ref"),w=W("react.suspense"),A=W("react.suspense_list"),D=W("react.memo"),R=W("react.lazy"),C=W("react.block"),F=W("react.server.block"),N=W("react.fundamental"),B=W("react.debug_trace_mode"),j=W("react.legacy_hidden"));var W;function $(Z){if(typeof Z=="object"&&Z!==null){var Ge=Z.$$typeof;switch(Ge){case i:switch(Z=Z.type,Z){case l:case p:case f:case w:case A:return Z;default:switch(Z=Z&&Z.$$typeof,Z){case _:case x:case R:case D:case v:return Z;default:return Ge}}case a:return Ge}}}var re=v,ne=i,ce=x,Te=l,Ie=R,ye=D,Ne=a,et=p,de=f,Le=w;t.ContextConsumer=_,t.ContextProvider=re,t.Element=ne,t.ForwardRef=ce,t.Fragment=Te,t.Lazy=Ie,t.Memo=ye,t.Portal=Ne,t.Profiler=et,t.StrictMode=de,t.Suspense=Le,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(Z){return $(Z)===_},t.isContextProvider=function(Z){return $(Z)===v},t.isElement=function(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===i},t.isForwardRef=function(Z){return $(Z)===x},t.isFragment=function(Z){return $(Z)===l},t.isLazy=function(Z){return $(Z)===R},t.isMemo=function(Z){return $(Z)===D},t.isPortal=function(Z){return $(Z)===a},t.isProfiler=function(Z){return $(Z)===p},t.isStrictMode=function(Z){return $(Z)===f},t.isSuspense=function(Z){return $(Z)===w},t.isValidElementType=function(Z){return typeof Z=="string"||typeof Z=="function"||Z===l||Z===p||Z===B||Z===f||Z===w||Z===A||Z===j||typeof Z=="object"&&Z!==null&&(Z.$$typeof===R||Z.$$typeof===D||Z.$$typeof===v||Z.$$typeof===_||Z.$$typeof===x||Z.$$typeof===N||Z.$$typeof===C||Z[0]===F)},t.typeOf=$}),sO=ae((t,i)=>{i.exports=DP()}),OP=ae((t,i)=>{i.exports=function(a,l,f,p){var v=f?f.call(p,a,l):void 0;if(v!==void 0)return!!v;if(a===l)return!0;if(typeof a!="object"||!a||typeof l!="object"||!l)return!1;var _=Object.keys(a),x=Object.keys(l);if(_.length!==x.length)return!1;for(var w=Object.prototype.hasOwnProperty.bind(l),A=0;A<_.length;A++){var D=_[A];if(!w(D))return!1;var R=a[D],C=l[D];if(v=f?f.call(p,R,C,D):void 0,v===!1||v===void 0&&R!==C)return!1}return!0}});function lO(t){function i(be,tt,at,ct,Ke){for(var cn=0,wt=0,nn=0,In=0,Yn,Gn,Xr=0,Q=0,pt,dt=pt=Yn=0,Ee=0,Se=0,Ye=0,Tt=0,It=at.length,nt=It-1,Lt,kt="",Rt="",Vn="",Wr="",cr;Ee<It;){if(Gn=at.charCodeAt(Ee),Ee===nt&&wt+In+nn+cn!==0&&(wt!==0&&(Gn=wt===47?10:47),In=nn=cn=0,It++,nt++),wt+In+nn+cn===0){if(Ee===nt&&(0<Se&&(kt=kt.replace(R,"")),0<kt.trim().length)){switch(Gn){case 32:case 9:case 59:case 13:case 10:break;default:kt+=at.charAt(Ee)}Gn=59}switch(Gn){case 123:for(kt=kt.trim(),Yn=kt.charCodeAt(0),pt=1,Tt=++Ee;Ee<It;){switch(Gn=at.charCodeAt(Ee)){case 123:pt++;break;case 125:pt--;break;case 47:switch(Gn=at.charCodeAt(Ee+1)){case 42:case 47:e:{for(dt=Ee+1;dt<nt;++dt)switch(at.charCodeAt(dt)){case 47:if(Gn===42&&at.charCodeAt(dt-1)===42&&Ee+2!==dt){Ee=dt+1;break e}break;case 10:if(Gn===47){Ee=dt+1;break e}}Ee=dt}}break;case 91:Gn++;case 40:Gn++;case 34:case 39:for(;Ee++<nt&&at.charCodeAt(Ee)!==Gn;);}if(pt===0)break;Ee++}switch(pt=at.substring(Tt,Ee),Yn===0&&(Yn=(kt=kt.replace(D,"").trim()).charCodeAt(0)),Yn){case 64:switch(0<Se&&(kt=kt.replace(R,"")),Gn=kt.charCodeAt(1),Gn){case 100:case 109:case 115:case 45:Se=tt;break;default:Se=Nt}if(pt=i(tt,Se,pt,Gn,Ke+1),Tt=pt.length,0<Ce&&(Se=a(Nt,kt,Ye),cr=_(3,pt,Se,tt,Le,de,Tt,Gn,Ke,ct),kt=Se.join(""),cr!==void 0&&(Tt=(pt=cr.trim()).length)===0&&(Gn=0,pt="")),0<Tt)switch(Gn){case 115:kt=kt.replace(ce,v);case 100:case 109:case 45:pt=kt+"{"+pt+"}";break;case 107:kt=kt.replace(W,"$1 $2"),pt=kt+"{"+pt+"}",pt=Ge===1||Ge===2&&p("@"+pt,3)?"@-webkit-"+pt+"@"+pt:"@"+pt;break;default:pt=kt+pt,ct===112&&(pt=(Rt+=pt,""))}else pt="";break;default:pt=i(tt,a(tt,kt,Ye),pt,ct,Ke+1)}Vn+=pt,pt=Ye=Se=dt=Yn=0,kt="",Gn=at.charCodeAt(++Ee);break;case 125:case 59:if(kt=(0<Se?kt.replace(R,""):kt).trim(),1<(Tt=kt.length))switch(dt===0&&(Yn=kt.charCodeAt(0),Yn===45||96<Yn&&123>Yn)&&(Tt=(kt=kt.replace(" ",":")).length),0<Ce&&(cr=_(1,kt,tt,be,Le,de,Rt.length,ct,Ke,ct))!==void 0&&(Tt=(kt=cr.trim()).length)===0&&(kt="\0\0"),Yn=kt.charCodeAt(0),Gn=kt.charCodeAt(1),Yn){case 0:break;case 64:if(Gn===105||Gn===99){Wr+=kt+at.charAt(Ee);break}default:kt.charCodeAt(Tt-1)!==58&&(Rt+=f(kt,Yn,Gn,kt.charCodeAt(2)))}Ye=Se=dt=Yn=0,kt="",Gn=at.charCodeAt(++Ee)}}switch(Gn){case 13:case 10:wt===47?wt=0:1+Yn===0&&ct!==107&&0<kt.length&&(Se=1,kt+="\0"),0<Ce*Et&&_(0,kt,tt,be,Le,de,Rt.length,ct,Ke,ct),de=1,Le++;break;case 59:case 125:if(wt+In+nn+cn===0){de++;break}default:switch(de++,Lt=at.charAt(Ee),Gn){case 9:case 32:if(In+cn+wt===0)switch(Xr){case 44:case 58:case 9:case 32:Lt="";break;default:Gn!==32&&(Lt=" ")}break;case 0:Lt="\\0";break;case 12:Lt="\\f";break;case 11:Lt="\\v";break;case 38:In+wt+cn===0&&(Se=Ye=1,Lt="\f"+Lt);break;case 108:if(In+wt+cn+Z===0&&0<dt)switch(Ee-dt){case 2:Xr===112&&at.charCodeAt(Ee-3)===58&&(Z=Xr);case 8:Q===111&&(Z=Q)}break;case 58:In+wt+cn===0&&(dt=Ee);break;case 44:wt+nn+In+cn===0&&(Se=1,Lt+="\r");break;case 34:case 39:wt===0&&(In=In===Gn?0:In===0?Gn:In);break;case 91:In+wt+nn===0&&cn++;break;case 93:In+wt+nn===0&&cn--;break;case 41:In+wt+cn===0&&nn--;break;case 40:In+wt+cn===0&&(Yn===0&&(2*Xr+3*Q===533||(Yn=1)),nn++);break;case 64:wt+nn+In+cn+dt+pt===0&&(pt=1);break;case 42:case 47:if(!(0<In+cn+nn))switch(wt){case 0:switch(2*Gn+3*at.charCodeAt(Ee+1)){case 235:wt=47;break;case 220:Tt=Ee,wt=42}break;case 42:Gn===47&&Xr===42&&Tt+2!==Ee&&(at.charCodeAt(Tt+2)===33&&(Rt+=at.substring(Tt,Ee+1)),Lt="",wt=0)}}wt===0&&(kt+=Lt)}Q=Xr,Xr=Gn,Ee++}if(Tt=Rt.length,0<Tt){if(Se=tt,0<Ce&&(cr=_(2,Rt,Se,be,Le,de,Tt,ct,Ke,ct),cr!==void 0&&(Rt=cr).length===0))return Wr+Rt+Vn;if(Rt=Se.join(",")+"{"+Rt+"}",Ge*Z!==0){switch(Ge!==2||p(Rt,2)||(Z=0),Z){case 111:Rt=Rt.replace(re,":-moz-$1")+Rt;break;case 112:Rt=Rt.replace($,"::-webkit-input-$1")+Rt.replace($,"::-moz-$1")+Rt.replace($,":-ms-input-$1")+Rt}Z=0}}return Wr+Rt+Vn}function a(be,tt,at){var ct=tt.trim().split(B);tt=ct;var Ke=ct.length,cn=be.length;switch(cn){case 0:case 1:var wt=0;for(be=cn===0?"":be[0]+" ";wt<Ke;++wt)tt[wt]=l(be,tt[wt],at).trim();break;default:var nn=wt=0;for(tt=[];wt<Ke;++wt)for(var In=0;In<cn;++In)tt[nn++]=l(be[In]+" ",ct[wt],at).trim()}return tt}function l(be,tt,at){var ct=tt.charCodeAt(0);switch(33>ct&&(ct=(tt=tt.trim()).charCodeAt(0)),ct){case 38:return tt.replace(j,"$1"+be.trim());case 58:return be.trim()+tt.replace(j,"$1"+be.trim());default:if(0<1*at&&0<tt.indexOf("\f"))return tt.replace(j,(be.charCodeAt(0)===58?"":"$1")+be.trim())}return be+tt}function f(be,tt,at,ct){var Ke=be+";",cn=2*tt+3*at+4*ct;if(cn===944){be=Ke.indexOf(":",9)+1;var wt=Ke.substring(be,Ke.length-1).trim();return wt=Ke.substring(0,be).trim()+wt+";",Ge===1||Ge===2&&p(wt,1)?"-webkit-"+wt+wt:wt}if(Ge===0||Ge===2&&!p(Ke,1))return Ke;switch(cn){case 1015:return Ke.charCodeAt(10)===97?"-webkit-"+Ke+Ke:Ke;case 951:return Ke.charCodeAt(3)===116?"-webkit-"+Ke+Ke:Ke;case 963:return Ke.charCodeAt(5)===110?"-webkit-"+Ke+Ke:Ke;case 1009:if(Ke.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Ke+Ke;case 978:return"-webkit-"+Ke+"-moz-"+Ke+Ke;case 1019:case 983:return"-webkit-"+Ke+"-moz-"+Ke+"-ms-"+Ke+Ke;case 883:if(Ke.charCodeAt(8)===45)return"-webkit-"+Ke+Ke;if(0<Ke.indexOf("image-set(",11))return Ke.replace(et,"$1-webkit-$2")+Ke;break;case 932:if(Ke.charCodeAt(4)===45)switch(Ke.charCodeAt(5)){case 103:return"-webkit-box-"+Ke.replace("-grow","")+"-webkit-"+Ke+"-ms-"+Ke.replace("grow","positive")+Ke;case 115:return"-webkit-"+Ke+"-ms-"+Ke.replace("shrink","negative")+Ke;case 98:return"-webkit-"+Ke+"-ms-"+Ke.replace("basis","preferred-size")+Ke}return"-webkit-"+Ke+"-ms-"+Ke+Ke;case 964:return"-webkit-"+Ke+"-ms-flex-"+Ke+Ke;case 1023:if(Ke.charCodeAt(8)!==99)break;return wt=Ke.substring(Ke.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+wt+"-webkit-"+Ke+"-ms-flex-pack"+wt+Ke;case 1005:return F.test(Ke)?Ke.replace(C,":-webkit-")+Ke.replace(C,":-moz-")+Ke:Ke;case 1e3:switch(wt=Ke.substring(13).trim(),tt=wt.indexOf("-")+1,wt.charCodeAt(0)+wt.charCodeAt(tt)){case 226:wt=Ke.replace(ne,"tb");break;case 232:wt=Ke.replace(ne,"tb-rl");break;case 220:wt=Ke.replace(ne,"lr");break;default:return Ke}return"-webkit-"+Ke+"-ms-"+wt+Ke;case 1017:if(Ke.indexOf("sticky",9)===-1)break;case 975:switch(tt=(Ke=be).length-10,wt=(Ke.charCodeAt(tt)===33?Ke.substring(0,tt):Ke).substring(be.indexOf(":",7)+1).trim(),cn=wt.charCodeAt(0)+(wt.charCodeAt(7)|0)){case 203:if(111>wt.charCodeAt(8))break;case 115:Ke=Ke.replace(wt,"-webkit-"+wt)+";"+Ke;break;case 207:case 102:Ke=Ke.replace(wt,"-webkit-"+(102<cn?"inline-":"")+"box")+";"+Ke.replace(wt,"-webkit-"+wt)+";"+Ke.replace(wt,"-ms-"+wt+"box")+";"+Ke}return Ke+";";case 938:if(Ke.charCodeAt(5)===45)switch(Ke.charCodeAt(6)){case 105:return wt=Ke.replace("-items",""),"-webkit-"+Ke+"-webkit-box-"+wt+"-ms-flex-"+wt+Ke;case 115:return"-webkit-"+Ke+"-ms-flex-item-"+Ke.replace(Ie,"")+Ke;default:return"-webkit-"+Ke+"-ms-flex-line-pack"+Ke.replace("align-content","").replace(Ie,"")+Ke}break;case 973:case 989:if(Ke.charCodeAt(3)!==45||Ke.charCodeAt(4)===122)break;case 931:case 953:if(Ne.test(be)===!0)return(wt=be.substring(be.indexOf(":")+1)).charCodeAt(0)===115?f(be.replace("stretch","fill-available"),tt,at,ct).replace(":fill-available",":stretch"):Ke.replace(wt,"-webkit-"+wt)+Ke.replace(wt,"-moz-"+wt.replace("fill-",""))+Ke;break;case 962:if(Ke="-webkit-"+Ke+(Ke.charCodeAt(5)===102?"-ms-"+Ke:"")+Ke,at+ct===211&&Ke.charCodeAt(13)===105&&0<Ke.indexOf("transform",10))return Ke.substring(0,Ke.indexOf(";",27)+1).replace(N,"$1-webkit-$2")+Ke}return Ke}function p(be,tt){var at=be.indexOf(tt===1?":":"{"),ct=be.substring(0,tt!==3?at:10);return at=be.substring(at+1,be.length-1),qe(tt!==2?ct:ct.replace(ye,"$1"),at,tt)}function v(be,tt){var at=f(tt,tt.charCodeAt(0),tt.charCodeAt(1),tt.charCodeAt(2));return at!==tt+";"?at.replace(Te," or ($1)").substring(4):"("+tt+")"}function _(be,tt,at,ct,Ke,cn,wt,nn,In,Yn){for(var Gn=0,Xr=tt,Q;Gn<Ce;++Gn)switch(Q=Re[Gn].call(A,be,Xr,at,ct,Ke,cn,wt,nn,In,Yn)){case void 0:case!1:case!0:case null:break;default:Xr=Q}if(Xr!==tt)return Xr}function x(be){switch(be){case void 0:case null:Ce=Re.length=0;break;default:if(typeof be=="function")Re[Ce++]=be;else if(typeof be=="object")for(var tt=0,at=be.length;tt<at;++tt)x(be[tt]);else Et=!!be|0}return x}function w(be){return be=be.prefix,be!==void 0&&(qe=null,be?typeof be!="function"?Ge=1:(Ge=2,qe=be):Ge=0),w}function A(be,tt){var at=be;if(33>at.charCodeAt(0)&&(at=at.trim()),fe=at,at=[fe],0<Ce){var ct=_(-1,tt,at,at,Le,de,0,0,0,0);ct!==void 0&&typeof ct=="string"&&(tt=ct)}var Ke=i(Nt,at,tt,0,0);return 0<Ce&&(ct=_(-2,Ke,at,at,Le,de,Ke.length,0,0,0),ct!==void 0&&(Ke=ct)),fe="",Z=0,de=Le=1,Ke}var D=/^\0+/g,R=/[\0\r\f]/g,C=/: */g,F=/zoo|gra/,N=/([,: ])(transform)/g,B=/,\r+?/g,j=/([\t\r\n ])*\f?&/g,W=/@(k\w+)\s*(\S*)\s*/,$=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,ce=/\(\s*(.*)\s*\)/g,Te=/([\s\S]*?);/g,Ie=/-self|flex-/g,ye=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ne=/stretch|:\s*\w+\-(?:conte|avail)/,et=/([^-])(image-set\()/,de=1,Le=1,Z=0,Ge=1,Nt=[],Re=[],Ce=0,qe=null,Et=0,fe="";return A.use=x,A.set=w,t!==void 0&&w(t),A}var NP,K0=P(()=>{NP=lO}),LP,Nf,uO=P(()=>{LP={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Nf=LP});function cO(t){var i=Object.create(null);return function(a){return i[a]===void 0&&(i[a]=t(a)),i[a]}}var FP,dO=P(()=>{FP=cO}),Y0,gx,vx,fO=P(()=>{dO(),Y0=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gx=FP(function(t){return Y0.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),vx=gx}),cs=ae(t=>{var i=typeof Symbol=="function"&&Symbol.for,a=i?Symbol.for("react.element"):60103,l=i?Symbol.for("react.portal"):60106,f=i?Symbol.for("react.fragment"):60107,p=i?Symbol.for("react.strict_mode"):60108,v=i?Symbol.for("react.profiler"):60114,_=i?Symbol.for("react.provider"):60109,x=i?Symbol.for("react.context"):60110,w=i?Symbol.for("react.async_mode"):60111,A=i?Symbol.for("react.concurrent_mode"):60111,D=i?Symbol.for("react.forward_ref"):60112,R=i?Symbol.for("react.suspense"):60113,C=i?Symbol.for("react.suspense_list"):60120,F=i?Symbol.for("react.memo"):60115,N=i?Symbol.for("react.lazy"):60116,B=i?Symbol.for("react.block"):60121,j=i?Symbol.for("react.fundamental"):60117,W=i?Symbol.for("react.responder"):60118,$=i?Symbol.for("react.scope"):60119;function re(ce){if(typeof ce=="object"&&ce!==null){var Te=ce.$$typeof;switch(Te){case a:switch(ce=ce.type,ce){case w:case A:case f:case v:case p:case R:return ce;default:switch(ce=ce&&ce.$$typeof,ce){case x:case D:case N:case F:case _:return ce;default:return Te}}case l:return Te}}}function ne(ce){return re(ce)===A}t.AsyncMode=w,t.ConcurrentMode=A,t.ContextConsumer=x,t.ContextProvider=_,t.Element=a,t.ForwardRef=D,t.Fragment=f,t.Lazy=N,t.Memo=F,t.Portal=l,t.Profiler=v,t.StrictMode=p,t.Suspense=R,t.isAsyncMode=function(ce){return ne(ce)||re(ce)===w},t.isConcurrentMode=ne,t.isContextConsumer=function(ce){return re(ce)===x},t.isContextProvider=function(ce){return re(ce)===_},t.isElement=function(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===a},t.isForwardRef=function(ce){return re(ce)===D},t.isFragment=function(ce){return re(ce)===f},t.isLazy=function(ce){return re(ce)===N},t.isMemo=function(ce){return re(ce)===F},t.isPortal=function(ce){return re(ce)===l},t.isProfiler=function(ce){return re(ce)===v},t.isStrictMode=function(ce){return re(ce)===p},t.isSuspense=function(ce){return re(ce)===R},t.isValidElementType=function(ce){return typeof ce=="string"||typeof ce=="function"||ce===f||ce===A||ce===v||ce===p||ce===R||ce===C||typeof ce=="object"&&ce!==null&&(ce.$$typeof===N||ce.$$typeof===F||ce.$$typeof===_||ce.$$typeof===x||ce.$$typeof===D||ce.$$typeof===j||ce.$$typeof===W||ce.$$typeof===$||ce.$$typeof===B)},t.typeOf=re}),sd=ae((t,i)=>{i.exports=cs()}),ld=ae((t,i)=>{var a=sd(),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},p={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},v={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[a.ForwardRef]=p,_[a.Memo]=v;function x(B){return a.isMemo(B)?v:_[B.$$typeof]||l}var w=Object.defineProperty,A=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,C=Object.getPrototypeOf,F=Object.prototype;function N(B,j,W){if(typeof j!="string"){if(F){var $=C(j);$&&$!==F&&N(B,$,W)}var re=A(j);D&&(re=re.concat(D(j)));for(var ne=x(B),ce=x(j),Te=0;Te<re.length;++Te){var Ie=re[Te];if(!f[Ie]&&!(W&&W[Ie])&&!(ce&&ce[Ie])&&!(ne&&ne[Ie])){var ye=R(j,Ie);try{w(B,Ie,ye)}catch{}}}}return B}i.exports=N});function ks(){return(ks=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}).apply(this,arguments)}function Hl(t){return typeof t=="function"}function ud(t){return t.displayName||t.name||"Component"}function Lp(t){return t&&typeof t.styledComponentId=="string"}function Gl(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(a.length>0?" Args: "+a.join(", "):""))}function $0(t){var i,a="";for(i=Math.abs(t);i>52;i=i/52|0)a=rv(i%52)+a;return(rv(i%52)+a).replace(HP,"$1-$2")}function UP(t){for(var i=0;i<t.length;i+=1){var a=t[i];if(Hl(a)&&!Lp(a))return!1}return!0}function Z0(t){var i,a,l,f,p=t===void 0?Rs:t,v=p.options,_=v===void 0?Rs:v,x=p.plugins,w=x===void 0?Uf:x,A=new NP(_),D=[],R=(function(N){function B(j){if(j)try{N(j+"}")}catch{}}return function(j,W,$,re,ne,ce,Te,Ie,ye,Ne){switch(j){case 1:if(ye===0&&W.charCodeAt(0)===64)return N(W+";"),"";break;case 2:if(Ie===0)return W+"/*|*/";break;case 3:switch(Ie){case 102:case 112:return N($[0]+W),"";default:return W+(Ne===0?"/*|*/":"")}case-2:W.split("/*|*/}").forEach(B)}}})(function(N){D.push(N)}),C=function(N,B,j){return B===0&&kx.indexOf(j[a.length])!==-1||j.match(f)?N:"."+i};function F(N,B,j,W){W===void 0&&(W="&");var $=N.replace(iv,""),re=B&&j?j+" "+B+" { "+$+" }":$;return i=W,a=B,l=new RegExp("\\"+a+"\\b","g"),f=new RegExp("(\\"+a+"\\b){2,}"),A(j||!B?"":B,re)}return A.use([].concat(w,[function(N,B,j){N===2&&j.length&&j[0].lastIndexOf(a)>0&&(j[0]=j[0].replace(l,C))},R,function(N){if(N===-2){var B=D;return D=[],B}}])),F.hash=w.length?w.reduce(function(N,B){return B.name||Gl(15),ju(N,B.name)},5381).toString():"",F}function Fp(){return(0,Ci.useContext)(av)||sv}function Bu(){return(0,Ci.useContext)(ov)||Gp}function J0(t){var i=(0,Ci.useState)(t.stylisPlugins),a=i[0],l=i[1],f=Fp(),p=(0,Ci.useMemo)(function(){var _=f;return t.sheet?_=t.sheet:t.target&&(_=_.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(_=_.reconstructWithOptions({useCSSOMInjection:!1})),_},[t.disableCSSOMInjection,t.sheet,t.target]),v=(0,Ci.useMemo)(function(){return Z0({options:{prefix:!t.disableVendorPrefixes},plugins:a})},[t.disableVendorPrefixes,a]);return(0,Ci.useEffect)(function(){(0,zp.default)(a,t.stylisPlugins)||l(t.stylisPlugins)},[t.stylisPlugins]),Ci.default.createElement(av.Provider,{value:p},Ci.default.createElement(ov.Provider,{value:v},t.children))}function Q0(t){return qP.test(t)?t.replace(g,U).replace(E,"-ms-"):t}function cd(t,i,a,l){if(Array.isArray(t)){for(var f,p=[],v=0,_=t.length;v<_;v+=1)(f=cd(t[v],i,a,l))!==""&&(Array.isArray(f)?p.push.apply(p,f):p.push(f));return p}if(X(t))return"";if(Lp(t))return"."+t.styledComponentId;if(Hl(t)){if(typeof(w=t)!="function"||w.prototype&&w.prototype.isReactComponent||!i)return t;var x=t(i);return cd(x,i,a,l)}var w;return t instanceof WP?a?(t.inject(a,l),t.getName(l)):t:Ff(t)?(function A(D,R){var C,F,N=[];for(var B in D)D.hasOwnProperty(B)&&!X(D[B])&&(Array.isArray(D[B])&&D[B].isCss||Hl(D[B])?N.push(Q0(B)+":",D[B],";"):Ff(D[B])?N.push.apply(N,A(D[B],B)):N.push(Q0(B)+": "+(C=B,(F=D[B])==null||typeof F=="boolean"||F===""?"":typeof F!="number"||F===0||C in Nf||C.startsWith("--")?String(F).trim():F+"px")+";"));return R?[R+" {"].concat(N,["}"]):N})(t):t.toString()}function $a(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return Hl(t)||Ff(t)?se(cd(Lf(Uf,[t].concat(a)))):a.length===0&&t.length===1&&typeof t[0]=="string"?t:se(cd(Lf(t,a)))}function Is(t){return t.replace(Oe,"-").replace(Ze,"")}function Up(t){return typeof t=="string"&&!0}function _x(t,i,a){var l=t[a];bt(i)&&bt(l)?Bp(l,i):t[a]=i}function Bp(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];for(var f=0,p=a;f<p.length;f++){var v=p[f];if(bt(v))for(var _ in v)jt(_)&&_x(t,v[_],_)}return t}function ev(t,i,a){var l=Lp(t),f=!Up(t),p=i.attrs,v=p===void 0?Uf:p,_=i.componentId,x=_===void 0?(function(W,$){var re=typeof W!="string"?"sc":Is(W);on[re]=(on[re]||0)+1;var ne=re+"-"+it("5.3.11"+re+on[re]);return $?$+"-"+ne:ne})(i.displayName,i.parentComponentId):_,w=i.displayName,A=w===void 0?(function(W){return Up(W)?"styled."+W:"Styled("+ud(W)+")"})(t):w,D=i.displayName&&i.componentId?Is(i.displayName)+"-"+i.componentId:i.componentId||x,R=l&&t.attrs?Array.prototype.concat(t.attrs,v).filter(Boolean):v,C=i.shouldForwardProp;l&&t.shouldForwardProp&&(C=i.shouldForwardProp?function(W,$,re){return t.shouldForwardProp(W,$,re)&&i.shouldForwardProp(W,$,re)}:t.shouldForwardProp);var F,N=new Ax(a,D,l?t.componentStyle:void 0),B=N.isStatic&&v.length===0,j=function(W,$){return(function(re,ne,ce,Te){var Ie=re.attrs,ye=re.componentStyle,Ne=re.defaultProps,et=re.foldedComponentIds,de=re.shouldForwardProp,Le=re.styledComponentId,Z=re.target,Ge=(function(ct,Ke,cn){ct===void 0&&(ct=Rs);var wt=ks({},Ke,{theme:ct}),nn={};return cn.forEach(function(In){var Yn,Gn,Xr,Q=In;for(Yn in Hl(Q)&&(Q=Q(wt)),Q)wt[Yn]=nn[Yn]=Yn==="className"?(Gn=nn[Yn],Xr=Q[Yn],Gn&&Xr?Gn+" "+Xr:Gn||Xr):Q[Yn]}),[wt,nn]})(ve(ne,(0,Ci.useContext)(Vt),Ne)||Rs,ne,Ie),Nt=Ge[0],Re=Ge[1],Ce=(function(ct,Ke,cn,wt){var nn=Fp(),In=Bu(),Yn=Ke?ct.generateAndInjectStyles(Rs,nn,In):ct.generateAndInjectStyles(cn,nn,In);return Yn})(ye,Te,Nt),qe=ce,Et=Re.$as||ne.$as||Re.as||ne.as||Z,fe=Up(Et),be=Re!==ne?ks({},ne,{},Re):ne,tt={};for(var at in be)at[0]!=="$"&&at!=="as"&&(at==="forwardedAs"?tt.as=be[at]:(de?de(at,vx,Et):!fe||vx(at))&&(tt[at]=be[at]));return ne.style&&Re.style!==ne.style&&(tt.style=ks({},ne.style,{},Re.style)),tt.className=Array.prototype.concat(et,Le,Ce!==Le?Ce:null,ne.className,Re.className).filter(Boolean).join(" "),tt.ref=qe,(0,Ci.createElement)(Et,tt)})(F,W,$,B)};return j.displayName=A,(F=Ci.default.forwardRef(j)).attrs=R,F.componentStyle=N,F.displayName=A,F.shouldForwardProp=C,F.foldedComponentIds=l?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Uf,F.styledComponentId=D,F.target=l?t.target:t,F.withComponent=function(W){var $=i.componentId,re=(function(ce,Te){if(ce==null)return{};var Ie,ye,Ne={},et=Object.keys(ce);for(ye=0;ye<et.length;ye++)Ie=et[ye],Te.indexOf(Ie)>=0||(Ne[Ie]=ce[Ie]);return Ne})(i,["componentId"]),ne=$&&$+"-"+(Up(W)?W:Is(ud(W)));return ev(W,ks({},re,{attrs:R,componentId:ne}),a)},Object.defineProperty(F,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(W){this._foldedDefaultProps=l?Bp({},t.defaultProps,W):W}}),Object.defineProperty(F,"toString",{value:function(){return"."+F.styledComponentId}}),f&&(0,xx.default)(F,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),F}function yx(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];var f=$a.apply(void 0,[t].concat(a)),p="sc-global-"+it(JSON.stringify(f)),v=new wn(f,p);function _(w){var A=Fp(),D=Bu(),R=(0,Ci.useContext)(Vt),C=(0,Ci.useRef)(A.allocateGSInstance(p)).current;return A.server&&x(C,w,A,R,D),(0,Ci.useLayoutEffect)(function(){if(!A.server)return x(C,w,A,R,D),function(){return v.removeStyles(C,A)}},[C,w,A,R,D]),null}function x(w,A,D,R,C){if(v.isStatic)v.renderStyles(w,Sx,D,C);else{var F=ks({},A,{theme:ve(A,R,_.defaultProps)});v.renderStyles(w,F,D,C)}}return Ci.default.memo(_)}var bx,Ci,zp,xx,Lf,Ff,Uf,Rs,Ds,Bf,BP,Sx,wx,Wl,dd,zf,jp,Ex,Tx,Mx,Za,zP,tv,nv,Px,Vp,Hp,jP,Ja,VP,zu,HP,rv,ju,Cx,GP,Ax,iv,kx,av,ov,sv,Gp,WP,qP,g,E,U,X,se,ve,Oe,Ze,it,bt,jt,Vt,on,On,wn,_e,ht=P(()=>{bx=J(sO()),Ci=J(Fe()),zp=J(OP()),K0(),uO(),fO(),xx=J(ld()),Lf=function(t,i){for(var a=[t[0]],l=0,f=i.length;l<f;l+=1)a.push(i[l],t[l+1]);return a},Ff=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!(0,bx.typeOf)(t)},Uf=Object.freeze([]),Rs=Object.freeze({}),Ds=typeof process<"u"&&n!==void 0&&(n.REACT_APP_SC_ATTR||n.SC_ATTR)||"data-styled",Bf=typeof window<"u"&&"HTMLElement"in window,BP=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&n!==void 0&&(n.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&n.REACT_APP_SC_DISABLE_SPEEDY!==""?n.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&n.REACT_APP_SC_DISABLE_SPEEDY:n.SC_DISABLE_SPEEDY!==void 0&&n.SC_DISABLE_SPEEDY!==""&&n.SC_DISABLE_SPEEDY!=="false"&&n.SC_DISABLE_SPEEDY)),Sx={},wx=(function(){function t(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var i=t.prototype;return i.indexOfGroup=function(a){for(var l=0,f=0;f<a;f++)l+=this.groupSizes[f];return l},i.insertRules=function(a,l){if(a>=this.groupSizes.length){for(var f=this.groupSizes,p=f.length,v=p;a>=v;)(v<<=1)<0&&Gl(16,""+a);this.groupSizes=new Uint32Array(v),this.groupSizes.set(f),this.length=v;for(var _=p;_<v;_++)this.groupSizes[_]=0}for(var x=this.indexOfGroup(a+1),w=0,A=l.length;w<A;w++)this.tag.insertRule(x,l[w])&&(this.groupSizes[a]++,x++)},i.clearGroup=function(a){if(a<this.length){var l=this.groupSizes[a],f=this.indexOfGroup(a),p=f+l;this.groupSizes[a]=0;for(var v=f;v<p;v++)this.tag.deleteRule(f)}},i.getGroup=function(a){var l="";if(a>=this.length||this.groupSizes[a]===0)return l;for(var f=this.groupSizes[a],p=this.indexOfGroup(a),v=p+f,_=p;_<v;_++)l+=this.tag.getRule(_)+`/*!sc*/
`;return l},t})(),Wl=new Map,dd=new Map,zf=1,jp=function(t){if(Wl.has(t))return Wl.get(t);for(;dd.has(zf);)zf++;var i=zf++;return Wl.set(t,i),dd.set(i,t),i},Ex=function(t){return dd.get(t)},Tx=function(t,i){i>=zf&&(zf=i+1),Wl.set(t,i),dd.set(i,t)},Mx="style["+Ds+'][data-styled-version="5.3.11"]',Za=new RegExp("^"+Ds+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),zP=function(t,i,a){for(var l,f=a.split(","),p=0,v=f.length;p<v;p++)(l=f[p])&&t.registerName(i,l)},tv=function(t,i){for(var a=(i.textContent||"").split(`/*!sc*/
`),l=[],f=0,p=a.length;f<p;f++){var v=a[f].trim();if(v){var _=v.match(Za);if(_){var x=0|parseInt(_[1],10),w=_[2];x!==0&&(Tx(w,x),zP(t,w,_[3]),t.getTag().insertRules(x,l)),l.length=0}else l.push(v)}}},nv=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Px=function(t){var i=document.head,a=t||i,l=document.createElement("style"),f=(function(_){for(var x=_.childNodes,w=x.length;w>=0;w--){var A=x[w];if(A&&A.nodeType===1&&A.hasAttribute(Ds))return A}})(a),p=f!==void 0?f.nextSibling:null;l.setAttribute(Ds,"active"),l.setAttribute("data-styled-version","5.3.11");var v=nv();return v&&l.setAttribute("nonce",v),a.insertBefore(l,p),l},Vp=(function(){function t(a){var l=this.element=Px(a);l.appendChild(document.createTextNode("")),this.sheet=(function(f){if(f.sheet)return f.sheet;for(var p=document.styleSheets,v=0,_=p.length;v<_;v++){var x=p[v];if(x.ownerNode===f)return x}Gl(17)})(l),this.length=0}var i=t.prototype;return i.insertRule=function(a,l){try{return this.sheet.insertRule(l,a),this.length++,!0}catch{return!1}},i.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},i.getRule=function(a){var l=this.sheet.cssRules[a];return l!==void 0&&typeof l.cssText=="string"?l.cssText:""},t})(),Hp=(function(){function t(a){var l=this.element=Px(a);this.nodes=l.childNodes,this.length=0}var i=t.prototype;return i.insertRule=function(a,l){if(a<=this.length&&a>=0){var f=document.createTextNode(l),p=this.nodes[a];return this.element.insertBefore(f,p||null),this.length++,!0}return!1},i.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},i.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},t})(),jP=(function(){function t(a){this.rules=[],this.length=0}var i=t.prototype;return i.insertRule=function(a,l){return a<=this.length&&(this.rules.splice(a,0,l),this.length++,!0)},i.deleteRule=function(a){this.rules.splice(a,1),this.length--},i.getRule=function(a){return a<this.length?this.rules[a]:""},t})(),Ja=Bf,VP={isServer:!Bf,useCSSOMInjection:!BP},zu=(function(){function t(a,l,f){a===void 0&&(a=Rs),l===void 0&&(l={}),this.options=ks({},VP,{},a),this.gs=l,this.names=new Map(f),this.server=!!a.isServer,!this.server&&Bf&&Ja&&(Ja=!1,(function(p){for(var v=document.querySelectorAll(Mx),_=0,x=v.length;_<x;_++){var w=v[_];w&&w.getAttribute(Ds)!=="active"&&(tv(p,w),w.parentNode&&w.parentNode.removeChild(w))}})(this))}t.registerId=function(a){return jp(a)};var i=t.prototype;return i.reconstructWithOptions=function(a,l){return l===void 0&&(l=!0),new t(ks({},this.options,{},a),this.gs,l&&this.names||void 0)},i.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},i.getTag=function(){return this.tag||(this.tag=(f=(l=this.options).isServer,p=l.useCSSOMInjection,v=l.target,a=f?new jP(v):p?new Vp(v):new Hp(v),new wx(a)));var a,l,f,p,v},i.hasNameForId=function(a,l){return this.names.has(a)&&this.names.get(a).has(l)},i.registerName=function(a,l){if(jp(a),this.names.has(a))this.names.get(a).add(l);else{var f=new Set;f.add(l),this.names.set(a,f)}},i.insertRules=function(a,l,f){this.registerName(a,l),this.getTag().insertRules(jp(a),f)},i.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},i.clearRules=function(a){this.getTag().clearGroup(jp(a)),this.clearNames(a)},i.clearTag=function(){this.tag=void 0},i.toString=function(){return(function(a){for(var l=a.getTag(),f=l.length,p="",v=0;v<f;v++){var _=Ex(v);if(_!==void 0){var x=a.names.get(_),w=l.getGroup(v);if(x&&w&&x.size){var A=Ds+".g"+v+'[id="'+_+'"]',D="";x!==void 0&&x.forEach(function(R){R.length>0&&(D+=R+",")}),p+=""+w+A+'{content:"'+D+`"}/*!sc*/
`}}}return p})(this)},t})(),HP=/(a)(d)/gi,rv=function(t){return String.fromCharCode(t+(t>25?39:97))},ju=function(t,i){for(var a=i.length;a;)t=33*t^i.charCodeAt(--a);return t},Cx=function(t){return ju(5381,t)},GP=Cx("5.3.11"),Ax=(function(){function t(i,a,l){this.rules=i,this.staticRulesId="",this.isStatic=(l===void 0||l.isStatic)&&UP(i),this.componentId=a,this.baseHash=ju(GP,a),this.baseStyle=l,zu.registerId(a)}return t.prototype.generateAndInjectStyles=function(i,a,l){var f=this.componentId,p=[];if(this.baseStyle&&p.push(this.baseStyle.generateAndInjectStyles(i,a,l)),this.isStatic&&!l.hash)if(this.staticRulesId&&a.hasNameForId(f,this.staticRulesId))p.push(this.staticRulesId);else{var v=cd(this.rules,i,a,l).join(""),_=$0(ju(this.baseHash,v)>>>0);if(!a.hasNameForId(f,_)){var x=l(v,"."+_,void 0,f);a.insertRules(f,_,x)}p.push(_),this.staticRulesId=_}else{for(var w=this.rules.length,A=ju(this.baseHash,l.hash),D="",R=0;R<w;R++){var C=this.rules[R];if(typeof C=="string")D+=C;else if(C){var F=cd(C,i,a,l),N=Array.isArray(F)?F.join(""):F;A=ju(A,N+R),D+=N}}if(D){var B=$0(A>>>0);if(!a.hasNameForId(f,B)){var j=l(D,"."+B,void 0,f);a.insertRules(f,B,j)}p.push(B)}}return p.join(" ")},t})(),iv=/^\s*\/\/.*$/gm,kx=[":","[",".","#"],av=Ci.default.createContext(),av.Consumer,ov=Ci.default.createContext(),sv=(ov.Consumer,new zu),Gp=Z0(),WP=(function(){function t(i,a){var l=this;this.inject=function(f,p){p===void 0&&(p=Gp);var v=l.name+p.hash;f.hasNameForId(l.id,v)||f.insertRules(l.id,v,p(l.rules,v,"@keyframes"))},this.toString=function(){return Gl(12,String(l.name))},this.name=i,this.id="sc-keyframes-"+i,this.rules=a}return t.prototype.getName=function(i){return i===void 0&&(i=Gp),this.name+i.hash},t})(),qP=/([A-Z])/,g=/([A-Z])/g,E=/^ms-/,U=function(t){return"-"+t.toLowerCase()},X=function(t){return t==null||t===!1||t===""},se=function(t){return Array.isArray(t)&&(t.isCss=!0),t},ve=function(t,i,a){return a===void 0&&(a=Rs),t.theme!==a.theme&&t.theme||i||a.theme},Oe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ze=/(^-|-$)/g,it=function(t){return $0(Cx(t)>>>0)},bt=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},jt=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"},Vt=Ci.default.createContext(),Vt.Consumer,on={},On=function(t){return(function i(a,l,f){if(f===void 0&&(f=Rs),!(0,bx.isValidElementType)(l))return Gl(1,String(l));var p=function(){return a(l,f,$a.apply(void 0,arguments))};return p.withConfig=function(v){return i(a,l,ks({},f,{},v))},p.attrs=function(v){return i(a,l,ks({},f,{attrs:Array.prototype.concat(f.attrs,v).filter(Boolean)}))},p})(ev,t)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){On[t]=On(t)}),wn=(function(){function t(a,l){this.rules=a,this.componentId=l,this.isStatic=UP(a),zu.registerId(this.componentId+1)}var i=t.prototype;return i.createStyles=function(a,l,f,p){var v=p(cd(this.rules,l,f,p).join(""),""),_=this.componentId+a;f.insertRules(_,_,v)},i.removeStyles=function(a,l){l.clearRules(this.componentId+a)},i.renderStyles=function(a,l,f,p){a>2&&zu.registerId(this.componentId+a),this.removeStyles(a,f),this.createStyles(a,l,f,p)},t})(),(function(){function t(){var a=this;this._emitSheetCSS=function(){var l=a.instance.toString();if(!l)return"";var f=nv();return"<style "+[f&&'nonce="'+f+'"',Ds+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+l+"</style>"},this.getStyleTags=function(){return a.sealed?Gl(2):a._emitSheetCSS()},this.getStyleElement=function(){var l;if(a.sealed)return Gl(2);var f=((l={})[Ds]="",l["data-styled-version"]="5.3.11",l.dangerouslySetInnerHTML={__html:a.instance.toString()},l),p=nv();return p&&(f.nonce=p),[Ci.default.createElement("style",ks({},f,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new zu({isServer:!0}),this.sealed=!1}var i=t.prototype;return i.collectStyles=function(a){return this.sealed?Gl(2):Ci.default.createElement(J0,{sheet:this.instance},a)},i.interleaveWithNodeStream=function(a){return Gl(3)},t})(),_e=On});function er(){return er=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},er.apply(this,arguments)}var Vr=P(()=>{});function Ba(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var go=P(()=>{});function Qi(t,i){return Qi=Object.setPrototypeOf||function(a,l){return a.__proto__=l,a},Qi(t,i)}var Jr=P(()=>{});function za(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,Qi(t,i)}var Bo=P(()=>{Jr()});function ds(t){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ds(t)}var fd=P(()=>{});function hd(t){return Function.toString.call(t).indexOf("[native code]")!==-1}var pd=P(()=>{});function md(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gd=P(()=>{});function Ai(t,i,a){return md()?Ai=Reflect.construct:Ai=function(l,f,p){var v=[null];v.push.apply(v,f);var _=Function.bind.apply(l,v),x=new _;return p&&Qi(x,p.prototype),x},Ai.apply(null,arguments)}var zo=P(()=>{Jr(),gd()});function Qr(t){var i=typeof Map=="function"?new Map:void 0;return Qr=function(a){if(a===null||!hd(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(a))return i.get(a);i.set(a,l)}function l(){return Ai(a,arguments,ds(this).constructor)}return l.prototype=Object.create(a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Qi(l,a)},Qr(t)}var ql=P(()=>{fd(),Jr(),pd(),zo()}),Xl=P(()=>{});function sfe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function lfe(t,i){if(!t)return i.toLowerCase();var a=t.split("-");if(a.length>1)return a.splice(1,0,i),a.reduce(function(f,p){return""+f+sfe(p)});var l=t.replace(/([a-z])([A-Z])/g,"$1"+i+"$2");return t===l?""+t+i:l}function ufe(t,i){for(var a={},l=0;l<i.length;l+=1)(i[l]||i[l]===0)&&(a[lfe(t,S6[l])]=i[l]);return a}function g6(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];var f=a[0],p=a[1],v=p===void 0?f:p,_=a[2],x=_===void 0?f:_,w=a[3],A=w===void 0?v:w,D=[f,v,x,A];return ufe(t,D)}function hO(t){return Math.round(t*255)}function cfe(t,i,a){return hO(t)+","+hO(i)+","+hO(a)}function XP(t,i,a,l){if(l===void 0&&(l=cfe),i===0)return l(a,a,a);var f=(t%360+360)%360/60,p=(1-Math.abs(2*a-1))*i,v=p*(1-Math.abs(f%2-1)),_=0,x=0,w=0;f>=0&&f<1?(_=p,x=v):f>=1&&f<2?(_=v,x=p):f>=2&&f<3?(x=p,w=v):f>=3&&f<4?(x=v,w=p):f>=4&&f<5?(_=v,w=p):f>=5&&f<6&&(_=p,w=v);var A=a-p/2,D=_+A,R=x+A,C=w+A;return l(D,R,C)}function dfe(t){if(typeof t!="string")return t;var i=t.toLowerCase();return _O[i]?"#"+_O[i]:t}function v6(t){if(typeof t!="string")throw new Kl(3);var i=dfe(t);if(i.match(w6))return{red:parseInt(""+i[1]+i[2],16),green:parseInt(""+i[3]+i[4],16),blue:parseInt(""+i[5]+i[6],16)};if(i.match(E6)){var a=parseFloat((parseInt(""+i[7]+i[8],16)/255).toFixed(2));return{red:parseInt(""+i[1]+i[2],16),green:parseInt(""+i[3]+i[4],16),blue:parseInt(""+i[5]+i[6],16),alpha:a}}if(i.match(T6))return{red:parseInt(""+i[1]+i[1],16),green:parseInt(""+i[2]+i[2],16),blue:parseInt(""+i[3]+i[3],16)};if(i.match(M6)){var l=parseFloat((parseInt(""+i[4]+i[4],16)/255).toFixed(2));return{red:parseInt(""+i[1]+i[1],16),green:parseInt(""+i[2]+i[2],16),blue:parseInt(""+i[3]+i[3],16),alpha:l}}var f=$P.exec(i);if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)};var p=P6.exec(i.substring(0,50));if(p)return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10),alpha:parseFloat(""+p[4])};var v=C6.exec(i);if(v){var _=parseInt(""+v[1],10),x=parseInt(""+v[2],10)/100,w=parseInt(""+v[3],10)/100,A="rgb("+XP(_,x,w)+")",D=$P.exec(A);if(!D)throw new Kl(4,i,A);return{red:parseInt(""+D[1],10),green:parseInt(""+D[2],10),blue:parseInt(""+D[3],10)}}var R=A6.exec(i.substring(0,50));if(R){var C=parseInt(""+R[1],10),F=parseInt(""+R[2],10)/100,N=parseInt(""+R[3],10)/100,B="rgb("+XP(C,F,N)+")",j=$P.exec(B);if(!j)throw new Kl(4,i,B);return{red:parseInt(""+j[1],10),green:parseInt(""+j[2],10),blue:parseInt(""+j[3],10),alpha:parseFloat(""+R[4])}}throw new Kl(5)}function ffe(t){var i=t.red/255,a=t.green/255,l=t.blue/255,f=Math.max(i,a,l),p=Math.min(i,a,l),v=(f+p)/2;if(f===p)return t.alpha!==void 0?{hue:0,saturation:0,lightness:v,alpha:t.alpha}:{hue:0,saturation:0,lightness:v};var _,x=f-p,w=v>.5?x/(2-f-p):x/(f+p);switch(f){case i:_=(a-l)/x+(a<l?6:0);break;case a:_=(l-i)/x+2;break;default:_=(i-a)/x+4;break}return _*=60,t.alpha!==void 0?{hue:_,saturation:w,lightness:v,alpha:t.alpha}:{hue:_,saturation:w,lightness:v}}function pO(t){return ffe(v6(t))}function Wp(t){var i=t.toString(16);return i.length===1?"0"+i:i}function mO(t){return Wp(Math.round(t*255))}function hfe(t,i,a){return ZP("#"+mO(t)+mO(i)+mO(a))}function _6(t,i,a){return XP(t,i,a,hfe)}function pfe(t,i,a){if(typeof t=="object"&&i===void 0&&a===void 0)return _6(t.hue,t.saturation,t.lightness);throw new Kl(1)}function mfe(t,i,a,l){if(typeof t=="object"&&i===void 0&&a===void 0&&l===void 0)return t.alpha>=1?_6(t.hue,t.saturation,t.lightness):"rgba("+XP(t.hue,t.saturation,t.lightness)+","+t.alpha+")";throw new Kl(2)}function y6(t,i,a){if(typeof t=="number"&&typeof i=="number"&&typeof a=="number")return ZP("#"+Wp(t)+Wp(i)+Wp(a));if(typeof t=="object"&&i===void 0&&a===void 0)return ZP("#"+Wp(t.red)+Wp(t.green)+Wp(t.blue));throw new Kl(6)}function b6(t,i,a,l){if(typeof t=="object"&&i===void 0&&a===void 0&&l===void 0)return t.alpha>=1?y6(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new Kl(7)}function gO(t){if(typeof t!="object")throw new Kl(8);if(I6(t))return b6(t);if(k6(t))return y6(t);if(D6(t))return mfe(t);if(R6(t))return pfe(t);throw new Kl(8)}function x6(t,i,a){return function(){var l=a.concat(Array.prototype.slice.call(arguments));return l.length>=i?t.apply(this,l):x6(t,i,l)}}function KP(t){return x6(t,t.length,[])}function YP(t,i,a){return Math.max(t,Math.min(i,a))}function gfe(t,i){if(i==="transparent")return i;var a=pO(i);return gO(er({},a,{lightness:YP(0,1,a.lightness-parseFloat(t))}))}function vfe(t,i){if(i==="transparent")return i;var a=pO(i);return gO(er({},a,{lightness:YP(0,1,a.lightness+parseFloat(t))}))}function _fe(t,i){if(i==="transparent")return i;var a=pO(i);return gO(er({},a,{saturation:YP(0,1,a.saturation+parseFloat(t))}))}function yfe(t,i){if(i==="transparent")return i;var a=v6(i),l=typeof a.alpha=="number"?a.alpha:1,f=er({},a,{alpha:YP(0,1,+(l*100-parseFloat(t)*100).toFixed(2)/100)});return b6(f)}function vO(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return O6.indexOf(t)>=0&&t?er({},g6.apply(void 0,[""].concat(a)),{position:t}):g6.apply(void 0,["",t].concat(a))}var Kl,S6,_O,w6,E6,T6,M6,$P,P6,C6,A6,ZP,k6,I6,R6,D6,Ix,lv,JP,Yl,O6,Os=P(()=>{Vr(),go(),Bo(),ql(),Xl(),Kl=(function(t){za(i,t);function i(a){var l;return l=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+a+" for more information.")||this,Ba(l)}return i})(Qr(Error)),S6=["Top","Right","Bottom","Left"],_O={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},w6=/^#[a-fA-F0-9]{6}$/,E6=/^#[a-fA-F0-9]{8}$/,T6=/^#[a-fA-F0-9]{3}$/,M6=/^#[a-fA-F0-9]{4}$/,$P=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,P6=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,C6=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,A6=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ZP=function(t){return t.length===7&&t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?"#"+t[1]+t[3]+t[5]:t},k6=function(t){return typeof t.red=="number"&&typeof t.green=="number"&&typeof t.blue=="number"&&(typeof t.alpha!="number"||typeof t.alpha>"u")},I6=function(t){return typeof t.red=="number"&&typeof t.green=="number"&&typeof t.blue=="number"&&typeof t.alpha=="number"},R6=function(t){return typeof t.hue=="number"&&typeof t.saturation=="number"&&typeof t.lightness=="number"&&(typeof t.alpha!="number"||typeof t.alpha>"u")},D6=function(t){return typeof t.hue=="number"&&typeof t.saturation=="number"&&typeof t.lightness=="number"&&typeof t.alpha=="number"},Ix=KP(gfe),lv=KP(vfe),JP=KP(_fe),Yl=KP(yfe),O6=["absolute","fixed","relative","static","sticky"]});function bfe(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function N6(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);i&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),a.push.apply(a,l)}return a}function qp(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?N6(Object(a),!0).forEach(function(l){bfe(t,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N6(Object(a)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(a,l))})}return t}function uv(t,i){if(t==null)return{};var a={},l=Object.keys(t),f,p;for(p=0;p<l.length;p++)f=l[p],!(i.indexOf(f)>=0)&&(a[f]=t[f]);return a}var Rx=P(()=>{}),L6,yO,F6=P(()=>{L6=J(Fe()),yO=(0,L6.createContext)({})});function xfe(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function U6(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);i&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),a.push.apply(a,l)}return a}function cv(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?U6(Object(a),!0).forEach(function(l){xfe(t,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U6(Object(a)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(a,l))})}return t}function bO(t,i){if(t==null)return{};var a={},l=Object.keys(t),f,p;for(p=0;p<l.length;p++)f=l[p],!(i.indexOf(f)>=0)&&(a[f]=t[f]);return a}function Sfe(t,i){if(t){if(typeof t=="string")return B6(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B6(t,i)}}function B6(t,i){(i==null||i>t.length)&&(i=t.length);for(var a=0,l=new Array(i);a<i;a++)l[a]=t[a];return l}function z6(t,i){var a;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(a=Sfe(t))||i){a&&(t=a);var l=0;return function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return a=t[Symbol.iterator](),a.next.bind(a)}var QP=P(()=>{});function wfe(t){return typeof t=="function"}var xO,j6,Efe=P(()=>{xO=J(Fe()),F6(),QP(),j6=function(t,i,a){a===void 0&&(a=i.children);var l=(0,xO.useContext)(yO);if(l.useCreateElement)return l.useCreateElement(t,i,a);if(typeof t=="string"&&wfe(a)){i.children;var f=bO(i,["children"]);return a(f)}return(0,xO.createElement)(t,i,a)}});function Tfe(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function V6(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);i&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),a.push.apply(a,l)}return a}function dv(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?V6(Object(a),!0).forEach(function(l){Tfe(t,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V6(Object(a)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(a,l))})}return t}function Mfe(t,i){if(t==null)return{};var a={},l=Object.keys(t),f,p;for(p=0;p<l.length;p++)f=l[p],!(i.indexOf(f)>=0)&&(a[f]=t[f]);return a}var H6=P(()=>{});function Pfe(t){return typeof t=="object"&&t!=null}var Cfe=P(()=>{});function SO(t){var i;if(!Pfe(t))return!1;var a=Object.getPrototypeOf(t);return a==null?!0:((i=a.constructor)===null||i===void 0?void 0:i.toString())===Object.toString()}var G6=P(()=>{Cfe()});function W6(t,i){for(var a=Object.keys(t),l={},f={},p=0,v=a;p<v.length;p++){var _=v[p];i.indexOf(_)>=0?l[_]=t[_]:f[_]=t[_]}return[l,f]}function q6(t,i){if(i===void 0&&(i=[]),!SO(t.state))return W6(t,i);var a=W6(t,[].concat(i,["state"])),l=a[0],f=a[1],p=l.state,v=Mfe(l,["state"]);return[dv(dv({},p),v),f]}var Afe=P(()=>{H6(),G6()});function eC(t,i){if(t===i)return!0;if(!t||!i||typeof t!="object"||typeof i!="object")return!1;var a=Object.keys(t),l=Object.keys(i),f=a.length;if(l.length!==f)return!1;for(var p=0,v=a;p<v.length;p++){var _=v[p];if(t[_]!==i[_])return!1}return!0}var wO=P(()=>{});function X6(t){return t.name==="normalizePropsAreEqualInner"?t:function(i,a){return!SO(i.state)||!SO(a.state)?t(i,a):t(dv(dv({},i.state),i),dv(dv({},a.state),a))}}var kfe=P(()=>{H6(),G6()});function Ife(t){return(0,EO.forwardRef)(t)}function Rfe(t,i){return(0,EO.memo)(t,i)}function Dx(t){var i=t.as,a=t.useHook,l=t.memo,f=t.propsAreEqual,p=f===void 0?a?.unstable_propsAreEqual:f,v=t.keys,_=v===void 0?a?.__keys||[]:v,x=t.useCreateElement,w=x===void 0?j6:x,A=function(D,R){var C=D.as,F=C===void 0?i:C,N=bO(D,["as"]);if(a){var B,j=q6(N,_),W=j[0],$=j[1],re=a(W,cv({ref:R},$)),ne=re.wrapElement,ce=bO(re,["wrapElement"]),Te=((B=F.render)===null||B===void 0?void 0:B.__keys)||F.__keys,Ie=Te&&q6(N,Te)[0],ye=Ie?cv(cv({},ce),Ie):ce,Ne=w(F,ye);return ne?ne(Ne):Ne}return w(F,cv({ref:R},N))};return A=Ife(A),l&&(A=Rfe(A,p&&X6(p))),A.__keys=_,A.unstable_propsAreEqual=X6(p||eC),A}var EO,Ox=P(()=>{EO=J(Fe()),QP(),Efe(),Afe(),wO(),kfe()});function K6(t,i){(0,TO.useDebugValue)(t);var a=(0,TO.useContext)(yO);return a[t]!=null?a[t]:i}var TO,Y6=P(()=>{TO=J(Fe()),F6()});function Dfe(t,i,a){i===void 0&&(i={}),a===void 0&&(a={});var l="use"+t+"Props";(0,$6.useDebugValue)(l);var f=K6(l);return f?f(i,a):a}var $6,Ofe=P(()=>{$6=J(Fe()),Y6()});function Nfe(t,i,a){i===void 0&&(i={}),a===void 0&&(a={});var l="use"+t+"Options";(0,Z6.useDebugValue)(l);var f=K6(l);return f?cv(cv({},i),f(i,a)):i}var Z6,Lfe=P(()=>{Z6=J(Fe()),Y6(),QP()});function Ffe(t){return Array.isArray(t)?t:typeof t<"u"?[t]:[]}var Ufe=P(()=>{});function Nx(t){var i,a,l=Ffe(t.compose),f=function(_,x){if(t.useOptions&&(_=t.useOptions(_,x)),t.name&&(_=Nfe(t.name,_,x)),t.compose)for(var w=z6(l),A;!(A=w()).done;){var D=A.value;_=D.__useOptions(_,x)}return _},p=function(_,x,w){if(_===void 0&&(_={}),x===void 0&&(x={}),w===void 0&&(w=!1),w||(_=f(_,x)),t.useProps&&(x=t.useProps(_,x)),t.name&&(x=Dfe(t.name,_,x)),t.compose)if(t.useComposeOptions&&(_=t.useComposeOptions(_,x)),t.useComposeProps)x=t.useComposeProps(_,x);else for(var A=z6(l),D;!(D=A()).done;){var R=D.value;x=R(_,x,!0)}var C={},F=x||{};for(var N in F)F[N]!==void 0&&(C[N]=F[N]);return C};p.__useOptions=f;var v=l.reduce(function(_,x){return _.push.apply(_,x.__keys||[]),_},[]);return p.__keys=[].concat(v,((i=t.useState)===null||i===void 0?void 0:i.__keys)||[],t.keys||[]),p.unstable_propsAreEqual=t.propsAreEqual||((a=l[0])===null||a===void 0?void 0:a.unstable_propsAreEqual)||eC,p}var Lx=P(()=>{J(Fe()),Ofe(),QP(),Lfe(),wO(),Ufe()});function J6(t,i){i===void 0&&(i=null),t&&(typeof t=="function"?t(i):t.current=i)}function Q6(t,i){return(0,e8.useMemo)(function(){return t==null&&i==null?null:function(a){J6(t,a),J6(i,a)}},[t,i])}var e8,t8=P(()=>{e8=J(Fe())});function MO(t){if(t.tagName==="BUTTON")return!0;if(t.tagName==="INPUT"){var i=t;return n8.indexOf(i.type)!==-1}return!1}var n8,PO=P(()=>{n8=["button","color","file","image","reset","submit"]}),CO=P(()=>{}),Bfe=P(()=>{CO(),J(Fe())}),tC=P(()=>{CO(),J(Fe()),Bfe()});function zfe(t){return t?t.ownerDocument||t:document}var r8=P(()=>{});function jfe(t){return i8}var i8,Vfe=P(()=>{r8();try{i8=window}catch{}});function Hfe(){var t=jfe();return!!(typeof t<"u"&&t.document&&t.document.createElement)}var nC,AO=P(()=>{Vfe(),nC=Hfe()}),kO,IO,RO=P(()=>{kO=J(Fe()),AO(),IO=nC?kO.useLayoutEffect:kO.useEffect});function fv(t){var i=(0,a8.useRef)(t);return IO(function(){i.current=t}),i}var a8,o8=P(()=>{a8=J(Fe()),RO()});function Gfe(t){return t.target===t.currentTarget}var Wfe=P(()=>{});function qfe(t){var i=zfe(t),a=i.activeElement;return a!=null&&a.nodeName?a:null}var Xfe=P(()=>{r8()});function s8(t,i){return t===i||t.contains(i)}var l8=P(()=>{});function Kfe(t){var i=qfe(t);if(!i)return!1;if(s8(t,i))return!0;var a=i.getAttribute("aria-activedescendant");return a?a===t.id?!0:!!t.querySelector("#"+a):!1}var Yfe=P(()=>{Xfe(),l8()});function $fe(t){return!s8(t.currentTarget,t.target)}var Zfe=P(()=>{l8()});function rC(t){return nC?window.navigator.userAgent.indexOf(t)!==-1:!1}var Jfe=P(()=>{AO()});function Qfe(t,i){return"matches"in t?t.matches(i):"msMatchesSelector"in t?t.msMatchesSelector(i):t.webkitMatchesSelector(i)}var ehe=P(()=>{});function the(t){var i=t;return i.offsetWidth>0||i.offsetHeight>0||t.getClientRects().length>0}function nhe(t){return Qfe(t,u8)&&the(t)}var u8,rhe=P(()=>{ehe(),u8="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),c8,iC,d8=P(()=>{Rx(),Ox(),Lx(),wO(),c8=["unstable_system"],iC=Nx({name:"Role",keys:c8,propsAreEqual:function(t,i){var a=t.unstable_system,l=uv(t,["unstable_system"]),f=i.unstable_system,p=uv(i,["unstable_system"]);return a!==f&&!eC(a,f)?!1:eC(l,p)}}),Dx({as:"div",useHook:iC})});function f8(t){!Kfe(t)&&nhe(t)&&t.focus()}function ihe(t){return t.tagName==="BUTTON"||t.tagName==="INPUT"||t.tagName==="SELECT"||t.tagName==="TEXTAREA"||t.tagName==="A"}function ahe(t){return t.tagName==="BUTTON"||t.tagName==="INPUT"||t.tagName==="SELECT"||t.tagName==="TEXTAREA"}function ohe(t,i,a,l){return t?i&&!a?-1:void 0:i?l:l||0}function DO(t,i){return(0,hv.useCallback)(function(a){var l;(l=t.current)===null||l===void 0||l.call(t,a),!a.defaultPrevented&&i&&(a.stopPropagation(),a.preventDefault())},[t,i])}var hv,h8,p8,OO,she=P(()=>{Rx(),Ox(),Lx(),hv=J(Fe()),t8(),PO(),tC(),o8(),RO(),Yfe(),Zfe(),Jfe(),rhe(),d8(),h8=["disabled","focusable"],p8=rC("Mac")&&!rC("Chrome")&&(rC("Safari")||rC("Firefox")),OO=Nx({name:"Tabbable",compose:iC,keys:h8,useOptions:function(t,i){var a=i.disabled;return qp({disabled:a},t)},useProps:function(t,i){var a=i.ref,l=i.tabIndex,f=i.onClickCapture,p=i.onMouseDownCapture,v=i.onMouseDown,_=i.onKeyPressCapture,x=i.style,w=uv(i,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),A=(0,hv.useRef)(null),D=fv(f),R=fv(p),C=fv(v),F=fv(_),N=!!t.disabled&&!t.focusable,B=(0,hv.useState)(!0),j=B[0],W=B[1],$=(0,hv.useState)(!0),re=$[0],ne=$[1],ce=t.disabled?qp({pointerEvents:"none"},x):x;IO(function(){var et=A.current;et&&(ihe(et)||W(!1),ahe(et)||ne(!1))},[]);var Te=DO(D,t.disabled),Ie=DO(R,t.disabled),ye=DO(F,t.disabled),Ne=(0,hv.useCallback)(function(et){var de;(de=C.current)===null||de===void 0||de.call(C,et);var Le=et.currentTarget;if(!et.defaultPrevented&&p8&&!$fe(et)&&MO(Le)){var Z=requestAnimationFrame(function(){Le.removeEventListener("mouseup",Ge,!0),f8(Le)}),Ge=function(){cancelAnimationFrame(Z),f8(Le)};Le.addEventListener("mouseup",Ge,{once:!0,capture:!0})}},[]);return qp({ref:Q6(A,a),style:ce,tabIndex:ohe(N,j,re,l),disabled:N&&re?!0:void 0,"aria-disabled":t.disabled?!0:void 0,onClickCapture:Te,onMouseDownCapture:Ie,onMouseDown:Ne,onKeyPressCapture:ye},w)}}),Dx({as:"div",useHook:OO})});function lhe(t){var i=t.currentTarget;return t.isTrusted?MO(i)||i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.tagName==="A"||i.tagName==="SELECT":!1}var aC,m8,NO,uhe=P(()=>{Rx(),Ox(),Lx(),aC=J(Fe()),PO(),tC(),o8(),Wfe(),she(),m8=["unstable_clickOnEnter","unstable_clickOnSpace"],NO=Nx({name:"Clickable",compose:OO,keys:m8,useOptions:function(t){var i=t.unstable_clickOnEnter,a=i===void 0?!0:i,l=t.unstable_clickOnSpace,f=l===void 0?!0:l,p=uv(t,["unstable_clickOnEnter","unstable_clickOnSpace"]);return qp({unstable_clickOnEnter:a,unstable_clickOnSpace:f},p)},useProps:function(t,i){var a=i.onKeyDown,l=i.onKeyUp,f=uv(i,["onKeyDown","onKeyUp"]),p=(0,aC.useState)(!1),v=p[0],_=p[1],x=fv(a),w=fv(l),A=(0,aC.useCallback)(function(R){var C;if((C=x.current)===null||C===void 0||C.call(x,R),!R.defaultPrevented&&!t.disabled&&!R.metaKey&&Gfe(R)){var F=t.unstable_clickOnEnter&&R.key==="Enter",N=t.unstable_clickOnSpace&&R.key===" ";if(F||N){if(lhe(R))return;R.preventDefault(),F?R.currentTarget.click():N&&_(!0)}}},[t.disabled,t.unstable_clickOnEnter,t.unstable_clickOnSpace]),D=(0,aC.useCallback)(function(R){var C;if((C=w.current)===null||C===void 0||C.call(w,R),!R.defaultPrevented&&!t.disabled&&!R.metaKey){var F=t.unstable_clickOnSpace&&R.key===" ";v&&F&&(_(!1),R.currentTarget.click())}},[t.disabled,t.unstable_clickOnSpace,v]);return qp({"data-active":v||void 0,onKeyDown:A,onKeyUp:D},f)}}),Dx({as:"button",memo:!0,useHook:NO})}),Fx,g8,v8,_8,che=P(()=>{Rx(),Ox(),Lx(),Fx=J(Fe()),t8(),PO(),tC(),uhe(),g8=[],v8=Nx({name:"Button",compose:NO,keys:g8,useProps:function(t,i){var a=i.ref,l=uv(i,["ref"]),f=(0,Fx.useRef)(null),p=(0,Fx.useState)(void 0),v=p[0],_=p[1],x=(0,Fx.useState)("button"),w=x[0],A=x[1];return(0,Fx.useEffect)(function(){var D=f.current;D&&(MO(D)||(D.tagName!=="A"&&_("button"),A(void 0)))},[]),qp({ref:Q6(f,a),role:v,type:w},l)}}),_8=Dx({as:"button",memo:!0,useHook:v8})}),y8,b8,x8,dhe=P(()=>{Rx(),Ox(),Lx(),d8(),y8=[],b8=Nx({name:"Group",compose:iC,keys:y8,useProps:function(t,i){return qp({role:"group"},i)}}),x8=Dx({as:"div",useHook:b8})});function fhe(){return nC?document.body:null}var S8,pv,hhe=P(()=>{S8=J(Fe()),RO(),AO(),J(Ma()),pv=(0,S8.createContext)(fhe())}),LO,phe=P(()=>{typeof window<"u"&&(LO={get passive(){}},window.addEventListener("testPassive",null,LO),window.removeEventListener("testPassive",null,LO))}),Xp=P(()=>{J(Fe()),tC(),che(),dhe(),J(Ma()),hhe(),phe(),CO()});function Dr(t){let i=(0,FO.useMemo)(()=>{let f=t;return{get current(){return f},set current(p){f=p,l(p)}}},[]),[a,l]=(0,FO.useState)(()=>t);return[i,a]}var FO,Hr=P(()=>{FO=J(Fe())});function mhe(t){return i=>vo.default.createElement(C8,null,vo.default.createElement(t,I({},i)))}var vo,w8,E8,zr,mv,T8,M8,P8,UO,BO,C8,Gr=P(()=>{Os(),ht(),ht(),vo=J(Fe()),w8=J(Ma()),Xp(),Hr(),zr=$a(E8||(E8=Y([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),mv={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return lv(.6,mv.panel.bg)}}}}}},M8=typeof window<"u"?yx(T8||(T8=Y([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},UO=_e.div(P8||(P8=Y([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),BO=t=>vo.default.createElement(J0,{disableVendorPrefixes:!0,target:t.target},vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(M8,null),t.children)),C8=t=>{let[i,a]=(0,vo.useState)(null),[l,f]=(0,vo.useState)(null);(0,vo.useLayoutEffect)(()=>{if(!i)return;let{parentNode:_}=i;if(!_)return;let x=_.shadowRoot?parent.shadowRoot:_.attachShadow({mode:"open"});f(x)},[i]);let[p,v]=Dr(void 0);return l?w8.default.createPortal(vo.default.createElement(BO,{target:l},vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(UO,{ref:p}),vo.default.createElement(pv.Provider,{value:v},t.children))),l):vo.default.createElement("template",{ref:a,"shadow-root":"open"},t.children)}}),gv,A8,k8,jf,I8,Ux,R8,D8,oC,O8,zO,Vu,vd=P(()=>{Gr(),ht(),gv={get outlinePanel(){return 1},get propsPanel(){return gv.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},A8=mv.panel.bg,jf=_e.span(k8||(k8=Y([`
  white-space: nowrap;
`]))),Ux=_e.span(I8||(I8=Y([`
  white-space: nowrap;
  color: `,`;
`])),mv.panel.head.punctuation.color),D8=_e.div(R8||(R8=Y([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),A8),oC=18,zO=_e.div(O8||(O8=Y([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),oC),Vu=100}),N8,$l,vv=P(()=>{N8=()=>{},$l=N8});function ghe(t){return jO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),jO.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var jO,VO,vhe=P(()=>{jO=J(Fe()),VO=ghe});function _he(t){return HO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),HO.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var HO,L8,yhe=P(()=>{HO=J(Fe()),L8=_he});function bhe(t){return GO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),GO.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var GO,F8,xhe=P(()=>{GO=J(Fe()),F8=bhe});function She(t){return WO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),WO.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var WO,U8,whe=P(()=>{WO=J(Fe()),U8=She});function Ehe(t){return qO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),qO.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var qO,XO,The=P(()=>{qO=J(Fe()),XO=Ehe});function Mhe(t){return KO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),KO.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var KO,sC,Phe=P(()=>{KO=J(Fe()),sC=Mhe});function Che(t){return YO.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),YO.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var YO,$O,Ahe=P(()=>{YO=J(Fe()),$O=Che}),Bx=P(()=>{vhe(),yhe(),xhe(),whe(),The(),Phe(),Ahe()}),Hu,B8,lC,z8,j8,V8,H8,G8,W8,q8,X8,K8,Y8,$8,Z8,J8,Q8,eV,zx,uC=P(()=>{Hu=J(Fe()),ht(),vv(),Gr(),Bx(),lC=_e.li(B8||(B8=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),j8=_e.div(z8||(z8=Y([""]))),H8=_e(j8)(V8||(V8=Y([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),zr),W8=$a(G8||(G8=Y([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),X8=_e.span(q8||(q8=Y([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),W8,zr),Y8=_e.div(K8||(K8=Y([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),Z8=_e.span($8||($8=Y([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),lC),Q8=_e.ul(J8||(J8=Y([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),lC),eV=({label:t,children:i,depth:a,select:l,selectionStatus:f,labelDecoration:p,collapsed:v=!1,setIsCollapsed:_})=>{let x=i!==void 0;return Hu.default.createElement(lC,{style:{"--depth":a},className:v?"collapsed":""},Hu.default.createElement(H8,{className:f,onClick:l??$l,"data-header":!0},Hu.default.createElement(Y8,null,x?Hu.default.createElement(Z8,{onClick:w=>{w.stopPropagation(),w.preventDefault(),_?.(!v)}},Hu.default.createElement(L8,null)):Hu.default.createElement(XO,null)),Hu.default.createElement(X8,null,Hu.default.createElement("span",null,t)),p),x&&Hu.default.createElement(Q8,null,i))},zx=eV});function khe(t){return Object.keys(t)}function Ihe(t){return Object.keys((0,Gu.val)(t.sheetTemplatesP))}function Rhe(){let t=Lu(Vf().filter(i=>Dn(i)||vt(i)).map(i=>vt(i)?i.sheet:i))[0];if(t)return t.getSequence()}var Gu,Vf,tV,Hf=P(()=>{Gu=Ut(),fr(),aa(),Ue(),Vf=()=>{var t;let i=(0,Gu.val)(pe().projectsP),a=((t=(0,Gu.val)(pe().atomP.historic.panels.outlinePanel.selection))!=null?t:[]).map(l=>{let f=i[l.projectId];if(!f)return;if(l.type==="Project")return f;if(!(0,Gu.val)(f.sheetTemplatesP[l.sheetId]))return;let p=tV(f,l.sheetId);if(!p)return;if(l.type==="Sheet")return p;let v=(0,Gu.val)(p.objectsP[l.objectKey]);if(v)return v});return Lu(a.filter(l=>typeof l<"u"))},tV=(t,i)=>{let a=pe().atomP.historic.projects.stateByProjectId[t.address.projectId],l=(0,Gu.val)(a.stateBySheetId[i].selectedInstanceId),f=(0,Gu.val)(t.sheetTemplatesP[i]);if(f){if(l)return(0,Gu.val)(f.instancesP[l]);{let p=(0,Gu.val)(f.instancesP);return p[khe(p)[0]]}}}}),nV,rV,Dhe=P(()=>{Ue(),nV=J(Fe()),uC(),bn(),Hf(),rV=({sheetObject:t,depth:i,overrideLabel:a})=>{let l=()=>{pe().transaction(({stateEditors:p})=>{p.studio.historic.panels.outline.selection.set([t])})},f=ur(()=>Vf(),[]);return nV.default.createElement(zx,{select:l,label:a??t.address.objectKey,depth:i,selectionStatus:f.includes(t)?"selected":"not-selected"})}});function ZO(t){var i;let a=t.type==="namespace"?"namespace:".concat(t.sheet.address.sheetId,":").concat(t.path.join("/")):t.type==="Theatre_Project"?"project":t.type==="Theatre_Sheet"?"sheetInstance:".concat(t.address.sheetId,":").concat(t.address.sheetInstanceId):"unknown",l=t.type==="namespace"?t.sheet.address.projectId:t.address.projectId,f=(i=pr(pe().atomP.ahistoric.projects.stateByProjectId[l].collapsedItemsInOutline[a]))!=null?i:!1,p=(0,iV.useCallback)(v=>{pe().transaction(({stateEditors:_})=>{_.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:l,isCollapsed:v,itemKey:a})})},[a]);return{collapsed:f,setCollapsed:p}}var iV,JO=P(()=>{iV=J(Fe()),Ue(),bn()});function aV(t){return Wu.default.createElement(Wu.default.Fragment,null,[...t.namespace.entries()].map(([i,{object:a,nested:l}])=>Wu.default.createElement(Ohe,{key:i,label:i,object:a,nested:l,visualIndentation:t.visualIndentation,path:t.path,sheet:t.sheet})))}function Ohe(t){let{nested:i,label:a,object:l,sheet:f}=t,{collapsed:p,setCollapsed:v}=ZO({type:"namespace",sheet:f,path:[...t.path,a]}),_=i&&Wu.default.createElement(aV,{namespace:i,path:[...t.path,a],key:"namespaceTree("+a+")",visualIndentation:t.visualIndentation+1,sheet:f}),x=l&&Wu.default.createElement(rV,{depth:t.visualIndentation,key:"objectPath("+l.address.objectKey+")",sheetObject:l,overrideLabel:a});return Wu.default.createElement(Wu.default.Fragment,{key:"".concat(a," - ").concat(t.visualIndentation)},x,_&&Wu.default.createElement(zx,{selectionStatus:"not-selectable",label:a,key:"baseItem(".concat(a,")"),depth:t.visualIndentation,children:_,collapsed:p,setIsCollapsed:v}))}function oV(t,i,a=Nhe(i)){let[l,...f]=a,p=t.get(l);p||(p={nested:void 0,object:void 0,path:[...a]},t.set(l,p)),f.length===0?(console.assert(!p.object,"expect not to have existing object with same name",{existing:p,object:i}),p.object=i):(p.nested||(p.nested=new Map),oV(p.nested,i,f))}function Nhe(t){let i=QO.get(t);return i||(i=t.address.objectKey.split(dV),console.assert(i.length>0,"expected not empty"),QO.set(t,i)),i}var sV,Wu,lV,uV,cV,dV,QO,Lhe=P(()=>{bn(),sV=Ut(),Wu=J(Fe()),ht(),Dhe(),uC(),JO(),_e.li(lV||(lV=Y([`
  color: `,`;
`])),t=>t.isSelected?"white":"hsl(1, 1%, 80%)"),uV=({sheet:t,depth:i})=>ur(()=>{let a=(0,sV.val)(t.objectsP),l=Object.values(a).filter(p=>p!=null),f=new Map;return l.forEach(p=>{oV(f,p)}),Wu.default.createElement(aV,{namespace:f,visualIndentation:i,path:[],sheet:t})},[t,i]),cV=uV,dV=/\s*\/\s*/g,QO=new WeakMap}),_v,fV,hV,pV,mV,gV,vV,Fhe=P(()=>{Ue(),Hf(),bn(),_v=J(Fe()),ht(),Lhe(),uC(),JO(),hV=_e.div(fV||(fV=Y([`
  display: flex;
`]))),_e.li(pV||(pV=Y([`
  color: `,`;
`])),t=>t.isSelected?"white":"hsl(1, 1%, 80%)"),gV=_e.div(mV||(mV=Y([""]))),vV=({sheet:t,depth:i})=>{let{collapsed:a,setCollapsed:l}=ZO(t),f=(0,_v.useCallback)(()=>{pe().transaction(({stateEditors:p})=>{p.studio.historic.panels.outline.selection.set([t])})},[t]);return ur(()=>{let p=Vf();return _v.default.createElement(zx,{depth:i,select:f,setIsCollapsed:l,collapsed:a,selectionStatus:p.some(v=>v===t)?"selected":p.some(v=>v.type==="Theatre_SheetObject"&&v.sheet===t)?"descendant-is-selected":"not-selected",label:_v.default.createElement(hV,null,t.address.sheetId,": ",t.address.sheetInstanceId)},_v.default.createElement(gV,null,_v.default.createElement(cV,{depth:i+1,sheet:t,key:"objectList"+t.address.sheetInstanceId})))},[i,a])}}),eN,yv,_V,yV,bV,xV,Uhe=P(()=>{bn(),eN=Ut(),yv=J(Fe()),ht(),Fhe(),_e.div(_V||(_V=Y([`
  display: flex;
`]))),_e.li(yV||(yV=Y([`
  color: `,`;
`])),t=>t.isSelected?"white":"hsl(1, 1%, 80%)"),_e.div(bV||(bV=Y([""]))),xV=({sheetId:t,depth:i,project:a})=>ur(()=>{let l=(0,eN.val)(a.sheetTemplatesP[t]);if(!l)return yv.default.createElement(yv.default.Fragment,null);let f=(0,eN.val)(l.instancesP);return yv.default.createElement(yv.default.Fragment,null,Object.entries(f).map(([p,v])=>yv.default.createElement(vV,{key:v.address.sheetInstanceId,sheet:v,depth:i})))},[i,t,a])}),cC,SV,wV,Bhe=P(()=>{Hf(),bn(),cC=J(Fe()),Uhe(),SV=({project:t,depth:i})=>ur(()=>{if(!t)return null;let a=Ihe(t);return cC.default.createElement(cC.default.Fragment,null,a.map(l=>cC.default.createElement(xV,{depth:i,sheetId:l,key:"sheet-".concat(l),project:t})))},[t,i]),wV=SV}),jx,EV,TV,MV,PV,CV,zhe=P(()=>{jx=J(Fe()),uC(),Bhe(),Ue(),bn(),Hf(),EV=Ut(),ht(),JO(),MV=_e.div(TV||(TV=Y([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),PV=({depth:t,project:i})=>{let a=ur(()=>Vf(),[]),l=ur(()=>{let _=i.address.projectId,x=(0,EV.val)(pe().atomP.ephemeral.coreByProject[_].loadingState);return x?.type==="browserStateIsNotBasedOnDiskState"},[i]),f=(0,jx.useCallback)(()=>{pe().transaction(({stateEditors:_})=>{_.studio.historic.panels.outline.selection.set([i])})},[i]),{collapsed:p,setCollapsed:v}=ZO(i);return jx.default.createElement(zx,{depth:t,label:i.address.projectId,setIsCollapsed:v,collapsed:p,labelDecoration:l?jx.default.createElement(MV,null,"Has Conflicts"):null,children:jx.default.createElement(wV,{project:i,depth:t+1}),selectionStatus:a.includes(i)?"selected":a.some(_=>_.address.projectId===i.address.projectId)?"descendant-is-selected":"not-selected",select:f})},CV=PV}),AV,tN,kV,IV,RV,DV,jhe=P(()=>{AV=Ut(),bn(),Ue(),tN=J(Fe()),ht(),zhe(),IV=_e.ul(kV||(kV=Y([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),RV=t=>ur(()=>{let i=(0,AV.val)(pe().projectsP);return tN.default.createElement(IV,null,Object.keys(i).map(a=>{let l=i[a];return tN.default.createElement(CV,{depth:0,project:l,key:"projectListItem-".concat(a)})}))},[]),DV=RV});function OV(t){let[i,a]=(0,nN.useState)(!1);return(0,nN.useEffect)(()=>{let l=p=>{let v=i?200:50,_=56,x=t==="left"?p.x<v:p.x>window.innerWidth-v;x&&(x=p.y>_),a(!!x)};document.addEventListener("mousemove",l);let f=()=>{a(!1)};return document.addEventListener("mouseleave",f),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseleave",f)}},[i]),i}var nN,NV=P(()=>{nN=J(Fe())}),Vx,bv,rN,LV,FV,UV,BV,dC,Hx,zV,Vhe=P(()=>{Vx=J(Fe()),ht(),vd(),jhe(),bn(),Ue(),NV(),bv=Ut(),Gr(),rN="44px",FV=_e.div(LV||(LV=Y([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),zr,gv.outlinePanel,rN,rN,({pin:t})=>t?"block":"none"),UV=()=>{var t;let i=(t=pr(pe().atomP.ahistoric.pinOutline))!=null?t:!0,a=pr(zV),l=OV("left");return(0,Vx.useLayoutEffect)(()=>{dC.set(l)},[l]),(0,Vx.useEffect)(()=>()=>{Hx.set(!1),dC.set(!1)},[]),Vx.default.createElement(FV,{pin:i||a,onMouseEnter:()=>{Hx.set(!0)},onMouseLeave:()=>{Hx.set(!1)}},Vx.default.createElement(DV,null))},BV=UV,dC=new bv.Atom(!1),Hx=new bv.Atom(!1),zV=(0,bv.prism)(()=>{let t=(0,bv.val)(Hx.prism),i=(0,bv.val)(dC.prism);return t||i})}),jV,VV,HV,Hhe=P(()=>{ht(),VV=_e.input.attrs({type:"checkbox"})(jV||(jV=Y([`
  outline: none;
`]))),HV=VV});function Ghe({propConfig:t,editingTools:i,value:a,autoFocus:l}){let f=(0,iN.useCallback)(p=>{i.permanentlySetValue(!!p.target.checked)},[t,i]);return iN.default.createElement(WV,{checked:a,onChange:f,autoFocus:l})}var iN,GV,WV,qV,Whe=P(()=>{iN=J(Fe()),ht(),Hhe(),WV=_e(HV)(GV||(GV=Y([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),qV=Ghe});function fC(t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var hC=P(()=>{});function aN(t,i,a){(0,XV.useEffect)(()=>{if(!t||a===!1)return;let l=Array.isArray(t)?t.filter(p=>p):[t],f=p=>{l.every(v=>!p.composedPath().includes(v))&&i(p)};return window.addEventListener("mousedown",f,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",f,{capture:!0,passive:!1})}},[t,a])}var XV,oN=P(()=>{XV=J(Fe())}),_d,KV,yd,YV,$V,ZV,JV,sN,QV,dl,eH,Ns=P(()=>{_d=J(Fe()),ht(),KV="pointer-root",yd="--lockedCursor",$V=_e.div(YV||(YV=Y([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),JV=_e.div(ZV||(ZV=Y([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),sN=(0,_d.createContext)({}),QV=t=>{var i,a,l,f;let[p,v]=(0,_d.useState)([]),_=(0,_d.useMemo)(()=>({getLock:(w,A)=>{let D={className:w,cursor:A};return v(R=>[...R,D]),()=>{v(R=>R.filter(C=>C!==D))}}}),[]),x=(a=(i=p[0])==null?void 0:i.cursor)!=null?a:"";return _d.default.createElement(sN.Provider,{value:_},_d.default.createElement($V,{id:KV,className:((f=(l=p[0])==null?void 0:l.className)!=null?f:"normal")+" "+t.className},_d.default.createElement(JV,{style:{cursor:x,[yd]:x}},t.children)))},dl=(t,i,a)=>{let l=(0,_d.useContext)(sN);(0,_d.useLayoutEffect)(()=>{if(t)return l.getLock(i,a)},[t,i,a])},eH=QV});function tH(t){return Gx.default.createElement(lN.Provider,{value:t.logger},t.children)}function Gf(t,i){let a=(0,Gx.useContext)(lN);return(0,Gx.useMemo)(()=>t?a.named(t,i):a,[a,t,i])}var Gx,lN,Wf=P(()=>{Gx=J(Fe()),lN=Gx.default.createContext(null)});function qhe(){let t=Gf("PointerCapturing"),i=Zl.default.useRef(null),a=()=>i.current!=null;return l=>{let f,p=v=>(f=v,i.current=v,v);return{capturing:{capturePointer(v){if(t._debug("Capturing pointer",{forDebugName:l,reason:v}),i.current!=null)throw new Error('"'.concat(l,'" attempted capturing pointer for "').concat(v,'" while already captured by "').concat(i.current.debugOwnerName,'" for "').concat(i.current.debugReason,'"'));let _=p({debugOwnerName:l,debugReason:v});return{isCapturing(){return _===i.current},release(){return _===i.current?(t._debug("Releasing pointer",{forDebugName:l,reason:v}),p(null),!0):!1}}},isPointerBeingCaptured:a},forceRelease(){f&&i.current===f&&(t._debug("Force releasing pointer",{localCapture:f}),p(null))}}}}function Xhe(t){let i=qhe();return Zl.default.createElement(uN.Provider,{value:i},Zl.default.createElement(rH,{children:t.children}))}function nH(t){let i=(0,Zl.useContext)(uN),a=(0,Zl.useMemo)(()=>i(t),[t,i]);return(0,Zl.useEffect)(()=>()=>{a.forceRelease()},[a]),a.capturing}var Zl,uN,rH,cN=P(()=>{Zl=J(Fe()),Wf(),uN=Zl.default.createContext(null),rH=Zl.default.memo(({children:t})=>Zl.default.createElement(Zl.default.Fragment,null,t))}),dN,Khe=P(()=>{dN=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function ji(t,i){let a=(0,xv.useRef)(i);a.current=i;let l=i.shouldPointerLock&&!dN,f=(0,xv.useRef)({domDragStarted:!1}),{capturePointer:p}=nH("useDrag for ".concat(i.debugName)),v=(0,xv.useRef)({onDrag:$l,onDragEnd:$l,onClick:$l}),_=(0,xv.useRef)(),[x,w]=Dr(!1);return(0,xv.useLayoutEffect)(()=>{if(!t)return;let A=()=>{let W=f.current.domDragStarted&&f.current.detection.detected;x.current!==W&&(x.current=W)},D=W=>{if(!f.current.domDragStarted)return;let $=f.current;if(!Yhe(W,$)&&($.detection.detected||($.detection.totalDistanceMoved+=Math.abs(W.movementY)+Math.abs(W.movementX),$.detection.totalDistanceMoved>iH&&(l&&t.requestPointerLock(),$.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},A())),$.detection.detected)){$.detection.dragEventCount+=1;let{dragMovement:re}=$.detection;if(l)re.x+=W.movementX,re.y+=W.movementY;else{let{startPos:ne}=$;re.x=W.screenX-ne.x,re.y=W.screenY-ne.y}v.current.onDrag(re.x,re.y,W,W.movementX,W.movementY)}},R=W=>{if(F(),!f.current.domDragStarted)return;let $=f.current.detection.detected;f.current={domDragStarted:!1},i.shouldPointerLock&&!dN&&document.exitPointerLock(),v.current.onDragEnd($),window.focus(),$||v.current.onClick(W),A()},C=()=>{document.addEventListener("mousemove",D),document.addEventListener("mouseup",R)},F=()=>{var W;(W=_.current)==null||W.release(),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",R)},N=W=>{a.current.disabled||f.current.domDragStarted&&f.current.detection.detected&&(a.current.dontBlockMouseDown||(W.stopPropagation(),W.preventDefault()),f.current.detection={detected:!1,totalDistanceMoved:0},A())},B=W=>{var $,re,ne,ce;($=_.current)==null||$.release();let Te=a.current;if(Te.disabled===!0||!((re=Te.buttons)!=null?re:[0]).includes(W.button))return;let Ie=Te.onDragStart(W);Ie!==!1&&(v.current.onDrag=Ie.onDrag,v.current.onDragEnd=(ne=Ie.onDragEnd)!=null?ne:$l,v.current.onClick=(ce=Ie.onClick)!=null?ce:$l,_.current=p("Drag start"),Te.dontBlockMouseDown||(W.stopPropagation(),W.preventDefault()),f.current={domDragStarted:!0,startPos:{x:W.screenX,y:W.screenY},detection:{detected:!1,totalDistanceMoved:0}},A(),C())},j=W=>{B(W)};return t.addEventListener("mousedown",j),t.addEventListener("click",N),()=>{var W,$;F(),t.removeEventListener("mousedown",j),t.removeEventListener("click",N),f.current.domDragStarted&&(($=(W=v.current).onDragEnd)==null||$.call(W,f.current.detection.detected)),f.current={domDragStarted:!1},A()}},[t]),dl(w&&!!i.lockCSSCursorTo,"dragging",i.lockCSSCursorTo),[w]}function Yhe(t,i){return(!i.detection.detected||i.detection.detected&&i.detection.dragEventCount<3)&&(Math.abs(t.movementX)>fN||Math.abs(t.movementY)>fN)}var xv,iH,fN,ya=P(()=>{xv=J(Fe()),Ns(),cN(),vv(),Khe(),Hr(),iH=3,fN=100});function $he(t){return isNaN(t)?"NaN":B0(t)?t.toFixed(0):H0(t,3).toString()}var aH,oH,bd,sH,pC,lH,uH,cH,dH,fH,hH,pH,mH,mC,hN=P(()=>{aa(),aH=J(Fe()),oH=J(Fe()),bd=J(Fe()),ht(),hC(),Hr(),oN(),ya(),pC=_e.div(sH||(sH=Y([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),uH=_e.input(lH||(lH=Y([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),dH=_e.div(cH||(cH=Y([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),pC,pC),hH=_e.div(fH||(fH=Y([`
  display: contents;
`]))),pH=t=>!0,mH=t=>{var i;let[a]=Dr({mode:"noFocus"}),l=(i=t.isValid)!=null?i:pH,f=(0,bd.useRef)(t);f.current=t;let p=(0,bd.useRef)(null);aN(p.current,()=>{p.current.blur()},a.current.mode==="editingViaKeyboard");let v=(0,bd.useRef)(null),_=(0,bd.useMemo)(()=>{let B=Ie=>{let ye=Ie.target,{value:Ne}=ye,et=a.current;a.current=K(I({},et),{currentEditedValueInString:Ne});let de=parseFloat(Ne);!isFinite(de)||!l(de)||f.current.temporarilySetValue(de)},j=()=>{a.current.mode==="editingViaKeyboard"&&(W(),a.current={mode:"noFocus"}),t.onBlur&&t.onBlur()},W=()=>{let Ie=a.current,ye=parseFloat(Ie.currentEditedValueInString);!isFinite(ye)||!l(ye)||Ie.valueBeforeEditing===ye?f.current.discardTemporaryValue():f.current.permanentlySetValue(ye)},$=Ie=>{Ie.key==="Escape"?(f.current.discardTemporaryValue(),a.current={mode:"noFocus"},p.current.blur()):(Ie.key==="Enter"||Ie.key==="Tab")&&(W(),p.current.blur())},re=Ie=>{a.current.mode==="noFocus"&&(p.current.focus(),Ie.preventDefault()),Ie.stopPropagation()},ne=()=>{a.current.mode==="noFocus"?ce():a.current.mode},ce=()=>{let Ie=f.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(Ie),valueBeforeEditing:Ie},setTimeout(()=>{p.current.focus(),p.current.setSelectionRange(0,100)})},Te;return{inputChange:B,onBlur:j,transitionToDraggingMode:()=>{var Ie;let ye=f.current.value;Te=(Ie=p.current)==null?void 0:Ie.getBoundingClientRect().width,a.current={mode:"dragging"};let Ne=ye,et=ye;return v.current=document.body.style.cursor,{onDrag(de,Le,Z,Ge){let Nt=Z.altKey?Ge/10:Ge,Re=et+t.nudge({deltaX:Nt,deltaFraction:Nt/Te,magnitude:1});et=t.range?pi(Re,t.range[0],t.range[1]):Re,f.current.temporarilySetValue(et)},onDragEnd(de){de?(Ne===et?f.current.discardTemporaryValue():f.current.permanentlySetValue(et),a.current={mode:"noFocus"}):(f.current.discardTemporaryValue(),a.current={mode:"noFocus"})},onClick(){p.current.focus(),p.current.setSelectionRange(0,100)}}},onInputKeyDown:$,onClick:re,onFocus:ne}},[]);(0,aH.useEffect)(()=>()=>{_.onBlur()},[]);let x=a.current.mode!=="editingViaKeyboard"?$he(t.value):a.current.currentEditedValueInString;typeof x=="number"&&isNaN(x)&&(x="NaN");let w=[p];t.inputRef&&w.push(t.inputRef);let A=bd.default.createElement(uH,{key:"input",type:"text",onChange:_.inputChange,value:x,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:fC(w),onMouseDown:B=>{B.stopPropagation()},onDoubleClick:B=>{B.preventDefault(),B.stopPropagation()},autoFocus:t.autoFocus}),{range:D}=t,R=parseFloat(x),C=D?bd.default.createElement(dH,{style:{"--percentage":pi((R-D[0])/(D[1]-D[0]),0,1)}}):null,[F,N]=(0,oH.useState)(null);return ji(F,{debugName:"form/BasicNumberInput",onDragStart:_.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:a.current.mode==="editingViaKeyboard"}),bd.default.createElement(pC,{className:t.className+" "+a.current.mode},bd.default.createElement(hH,{ref:N},A),C)},mC=mH});function Zhe({propConfig:t,editingTools:i,value:a,autoFocus:l}){let f=(0,pN.useCallback)(p=>t.nudgeFn(K(I({},p),{config:t})),[t]);return pN.default.createElement(mC,{value:a,temporarilySetValue:i.temporarilySetValue,discardTemporaryValue:i.discardTemporaryValue,permanentlySetValue:i.permanentlySetValue,range:t.range,nudge:f,autoFocus:l})}var pN,mN,gH=P(()=>{hN(),pN=J(Fe()),mN=Zhe});function Jhe({value:t,onChange:i,options:a,autoFocus:l}){let f=(0,Wx.useCallback)(p=>{i(String(p.target.value))},[i]);return Wx.default.createElement(gN,{role:"radiogroup"},Object.keys(a).map((p,v)=>Wx.default.createElement(yH,{key:"label-"+v,"data-checked":t===p},a[p],Wx.default.createElement(xH,{type:"radio",checked:t===p,value:p,onChange:f,name:"switchbox",autoFocus:l}))))}var Wx,vH,gN,_H,yH,bH,xH,SH,Qhe=P(()=>{Os(),Wx=J(Fe()),ht(),gN=_e.form(vH||(vH=Y([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),yH=_e.label(_H||(_H=Y([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),gN,Ix(.1,"white")),xH=_e.input(bH||(bH=Y([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),SH=Jhe}),epe=P(()=>{}),vN,_N,yN,wH=P(()=>{vN=J(Fe()),_N={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yN=vN.default.createContext&&vN.default.createContext(_N)});function EH(t){return t&&t.map(function(i,a){return wv.default.createElement(i.tag,xd({key:a},i.attr),EH(i.child))})}function Sv(t){return function(i){return wv.default.createElement(tpe,xd({attr:xd({},t.attr)},i),EH(t.child))}}function tpe(t){var i=function(a){var l=t.attr,f=t.size,p=t.title,v=TH(t,["attr","size","title"]),_=f||a.size||"1em",x;return a.className&&(x=a.className),t.className&&(x=(x?x+" ":"")+t.className),wv.default.createElement("svg",xd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,l,v,{className:x,style:xd(xd({color:t.color||a.color},a.style),t.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),p&&wv.default.createElement("title",null,p),t.children)};return yN!==void 0?wv.default.createElement(yN.Consumer,null,function(a){return i(a)}):i(_N)}var wv,xd,TH,npe=P(()=>{wv=J(Fe()),wH(),xd=function(){return xd=Object.assign||function(t){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},xd.apply(this,arguments)},TH=function(t,i){var a={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&i.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,l=Object.getOwnPropertySymbols(t);f<l.length;f++)i.indexOf(l[f])<0&&Object.prototype.propertyIsEnumerable.call(t,l[f])&&(a[l[f]]=t[l[f]]);return a}}),oa=P(()=>{epe(),npe(),wH()}),rpe=P(()=>{oa()}),ipe=P(()=>{oa()});function ape(t){return Sv({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(t)}var ope=P(()=>{oa()}),spe=P(()=>{oa()}),lpe=P(()=>{oa()});function upe(t){return Sv({attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(t)}function cpe(t){return Sv({attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(t)}var dpe=P(()=>{oa()}),fpe=P(()=>{oa()}),hpe=P(()=>{oa()}),ppe=P(()=>{oa()}),mpe=P(()=>{oa()}),gpe=P(()=>{oa()}),vpe=P(()=>{oa()}),_pe=P(()=>{oa()}),ype=P(()=>{oa()}),bpe=P(()=>{oa()});function MH(t){return Sv({attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(t)}var xpe=P(()=>{oa()}),Spe=P(()=>{oa()}),wpe=P(()=>{oa()}),Epe=P(()=>{oa()});function Tpe(t){return Sv({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(t)}var Mpe=P(()=>{oa()});function Ppe(t){return Sv({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(t)}var Cpe=P(()=>{oa()}),Ev=P(()=>{rpe(),ipe(),ope(),spe(),lpe(),dpe(),fpe(),hpe(),ppe(),mpe(),gpe(),vpe(),_pe(),ype(),bpe(),xpe(),Spe(),wpe(),Epe(),Mpe(),Cpe()});function Ape({value:t,onChange:i,options:a,className:l,autoFocus:f}){let p=(0,Kp.useCallback)(v=>{i(String(v.target.value))},[i]);return Kp.default.createElement(CH,null,Kp.default.createElement(RH,{className:l,value:t,onChange:p,autoFocus:f},Object.keys(a).map((v,_)=>Kp.default.createElement("option",{key:"option-"+_,value:v},a[v]))),Kp.default.createElement(kH,null,Kp.default.createElement(Tpe,null)))}var Kp,PH,CH,AH,kH,IH,RH,DH,kpe=P(()=>{Kp=J(Fe()),ht(),Ev(),CH=_e.div(PH||(PH=Y([`
  width: 100%;
  position: relative;
`]))),kH=_e.div(AH||(AH=Y([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),RH=_e.select(IH||(IH=Y([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),DH=Ape});function Ipe({propConfig:t,editingTools:i,value:a,autoFocus:l}){let f=(0,gC.useCallback)(p=>{i.permanentlySetValue(p)},[t,i]);return t.as==="menu"?gC.default.createElement(DH,{value:a,onChange:f,options:t.valuesAndLabels,autoFocus:l}):gC.default.createElement(SH,{value:a,onChange:f,options:t.valuesAndLabels,autoFocus:l})}var gC,OH,Rpe=P(()=>{gC=J(Fe()),Qhe(),kpe(),OH=Ipe}),NH,qx,LH,FH,UH,BH,vC,bN=P(()=>{ht(),NH=J(Fe()),qx=J(Fe()),hC(),Hr(),oN(),FH=_e.input.attrs({type:"text"})(LH||(LH=Y([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),UH=t=>!0,BH=t=>{var i,a;let[l]=Dr({mode:"noFocus"}),f=(i=t.isValid)!=null?i:UH,p=(0,qx.useRef)(t);p.current=t;let v=(0,qx.useRef)(null);aN(v.current,()=>{v.current.blur()},l.current.mode==="editingViaKeyboard");let _=(0,qx.useMemo)(()=>{let A=j=>{let W=j.target,{value:$}=W,re=l.current;l.current=K(I({},re),{currentEditedValueInString:$}),f($)&&p.current.temporarilySetValue($)},D=()=>{var j,W;l.current.mode==="editingViaKeyboard"&&(R(),l.current={mode:"noFocus"}),(W=(j=p.current).onBlur)==null||W.call(j)},R=()=>{let j=l.current,W=j.currentEditedValueInString;f(W)?j.valueBeforeEditing===W?p.current.discardTemporaryValue():p.current.permanentlySetValue(W):p.current.discardTemporaryValue()},C=j=>{j.key==="Escape"?(p.current.discardTemporaryValue(),l.current={mode:"noFocus"},v.current.blur()):(j.key==="Enter"||j.key==="Tab")&&(R(),v.current.blur())},F=j=>{l.current.mode==="noFocus"&&(v.current.focus(),j.preventDefault()),j.stopPropagation()},N=()=>{l.current.mode==="noFocus"?B():l.current.mode},B=()=>{let j=p.current.value;l.current={mode:"editingViaKeyboard",currentEditedValueInString:String(j),valueBeforeEditing:j},setTimeout(()=>{v.current.focus()})};return{inputChange:A,onBlur:D,onInputKeyDown:C,onClick:F,onFocus:N}},[]);(0,NH.useEffect)(()=>()=>{_.onBlur()},[]);let x=l.current.mode!=="editingViaKeyboard"?t.value:l.current.currentEditedValueInString,w=[v];return t.inputRef&&w.push(t.inputRef),qx.default.createElement(FH,{key:"input",type:"text",className:"".concat((a=t.className)!=null?a:""," ").concat(f(x)?"":"invalid"),onChange:_.inputChange,value:x,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:fC(w),onMouseDown:A=>{A.stopPropagation()},onDoubleClick:A=>{A.preventDefault(),A.stopPropagation()},autoFocus:t.autoFocus})},vC=BH});function Dpe({editingTools:t,value:i,autoFocus:a}){return zH.default.createElement(vC,{value:i,temporarilySetValue:t.temporarilySetValue,discardTemporaryValue:t.discardTemporaryValue,permanentlySetValue:t.permanentlySetValue,autoFocus:a})}var zH,jH,Ope=P(()=>{zH=J(Fe()),bN(),jH=Dpe});function Npe(t){t=t.trim().toLowerCase();let i=t.match(wN);if(!i)return{r:0,g:0,b:0,a:1};let a=Lpe(i[1]);return{r:parseInt(a.substr(0,2),16)/255,g:parseInt(a.substr(2,2),16)/255,b:parseInt(a.substr(4,2),16)/255,a:parseInt(a.substr(6,2),16)/255}}function xN(t,{removeAlphaIfOpaque:i=!1}={}){let a=(t.a*255|256).toString(16).slice(1),l=(t.r*255|256).toString(16).slice(1)+(t.g*255|256).toString(16).slice(1)+(t.b*255|256).toString(16).slice(1)+(i&&a==="ff"?"":a);return"#".concat(l)}function SN(t){return K(I({},t),{toString(){return xN(this,{removeAlphaIfOpaque:!0})}})}function Lpe(t){switch(t.length){case 3:return"".concat(t.repeat(2),"ff");case 4:let i=t.substr(0,3),a=t[3];return"".concat(i.repeat(2)).concat(a.repeat(2));case 6:return"".concat(t,"ff")}return t}var wN,VH=P(()=>{wN=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function _C(t){let i=(0,EN.useRef)(t),a=(0,EN.useRef)(l=>{i.current&&i.current(l)});return i.current=t,a.current}var EN,HH=P(()=>{EN=J(Fe())}),Yp,yC=P(()=>{Yp=(t,i=0,a=1)=>t>a?a:t<i?i:t}),Xx,TN,GH,MN,PN=P(()=>{Xx=J(Fe()),TN=(0,Xx.createContext)(void 0),GH=({children:t})=>{let[i,a]=(0,Xx.useState)(!1);return Xx.default.createElement(TN.Provider,{value:{editing:i,setEditing:a}},t)},MN=()=>(0,Xx.useContext)(TN)}),qf,Tv,WH,bC,CN,AN,qH,XH,KH,YH,Kx,xC=P(()=>{qf=J(Fe()),HH(),yC(),ht(),PN(),Tv=t=>"touches"in t,WH=(t,i)=>{for(let a=0;a<t.length;a++)if(t[a].identifier===i)return t[a];return t[0]},bC=t=>t&&t.ownerDocument.defaultView||self,CN=(t,i,a)=>{let l=t.getBoundingClientRect(),f=Tv(i)?WH(i.touches,a):i;return{left:Yp((f.pageX-(l.left+bC(t).pageXOffset))/l.width),top:Yp((f.pageY-(l.top+bC(t).pageYOffset))/l.height)}},AN=t=>{!Tv(t)&&t.preventDefault()},qH=(t,i)=>i&&!Tv(t),KH=_e.div(XH||(XH=Y([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),YH=t=>{var i=t,{onMove:a,onKey:l}=i,f=ue(i,["onMove","onKey"]);let p=(0,qf.useRef)(null),v=_C(a),_=_C(l),x=(0,qf.useRef)(null),w=(0,qf.useRef)(!1),{setEditing:A}=MN(),[D,R,C]=(0,qf.useMemo)(()=>{let F=({nativeEvent:$})=>{let re=p.current;if(re&&(AN($),!(qH($,w.current)||!re))){if(Tv($)){w.current=!0;let ne=$.changedTouches||[];ne.length&&(x.current=ne[0].identifier)}re.focus(),A(!0),v(CN(re,$,x.current)),W(!0)}},N=$=>{AN($),(Tv($)?$.touches.length>0:$.buttons>0)&&p.current?v(CN(p.current,$,x.current)):(A(!1),W(!1))},B=$=>{A(!1),W(!1)},j=$=>{let re=$.which||$.keyCode;re<37||re>40||($.preventDefault(),_({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function W($){let re=w.current,ne=p.current,ce=bC(ne),Te=$?ce.addEventListener:ce.removeEventListener;Te(re?"touchmove":"mousemove",N),Te(re?"touchend":"mouseup",B)}return[F,j,W]},[_,v]);return(0,qf.useEffect)(()=>C,[C]),qf.default.createElement(KH,K(I({},f),{onTouchStart:D,onMouseDown:D,ref:p,onKeyDown:R,tabIndex:0,role:"slider"}))},Kx=qf.default.memo(YH)}),kN,$H,ZH,JH,QH,e9,t9,SC,IN=P(()=>{kN=J(Fe()),ht(),xC(),ZH=_e(Kx)($H||($H=Y([""]))),QH=_e.div(JH||(JH=Y([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),ZH),t9=_e.div(e9||(e9=Y([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),SC=({className:t,color:i,left:a,top:l=.5})=>{let f={top:"".concat(l*100,"%"),left:"".concat(a*100,"%")};return kN.default.createElement(QH,{style:f,className:t},kN.default.createElement(t9,{style:{backgroundColor:i}}))}}),_o,wC=P(()=>{_o=(t,i=0,a=Math.pow(10,i))=>Math.round(a*t)/a}),RN,EC,TC,n9,r9,MC=P(()=>{wC(),RN=({h:t,s:i,v:a,a:l})=>{let f=(200-i)*a/100;return{h:_o(t),s:_o(f>0&&f<200?i*a/100/(f<=100?f:200-f)*100:0),l:_o(f/2),a:_o(l,2)}},EC=t=>{let{h:i,s:a,l}=RN(t);return"hsl(".concat(i,", ").concat(a,"%, ").concat(l,"%)")},TC=t=>{let{h:i,s:a,l,a:f}=RN(t);return"hsla(".concat(i,", ").concat(a,"%, ").concat(l,"%, ").concat(f,")")},n9=({h:t,s:i,v:a,a:l})=>{t=t/360*6,i=i/100,a=a/100;let f=Math.floor(t),p=a*(1-i),v=a*(1-(t-f)*i),_=a*(1-(1-t+f)*i),x=f%6;return{r:_o([a,v,p,p,_,a][x]*255),g:_o([_,a,a,v,p,p][x]*255),b:_o([p,p,_,a,a,v][x]*255),a:_o(l,2)}},r9=({r:t,g:i,b:a,a:l})=>{let f=Math.max(t,i,a),p=f-Math.min(t,i,a),v=p?f===t?(i-a)/p:f===i?2+(a-t)/p:4+(t-i)/p:0;return{h:_o(60*(v<0?v+6:v)),s:_o(f?p/f*100:0),v:_o(f/255*100),a:l}}}),Yx,i9,a9,o9,s9,l9,u9,Fpe=P(()=>{Yx=J(Fe()),xC(),IN(),MC(),yC(),wC(),ht(),a9=_e.div(i9||(i9=Y([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),s9=_e(SC)(o9||(o9=Y([`
  z-index: 2;
`]))),l9=({className:t,hue:i,onChange:a})=>Yx.default.createElement(a9,{className:t},Yx.default.createElement(Kx,{onMove:l=>{a({h:360*l.left})},onKey:l=>{a({h:Yp(i+l.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":_o(i)},Yx.default.createElement(s9,{left:i/360,color:EC({h:i,s:100,v:100,a:1})}))),u9=Yx.default.memo(l9)}),$x,c9,d9,f9,h9,p9,m9,Upe=P(()=>{$x=J(Fe()),xC(),IN(),MC(),yC(),wC(),ht(),d9=_e.div(c9||(c9=Y([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),h9=_e(SC)(f9||(f9=Y([`
  z-index: 3;
`]))),p9=({hsva:t,onChange:i})=>{let a=p=>{i({s:p.left*100,v:100-p.top*100})},l=p=>{i({s:Yp(t.s+p.left*100,0,100),v:Yp(t.v-p.top*100,0,100)})},f={backgroundColor:EC({h:t.h,s:100,v:100,a:1})};return $x.default.createElement(d9,{style:f},$x.default.createElement(Kx,{onMove:a,onKey:l,"aria-label":"Color","aria-valuetext":"Saturation ".concat(_o(t.s),"%, Brightness ").concat(_o(t.v),"%")},$x.default.createElement(h9,{top:1-t.v/100,left:t.s/100,color:EC(t)})))},m9=$x.default.memo(p9)}),Zx,g9,v9,_9,y9,b9,x9,S9,Bpe=P(()=>{Zx=J(Fe()),xC(),IN(),MC(),yC(),wC(),ht(),v9=_e.div(g9||(g9=Y([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),y9=_e.div.attrs(({colorFrom:t,colorTo:i})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(t,", ").concat(i,")")}}))(_9||(_9=Y([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),x9=_e(SC)(b9||(b9=Y([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),S9=({className:t,hsva:i,onChange:a})=>{let l=_=>{a({a:_.left})},f=_=>{a({a:Yp(i.a+_.left)})},p=TC(Object.assign({},i,{a:0})),v=TC(Object.assign({},i,{a:1}));return Zx.default.createElement(v9,{className:t},Zx.default.createElement(y9,{colorFrom:p,colorTo:v}),Zx.default.createElement(Kx,{onMove:l,onKey:f,"aria-label":"Alpha","aria-valuetext":"".concat(_o(i.a*100),"%")},Zx.default.createElement(x9,{left:i.a,color:TC(i)})))}}),PC,w9=P(()=>{PC=(t,i)=>{if(t===i)return!0;for(let a in t)if(t[a]!==i[a])return!1;return!0}});function zpe(t,i,a,l){let{editing:f}=MN(),[p,v]=(0,Sd.useState)(i),_=_C(a),x=_C(l),w=f?p:i,[A,D]=(0,Sd.useState)(()=>t.toHsva(w)),R=(0,Sd.useRef)({color:w,hsva:A}),C=(0,Sd.useRef)({color:w,hsva:A});(0,Sd.useEffect)(()=>{f&&v(R.current.color)},[f]),(0,Sd.useEffect)(()=>{let N=t.fromHsva(A);f?!PC(A,R.current.hsva)&&!t.equal(N,R.current.color)&&(R.current={hsva:A,color:N},v(N),_(N)):!PC(A,C.current.hsva)&&!t.equal(N,C.current.color)&&(C.current={hsva:A,color:N},R.current={hsva:A,color:N},x(N))},[f,A,t,_,x]),(0,Sd.useEffect)(()=>{if(!f&&!t.equal(w,C.current.color)){let N=t.toHsva(w);C.current={hsva:N,color:w},D(N)}},[f,w,t]);let F=(0,Sd.useCallback)(N=>{D(B=>Object.assign({},B,N))},[]);return[A,F]}var Sd,jpe=P(()=>{Sd=J(Fe()),w9(),HH(),PN()}),Mv,E9,T9,M9,Vpe=P(()=>{Mv=J(Fe()),Fpe(),Upe(),Bpe(),jpe(),ht(),T9=_e.div(E9||(E9=Y([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),M9=t=>{var i=t,{className:a,colorModel:l,color:f=l.defaultColor,temporarilySetValue:p,permanentlySetValue:v,discardTemporaryValue:_}=i,x=ue(i,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[w,A]=zpe(l,f,p,v);return(0,Mv.useEffect)(()=>()=>{_()},[]),Mv.default.createElement(T9,I({},x),Mv.default.createElement(m9,{hsva:w,onChange:A}),Mv.default.createElement(u9,{hue:w.h,onChange:A}),Mv.default.createElement(S9,{hsva:w,onChange:A}))}}),DN,P9,C9,A9,k9,Hpe=P(()=>{DN=J(Fe()),Vpe(),w9(),MC(),PN(),P9=t=>({r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}),C9=t=>({r:t.r*255,g:t.g*255,b:t.b*255,a:t.a}),A9={defaultColor:{r:0,g:0,b:0,a:1},toHsva:t=>r9(C9(t)),fromHsva:t=>P9(n9(t)),equal:PC},k9=t=>DN.default.createElement(GH,null,DN.default.createElement(M9,K(I({},t),{permanentlySetValue:i=>{t.permanentlySetValue(i)},colorModel:A9})))}),Gpe=P(()=>{Hpe()}),I9,R9,D9,Wpe=P(()=>{I9=J(Fe()),R9=function(t){(0,I9.useEffect)(t,[])},D9=R9}),O9,N9,L9,qpe=P(()=>{O9=J(Fe()),Wpe(),N9=function(t){var i=(0,O9.useRef)(t);i.current=t,D9(function(){return function(){return i.current()}})},L9=N9}),CC,F9,U9,Xpe=P(()=>{CC=J(Fe()),qpe(),F9=function(t){var i=(0,CC.useRef)(0),a=(0,CC.useState)(t),l=a[0],f=a[1],p=(0,CC.useCallback)(function(v){cancelAnimationFrame(i.current),i.current=requestAnimationFrame(function(){f(v)})},[]);return L9(function(){cancelAnimationFrame(i.current)}),[l,p]},U9=F9});function Kpe(t){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];t&&t.addEventListener&&t.addEventListener.apply(t,i)}function Ype(t){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];t&&t.removeEventListener&&t.removeEventListener.apply(t,i)}var AC,$pe=P(()=>{AC=typeof window<"u"}),B9,z9,kC,ON=P(()=>{B9=J(Fe()),Xpe(),$pe(),z9=function(t,i){t===void 0&&(t=1/0),i===void 0&&(i=1/0);var a=U9({width:AC?window.innerWidth:t,height:AC?window.innerHeight:i}),l=a[0],f=a[1];return(0,B9.useEffect)(function(){if(AC){var p=function(){f({width:window.innerWidth,height:window.innerHeight})};return Kpe(window,"resize",p),function(){Ype(window,"resize",p)}}},[]),l},kC=z9});function NN(t){let[i,a]=(0,LN.useState)(null);return(0,LN.useLayoutEffect)(()=>(t&&a(t.getBoundingClientRect()),()=>{a(null)}),[t]),i}var LN,j9=P(()=>{LN=J(Fe())}),V9,H9,FN,G9=P(()=>{V9=J(Fe()),H9=(0,V9.createContext)({}),FN=H9});function Zpe(t,i,a){let l=t.getBoundingClientRect(),f=p=>{(p.clientX<l.left-i||p.clientX>l.left+l.width+i||p.clientY<l.top-i||p.clientY>l.top+l.height+i)&&a(p)};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}}var Jpe=P(()=>{}),W9,IC,UN,q9,BN,X9=P(()=>{W9=J(Fe()),IC=J(Fe()),ON(),j9(),G9(),Hr(),oN(),Jpe(),vv(),aa(),UN=8,q9=t=>{var i,a;let l=t.children(),[f,p]=Dr(null),v=l.props.style?I({},l.props.style):{};v.position="absolute";let _=NN(p),x=NN(t.target),w=kC(),[A,D]=(0,IC.useState)({});return(0,IC.useLayoutEffect)(()=>{var R,C,F;if(!_||!p||!x)return;let N=(R=t.verticalGap)!=null?R:8,B={},j=(C=t.verticalPlacement)!=null?C:"bottom",W=0,$=0;j==="bottom"?x.bottom+_.height+N<w.height?(j="bottom",W=x.bottom+N,B.top="0px"):x.top>_.height+N?(j="top",W=x.top-(_.height+N),B.bottom="0px",B.transform="rotateZ(180deg)"):j="overlay":j==="top"&&(x.top>_.height+N?(j="top",W=x.top-(_.height+N),B.bottom="0px",B.transform="rotateZ(180deg)"):x.bottom+_.height+N<w.height?(j="bottom",W=x.bottom+N,B.top="0px"):j="overlay");let re=0;if(j!=="overlay"){let Ne=x.left+x.width/2;Ne<_.width/2?($=N,re=Math.max(Ne-N,UN)):Ne+_.width/2>w.width?($=w.width-(N+_.width),re=Math.min(Ne-$,_.width-UN)):($=Ne-_.width/2,re=_.width/2),B.left=re+"px"}let{minX:ne=-1/0,maxX:ce=1/0,minY:Te=-1/0,maxY:Ie=1/0}=(F=t.constraints)!=null?F:{},ye={left:pi($,ne,ce-_.width),top:pi(W,Te,Ie+_.height)};if(p.style.left=ye.left+"px",p.style.top=ye.top+"px",D(B),t.onPointerOutside)return Zpe(p,t.onPointerOutside.threshold,t.onPointerOutside.callback)},[_,p,t.target,x,w,t.onPointerOutside]),aN([p,(i=t.target)!=null?i:null],(a=t.onClickOutside)!=null?a:$l),W9.default.createElement(FN.Provider,{value:A},(0,IC.cloneElement)(l,{ref:f,style:v}))},BN=q9});function qu(t,i){let{isPointerBeingCaptured:a}=nH("usePopover"),[l,f]=Dr({isOpen:!1}),p=(0,yo.useRef)(t),v=(0,yo.useCallback)(R=>{l.current={isOpen:!1}},[]),_=(0,yo.useCallback)((R,C)=>{var F;let N=typeof p.current=="function"?p.current():p.current;function B(){w.childHasFocusRef.current||N.closeOnClickOutside!==!1&&v("clicked outside popover")}l.current={isOpen:!0,clickPoint:{clientX:R.clientX,clientY:R.clientY},target:C,opts:N,onClickOutside:B,onPointerOutside:N.closeWhenPointerIsDistant===!1?void 0:{threshold:(F=N.pointerDistanceThreshold)!=null?F:100,callback:()=>{w.childHasFocusRef.current||a()||v("pointer outside")}}}},[]),x=(0,yo.useCallback)((...R)=>{l.current.isOpen?v("toggled"):_(...R)},[]),w=Qpe({state:f}),[,A]=(0,yo.useContext)(w1);(0,yo.useEffect)(()=>{let R;return f.isOpen&&(R=A()),()=>R?.()},[f.isOpen]);let D=(0,yo.useContext)(pv);return{node:f.isOpen?(0,K9.createPortal)(yo.default.createElement(zN.Provider,{value:w.childPopoverLock},yo.default.createElement(BN,{children:i,target:f.target,onClickOutside:f.onClickOutside,onPointerOutside:f.onPointerOutside,constraints:f.opts.constraints,verticalGap:f.opts.verticalGap})),D):yo.default.createElement(yo.default.Fragment,null),open:_,close:v,toggle:x,isOpen:f.isOpen}}function Qpe(t){let i=(0,yo.useContext)(zN);(0,yo.useEffect)(()=>{if(t.state.isOpen){let l=i.takeFocus();return()=>{l.releaseFocus()}}},[t.state.isOpen]);let a=(0,yo.useRef)(!1);return{childHasFocusRef:a,childPopoverLock:{takeFocus(){return a.current=!0,{releaseFocus(){a.current=!1}}}}}}var yo,K9,zN,Xu=P(()=>{cN(),Hr(),yo=J(Fe()),K9=J(Ma()),Xp(),X9(),CL(),zN=yo.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),wd,Y9,$9,Z9,J9,Q9,eG,tG,nG,rG,iG,aG,oG,eme=P(()=>{wd=J(Fe()),ht(),G9(),$9=_e.div(Y9||(Y9=Y([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),J9=_e.div(Z9||(Z9=Y([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),eG=_e.path(Q9||(Q9=Y([`
  fill: var(--popover-bg);
`]))),nG=_e.path(tG||(tG=Y([`
  fill: var(--popover-inner-stroke);
`]))),iG=_e.path(rG||(rG=Y([`
  fill: var(--popover-outer-stroke);
`]))),aG=(0,wd.forwardRef)(({className:t},i)=>{let a=(0,wd.useContext)(FN);return wd.default.createElement($9,{className:t,ref:i,style:I({},a)},wd.default.createElement(J9,null,wd.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wd.default.createElement(iG,{d:"M6 0L0 6H12L6 0Z"}),wd.default.createElement(nG,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),wd.default.createElement(eG,{d:"M6 3L0 9H12L6 3Z"}))))}),oG=aG}),RC,jN,sG,lG,uG,Ku,Yu=P(()=>{Gr(),Os(),RC=J(Fe()),ht(),eme(),jN=Yl(.05,"#2a2a31"),lG=_e.div(sG||(sG=Y([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),jN,zr),uG=RC.default.forwardRef(({children:t,className:i,showPopoverEdgeTriangle:a=!0},l)=>RC.default.createElement(lG,{className:i,ref:l},a?RC.default.createElement(oG,null):void 0,t)),Ku=uG});function tme({editingTools:t,value:i,autoFocus:a}){let l=(0,$u.useRef)(null),f=(0,$u.useCallback)(v=>{let _=SN(Npe(v));t.permanentlySetValue(_)},[t]),p=qu({debugName:"RgbaPropEditor"},()=>$u.default.createElement(vG,null,$u.default.createElement(k9,{color:{r:i.r,g:i.g,b:i.b,a:i.a},temporarilySetValue:v=>{let _=SN(v);t.temporarilySetValue(_)},permanentlySetValue:v=>{let _=SN(v);t.permanentlySetValue(_)},discardTemporaryValue:t.discardTemporaryValue})));return $u.default.createElement($u.default.Fragment,null,$u.default.createElement(dG,null,$u.default.createElement(hG,{rgbaColor:i,ref:l,onClick:v=>{p.toggle(v,l.current)}}),$u.default.createElement(mG,{value:xN(i,{removeAlphaIfOpaque:!0}),temporarilySetValue:VN,discardTemporaryValue:VN,permanentlySetValue:f,isValid:v=>!!v.match(wN),autoFocus:a})),p.node)}var $u,cG,dG,fG,hG,pG,mG,VN,gG,vG,_G,nme=P(()=>{VH(),VH(),$u=J(Fe()),Gpe(),ht(),Xu(),bN(),Yu(),dG=_e.div(cG||(cG=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),hG=_e.div.attrs(t=>({style:{background:xN(t.rgbaColor)}}))(fG||(fG=Y([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),mG=_e(vC)(pG||(pG=Y([`
  flex: 1;
`]))),VN=()=>{},vG=_e.div(gG||(gG=Y([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),jN),_G=tme});function rme({propConfig:t,editingTools:i,value:a,autoFocus:l}){let[f,p]=Jl.default.useState();(0,Jl.useEffect)(()=>{p(a?i.getAssetUrl(a):void 0)},[a]);let v=(0,Jl.useCallback)(x=>ke(this,null,function*(){let w=x.target.files[0];i.permanentlySetValue({type:"image",id:void 0});let A=yield i.createAsset(w);A?i.permanentlySetValue({type:"image",id:A}):i.permanentlySetValue(a),x.target.value=null}),[i,a]),_=!(a!=null&&a.id);return Jl.default.createElement(HN,{empty:_},Jl.default.createElement(TG,{empty:_,title:_?"Upload image":'"'.concat(a.id,'" (Click to upload new image)')},Jl.default.createElement(PG,{type:"file",onChange:v,accept:"image/*,.hdr",autoFocus:l}),f?Jl.default.createElement(AG,{src:f}):Jl.default.createElement(xG,null)),!_&&Jl.default.createElement(IG,{title:"Delete image",onClick:()=>{i.permanentlySetValue({type:"image",id:void 0})}},Jl.default.createElement($O,null)))}var Jl,yG,HN,bG,xG,SG,wG,EG,TG,MG,PG,CG,AG,kG,IG,RG,ime=P(()=>{Bx(),Jl=J(Fe()),ht(),HN=_e.div(yG||(yG=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),xG=_e.div(bG||(bG=Y([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),TG=_e.label(EG||(EG=Y([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),t=>t.empty?$a(SG||(SG=Y([""]))):$a(wG||(wG=Y([""])))),PG=_e.input.attrs({type:"file"})(MG||(MG=Y([`
  display: none;
`]))),AG=_e.img(CG||(CG=Y([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),IG=_e.button(kG||(kG=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),HN),RG=rme});function ame({propConfig:t,editingTools:i,value:a,autoFocus:l}){let[f,p]=Ql.default.useState();(0,Ql.useEffect)(()=>{p(a?i.getAssetUrl(a):void 0)},[a]);let v=(0,Ql.useCallback)(x=>ke(this,null,function*(){let w=x.target.files[0];i.permanentlySetValue({type:"file",id:void 0});let A=yield i.createAsset(w);A?i.permanentlySetValue({type:"file",id:A}):i.permanentlySetValue(a),x.target.value=null}),[i,a]),_=!(a!=null&&a.id);return Ql.default.createElement(GN,{empty:_},Ql.default.createElement(BG,{empty:_,title:_?"Upload file":'"'.concat(a.id,'" (Click to upload new file)')},Ql.default.createElement(jG,{type:"file",onChange:v,autoFocus:l}),f?Ql.default.createElement(XO,null):Ql.default.createElement(NG,null)),!_&&Ql.default.createElement(HG,{title:"Delete file",onClick:()=>{i.permanentlySetValue({type:"file",id:void 0})}},Ql.default.createElement($O,null)))}var Ql,DG,GN,OG,NG,LG,FG,UG,BG,zG,jG,VG,HG,GG,ome=P(()=>{Bx(),Ql=J(Fe()),ht(),GN=_e.div(DG||(DG=Y([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),NG=_e.div(OG||(OG=Y([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),BG=_e.label(UG||(UG=Y([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),t=>t.empty?$a(LG||(LG=Y([""]))):$a(FG||(FG=Y([""])))),jG=_e.input.attrs({type:"file"})(zG||(zG=Y([`
  display: none;
`]))),HG=_e.button(VG||(VG=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),GN),GG=ame}),WN,WG=P(()=>{Whe(),gH(),Rpe(),Ope(),nme(),ime(),ome(),WN={number:mN,string:jH,boolean:qV,stringLiteral:OH,rgba:_G,image:RG,file:GG}});function Jx(t){let i=new WeakMap;return a=>(i.has(a)||i.set(a,t(a)),i.get(a))}var DC=P(()=>{});function Zu(t){return t.type==="compound"||t.type==="enum"}function OC(t,i){if(!t)return;let[a,...l]=i;if(a===void 0)return t;if(!Zu(t))return;let f=t.type==="enum"?t.cases[a]:t.props[a];return OC(f,l)}function NC(t,i){let a=i.deserializeAndSanitize(t);return a===void 0?i.default:a}function sme(t){return!Zu(t)}function*Qx(t,i){if(t.type==="compound")for(let a in t.props)yield*ot(Qx(t.props[a],[...i,a]));else{if(t.type==="enum")throw new Error("Not implemented yet");return yield{path:i,conf:t}}}var qN,Xf=P(()=>{DC(),qN=Jx(t=>{if(t.type==="enum")throw new Error("Not implemented yet for enums");for(let i in t.props){let a=t.props[i];if(Zu(a)){if(qN(a))return!0}else return!0}return!1})}),XN,qG=P(()=>{XN="calc(var(--left-pad) + var(--depth) * var(--step))"}),XG,Kf,$p=P(()=>{ht(),Kf=$a(XG||(XG=Y([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),t=>t.isHighlighted==="self"?"#CCC":"#919191")}),e1,LC,KG,YG,$G,ZG,JG,QG,eW=P(()=>{vv(),e1=J(Fe()),ht(),LC=26,YG=_e.li(KG||(KG=Y([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),LC,t=>t.enabled?"white":"#8f8f8f",t=>t.enabled?"normal":"not-allowed",t=>t.enabled?"rgba(63, 174, 191, 0.75)":"initial"),ZG=_e.span($G||($G=Y([""]))),JG=t=>e1.default.createElement(YG,{onClick:t.enabled?t.onClick:$l,enabled:t.enabled,title:t.enabled?void 0:"Disabled"},e1.default.createElement(ZG,null,e1.default.createElement(e1.default.Fragment,null,t.label))),QG=JG});function lme(t){let i=(0,KN.useRef)(t);i.current=t,(0,KN.useEffect)(()=>{let a=l=>i.current(l);return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var KN,ume=P(()=>{KN=J(Fe())}),t1,tW,nW,rW,iW,aW,oW,sW,YN,lW=P(()=>{t1=J(Fe()),eW(),ht(),Os(),Gr(),tW=190,nW=!0,iW=_e.ul(rW||(rW=Y([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),tW,Yl(.2,"#111"),zr),oW=_e.div(aW||(aW=Y([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),sW=t1.default.forwardRef((t,i)=>t1.default.createElement(iW,{ref:i},nW&&t.displayName?t1.default.createElement(oW,null,t.displayName):null,t.items.map((a,l)=>t1.default.createElement(QG,{key:"item-".concat(l),label:a.label,enabled:a.enabled!==!1,onClick:f=>{a.callback&&a.callback(f),t.onRequestClose()}})))),YN=sW}),uW,cW,FC,dW,n1,fW,hW,cme=P(()=>{j9(),uW=J(Fe()),cW=J(Fe()),FC=J(Fe()),dW=J(Ma()),ON(),eW(),Xp(),ume(),lW(),n1=20,fW=t=>{let[i,a]=(0,FC.useState)(null),l=NN(i),f=kC();(0,FC.useLayoutEffect)(()=>{if(!l||!i)return;let _={left:l.width/2,top:LC/2+(t.displayName?LC:0)},x={left:t.clickPoint.clientX-_.left,top:t.clickPoint.clientY-_.top};x.left<0?x.left=0:x.left+l.width>f.width&&(x.left=f.width-l.width),x.top<0?x.top=0:x.top+l.height>f.height&&(x.top=f.height-l.height),i.style.left=x.left+"px",i.style.top=x.top+"px";let w=A=>{(A.clientX<x.left-n1||A.clientX>x.left+l.width+n1||A.clientY<x.top-n1||A.clientY>x.top+l.height+n1)&&t.onRequestClose()};return window.addEventListener("mousemove",w),()=>{window.removeEventListener("mousemove",w)}},[l,i,t.clickPoint,f,t.onRequestClose]);let p=(0,cW.useContext)(pv);lme(_=>{_.key==="Escape"&&t.onRequestClose()});let v=(0,uW.useMemo)(()=>{let _=Array.isArray(t.items)?t.items:t.items();return _.length>0?_:[{label:t.displayName?"No actions for ".concat(t.displayName):"No actions found",enabled:!1}]},[t.items]);return(0,dW.createPortal)(FC.default.createElement(YN,{items:v,onRequestClose:t.onRequestClose,displayName:t.displayName,ref:a}),p)},hW=fW}),UC,pW,mW,dme=P(()=>{UC=J(Fe()),pW=(t,i)=>{let[a,l]=(0,UC.useState)({isOpen:!1}),f=(0,UC.useCallback)(()=>l({isOpen:!1}),[]);return(0,UC.useEffect)(()=>{if(!t||i.disabled===!0){l({isOpen:!1});return}let p=v=>{l({isOpen:!0,event:v}),v.preventDefault(),v.stopPropagation()};return t.addEventListener("contextmenu",p),()=>{t.removeEventListener("contextmenu",p)}},[t,i.disabled]),[a,f]},mW=pW});function jo(t,i){let[a,l]=mW(t,i),[,f]=(0,Pv.useContext)(w1);return(0,Pv.useEffect)(()=>{var p;let v;return a.isOpen&&((p=i.onOpen)==null||p.call(i),v=f()),()=>v?.()},[a.isOpen,i.onOpen]),[a.isOpen?Pv.default.createElement(hW,{items:i.menuItems,displayName:i.displayName,clickPoint:a.event,onRequestClose:l}):gW,l,a.isOpen]}var Pv,gW,Vo=P(()=>{Pv=J(Fe()),cme(),dme(),CL(),gW=Pv.default.createElement(Pv.default.Fragment,null)});function Yf(t,i){return i.length===0?t:Qc(t,i)}var BC=P(()=>{Tp()});function vW(t,i){return t==null?null:t instanceof Element&&t.matches(i)?t:vW(t.parentElement,i)}var fme=P(()=>{});function r1(t,i){let a=t;for(let l of i)a=a[l];return a}var zC=P(()=>{});function hme(t){let i=new VC.Atom(void 0),a=new VC.Atom({}),l=new VC.Atom({}),f=0;return{addRelatedFlags(p,v){let _=String(++f),x=v.map(w=>{let A={flag:w.flag},D=[w.affects,p,_];return l.setByPointer(R=>r1(R,D),A),D});return()=>{for(let w of x)l.setByPointer(A=>r1(A,w),void 0)}},usePresenceFlag(p){},setUserHover(p){let v=i.get();v!==p&&(v&&a.setByPointer(_=>_[v],!1),i.set(p),p&&a.setByPointer(_=>_[p],!0))}}}function Zp(t){let i=jC.default.useContext(ZN),a=i.usePresenceFlag(t);return{attrs:{[HC]:t},flag:a,useRelations(l,f){(0,$N.useEffect)(()=>t&&i.addRelatedFlags(t,l()),[t,...f])}}}function _W(t){let i=jC.default.useContext(ZN),a=Gf("PresenceListeners");(0,$N.useEffect)(()=>{let l;if(!t)return;let f=p=>{if(p.target instanceof Node){let v=vW(p.target,"[".concat(HC,"]"));if(v){let _=v.getAttribute(HC);l!==_&&(l=_,i.setUserHover(_||void 0),a._debug("Updated current hover",{itemKey:_}));return}l!=null&&(l=null,i.setUserHover(void 0),a._debug("Cleared current hover"))}};return t.addEventListener("mouseover",f),()=>{t.removeEventListener("mouseover",f),l!=null&&(l=null,a._debug("Cleared current hover as part of cleanup"))}},[t,i])}var jC,$N,yW,VC,bW,ZN,HC,Jp=P(()=>{jC=J(Fe()),$N=J(Fe()),Wf(),yW=Ut(),VC=Ut(),bn(),fme(),zC(),bW=(0,yW.prism)(()=>{}),bW.keepHot(),ZN=jC.default.createContext(hme()),HC="data-pi-key"}),Qa,xW,i1,SW,JN,$f,wW,QN,EW,TW,MW,GC,PW,CW,AW,kW,IW,RW,a1,DW,eL,WC=P(()=>{Gr(),Os(),Qa=J(Fe()),ht(),Jp(),i1=_e.div(xW||(xW=Y([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),Yl(.2,"black")),JN=_e.div(SW||(SW=Y([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),i1),$f={offColor:"#555",onColor:"#e0c917"},QN=_e(JN)(wW||(wW=Y([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),t=>t.presence===2?"white":t.isOn?$f.onColor:$f.offColor),TW=$a(EW||(EW=Y([`
  pointer-events: none !important;
`]))),GC=_e(JN)(MW||(MW=Y([`
  color: `,`;

  `,`;
`])),t=>t.flag===2?"white":t.available?$f.onColor:$f.offColor,t=>t.available?zr:TW),CW=_e(GC)(PW||(PW=Y([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),i1),kW=_e(GC)(AW||(AW=Y([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),i1),(t=>{let i=_e.g(IW||(IW=Y([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),GC);t.Prev=()=>Qa.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qa.default.createElement(i,{transform:"translate(6 3)"},Qa.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),t.Next=()=>Qa.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qa.default.createElement(i,{transform:"translate(1 3)"},Qa.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let a=_e.g(RW||(RW=Y([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),QN);t.Cur=()=>Qa.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qa.default.createElement(a,{transform:"translate(1 4)"},Qa.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(a1||(a1={})),DW=t=>{var i,a,l,f,p;let v=Zp((i=t.prev)==null?void 0:i.itemKey),_=Zp(((a=t.cur)==null?void 0:a.type)==="on"?t.cur.itemKey:void 0),x=Zp((l=t.next)==null?void 0:l.itemKey);return Qa.default.createElement(i1,null,Qa.default.createElement(CW,I({available:!!t.prev,onClick:(f=t.prev)==null?void 0:f.jump,flag:v.flag},v.attrs),Qa.default.createElement(a1.Prev,null)),Qa.default.createElement(QN,I({isOn:t.cur.type==="on",onClick:t.cur.toggle,presence:_.flag},_.attrs),Qa.default.createElement(a1.Cur,null)),Qa.default.createElement(kW,I({available:!!t.next,onClick:(p=t.next)==null?void 0:p.jump,flag:x.flag},x.attrs),Qa.default.createElement(a1.Next,null)))},eL=DW}),qC,o1,OW,NW,LW,FW,UW,BW,zW,s1,jW=P(()=>{Os(),qC=J(Fe()),ht(),Ue(),WC(),Xf(),o1={defaultState:{color:Yl(.95,"#C4C4C4"),hoverColor:Yl(.15,$f.onColor)},withStaticOverride:{color:Yl(.85,"#C4C4C4"),hoverColor:Yl(.15,$f.onColor)}},NW=_e.div(OW||(OW=Y([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),t=>t.hasStaticOverride?o1.withStaticOverride.color:o1.defaultState.color,t=>t.hasStaticOverride?o1.withStaticOverride.hoverColor:o1.defaultState.hoverColor),FW=_e.div(LW||(LW=Y([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),BW=_e.div(UW||(UW=Y([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),zW=t=>{let{hasStaticOverride:i,obj:a,propConfig:l,pathToProp:f}=t;return qC.default.createElement(NW,{hasStaticOverride:i,onClick:()=>{pe().transaction(({stateEditors:p})=>{for(let{path:v,conf:_}of Qx(l,f)){if(Zu(_))continue;let x=K(I({},a.address),{pathToProp:v});p.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(x,l)}})},title:"Sequence this prop"},i?qC.default.createElement(BW,{title:"The default value is overridden"}):qC.default.createElement(FW,{title:"This is the default value for this prop"}))},s1=zW});function l1(t){return JSON.stringify(tL(t))}function tL(t){return x0(t)?Object.keys(t).sort().reduce((i,a)=>(i[a]=tL(t[a]),i),{}):Array.isArray(t)?t.map(tL):t}var pme=P(()=>{aa()}),VW,u1,HW=P(()=>{VW="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",u1=(t=21)=>{let i="",a=t;for(;a--;)i+=VW[Math.random()*64|0];return i}});function GW(){return u1(10)}function mme(){return u1(10)}function gme(){return u1(10)}var Pa,Ed=P(()=>{pme(),HW(),Pa={forSheet(){return"sheet"},forSheetObject(t){return l1({o:t.address.objectKey})},forSheetObjectProp(t,i){return l1({o:t.address.objectKey,p:i})},forTrackKeyframe(t,i,a){return l1({o:t.address.objectKey,t:i,k:a})},forSheetObjectAggregateKeyframe(t,i){return Pa.forCompoundPropAggregateKeyframe(t,[],i)},forSheetAggregateKeyframe(t,i){return l1({o:t.address.sheetId,pos:i})},forCompoundPropAggregateKeyframe(t,i,a){return l1({o:t.address.objectKey,p:i,pos:a})}}});function WW(t,i,a){if(!i||i.data.keyframes.length===0)return qW;let l=nL.get(i.data);if(l&&l[0]===a)return l[1];function f(v){if(!i)return;let _=i.data.keyframes[v];return _&&{kf:_,track:i,itemKey:Pa.forTrackKeyframe(t,i.id,_.id)}}let p=(()=>{let v=i.data.keyframes.findIndex(x=>x.position>=a);if(v===-1)return{prev:f(i.data.keyframes.length-1)};let _=f(v);return _.kf.position===a?{prev:f(v-1),cur:_,next:f(v+1)}:{next:_,prev:f(v-1)}})();return nL.set(i.data,[a,p]),p}var nL,qW,XW=P(()=>{Ed(),nL=new WeakMap,qW={}}),rL,KW=P(()=>{rL={}});function vme(t,i,a){let l=(0,fl.getPointerParts)(t).path;return ur(()=>{if(!qN(a))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:Qp.default.createElement(s1,{hasStaticOverride:!1,obj:i,pathToProp:l,propConfig:a})};let f=!!(0,fl.val)(Qc(pe().atomP.ephemeral.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].stateByObjectKey[i.address.objectKey].valuesBeingScrubbed,(0,fl.getPointerParts)(t).path)),p=[],v={beingScrubbed:f,contextMenuItems:p,controlIndicators:Qp.default.createElement(Qp.default.Fragment,null)},_=(0,fl.val)(i.template.getMapOfValidSequenceTracks_forStudio()),x=Yf(_,l),w=x!==void 0&&Object.keys(x).length!==0,A=[],D=(0,fl.val)(i.template.getStaticButNotSequencedOverrides()),R=Yf(D??rL,l)!==void 0;if(w)for(let C of Qx(a,[])){if(Zu(C.conf))continue;let F=Yf(x,C.path);typeof F!="string"?R=!0:A.push(F)}if((R||w)&&p.push({label:"Reset all to default",callback:()=>{pe().transaction(({unset:C})=>{C(t)})}}),w&&p.push({label:"Make all static",callback:()=>{pe().transaction(({stateEditors:C})=>{for(let{path:F,conf:N}of Qx(a,[])){if(Zu(N))continue;let B=K(I({},i.address),{pathToProp:[...l,...F]}),j=r1(t,F);C.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(K(I({},B),{value:i.getValueByPointer(j)}))}})}}),(!w||w&&R)&&p.push({label:"Sequence all",callback:()=>{pe().transaction(({stateEditors:C})=>{for(let{path:F,conf:N}of Qx(a,l)){if(Zu(N))continue;let B=K(I({},i.address),{pathToProp:F});C.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(B,a)}})}}),w){let C=fl.prism.memo("controlIndicators",()=>Qp.default.createElement(_me,{pointerToProp:t,obj:i,possibleSequenceTrackIds:x,listOfDescendantTrackIds:A}),[x,A]);return K(I({},v),{type:"HasSequences",controlIndicators:C})}else return K(I({},v),{type:"AllStatic",controlIndicators:Qp.default.createElement(s1,{hasStaticOverride:R,obj:i,pathToProp:l,propConfig:a})})},[])}function _me({pointerToProp:t,obj:i,possibleSequenceTrackIds:a,listOfDescendantTrackIds:l}){return ur(()=>{let f=(0,fl.getPointerParts)(t).path,p=(0,fl.val)(i.sheet.getSequence().positionPrism),v=l.map(C=>({trackId:C,track:(0,fl.val)(i.template.project.pointers.historic.sheetsById[i.address.sheetId].sequence.tracksByObject[i.address.objectKey].trackData[C])})).filter(({track:C})=>!!C).map(C=>K(I({},C),{nearbies:WW(i,{id:C.trackId,data:C.track,sheetObject:i},p)})),_=v.find(({nearbies:C})=>!!C.cur),x=v.every(({nearbies:C})=>!!C.cur),w=v.reduce((C,F)=>F.nearbies.prev&&(C===void 0||F.nearbies.prev.kf.position>C.kf.position)?F.nearbies.prev:C,void 0),A=v.reduce((C,F)=>F.nearbies.next&&(C===void 0||F.nearbies.next.kf.position<C.kf.position)?F.nearbies.next:C,void 0),D=()=>{x?pe().transaction(C=>{C.unset(t)}):_?pe().transaction(C=>{C.set(t,(0,fl.val)(t))}):pe().transaction(C=>{C.set(t,(0,fl.val)(t))})},R={cur:_?{type:"on",itemKey:Pa.forCompoundPropAggregateKeyframe(i,f,p),toggle:D}:{toggle:D,type:"off"},prev:w!==void 0?{position:w.kf.position,itemKey:Pa.forCompoundPropAggregateKeyframe(i,f,w.kf.position),jump:()=>{i.sheet.getSequence().position=w.kf.position}}:void 0,next:A!==void 0?{position:A.kf.position,itemKey:Pa.forCompoundPropAggregateKeyframe(i,f,A.kf.position),jump:()=>{i.sheet.getSequence().position=A.kf.position}}:void 0};return Qp.default.createElement(eL,I({},R))},[t,i,a,l])}var fl,Qp,yme=P(()=>{Ue(),BC(),bn(),fl=Ut(),Tp(),Qp=J(Fe()),jW(),Xf(),Ed(),zC(),WC(),XW(),KW()});function bme(){let t=0,i=new ZW.Atom({hasLock:!1});return{replaceLock(a,l){let f=t++,p=i.get();return p.hasLock&&p.cleanup(),i.set({hasLock:!0,lockId:f,cleanup:l,deepPath:xme(YW(a))}),function(){let v=i.get();v.hasLock&&v.lockId===f&&(v.cleanup(),i.set({hasLock:!1}))}},getIsPropHighlightedD(a){let l=r1(i.pointer.deepPath,YW(a));return(0,JW.prism)(()=>{let f=(0,$W.val)(l);return f===!0?"self":f?"descendent":null})}}}function YW(t){return[t.projectId,t.sheetId,t.objectKey,...t.pathToProp]}function xme(t){let i={};return id(i,t,!0),i}var $W,ZW,JW,XC,iL=P(()=>{$W=Ut(),ZW=Ut(),JW=Ut(),zC(),W0(),XC=bme()});function Sme(t,i){return JSON.stringify(t,i,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var wme=P(()=>{});function QW(t,i=!0){try{return typeof t=="string"?t:typeof t=="function"||t instanceof Error?t.toString():i?Sme(t):JSON.stringify(t)}catch{return t?.name||String(t)}}var Eme=P(()=>{wme()});function Tme(t,i,a){t||(arguments.length>2?e7(i,a):e7(i))}function e7(t,i){let a=arguments.length>1,l=QW(t),f=a?`
Instead found: `.concat(QW(i)):"";throw new a7("Invariant: ".concat(l).concat(f),i)}var t7,n7,r7,i7,a7,Mme=P(()=>{Eme(),t7=/^\s*at.+node:internal.+/gm,n7=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,r7=/^\s*(at|[^@]+@).+test\-helpers.+/gm,i7=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,a7=class extends Error{constructor(t,i){var a;super(t),oe(this,"found"),i!==void 0&&(this.found=i),this.stack=(a=this.stack)==null?void 0:a.replace(n7,"").replace(i7,"").replace(r7,"").replace(t7,"")}}});function Pme(t){return(0,KC.prism)(()=>{if(Array.isArray(t)){let i=new Array(t.length);for(let a=0;a<t.length;a++)i[a]=t[a].getValue();return i}else{let i={};for(let a in t)i[a]=(0,KC.val)(t[a]);return i}})}function aL(t){let i=Cv.default.memo(Cv.default.forwardRef(function(a,l){let f=[],p={},v={ref:l};for(let A in a){let D=a[A];(0,KC.isPrism)(D)?(f.push(D),p[A]=D):v[A]=D}let _=(0,Cv.useRef)(f.length);Tme(_.current===f.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:_.current,count:f.length});let x=(0,Cv.useMemo)(()=>Pme(p),f),w=Np(x);return w&&Cv.default.createElement(t,I(I({},v),w))}));return i.displayName="deriver(".concat(t.displayName,")"),i}var KC,Cv,o7=P(()=>{KC=Ut(),bn(),Cv=J(Fe()),Mme()});function Cme(t,i,a){return(0,eu.prism)(()=>{var l;let f=(0,eu.getPointerParts)(t).path,p=i.getValueByPointer(t),v=eu.prism.memo("editPropValue",()=>{let F=null;return{temporarilySetValue(N){F||(F=pe().scrub()),F.capture(B=>{B.set(t,N)})},discardTemporaryValue(){F&&(F.discard(),F=null)},permanentlySetValue(N){F?(F.capture(B=>{B.set(t,N)}),F.commit(),F=null):pe().transaction(B=>{B.set(t,N)})}}},[]),_={createAsset:F=>i.sheet.project.assetStorage.createAsset(F),getAssetUrl:F=>F.id?i.sheet.project.assetStorage.getAssetUrl(F.id):void 0},x=(0,eu.val)(Qc(pe().atomP.ephemeral.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].stateByObjectKey[i.address.objectKey].valuesBeingScrubbed,(0,eu.getPointerParts)(t).path))===!0,w=[],A=K(I(I({},v),_),{value:p,beingScrubbed:x,contextMenuItems:w,controlIndicators:Av.default.createElement(Av.default.Fragment,null)}),D=sme(a);if(D){let F=(0,eu.val)(i.template.getMapOfValidSequenceTracks_forStudio()),N=Yf(F,f);if(typeof N=="string"){w.push({label:"Make static",callback:()=>{pe().transaction(({stateEditors:ce})=>{let Te=K(I({},i.address),{pathToProp:f});ce.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(K(I({},Te),{value:i.getValueByPointer(t)}))})}});let B=N,j=eu.prism.sub("lcr",()=>{let ce=(0,eu.val)(i.template.project.pointers.historic.sheetsById[i.address.sheetId].sequence.tracksByObject[i.address.objectKey].trackData[B]),Te=(0,eu.val)(i.sheet.getSequence().positionPrism);return WW(i,ce&&{data:ce,id:B,sheetObject:i},Te)},[B]),W;A.beingScrubbed?W="Sequenced_OnKeyframe_BeingScrubbed":j.cur?W="Sequenced_OnKeyframe":((l=j.prev)==null?void 0:l.kf.connectedRight)===!0?W="Sequenced_BeingInterpolated":W="Sequened_NotBeingInterpolated";let $=()=>{j.cur?pe().transaction(ce=>{ce.unset(t)}):pe().transaction(ce=>{ce.set(t,A.value)})},re={cur:j.cur?{type:"on",itemKey:j.cur.itemKey,toggle:$}:{type:"off",toggle:$},prev:j.prev!==void 0?{itemKey:j.prev.itemKey,position:j.prev.kf.position,jump:()=>{i.sheet.getSequence().position=j.prev.kf.position}}:void 0,next:j.next!==void 0?{itemKey:j.next.itemKey,position:j.next.kf.position,jump:()=>{i.sheet.getSequence().position=j.next.kf.position}}:void 0},ne=Av.default.createElement(eL,I({},re));return K(I({},A),{type:"Sequenced",shade:W,nearbyKeyframes:j,controlIndicators:ne})}}let R=(0,eu.val)(i.template.getStaticValues()),C=Yf(R,f);return typeof C<"u"&&w.push({label:"Reset to default",callback:()=>{pe().transaction(({unset:F})=>{F(t)})}}),D&&w.push({label:"Sequence",callback:()=>{pe().transaction(({stateEditors:F})=>{let N=K(I({},i.address),{pathToProp:f});F.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(N,a)})}}),typeof C<"u"?K(I({},A),{type:"Static",shade:A.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Av.default.createElement(s1,{hasStaticOverride:!0,obj:i,pathToProp:f,propConfig:a})}):K(I({},A),{type:"Default",shade:"Default",controlIndicators:Av.default.createElement(s1,{hasStaticOverride:!0,obj:i,pathToProp:f,propConfig:a})})})}function Ame(t,i,a){if(YC.has(t))return YC.get(t);{let l=Cme(t,i,a);return YC.set(t,l),l}}function oL(t,i,a){let l=Ame(t,i,a);return Np(l)}var Av,eu,YC,sL=P(()=>{Tp(),Av=J(Fe()),eu=Ut(),Ue(),BC(),bn(),Xf(),jW(),XW(),WC(),YC=new WeakMap});function kme({propConfig:t,pointerToProp:i,obj:a,SimpleEditorComponent:l}){let f=oL(i,a,t);return eo.default.createElement(mN,{editingTools:f,propConfig:t,value:f.value})}function Ime({pointerToProp:t,obj:i,propConfig:a,visualIndentation:l}){var f;let p=(f=a.label)!=null?f:nd((0,c1.getPointerParts)(t).path),v=Object.entries(a.props),_=v.filter(([$,re])=>Zu(re)),x=v.filter(([$,re])=>!Zu(re)),[w,A]=Dr(null),D=vme(t,i,a),[R]=jo(A,{menuItems:D.contextMenuItems}),C=_.length>0,F=(0,eo.useMemo)(()=>XC.getIsPropHighlightedD(K(I({},i.address),{pathToProp:(0,c1.getPointerParts)(t).path})),[t]),N="".concat(i.address.projectId,",").concat(i.address.sheetId,",").concat(i.address.sheetInstanceId,",").concat(i.address.objectKey,",").concat((0,c1.getPointerParts)(t).path.join()),B=S7(a);(0,eo.useLayoutEffect)(()=>{$C.has(N)||$C.set(N,new c1.Atom(B))},[N,a]);let j=$C.get(N),W=ur(()=>j?(0,s7.val)(j.pointer):B,[j]);return eo.default.createElement(u7,null,R,eo.default.createElement(lL,{style:{"--depth":l-1}},eo.default.createElement(f7,{isVectorProp:B},eo.default.createElement(p7,null,D.controlIndicators),eo.default.createElement(g7,{isHighlighted:F,ref:w},eo.default.createElement("span",null,p||"Props")),eo.default.createElement(_7,{isCollapsed:W,isVector:B,onClick:()=>{j?.set(!j.get())}},eo.default.createElement(MH,null))),B&&W&&eo.default.createElement(E7,null,[...v].map(([$,re])=>eo.default.createElement(kme,{key:"prop-"+$,propConfig:re,pointerToProp:t[$],obj:i})))),!W&&eo.default.createElement(x7,{style:{"--depth":l},depth:l,lastSubIsComposite:C},[...x,..._].map(([$,re])=>eo.default.createElement(cL,{key:"prop-"+$,propConfig:re,pointerToProp:t[$],obj:i,visualIndentation:l+1}))))}var c1,eo,s7,l7,u7,c7,lL,d7,f7,h7,p7,m7,g7,v7,_7,y7,b7,x7,S7,w7,E7,T7,$C,Rme=P(()=>{Xf(),c1=Ut(),F0(),Os(),eo=J(Fe()),ht(),qG(),$p(),Gr(),Hr(),B7(),Vo(),yme(),iL(),o7(),gH(),sL(),bn(),s7=Ut(),Ev(),DC(),u7=_e.div(l7||(l7=Y([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),zr),lL=_e.div(c7||(c7=Y([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),f7=_e.div(d7||(d7=Y([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),XN,({isVectorProp:t})=>t?"width: calc(100% - var(--right-width))":""),p7=_e.div(h7||(h7=Y([`
  flexshrink: 0;
`]))),g7=aL(_e.div(m7||(m7=Y([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>Kf)),_7=_e.span(v7||(v7=Y([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),t=>t.isCollapsed?0:90,t=>!t.isVector&&t.isCollapsed||t.isVector&&!t.isCollapsed?"visible":"hidden",lL,t=>t.isCollapsed?15:75),y7=Yl(.05,"#282b2f"),x7=_e.div(b7||(b7=Y([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:t})=>Ix(t*.03,y7),t=>t.lastSubIsComposite?0:"4px"),S7=Jx(t=>{let i=Object.entries(t.props);return i.length<=3&&i.every(([a,l])=>l.type==="number"&&["x","y","z"].includes(a))}),E7=_e.div(w7||(w7=Y([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),T7=eo.default.memo(Ime),$C=new Map});function Dme({isHighlighted:t}){return t==="self"?"#1857a4":t==="descendent"?"#0a2f5c":"initial"}var Ome=P(()=>{});function Nme({propConfig:t,pointerToProp:i,editingTools:a,children:l,isPropHighlightedD:f}){var p;let v=(p=t.label)!=null?p:nd((0,uL.getPointerParts)(i).path),[_,x]=Dr(null),[w]=jo(x,{menuItems:a.contextMenuItems});return kv.default.createElement(P7,{isHighlighted:f},w,kv.default.createElement(A7,null,kv.default.createElement(D7,null,a.controlIndicators),kv.default.createElement(I7,{isHighlighted:f,ref:_,title:["obj","props",...(0,uL.getPointerParts)(i).path].join(".")},v)),kv.default.createElement(N7,null,l))}var uL,kv,M7,P7,C7,A7,k7,I7,R7,D7,O7,N7,Lme=P(()=>{uL=Ut(),Vo(),Hr(),aa(),kv=J(Fe()),ht(),Gr(),$p(),o7(),qG(),Ome(),P7=aL(_e.div(M7||(M7=Y([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),zr,Dme)),A7=_e.div(C7||(C7=Y([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),XN),I7=aL(_e.div(k7||(k7=Y([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),Kf)),D7=_e.div(R7||(R7=Y([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),N7=_e.div(O7||(O7=Y([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function Fme({propConfig:t,pointerToProp:i,obj:a,SimpleEditorComponent:l}){let f=oL(i,a,t),p=(0,d1.useMemo)(()=>XC.getIsPropHighlightedD(K(I({},a.address),{pathToProp:(0,L7.getPointerParts)(i).path})),[i]);return d1.default.createElement(Nme,{editingTools:f,propConfig:t,pointerToProp:i,isPropHighlightedD:p},d1.default.createElement(l,{editingTools:f,propConfig:t,value:f.value}))}var d1,L7,F7,Ume=P(()=>{d1=J(Fe()),sL(),Lme(),L7=Ut(),iL(),F7=d1.default.memo(Fme)}),f1,U7,cL,B7=P(()=>{f1=J(Fe()),WG(),Rme(),Ume(),U7=({propConfig:t,visualIndentation:i,pointerToProp:a,obj:l})=>{if(t.type==="compound")return f1.default.createElement(T7,{obj:l,visualIndentation:i,pointerToProp:a,propConfig:t});if(t.type==="enum")return f1.default.createElement(f1.default.Fragment,null);{let f=WN[t.type];return f1.default.createElement(F7,{SimpleEditorComponent:f,obj:l,visualIndentation:i,pointerToProp:a,propConfig:t})}},cL=U7});function z7(t){return ZC.has(t)||ZC.set(t,(j7++).toString()),ZC.get(t)}var ZC,j7,V7=P(()=>{ZC=new WeakMap,j7=0}),Iv,H7,G7,W7,q7,X7,K7,Bme=P(()=>{Iv=J(Fe()),B7(),bn(),V7(),ht(),G7=_e.div(H7||(H7=Y([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),q7=_e.button(W7||(W7=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),X7=({objects:t})=>{let i=t[0],a=pr(i.template.configPointer),l=pr(i.template._temp_actionsPointer);return Iv.default.createElement(Iv.default.Fragment,null,Iv.default.createElement(cL,{key:z7(i),obj:i,pointerToProp:i.propsP,propConfig:a,visualIndentation:1}),Iv.default.createElement(G7,null,l&&Object.entries(l).map(([f,p])=>Iv.default.createElement(q7,{key:f,onClick:()=>{p(i.publicApi)}},f))))},K7=X7}),Y7,$7,JC,Z7=P(()=>{ht(),$7=_e.button(Y7||(Y7=Y([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),t=>t.disabled?"none":"pointer",t=>t.disabled?.4:1),JC=$7}),zme=P(()=>{}),J7,jme=P(()=>{zme(),J7=(t=21)=>{let i="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let l=a[t]&63;l<36?i+=l.toString(36):l<62?i+=(l-26).toString(36).toUpperCase():l<63?i+="_":i+="-"}return i}});function Q7(){return J7(16)}var eq=P(()=>{jme()}),tq,Td,dL,nq,rq,iq,aq,oq=P(()=>{tq=Ut(),Hr(),Td=J(Fe()),dL=(0,Td.createContext)(null),nq=0,rq=()=>{let t=(0,Td.useMemo)(()=>nq++,[]),{cur:i,set:a}=(0,Td.useContext)(dL),[l,f]=Dr(!1),p=(0,Td.useCallback)((v,_)=>{a(v?t:-1,_)},[]);return(0,Td.useEffect)(()=>i.onStale(()=>{let v=i.getValue()===t;l.current!==v&&(l.current=v)}),[i,t]),[f,p]},iq=({children:t})=>{let i=(0,Td.useMemo)(()=>new tq.Atom(-1),[]),a=i.prism,l=(0,Td.useMemo)(()=>{let f;return(p,v)=>{let _=f!==void 0;f!==void 0&&(clearTimeout(f),f=void 0),v===0||_?i.set(p):f=setTimeout(()=>{i.set(p),f=void 0},v)}},[]);return Td.default.createElement(dL.Provider,{value:{cur:a,set:l}},t)},aq=iq});function Rv(t,i){let a=t.enabled!==!1,[l,f]=rq(),[p,v]=Dr(null);(0,lq.useEffect)(()=>{if(!a)return;let x=p.current;if(!x)return;let w=()=>{var D;return f(!0,(D=t.enterDelay)!=null?D:400)},A=()=>{var D;return f(!1,(D=t.exitDelay)!=null?D:200)};return x.addEventListener("mouseenter",w),x.addEventListener("mouseleave",A),()=>{x.removeEventListener("mouseenter",w),x.removeEventListener("mouseleave",A)}},[p,a,t.enterDelay,t.exitDelay]);let _=(0,sq.useContext)(pv);return[a&&l&&v?(0,uq.createPortal)(QC.default.createElement(BN,{children:i,target:v,onClickOutside:$l,verticalPlacement:t.verticalPlacement,verticalGap:t.verticalGap}),_):QC.default.createElement(QC.default.Fragment,null),p,l]}var sq,lq,QC,uq,h1=P(()=>{Hr(),sq=J(Fe()),lq=J(Fe()),QC=J(Fe()),X9(),uq=J(Ma()),oq(),Xp(),vv()}),cq,dq,Dv,eA=P(()=>{ht(),Yu(),dq=_e(Ku)(cq||(cq=Y([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),Dv=dq}),Ju,fq,hq,pq,mq,gq,vq,_q,yq,bq,Vme=P(()=>{bn(),Ue(),Ju=J(Fe()),ht(),eq(),h1(),eA(),Z7(),hq=_e.div(fq||(fq=Y([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),mq=_e.div(pq||(pq=Y([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),vq=_e.div(gq||(gq=Y([`
  display: flex;
  gap: 8px;
`]))),_q=({projectId:t})=>{let i=pr(pe().atomP.ephemeral.coreByProject[t].loadingState);return i&&i.type==="browserStateIsNotBasedOnDiskState"?Ju.default.createElement(yq,{loadingState:i,projectId:t}):null},yq=({projectId:t,loadingState:i})=>{let a=()=>{pe().transaction(({drafts:x,stateEditors:w})=>{w.coreByProject.historic.revisionHistory.add({projectId:t,revision:i.onDiskState.revisionHistory[0]}),w.coreByProject.historic.revisionHistory.add({projectId:t,revision:Q7()}),x.ephemeral.coreByProject[t].loadingState={type:"loaded"}})},l=()=>{pe().transaction(({drafts:x})=>{x.historic.coreByProject[t]=i.onDiskState,x.ephemeral.coreByProject[t].loadingState={type:"loaded"}})},[f,p]=Rv({},()=>Ju.default.createElement(Dv,null,"The browser's state will override the disk state.")),[v,_]=Rv({},()=>Ju.default.createElement(Dv,null,"The disk's state will override the browser's state."));return Ju.default.createElement(hq,null,Ju.default.createElement(mq,null,"Browser state is not based on disk state."," ",Ju.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),Ju.default.createElement(vq,null,f,Ju.default.createElement(JC,{onClick:a,ref:p},"Use browser's state"),v,Ju.default.createElement(JC,{onClick:l,ref:_},"Use disk state")))},bq=_q}),Hme=ae((t,i)=>{(function(a){typeof t=="object"&&typeof i<"u"?i.exports=a():(typeof window<"u"?window:typeof qi<"u"?qi:typeof self<"u"?self:this).JSZip=a()})(function(){return(function a(l,f,p){function v(w,A){if(!f[w]){if(!l[w]){var D=typeof bI=="function"&&bI;if(!A&&D)return D(w,!0);if(_)return _(w,!0);var R=new Error("Cannot find module '"+w+"'");throw R.code="MODULE_NOT_FOUND",R}var C=f[w]={exports:{}};l[w][0].call(C.exports,function(F){var N=l[w][1][F];return v(N||F)},C,C.exports,a,l,f,p)}return f[w].exports}for(var _=typeof bI=="function"&&bI,x=0;x<p.length;x++)v(p[x]);return v})({1:[function(a,l,f){var p=a("./utils"),v=a("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(x){for(var w,A,D,R,C,F,N,B=[],j=0,W=x.length,$=W,re=p.getTypeOf(x)!=="string";j<x.length;)$=W-j,D=re?(w=x[j++],A=j<W?x[j++]:0,j<W?x[j++]:0):(w=x.charCodeAt(j++),A=j<W?x.charCodeAt(j++):0,j<W?x.charCodeAt(j++):0),R=w>>2,C=(3&w)<<4|A>>4,F=1<$?(15&A)<<2|D>>6:64,N=2<$?63&D:64,B.push(_.charAt(R)+_.charAt(C)+_.charAt(F)+_.charAt(N));return B.join("")},f.decode=function(x){var w,A,D,R,C,F,N=0,B=0,j="data:";if(x.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var W,$=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===_.charAt(64)&&$--,x.charAt(x.length-2)===_.charAt(64)&&$--,$%1!=0)throw new Error("Invalid base64 input, bad content length.");for(W=v.uint8array?new Uint8Array(0|$):new Array(0|$);N<x.length;)w=_.indexOf(x.charAt(N++))<<2|(R=_.indexOf(x.charAt(N++)))>>4,A=(15&R)<<4|(C=_.indexOf(x.charAt(N++)))>>2,D=(3&C)<<6|(F=_.indexOf(x.charAt(N++))),W[B++]=w,C!==64&&(W[B++]=A),F!==64&&(W[B++]=D);return W}},{"./support":30,"./utils":32}],2:[function(a,l,f){var p=a("./external"),v=a("./stream/DataWorker"),_=a("./stream/Crc32Probe"),x=a("./stream/DataLengthProbe");function w(A,D,R,C,F){this.compressedSize=A,this.uncompressedSize=D,this.crc32=R,this.compression=C,this.compressedContent=F}w.prototype={getContentWorker:function(){var A=new v(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),D=this;return A.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new v(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},w.createWorkerFrom=function(A,D,R){return A.pipe(new _).pipe(new x("uncompressedSize")).pipe(D.compressWorker(R)).pipe(new x("compressedSize")).withStreamInfo("compression",D)},l.exports=w},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,l,f){var p=a("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},f.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,l,f){var p=a("./utils"),v=(function(){for(var _,x=[],w=0;w<256;w++){_=w;for(var A=0;A<8;A++)_=1&_?3988292384^_>>>1:_>>>1;x[w]=_}return x})();l.exports=function(_,x){return _!==void 0&&_.length?p.getTypeOf(_)!=="string"?(function(w,A,D,R){var C=v,F=R+D;w^=-1;for(var N=R;N<F;N++)w=w>>>8^C[255&(w^A[N])];return-1^w})(0|x,_,_.length,0):(function(w,A,D,R){var C=v,F=R+D;w^=-1;for(var N=R;N<F;N++)w=w>>>8^C[255&(w^A.charCodeAt(N))];return-1^w})(0|x,_,_.length,0):0}},{"./utils":32}],5:[function(a,l,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(a,l,f){var p=null;p=typeof Promise<"u"?Promise:a("lie"),l.exports={Promise:p}},{lie:37}],7:[function(a,l,f){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",v=a("pako"),_=a("./utils"),x=a("./stream/GenericWorker"),w=p?"uint8array":"array";function A(D,R){x.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=R,this.meta={}}f.magic="\b\0",_.inherits(A,x),A.prototype.processChunk=function(D){this.meta=D.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(w,D.data),!1)},A.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new v[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(R){D.push({data:R,meta:D.meta})}},f.compressWorker=function(D){return new A("Deflate",D)},f.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,l,f){function p(C,F){var N,B="";for(N=0;N<F;N++)B+=String.fromCharCode(255&C),C>>>=8;return B}function v(C,F,N,B,j,W){var $,re,ne=C.file,ce=C.compression,Te=W!==w.utf8encode,Ie=_.transformTo("string",W(ne.name)),ye=_.transformTo("string",w.utf8encode(ne.name)),Ne=ne.comment,et=_.transformTo("string",W(Ne)),de=_.transformTo("string",w.utf8encode(Ne)),Le=ye.length!==ne.name.length,Z=de.length!==Ne.length,Ge="",Nt="",Re="",Ce=ne.dir,qe=ne.date,Et={crc32:0,compressedSize:0,uncompressedSize:0};F&&!N||(Et.crc32=C.crc32,Et.compressedSize=C.compressedSize,Et.uncompressedSize=C.uncompressedSize);var fe=0;F&&(fe|=8),Te||!Le&&!Z||(fe|=2048);var be=0,tt=0;Ce&&(be|=16),j==="UNIX"?(tt=798,be|=(function(ct,Ke){var cn=ct;return ct||(cn=Ke?16893:33204),(65535&cn)<<16})(ne.unixPermissions,Ce)):(tt=20,be|=(function(ct){return 63&(ct||0)})(ne.dosPermissions)),$=qe.getUTCHours(),$<<=6,$|=qe.getUTCMinutes(),$<<=5,$|=qe.getUTCSeconds()/2,re=qe.getUTCFullYear()-1980,re<<=4,re|=qe.getUTCMonth()+1,re<<=5,re|=qe.getUTCDate(),Le&&(Nt=p(1,1)+p(A(Ie),4)+ye,Ge+="up"+p(Nt.length,2)+Nt),Z&&(Re=p(1,1)+p(A(et),4)+de,Ge+="uc"+p(Re.length,2)+Re);var at="";return at+=`
\0`,at+=p(fe,2),at+=ce.magic,at+=p($,2),at+=p(re,2),at+=p(Et.crc32,4),at+=p(Et.compressedSize,4),at+=p(Et.uncompressedSize,4),at+=p(Ie.length,2),at+=p(Ge.length,2),{fileRecord:D.LOCAL_FILE_HEADER+at+Ie+Ge,dirRecord:D.CENTRAL_FILE_HEADER+p(tt,2)+at+p(et.length,2)+"\0\0\0\0"+p(be,4)+p(B,4)+Ie+Ge+et}}var _=a("../utils"),x=a("../stream/GenericWorker"),w=a("../utf8"),A=a("../crc32"),D=a("../signature");function R(C,F,N,B){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=F,this.zipPlatform=N,this.encodeFileName=B,this.streamFiles=C,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(R,x),R.prototype.push=function(C){var F=C.meta.percent||0,N=this.entriesCount,B=this._sources.length;this.accumulate?this.contentBuffer.push(C):(this.bytesWritten+=C.data.length,x.prototype.push.call(this,{data:C.data,meta:{currentFile:this.currentFile,percent:N?(F+100*(N-B-1))/N:100}}))},R.prototype.openedSource=function(C){this.currentSourceOffset=this.bytesWritten,this.currentFile=C.file.name;var F=this.streamFiles&&!C.file.dir;if(F){var N=v(C,F,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:N.fileRecord,meta:{percent:0}})}else this.accumulate=!0},R.prototype.closedSource=function(C){this.accumulate=!1;var F=this.streamFiles&&!C.file.dir,N=v(C,F,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(N.dirRecord),F)this.push({data:(function(B){return D.DATA_DESCRIPTOR+p(B.crc32,4)+p(B.compressedSize,4)+p(B.uncompressedSize,4)})(C),meta:{percent:100}});else for(this.push({data:N.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},R.prototype.flush=function(){for(var C=this.bytesWritten,F=0;F<this.dirRecords.length;F++)this.push({data:this.dirRecords[F],meta:{percent:100}});var N=this.bytesWritten-C,B=(function(j,W,$,re,ne){var ce=_.transformTo("string",ne(re));return D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(j,2)+p(j,2)+p(W,4)+p($,4)+p(ce.length,2)+ce})(this.dirRecords.length,N,C,this.zipComment,this.encodeFileName);this.push({data:B,meta:{percent:100}})},R.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},R.prototype.registerPrevious=function(C){this._sources.push(C);var F=this;return C.on("data",function(N){F.processChunk(N)}),C.on("end",function(){F.closedSource(F.previous.streamInfo),F._sources.length?F.prepareNextSource():F.end()}),C.on("error",function(N){F.error(N)}),this},R.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},R.prototype.error=function(C){var F=this._sources;if(!x.prototype.error.call(this,C))return!1;for(var N=0;N<F.length;N++)try{F[N].error(C)}catch{}return!0},R.prototype.lock=function(){x.prototype.lock.call(this);for(var C=this._sources,F=0;F<C.length;F++)C[F].lock()},l.exports=R},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,l,f){var p=a("../compressions"),v=a("./ZipFileWorker");f.generateWorker=function(_,x,w){var A=new v(x.streamFiles,w,x.platform,x.encodeFileName),D=0;try{_.forEach(function(R,C){D++;var F=(function(W,$){var re=W||$,ne=p[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne})(C.options.compression,x.compression),N=C.options.compressionOptions||x.compressionOptions||{},B=C.dir,j=C.date;C._compressWorker(F,N).withStreamInfo("file",{name:R,dir:B,date:j,comment:C.comment||"",unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions}).pipe(A)}),A.entriesCount=D}catch(R){A.error(R)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,l,f){function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var v=new p;for(var _ in this)typeof this[_]!="function"&&(v[_]=this[_]);return v}}(p.prototype=a("./object")).loadAsync=a("./load"),p.support=a("./support"),p.defaults=a("./defaults"),p.version="3.10.1",p.loadAsync=function(v,_){return new p().loadAsync(v,_)},p.external=a("./external"),l.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,l,f){var p=a("./utils"),v=a("./external"),_=a("./utf8"),x=a("./zipEntries"),w=a("./stream/Crc32Probe"),A=a("./nodejsUtils");function D(R){return new v.Promise(function(C,F){var N=R.decompressed.getContentWorker().pipe(new w);N.on("error",function(B){F(B)}).on("end",function(){N.streamInfo.crc32!==R.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):C()}).resume()})}l.exports=function(R,C){var F=this;return C=p.extend(C||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),A.isNode&&A.isStream(R)?v.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",R,!0,C.optimizedBinaryString,C.base64).then(function(N){var B=new x(C);return B.load(N),B}).then(function(N){var B=[v.Promise.resolve(N)],j=N.files;if(C.checkCRC32)for(var W=0;W<j.length;W++)B.push(D(j[W]));return v.Promise.all(B)}).then(function(N){for(var B=N.shift(),j=B.files,W=0;W<j.length;W++){var $=j[W],re=$.fileNameStr,ne=p.resolve($.fileNameStr);F.file(ne,$.decompressed,{binary:!0,optimizedBinaryString:!0,date:$.date,dir:$.dir,comment:$.fileCommentStr.length?$.fileCommentStr:null,unixPermissions:$.unixPermissions,dosPermissions:$.dosPermissions,createFolders:C.createFolders}),$.dir||(F.file(ne).unsafeOriginalName=re)}return B.zipComment.length&&(F.comment=B.zipComment),F})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,l,f){var p=a("../utils"),v=a("../stream/GenericWorker");function _(x,w){v.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(w)}p.inherits(_,v),_.prototype._bindStream=function(x){var w=this;(this._stream=x).pause(),x.on("data",function(A){w.push({data:A,meta:{percent:0}})}).on("error",function(A){w.isPaused?this.generatedError=A:w.error(A)}).on("end",function(){w.isPaused?w._upstreamEnded=!0:w.end()})},_.prototype.pause=function(){return!!v.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},l.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,l,f){var p=a("readable-stream").Readable;function v(_,x,w){p.call(this,x),this._helper=_;var A=this;_.on("data",function(D,R){A.push(D)||A._helper.pause(),w&&w(R)}).on("error",function(D){A.emit("error",D)}).on("end",function(){A.push(null)})}a("../utils").inherits(v,p),v.prototype._read=function(){this._helper.resume()},l.exports=v},{"../utils":32,"readable-stream":16}],14:[function(a,l,f){l.exports={isNode:typeof Buffer<"u",newBufferFrom:function(p,v){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(p,v);if(typeof p=="number")throw new Error('The "data" argument must not be a number');return new Buffer(p,v)},allocBuffer:function(p){if(Buffer.alloc)return Buffer.alloc(p);var v=new Buffer(p);return v.fill(0),v},isBuffer:function(p){return Buffer.isBuffer(p)},isStream:function(p){return p&&typeof p.on=="function"&&typeof p.pause=="function"&&typeof p.resume=="function"}}},{}],15:[function(a,l,f){function p(ne,ce,Te){var Ie,ye=_.getTypeOf(ce),Ne=_.extend(Te||{},A);Ne.date=Ne.date||new Date,Ne.compression!==null&&(Ne.compression=Ne.compression.toUpperCase()),typeof Ne.unixPermissions=="string"&&(Ne.unixPermissions=parseInt(Ne.unixPermissions,8)),Ne.unixPermissions&&16384&Ne.unixPermissions&&(Ne.dir=!0),Ne.dosPermissions&&16&Ne.dosPermissions&&(Ne.dir=!0),Ne.dir&&(ne=j(ne)),Ne.createFolders&&(Ie=B(ne))&&W.call(this,Ie,!0);var et=ye==="string"&&Ne.binary===!1&&Ne.base64===!1;Te&&Te.binary!==void 0||(Ne.binary=!et),(ce instanceof D&&ce.uncompressedSize===0||Ne.dir||!ce||ce.length===0)&&(Ne.base64=!1,Ne.binary=!0,ce="",Ne.compression="STORE",ye="string");var de=null;de=ce instanceof D||ce instanceof x?ce:F.isNode&&F.isStream(ce)?new N(ne,ce):_.prepareContent(ne,ce,Ne.binary,Ne.optimizedBinaryString,Ne.base64);var Le=new R(ne,de,Ne);this.files[ne]=Le}var v=a("./utf8"),_=a("./utils"),x=a("./stream/GenericWorker"),w=a("./stream/StreamHelper"),A=a("./defaults"),D=a("./compressedObject"),R=a("./zipObject"),C=a("./generate"),F=a("./nodejsUtils"),N=a("./nodejs/NodejsStreamInputAdapter"),B=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var ce=ne.lastIndexOf("/");return 0<ce?ne.substring(0,ce):""},j=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},W=function(ne,ce){return ce=ce!==void 0?ce:A.createFolders,ne=j(ne),this.files[ne]||p.call(this,ne,null,{dir:!0,createFolders:ce}),this.files[ne]};function $(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var ce,Te,Ie;for(ce in this.files)Ie=this.files[ce],(Te=ce.slice(this.root.length,ce.length))&&ce.slice(0,this.root.length)===this.root&&ne(Te,Ie)},filter:function(ne){var ce=[];return this.forEach(function(Te,Ie){ne(Te,Ie)&&ce.push(Ie)}),ce},file:function(ne,ce,Te){if(arguments.length!==1)return ne=this.root+ne,p.call(this,ne,ce,Te),this;if($(ne)){var Ie=ne;return this.filter(function(Ne,et){return!et.dir&&Ie.test(Ne)})}var ye=this.files[this.root+ne];return ye&&!ye.dir?ye:null},folder:function(ne){if(!ne)return this;if($(ne))return this.filter(function(ye,Ne){return Ne.dir&&ne.test(ye)});var ce=this.root+ne,Te=W.call(this,ce),Ie=this.clone();return Ie.root=Te.name,Ie},remove:function(ne){ne=this.root+ne;var ce=this.files[ne];if(ce||(ne.slice(-1)!=="/"&&(ne+="/"),ce=this.files[ne]),ce&&!ce.dir)delete this.files[ne];else for(var Te=this.filter(function(ye,Ne){return Ne.name.slice(0,ne.length)===ne}),Ie=0;Ie<Te.length;Ie++)delete this.files[Te[Ie].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var ce,Te={};try{if((Te=_.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:v.utf8encode})).type=Te.type.toLowerCase(),Te.compression=Te.compression.toUpperCase(),Te.type==="binarystring"&&(Te.type="string"),!Te.type)throw new Error("No output type specified.");_.checkSupport(Te.type),Te.platform!=="darwin"&&Te.platform!=="freebsd"&&Te.platform!=="linux"&&Te.platform!=="sunos"||(Te.platform="UNIX"),Te.platform==="win32"&&(Te.platform="DOS");var Ie=Te.comment||this.comment||"";ce=C.generateWorker(this,Te,Ie)}catch(ye){(ce=new x("error")).error(ye)}return new w(ce,Te.type||"string",Te.mimeType)},generateAsync:function(ne,ce){return this.generateInternalStream(ne).accumulate(ce)},generateNodeStream:function(ne,ce){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(ce)}};l.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,l,f){l.exports=a("stream")},{stream:void 0}],17:[function(a,l,f){var p=a("./DataReader");function v(_){p.call(this,_);for(var x=0;x<this.data.length;x++)_[x]=255&_[x]}a("../utils").inherits(v,p),v.prototype.byteAt=function(_){return this.data[this.zero+_]},v.prototype.lastIndexOfSignature=function(_){for(var x=_.charCodeAt(0),w=_.charCodeAt(1),A=_.charCodeAt(2),D=_.charCodeAt(3),R=this.length-4;0<=R;--R)if(this.data[R]===x&&this.data[R+1]===w&&this.data[R+2]===A&&this.data[R+3]===D)return R-this.zero;return-1},v.prototype.readAndCheckSignature=function(_){var x=_.charCodeAt(0),w=_.charCodeAt(1),A=_.charCodeAt(2),D=_.charCodeAt(3),R=this.readData(4);return x===R[0]&&w===R[1]&&A===R[2]&&D===R[3]},v.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,x},l.exports=v},{"../utils":32,"./DataReader":18}],18:[function(a,l,f){var p=a("../utils");function v(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}v.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var x,w=0;for(this.checkOffset(_),x=this.index+_-1;x>=this.index;x--)w=(w<<8)+this.byteAt(x);return this.index+=_,w},readString:function(_){return p.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},l.exports=v},{"../utils":32}],19:[function(a,l,f){var p=a("./Uint8ArrayReader");function v(_){p.call(this,_)}a("../utils").inherits(v,p),v.prototype.readData=function(_){this.checkOffset(_);var x=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,x},l.exports=v},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,l,f){var p=a("./DataReader");function v(_){p.call(this,_)}a("../utils").inherits(v,p),v.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},v.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},v.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},v.prototype.readData=function(_){this.checkOffset(_);var x=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,x},l.exports=v},{"../utils":32,"./DataReader":18}],21:[function(a,l,f){var p=a("./ArrayReader");function v(_){p.call(this,_)}a("../utils").inherits(v,p),v.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,x},l.exports=v},{"../utils":32,"./ArrayReader":17}],22:[function(a,l,f){var p=a("../utils"),v=a("../support"),_=a("./ArrayReader"),x=a("./StringReader"),w=a("./NodeBufferReader"),A=a("./Uint8ArrayReader");l.exports=function(D){var R=p.getTypeOf(D);return p.checkSupport(R),R!=="string"||v.uint8array?R==="nodebuffer"?new w(D):v.uint8array?new A(p.transformTo("uint8array",D)):new _(p.transformTo("array",D)):new x(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,l,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,l,f){var p=a("./GenericWorker"),v=a("../utils");function _(x){p.call(this,"ConvertWorker to "+x),this.destType=x}v.inherits(_,p),_.prototype.processChunk=function(x){this.push({data:v.transformTo(this.destType,x.data),meta:x.meta})},l.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(a,l,f){var p=a("./GenericWorker"),v=a("../crc32");function _(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(_,p),_.prototype.processChunk=function(x){this.streamInfo.crc32=v(x.data,this.streamInfo.crc32||0),this.push(x)},l.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,l,f){var p=a("../utils"),v=a("./GenericWorker");function _(x){v.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}p.inherits(_,v),_.prototype.processChunk=function(x){if(x){var w=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=w+x.data.length}v.prototype.processChunk.call(this,x)},l.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(a,l,f){var p=a("../utils"),v=a("./GenericWorker");function _(x){v.call(this,"DataWorker");var w=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(A){w.dataIsReady=!0,w.data=A,w.max=A&&A.length||0,w.type=p.getTypeOf(A),w.isPaused||w._tickAndRepeat()},function(A){w.error(A)})}p.inherits(_,v),_.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,w=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,w);break;case"uint8array":x=this.data.subarray(this.index,w);break;case"array":case"nodebuffer":x=this.data.slice(this.index,w)}return this.index=w,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},l.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(a,l,f){function p(v){this.name=v||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(v){this.emit("data",v)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(v){this.emit("error",v)}return!0},error:function(v){return!this.isFinished&&(this.isPaused?this.generatedError=v:(this.isFinished=!0,this.emit("error",v),this.previous&&this.previous.error(v),this.cleanUp()),!0)},on:function(v,_){return this._listeners[v].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(v,_){if(this._listeners[v])for(var x=0;x<this._listeners[v].length;x++)this._listeners[v][x].call(this,_)},pipe:function(v){return v.registerPrevious(this)},registerPrevious:function(v){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=v.streamInfo,this.mergeStreamInfo(),this.previous=v;var _=this;return v.on("data",function(x){_.processChunk(x)}),v.on("end",function(){_.end()}),v.on("error",function(x){_.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var v=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),v=!0),this.previous&&this.previous.resume(),!v},flush:function(){},processChunk:function(v){this.push(v)},withStreamInfo:function(v,_){return this.extraStreamInfo[v]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var v in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,v)&&(this.streamInfo[v]=this.extraStreamInfo[v])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var v="Worker "+this.name;return this.previous?this.previous+" -> "+v:v}},l.exports=p},{}],29:[function(a,l,f){var p=a("../utils"),v=a("./ConvertWorker"),_=a("./GenericWorker"),x=a("../base64"),w=a("../support"),A=a("../external"),D=null;if(w.nodestream)try{D=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function R(F,N){return new A.Promise(function(B,j){var W=[],$=F._internalType,re=F._outputType,ne=F._mimeType;F.on("data",function(ce,Te){W.push(ce),N&&N(Te)}).on("error",function(ce){W=[],j(ce)}).on("end",function(){try{var ce=(function(Te,Ie,ye){switch(Te){case"blob":return p.newBlob(p.transformTo("arraybuffer",Ie),ye);case"base64":return x.encode(Ie);default:return p.transformTo(Te,Ie)}})(re,(function(Te,Ie){var ye,Ne=0,et=null,de=0;for(ye=0;ye<Ie.length;ye++)de+=Ie[ye].length;switch(Te){case"string":return Ie.join("");case"array":return Array.prototype.concat.apply([],Ie);case"uint8array":for(et=new Uint8Array(de),ye=0;ye<Ie.length;ye++)et.set(Ie[ye],Ne),Ne+=Ie[ye].length;return et;case"nodebuffer":return Buffer.concat(Ie);default:throw new Error("concat : unsupported type '"+Te+"'")}})($,W),ne);B(ce)}catch(Te){j(Te)}W=[]}).resume()})}function C(F,N,B){var j=N;switch(N){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=N,this._mimeType=B,p.checkSupport(j),this._worker=F.pipe(new v(j)),F.lock()}catch(W){this._worker=new _("error"),this._worker.error(W)}}C.prototype={accumulate:function(F){return R(this,F)},on:function(F,N){var B=this;return F==="data"?this._worker.on(F,function(j){N.call(B,j.data,j.meta)}):this._worker.on(F,function(){p.delay(N,arguments,B)}),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(p.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:this._outputType!=="nodebuffer"},F)}},l.exports=C},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,l,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var p=new ArrayBuffer(0);try{f.blob=new Blob([p],{type:"application/zip"}).size===0}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);v.append(p),f.blob=v.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!a("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(a,l,f){for(var p=a("./utils"),v=a("./support"),_=a("./nodejsUtils"),x=a("./stream/GenericWorker"),w=new Array(256),A=0;A<256;A++)w[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;w[254]=w[254]=1;function D(){x.call(this,"utf-8 decode"),this.leftOver=null}function R(){x.call(this,"utf-8 encode")}f.utf8encode=function(C){return v.nodebuffer?_.newBufferFrom(C,"utf-8"):(function(F){var N,B,j,W,$,re=F.length,ne=0;for(W=0;W<re;W++)(64512&(B=F.charCodeAt(W)))==55296&&W+1<re&&(64512&(j=F.charCodeAt(W+1)))==56320&&(B=65536+(B-55296<<10)+(j-56320),W++),ne+=B<128?1:B<2048?2:B<65536?3:4;for(N=v.uint8array?new Uint8Array(ne):new Array(ne),W=$=0;$<ne;W++)(64512&(B=F.charCodeAt(W)))==55296&&W+1<re&&(64512&(j=F.charCodeAt(W+1)))==56320&&(B=65536+(B-55296<<10)+(j-56320),W++),B<128?N[$++]=B:(B<2048?N[$++]=192|B>>>6:(B<65536?N[$++]=224|B>>>12:(N[$++]=240|B>>>18,N[$++]=128|B>>>12&63),N[$++]=128|B>>>6&63),N[$++]=128|63&B);return N})(C)},f.utf8decode=function(C){return v.nodebuffer?p.transformTo("nodebuffer",C).toString("utf-8"):(function(F){var N,B,j,W,$=F.length,re=new Array(2*$);for(N=B=0;N<$;)if((j=F[N++])<128)re[B++]=j;else if(4<(W=w[j]))re[B++]=65533,N+=W-1;else{for(j&=W===2?31:W===3?15:7;1<W&&N<$;)j=j<<6|63&F[N++],W--;1<W?re[B++]=65533:j<65536?re[B++]=j:(j-=65536,re[B++]=55296|j>>10&1023,re[B++]=56320|1023&j)}return re.length!==B&&(re.subarray?re=re.subarray(0,B):re.length=B),p.applyFromCharCode(re)})(C=p.transformTo(v.uint8array?"uint8array":"array",C))},p.inherits(D,x),D.prototype.processChunk=function(C){var F=p.transformTo(v.uint8array?"uint8array":"array",C.data);if(this.leftOver&&this.leftOver.length){if(v.uint8array){var N=F;(F=new Uint8Array(N.length+this.leftOver.length)).set(this.leftOver,0),F.set(N,this.leftOver.length)}else F=this.leftOver.concat(F);this.leftOver=null}var B=(function(W,$){var re;for(($=$||W.length)>W.length&&($=W.length),re=$-1;0<=re&&(192&W[re])==128;)re--;return re<0||re===0?$:re+w[W[re]]>$?re:$})(F),j=F;B!==F.length&&(v.uint8array?(j=F.subarray(0,B),this.leftOver=F.subarray(B,F.length)):(j=F.slice(0,B),this.leftOver=F.slice(B,F.length))),this.push({data:f.utf8decode(j),meta:C.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=D,p.inherits(R,x),R.prototype.processChunk=function(C){this.push({data:f.utf8encode(C.data),meta:C.meta})},f.Utf8EncodeWorker=R},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,l,f){var p=a("./support"),v=a("./base64"),_=a("./nodejsUtils"),x=a("./external");function w(N){return N}function A(N,B){for(var j=0;j<N.length;++j)B[j]=255&N.charCodeAt(j);return B}a("setimmediate"),f.newBlob=function(N,B){f.checkSupport("blob");try{return new Blob([N],{type:B})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(N),j.getBlob(B)}catch{throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(N,B,j){var W=[],$=0,re=N.length;if(re<=j)return String.fromCharCode.apply(null,N);for(;$<re;)B==="array"||B==="nodebuffer"?W.push(String.fromCharCode.apply(null,N.slice($,Math.min($+j,re)))):W.push(String.fromCharCode.apply(null,N.subarray($,Math.min($+j,re)))),$+=j;return W.join("")},stringifyByChar:function(N){for(var B="",j=0;j<N.length;j++)B+=String.fromCharCode(N[j]);return B},applyCanBeUsed:{uint8array:(function(){try{return p.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return p.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}})()}};function R(N){var B=65536,j=f.getTypeOf(N),W=!0;if(j==="uint8array"?W=D.applyCanBeUsed.uint8array:j==="nodebuffer"&&(W=D.applyCanBeUsed.nodebuffer),W)for(;1<B;)try{return D.stringifyByChunk(N,j,B)}catch{B=Math.floor(B/2)}return D.stringifyByChar(N)}function C(N,B){for(var j=0;j<N.length;j++)B[j]=N[j];return B}f.applyFromCharCode=R;var F={};F.string={string:w,array:function(N){return A(N,new Array(N.length))},arraybuffer:function(N){return F.string.uint8array(N).buffer},uint8array:function(N){return A(N,new Uint8Array(N.length))},nodebuffer:function(N){return A(N,_.allocBuffer(N.length))}},F.array={string:R,array:w,arraybuffer:function(N){return new Uint8Array(N).buffer},uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return _.newBufferFrom(N)}},F.arraybuffer={string:function(N){return R(new Uint8Array(N))},array:function(N){return C(new Uint8Array(N),new Array(N.byteLength))},arraybuffer:w,uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return _.newBufferFrom(new Uint8Array(N))}},F.uint8array={string:R,array:function(N){return C(N,new Array(N.length))},arraybuffer:function(N){return N.buffer},uint8array:w,nodebuffer:function(N){return _.newBufferFrom(N)}},F.nodebuffer={string:R,array:function(N){return C(N,new Array(N.length))},arraybuffer:function(N){return F.nodebuffer.uint8array(N).buffer},uint8array:function(N){return C(N,new Uint8Array(N.length))},nodebuffer:w},f.transformTo=function(N,B){if(B=B||"",!N)return B;f.checkSupport(N);var j=f.getTypeOf(B);return F[j][N](B)},f.resolve=function(N){for(var B=N.split("/"),j=[],W=0;W<B.length;W++){var $=B[W];$==="."||$===""&&W!==0&&W!==B.length-1||($===".."?j.pop():j.push($))}return j.join("/")},f.getTypeOf=function(N){return typeof N=="string"?"string":Object.prototype.toString.call(N)==="[object Array]"?"array":p.nodebuffer&&_.isBuffer(N)?"nodebuffer":p.uint8array&&N instanceof Uint8Array?"uint8array":p.arraybuffer&&N instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(N){if(!p[N.toLowerCase()])throw new Error(N+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(N){var B,j,W="";for(j=0;j<(N||"").length;j++)W+="\\x"+((B=N.charCodeAt(j))<16?"0":"")+B.toString(16).toUpperCase();return W},f.delay=function(N,B,j){setImmediate(function(){N.apply(j||null,B||[])})},f.inherits=function(N,B){function j(){}j.prototype=B.prototype,N.prototype=new j},f.extend=function(){var N,B,j={};for(N=0;N<arguments.length;N++)for(B in arguments[N])Object.prototype.hasOwnProperty.call(arguments[N],B)&&j[B]===void 0&&(j[B]=arguments[N][B]);return j},f.prepareContent=function(N,B,j,W,$){return x.Promise.resolve(B).then(function(re){return p.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new x.Promise(function(ne,ce){var Te=new FileReader;Te.onload=function(Ie){ne(Ie.target.result)},Te.onerror=function(Ie){ce(Ie.target.error)},Te.readAsArrayBuffer(re)}):re}).then(function(re){var ne=f.getTypeOf(re);return ne?(ne==="arraybuffer"?re=f.transformTo("uint8array",re):ne==="string"&&($?re=v.decode(re):j&&W!==!0&&(re=(function(ce){return A(ce,p.uint8array?new Uint8Array(ce.length):new Array(ce.length))})(re))),re):x.Promise.reject(new Error("Can't read the data of '"+N+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,l,f){var p=a("./reader/readerFor"),v=a("./utils"),_=a("./signature"),x=a("./zipEntry"),w=a("./support");function A(D){this.files=[],this.loadOptions=D}A.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var R=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+v.pretty(R)+", expected "+v.pretty(D)+")")}},isSignature:function(D,R){var C=this.reader.index;this.reader.setIndex(D);var F=this.reader.readString(4)===R;return this.reader.setIndex(C),F},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),R=w.uint8array?"uint8array":"array",C=v.transformTo(R,D);this.zipComment=this.loadOptions.decodeFileName(C)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,R,C,F=this.zip64EndOfCentralSize-44;0<F;)D=this.reader.readInt(2),R=this.reader.readInt(4),C=this.reader.readData(R),this.zip64ExtensibleData[D]={id:D,length:R,value:C}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,R;for(D=0;D<this.files.length;D++)R=this.files[D],this.reader.setIndex(R.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),R.readLocalPart(this.reader),R.handleUTF8(),R.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(D=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var R=D;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===v.MAX_VALUE_16BITS||this.diskWithCentralDirStart===v.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===v.MAX_VALUE_16BITS||this.centralDirRecords===v.MAX_VALUE_16BITS||this.centralDirSize===v.MAX_VALUE_32BITS||this.centralDirOffset===v.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var C=this.centralDirOffset+this.centralDirSize;this.zip64&&(C+=20,C+=12+this.zip64EndOfCentralSize);var F=R-C;if(0<F)this.isSignature(R,_.CENTRAL_FILE_HEADER)||(this.reader.zero=F);else if(F<0)throw new Error("Corrupted zip: missing "+Math.abs(F)+" bytes.")},prepareReader:function(D){this.reader=p(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},l.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,l,f){var p=a("./reader/readerFor"),v=a("./utils"),_=a("./compressedObject"),x=a("./crc32"),w=a("./utf8"),A=a("./compressions"),D=a("./support");function R(C,F){this.options=C,this.loadOptions=F}R.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(C){var F,N;if(C.skip(22),this.fileNameLength=C.readInt(2),N=C.readInt(2),this.fileName=C.readData(this.fileNameLength),C.skip(N),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((F=(function(B){for(var j in A)if(Object.prototype.hasOwnProperty.call(A,j)&&A[j].magic===B)return A[j];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+v.pretty(this.compressionMethod)+" unknown (inner file : "+v.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,F,C.readData(this.compressedSize))},readCentralPart:function(C){this.versionMadeBy=C.readInt(2),C.skip(2),this.bitFlag=C.readInt(2),this.compressionMethod=C.readString(2),this.date=C.readDate(),this.crc32=C.readInt(4),this.compressedSize=C.readInt(4),this.uncompressedSize=C.readInt(4);var F=C.readInt(2);if(this.extraFieldsLength=C.readInt(2),this.fileCommentLength=C.readInt(2),this.diskNumberStart=C.readInt(2),this.internalFileAttributes=C.readInt(2),this.externalFileAttributes=C.readInt(4),this.localHeaderOffset=C.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");C.skip(F),this.readExtraFields(C),this.parseZIP64ExtraField(C),this.fileComment=C.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var C=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),C==0&&(this.dosPermissions=63&this.externalFileAttributes),C==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var C=p(this.extraFields[1].value);this.uncompressedSize===v.MAX_VALUE_32BITS&&(this.uncompressedSize=C.readInt(8)),this.compressedSize===v.MAX_VALUE_32BITS&&(this.compressedSize=C.readInt(8)),this.localHeaderOffset===v.MAX_VALUE_32BITS&&(this.localHeaderOffset=C.readInt(8)),this.diskNumberStart===v.MAX_VALUE_32BITS&&(this.diskNumberStart=C.readInt(4))}},readExtraFields:function(C){var F,N,B,j=C.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});C.index+4<j;)F=C.readInt(2),N=C.readInt(2),B=C.readData(N),this.extraFields[F]={id:F,length:N,value:B};C.setIndex(j)},handleUTF8:function(){var C=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=w.utf8decode(this.fileName),this.fileCommentStr=w.utf8decode(this.fileComment);else{var F=this.findExtraFieldUnicodePath();if(F!==null)this.fileNameStr=F;else{var N=v.transformTo(C,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(N)}var B=this.findExtraFieldUnicodeComment();if(B!==null)this.fileCommentStr=B;else{var j=v.transformTo(C,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var C=this.extraFields[28789];if(C){var F=p(C.value);return F.readInt(1)!==1||x(this.fileName)!==F.readInt(4)?null:w.utf8decode(F.readData(C.length-5))}return null},findExtraFieldUnicodeComment:function(){var C=this.extraFields[25461];if(C){var F=p(C.value);return F.readInt(1)!==1||x(this.fileComment)!==F.readInt(4)?null:w.utf8decode(F.readData(C.length-5))}return null}},l.exports=R},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,l,f){function p(F,N,B){this.name=F,this.dir=B.dir,this.date=B.date,this.comment=B.comment,this.unixPermissions=B.unixPermissions,this.dosPermissions=B.dosPermissions,this._data=N,this._dataBinary=B.binary,this.options={compression:B.compression,compressionOptions:B.compressionOptions}}var v=a("./stream/StreamHelper"),_=a("./stream/DataWorker"),x=a("./utf8"),w=a("./compressedObject"),A=a("./stream/GenericWorker");p.prototype={internalStream:function(F){var N=null,B="string";try{if(!F)throw new Error("No output type specified.");var j=(B=F.toLowerCase())==="string"||B==="text";B!=="binarystring"&&B!=="text"||(B="string"),N=this._decompressWorker();var W=!this._dataBinary;W&&!j&&(N=N.pipe(new x.Utf8EncodeWorker)),!W&&j&&(N=N.pipe(new x.Utf8DecodeWorker))}catch($){(N=new A("error")).error($)}return new v(N,B,"")},async:function(F,N){return this.internalStream(F).accumulate(N)},nodeStream:function(F,N){return this.internalStream(F||"nodebuffer").toNodejsStream(N)},_compressWorker:function(F,N){if(this._data instanceof w&&this._data.compression.magic===F.magic)return this._data.getCompressedWorker();var B=this._decompressWorker();return this._dataBinary||(B=B.pipe(new x.Utf8EncodeWorker)),w.createWorkerFrom(B,F,N)},_decompressWorker:function(){return this._data instanceof w?this._data.getContentWorker():this._data instanceof A?this._data:new _(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],R=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},C=0;C<D.length;C++)p.prototype[D[C]]=R;l.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,l,f){(function(p){var v,_,x=p.MutationObserver||p.WebKitMutationObserver;if(x){var w=0,A=new x(F),D=p.document.createTextNode("");A.observe(D,{characterData:!0}),v=function(){D.data=w=++w%2}}else if(p.setImmediate||p.MessageChannel===void 0)v="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var N=p.document.createElement("script");N.onreadystatechange=function(){F(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},p.document.documentElement.appendChild(N)}:function(){setTimeout(F,0)};else{var R=new p.MessageChannel;R.port1.onmessage=F,v=function(){R.port2.postMessage(0)}}var C=[];function F(){var N,B;_=!0;for(var j=C.length;j;){for(B=C,C=[],N=-1;++N<j;)B[N]();j=C.length}_=!1}l.exports=function(N){C.push(N)!==1||_||v()}}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,l,f){var p=a("immediate");function v(){}var _={},x=["REJECTED"],w=["FULFILLED"],A=["PENDING"];function D(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,j!==v&&N(this,j)}function R(j,W,$){this.promise=j,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof $=="function"&&(this.onRejected=$,this.callRejected=this.otherCallRejected)}function C(j,W,$){p(function(){var re;try{re=W($)}catch(ne){return _.reject(j,ne)}re===j?_.reject(j,new TypeError("Cannot resolve promise with itself")):_.resolve(j,re)})}function F(j){var W=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof W=="function")return function(){W.apply(j,arguments)}}function N(j,W){var $=!1;function re(Te){$||($=!0,_.reject(j,Te))}function ne(Te){$||($=!0,_.resolve(j,Te))}var ce=B(function(){W(ne,re)});ce.status==="error"&&re(ce.value)}function B(j,W){var $={};try{$.value=j(W),$.status="success"}catch(re){$.status="error",$.value=re}return $}(l.exports=D).prototype.finally=function(j){if(typeof j!="function")return this;var W=this.constructor;return this.then(function($){return W.resolve(j()).then(function(){return $})},function($){return W.resolve(j()).then(function(){throw $})})},D.prototype.catch=function(j){return this.then(null,j)},D.prototype.then=function(j,W){if(typeof j!="function"&&this.state===w||typeof W!="function"&&this.state===x)return this;var $=new this.constructor(v);return this.state!==A?C($,this.state===w?j:W,this.outcome):this.queue.push(new R($,j,W)),$},R.prototype.callFulfilled=function(j){_.resolve(this.promise,j)},R.prototype.otherCallFulfilled=function(j){C(this.promise,this.onFulfilled,j)},R.prototype.callRejected=function(j){_.reject(this.promise,j)},R.prototype.otherCallRejected=function(j){C(this.promise,this.onRejected,j)},_.resolve=function(j,W){var $=B(F,W);if($.status==="error")return _.reject(j,$.value);var re=$.value;if(re)N(j,re);else{j.state=w,j.outcome=W;for(var ne=-1,ce=j.queue.length;++ne<ce;)j.queue[ne].callFulfilled(W)}return j},_.reject=function(j,W){j.state=x,j.outcome=W;for(var $=-1,re=j.queue.length;++$<re;)j.queue[$].callRejected(W);return j},D.resolve=function(j){return j instanceof this?j:_.resolve(new this(v),j)},D.reject=function(j){var W=new this(v);return _.reject(W,j)},D.all=function(j){var W=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var $=j.length,re=!1;if(!$)return this.resolve([]);for(var ne=new Array($),ce=0,Te=-1,Ie=new this(v);++Te<$;)ye(j[Te],Te);return Ie;function ye(Ne,et){W.resolve(Ne).then(function(de){ne[et]=de,++ce!==$||re||(re=!0,_.resolve(Ie,ne))},function(de){re||(re=!0,_.reject(Ie,de))})}},D.race=function(j){var W=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var $=j.length,re=!1;if(!$)return this.resolve([]);for(var ne=-1,ce=new this(v);++ne<$;)Te=j[ne],W.resolve(Te).then(function(Ie){re||(re=!0,_.resolve(ce,Ie))},function(Ie){re||(re=!0,_.reject(ce,Ie))});var Te;return ce}},{immediate:36}],38:[function(a,l,f){var p={};(0,a("./lib/utils/common").assign)(p,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),l.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,l,f){var p=a("./zlib/deflate"),v=a("./utils/common"),_=a("./utils/strings"),x=a("./zlib/messages"),w=a("./zlib/zstream"),A=Object.prototype.toString,D=0,R=-1,C=0,F=8;function N(j){if(!(this instanceof N))return new N(j);this.options=v.assign({level:R,method:F,chunkSize:16384,windowBits:15,memLevel:8,strategy:C,to:""},j||{});var W=this.options;W.raw&&0<W.windowBits?W.windowBits=-W.windowBits:W.gzip&&0<W.windowBits&&W.windowBits<16&&(W.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var $=p.deflateInit2(this.strm,W.level,W.method,W.windowBits,W.memLevel,W.strategy);if($!==D)throw new Error(x[$]);if(W.header&&p.deflateSetHeader(this.strm,W.header),W.dictionary){var re;if(re=typeof W.dictionary=="string"?_.string2buf(W.dictionary):A.call(W.dictionary)==="[object ArrayBuffer]"?new Uint8Array(W.dictionary):W.dictionary,($=p.deflateSetDictionary(this.strm,re))!==D)throw new Error(x[$]);this._dict_set=!0}}function B(j,W){var $=new N(W);if($.push(j,!0),$.err)throw $.msg||x[$.err];return $.result}N.prototype.push=function(j,W){var $,re,ne=this.strm,ce=this.options.chunkSize;if(this.ended)return!1;re=W===~~W?W:W===!0?4:0,typeof j=="string"?ne.input=_.string2buf(j):A.call(j)==="[object ArrayBuffer]"?ne.input=new Uint8Array(j):ne.input=j,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new v.Buf8(ce),ne.next_out=0,ne.avail_out=ce),($=p.deflate(ne,re))!==1&&$!==D)return this.onEnd($),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(v.shrinkBuf(ne.output,ne.next_out))):this.onData(v.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&$!==1);return re===4?($=p.deflateEnd(this.strm),this.onEnd($),this.ended=!0,$===D):re!==2||(this.onEnd(D),!(ne.avail_out=0))},N.prototype.onData=function(j){this.chunks.push(j)},N.prototype.onEnd=function(j){j===D&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},f.Deflate=N,f.deflate=B,f.deflateRaw=function(j,W){return(W=W||{}).raw=!0,B(j,W)},f.gzip=function(j,W){return(W=W||{}).gzip=!0,B(j,W)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,l,f){var p=a("./zlib/inflate"),v=a("./utils/common"),_=a("./utils/strings"),x=a("./zlib/constants"),w=a("./zlib/messages"),A=a("./zlib/zstream"),D=a("./zlib/gzheader"),R=Object.prototype.toString;function C(N){if(!(this instanceof C))return new C(N);this.options=v.assign({chunkSize:16384,windowBits:0,to:""},N||{});var B=this.options;B.raw&&0<=B.windowBits&&B.windowBits<16&&(B.windowBits=-B.windowBits,B.windowBits===0&&(B.windowBits=-15)),!(0<=B.windowBits&&B.windowBits<16)||N&&N.windowBits||(B.windowBits+=32),15<B.windowBits&&B.windowBits<48&&!(15&B.windowBits)&&(B.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var j=p.inflateInit2(this.strm,B.windowBits);if(j!==x.Z_OK)throw new Error(w[j]);this.header=new D,p.inflateGetHeader(this.strm,this.header)}function F(N,B){var j=new C(B);if(j.push(N,!0),j.err)throw j.msg||w[j.err];return j.result}C.prototype.push=function(N,B){var j,W,$,re,ne,ce,Te=this.strm,Ie=this.options.chunkSize,ye=this.options.dictionary,Ne=!1;if(this.ended)return!1;W=B===~~B?B:B===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof N=="string"?Te.input=_.binstring2buf(N):R.call(N)==="[object ArrayBuffer]"?Te.input=new Uint8Array(N):Te.input=N,Te.next_in=0,Te.avail_in=Te.input.length;do{if(Te.avail_out===0&&(Te.output=new v.Buf8(Ie),Te.next_out=0,Te.avail_out=Ie),(j=p.inflate(Te,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&ye&&(ce=typeof ye=="string"?_.string2buf(ye):R.call(ye)==="[object ArrayBuffer]"?new Uint8Array(ye):ye,j=p.inflateSetDictionary(this.strm,ce)),j===x.Z_BUF_ERROR&&Ne===!0&&(j=x.Z_OK,Ne=!1),j!==x.Z_STREAM_END&&j!==x.Z_OK)return this.onEnd(j),!(this.ended=!0);Te.next_out&&(Te.avail_out!==0&&j!==x.Z_STREAM_END&&(Te.avail_in!==0||W!==x.Z_FINISH&&W!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?($=_.utf8border(Te.output,Te.next_out),re=Te.next_out-$,ne=_.buf2string(Te.output,$),Te.next_out=re,Te.avail_out=Ie-re,re&&v.arraySet(Te.output,Te.output,$,re,0),this.onData(ne)):this.onData(v.shrinkBuf(Te.output,Te.next_out)))),Te.avail_in===0&&Te.avail_out===0&&(Ne=!0)}while((0<Te.avail_in||Te.avail_out===0)&&j!==x.Z_STREAM_END);return j===x.Z_STREAM_END&&(W=x.Z_FINISH),W===x.Z_FINISH?(j=p.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===x.Z_OK):W!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(Te.avail_out=0))},C.prototype.onData=function(N){this.chunks.push(N)},C.prototype.onEnd=function(N){N===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},f.Inflate=C,f.inflate=F,f.inflateRaw=function(N,B){return(B=B||{}).raw=!0,F(N,B)},f.ungzip=F},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,l,f){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(x){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var A=w.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var D in A)A.hasOwnProperty(D)&&(x[D]=A[D])}}return x},f.shrinkBuf=function(x,w){return x.length===w?x:x.subarray?x.subarray(0,w):(x.length=w,x)};var v={arraySet:function(x,w,A,D,R){if(w.subarray&&x.subarray)x.set(w.subarray(A,A+D),R);else for(var C=0;C<D;C++)x[R+C]=w[A+C]},flattenChunks:function(x){var w,A,D,R,C,F;for(w=D=0,A=x.length;w<A;w++)D+=x[w].length;for(F=new Uint8Array(D),w=R=0,A=x.length;w<A;w++)C=x[w],F.set(C,R),R+=C.length;return F}},_={arraySet:function(x,w,A,D,R){for(var C=0;C<D;C++)x[R+C]=w[A+C]},flattenChunks:function(x){return[].concat.apply([],x)}};f.setTyped=function(x){x?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,v)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,_))},f.setTyped(p)},{}],42:[function(a,l,f){var p=a("./common"),v=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var x=new p.Buf8(256),w=0;w<256;w++)x[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;function A(D,R){if(R<65537&&(D.subarray&&_||!D.subarray&&v))return String.fromCharCode.apply(null,p.shrinkBuf(D,R));for(var C="",F=0;F<R;F++)C+=String.fromCharCode(D[F]);return C}x[254]=x[254]=1,f.string2buf=function(D){var R,C,F,N,B,j=D.length,W=0;for(N=0;N<j;N++)(64512&(C=D.charCodeAt(N)))==55296&&N+1<j&&(64512&(F=D.charCodeAt(N+1)))==56320&&(C=65536+(C-55296<<10)+(F-56320),N++),W+=C<128?1:C<2048?2:C<65536?3:4;for(R=new p.Buf8(W),N=B=0;B<W;N++)(64512&(C=D.charCodeAt(N)))==55296&&N+1<j&&(64512&(F=D.charCodeAt(N+1)))==56320&&(C=65536+(C-55296<<10)+(F-56320),N++),C<128?R[B++]=C:(C<2048?R[B++]=192|C>>>6:(C<65536?R[B++]=224|C>>>12:(R[B++]=240|C>>>18,R[B++]=128|C>>>12&63),R[B++]=128|C>>>6&63),R[B++]=128|63&C);return R},f.buf2binstring=function(D){return A(D,D.length)},f.binstring2buf=function(D){for(var R=new p.Buf8(D.length),C=0,F=R.length;C<F;C++)R[C]=D.charCodeAt(C);return R},f.buf2string=function(D,R){var C,F,N,B,j=R||D.length,W=new Array(2*j);for(C=F=0;C<j;)if((N=D[C++])<128)W[F++]=N;else if(4<(B=x[N]))W[F++]=65533,C+=B-1;else{for(N&=B===2?31:B===3?15:7;1<B&&C<j;)N=N<<6|63&D[C++],B--;1<B?W[F++]=65533:N<65536?W[F++]=N:(N-=65536,W[F++]=55296|N>>10&1023,W[F++]=56320|1023&N)}return A(W,F)},f.utf8border=function(D,R){var C;for((R=R||D.length)>D.length&&(R=D.length),C=R-1;0<=C&&(192&D[C])==128;)C--;return C<0||C===0?R:C+x[D[C]]>R?C:R}},{"./common":41}],43:[function(a,l,f){l.exports=function(p,v,_,x){for(var w=65535&p|0,A=p>>>16&65535|0,D=0;_!==0;){for(_-=D=2e3<_?2e3:_;A=A+(w=w+v[x++]|0)|0,--D;);w%=65521,A%=65521}return w|A<<16|0}},{}],44:[function(a,l,f){l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,l,f){var p=(function(){for(var v,_=[],x=0;x<256;x++){v=x;for(var w=0;w<8;w++)v=1&v?3988292384^v>>>1:v>>>1;_[x]=v}return _})();l.exports=function(v,_,x,w){var A=p,D=w+x;v^=-1;for(var R=w;R<D;R++)v=v>>>8^A[255&(v^_[R])];return-1^v}},{}],46:[function(a,l,f){var p,v=a("../utils/common"),_=a("./trees"),x=a("./adler32"),w=a("./crc32"),A=a("./messages"),D=0,R=4,C=0,F=-2,N=-1,B=4,j=2,W=8,$=9,re=286,ne=30,ce=19,Te=2*re+1,Ie=15,ye=3,Ne=258,et=Ne+ye+1,de=42,Le=113,Z=1,Ge=2,Nt=3,Re=4;function Ce(Q,pt){return Q.msg=A[pt],pt}function qe(Q){return(Q<<1)-(4<Q?9:0)}function Et(Q){for(var pt=Q.length;0<=--pt;)Q[pt]=0}function fe(Q){var pt=Q.state,dt=pt.pending;dt>Q.avail_out&&(dt=Q.avail_out),dt!==0&&(v.arraySet(Q.output,pt.pending_buf,pt.pending_out,dt,Q.next_out),Q.next_out+=dt,pt.pending_out+=dt,Q.total_out+=dt,Q.avail_out-=dt,pt.pending-=dt,pt.pending===0&&(pt.pending_out=0))}function be(Q,pt){_._tr_flush_block(Q,0<=Q.block_start?Q.block_start:-1,Q.strstart-Q.block_start,pt),Q.block_start=Q.strstart,fe(Q.strm)}function tt(Q,pt){Q.pending_buf[Q.pending++]=pt}function at(Q,pt){Q.pending_buf[Q.pending++]=pt>>>8&255,Q.pending_buf[Q.pending++]=255&pt}function ct(Q,pt){var dt,Ee,Se=Q.max_chain_length,Ye=Q.strstart,Tt=Q.prev_length,It=Q.nice_match,nt=Q.strstart>Q.w_size-et?Q.strstart-(Q.w_size-et):0,Lt=Q.window,kt=Q.w_mask,Rt=Q.prev,Vn=Q.strstart+Ne,Wr=Lt[Ye+Tt-1],cr=Lt[Ye+Tt];Q.prev_length>=Q.good_match&&(Se>>=2),It>Q.lookahead&&(It=Q.lookahead);do if(Lt[(dt=pt)+Tt]===cr&&Lt[dt+Tt-1]===Wr&&Lt[dt]===Lt[Ye]&&Lt[++dt]===Lt[Ye+1]){Ye+=2,dt++;do;while(Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Lt[++Ye]===Lt[++dt]&&Ye<Vn);if(Ee=Ne-(Vn-Ye),Ye=Vn-Ne,Tt<Ee){if(Q.match_start=pt,It<=(Tt=Ee))break;Wr=Lt[Ye+Tt-1],cr=Lt[Ye+Tt]}}while((pt=Rt[pt&kt])>nt&&--Se!=0);return Tt<=Q.lookahead?Tt:Q.lookahead}function Ke(Q){var pt,dt,Ee,Se,Ye,Tt,It,nt,Lt,kt,Rt=Q.w_size;do{if(Se=Q.window_size-Q.lookahead-Q.strstart,Q.strstart>=Rt+(Rt-et)){for(v.arraySet(Q.window,Q.window,Rt,Rt,0),Q.match_start-=Rt,Q.strstart-=Rt,Q.block_start-=Rt,pt=dt=Q.hash_size;Ee=Q.head[--pt],Q.head[pt]=Rt<=Ee?Ee-Rt:0,--dt;);for(pt=dt=Rt;Ee=Q.prev[--pt],Q.prev[pt]=Rt<=Ee?Ee-Rt:0,--dt;);Se+=Rt}if(Q.strm.avail_in===0)break;if(Tt=Q.strm,It=Q.window,nt=Q.strstart+Q.lookahead,Lt=Se,kt=void 0,kt=Tt.avail_in,Lt<kt&&(kt=Lt),dt=kt===0?0:(Tt.avail_in-=kt,v.arraySet(It,Tt.input,Tt.next_in,kt,nt),Tt.state.wrap===1?Tt.adler=x(Tt.adler,It,kt,nt):Tt.state.wrap===2&&(Tt.adler=w(Tt.adler,It,kt,nt)),Tt.next_in+=kt,Tt.total_in+=kt,kt),Q.lookahead+=dt,Q.lookahead+Q.insert>=ye)for(Ye=Q.strstart-Q.insert,Q.ins_h=Q.window[Ye],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Ye+1])&Q.hash_mask;Q.insert&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Ye+ye-1])&Q.hash_mask,Q.prev[Ye&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Ye,Ye++,Q.insert--,!(Q.lookahead+Q.insert<ye)););}while(Q.lookahead<et&&Q.strm.avail_in!==0)}function cn(Q,pt){for(var dt,Ee;;){if(Q.lookahead<et){if(Ke(Q),Q.lookahead<et&&pt===D)return Z;if(Q.lookahead===0)break}if(dt=0,Q.lookahead>=ye&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+ye-1])&Q.hash_mask,dt=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),dt!==0&&Q.strstart-dt<=Q.w_size-et&&(Q.match_length=ct(Q,dt)),Q.match_length>=ye)if(Ee=_._tr_tally(Q,Q.strstart-Q.match_start,Q.match_length-ye),Q.lookahead-=Q.match_length,Q.match_length<=Q.max_lazy_match&&Q.lookahead>=ye){for(Q.match_length--;Q.strstart++,Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+ye-1])&Q.hash_mask,dt=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart,--Q.match_length!=0;);Q.strstart++}else Q.strstart+=Q.match_length,Q.match_length=0,Q.ins_h=Q.window[Q.strstart],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+1])&Q.hash_mask;else Ee=_._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++;if(Ee&&(be(Q,!1),Q.strm.avail_out===0))return Z}return Q.insert=Q.strstart<ye-1?Q.strstart:ye-1,pt===R?(be(Q,!0),Q.strm.avail_out===0?Nt:Re):Q.last_lit&&(be(Q,!1),Q.strm.avail_out===0)?Z:Ge}function wt(Q,pt){for(var dt,Ee,Se;;){if(Q.lookahead<et){if(Ke(Q),Q.lookahead<et&&pt===D)return Z;if(Q.lookahead===0)break}if(dt=0,Q.lookahead>=ye&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+ye-1])&Q.hash_mask,dt=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),Q.prev_length=Q.match_length,Q.prev_match=Q.match_start,Q.match_length=ye-1,dt!==0&&Q.prev_length<Q.max_lazy_match&&Q.strstart-dt<=Q.w_size-et&&(Q.match_length=ct(Q,dt),Q.match_length<=5&&(Q.strategy===1||Q.match_length===ye&&4096<Q.strstart-Q.match_start)&&(Q.match_length=ye-1)),Q.prev_length>=ye&&Q.match_length<=Q.prev_length){for(Se=Q.strstart+Q.lookahead-ye,Ee=_._tr_tally(Q,Q.strstart-1-Q.prev_match,Q.prev_length-ye),Q.lookahead-=Q.prev_length-1,Q.prev_length-=2;++Q.strstart<=Se&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+ye-1])&Q.hash_mask,dt=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),--Q.prev_length!=0;);if(Q.match_available=0,Q.match_length=ye-1,Q.strstart++,Ee&&(be(Q,!1),Q.strm.avail_out===0))return Z}else if(Q.match_available){if((Ee=_._tr_tally(Q,0,Q.window[Q.strstart-1]))&&be(Q,!1),Q.strstart++,Q.lookahead--,Q.strm.avail_out===0)return Z}else Q.match_available=1,Q.strstart++,Q.lookahead--}return Q.match_available&&(Ee=_._tr_tally(Q,0,Q.window[Q.strstart-1]),Q.match_available=0),Q.insert=Q.strstart<ye-1?Q.strstart:ye-1,pt===R?(be(Q,!0),Q.strm.avail_out===0?Nt:Re):Q.last_lit&&(be(Q,!1),Q.strm.avail_out===0)?Z:Ge}function nn(Q,pt,dt,Ee,Se){this.good_length=Q,this.max_lazy=pt,this.nice_length=dt,this.max_chain=Ee,this.func=Se}function In(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(2*Te),this.dyn_dtree=new v.Buf16(2*(2*ne+1)),this.bl_tree=new v.Buf16(2*(2*ce+1)),Et(this.dyn_ltree),Et(this.dyn_dtree),Et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(Ie+1),this.heap=new v.Buf16(2*re+1),Et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(2*re+1),Et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Yn(Q){var pt;return Q&&Q.state?(Q.total_in=Q.total_out=0,Q.data_type=j,(pt=Q.state).pending=0,pt.pending_out=0,pt.wrap<0&&(pt.wrap=-pt.wrap),pt.status=pt.wrap?de:Le,Q.adler=pt.wrap===2?0:1,pt.last_flush=D,_._tr_init(pt),C):Ce(Q,F)}function Gn(Q){var pt=Yn(Q);return pt===C&&(function(dt){dt.window_size=2*dt.w_size,Et(dt.head),dt.max_lazy_match=p[dt.level].max_lazy,dt.good_match=p[dt.level].good_length,dt.nice_match=p[dt.level].nice_length,dt.max_chain_length=p[dt.level].max_chain,dt.strstart=0,dt.block_start=0,dt.lookahead=0,dt.insert=0,dt.match_length=dt.prev_length=ye-1,dt.match_available=0,dt.ins_h=0})(Q.state),pt}function Xr(Q,pt,dt,Ee,Se,Ye){if(!Q)return F;var Tt=1;if(pt===N&&(pt=6),Ee<0?(Tt=0,Ee=-Ee):15<Ee&&(Tt=2,Ee-=16),Se<1||$<Se||dt!==W||Ee<8||15<Ee||pt<0||9<pt||Ye<0||B<Ye)return Ce(Q,F);Ee===8&&(Ee=9);var It=new In;return(Q.state=It).strm=Q,It.wrap=Tt,It.gzhead=null,It.w_bits=Ee,It.w_size=1<<It.w_bits,It.w_mask=It.w_size-1,It.hash_bits=Se+7,It.hash_size=1<<It.hash_bits,It.hash_mask=It.hash_size-1,It.hash_shift=~~((It.hash_bits+ye-1)/ye),It.window=new v.Buf8(2*It.w_size),It.head=new v.Buf16(It.hash_size),It.prev=new v.Buf16(It.w_size),It.lit_bufsize=1<<Se+6,It.pending_buf_size=4*It.lit_bufsize,It.pending_buf=new v.Buf8(It.pending_buf_size),It.d_buf=1*It.lit_bufsize,It.l_buf=3*It.lit_bufsize,It.level=pt,It.strategy=Ye,It.method=dt,Gn(Q)}p=[new nn(0,0,0,0,function(Q,pt){var dt=65535;for(dt>Q.pending_buf_size-5&&(dt=Q.pending_buf_size-5);;){if(Q.lookahead<=1){if(Ke(Q),Q.lookahead===0&&pt===D)return Z;if(Q.lookahead===0)break}Q.strstart+=Q.lookahead,Q.lookahead=0;var Ee=Q.block_start+dt;if((Q.strstart===0||Q.strstart>=Ee)&&(Q.lookahead=Q.strstart-Ee,Q.strstart=Ee,be(Q,!1),Q.strm.avail_out===0)||Q.strstart-Q.block_start>=Q.w_size-et&&(be(Q,!1),Q.strm.avail_out===0))return Z}return Q.insert=0,pt===R?(be(Q,!0),Q.strm.avail_out===0?Nt:Re):(Q.strstart>Q.block_start&&(be(Q,!1),Q.strm.avail_out),Z)}),new nn(4,4,8,4,cn),new nn(4,5,16,8,cn),new nn(4,6,32,32,cn),new nn(4,4,16,16,wt),new nn(8,16,32,32,wt),new nn(8,16,128,128,wt),new nn(8,32,128,256,wt),new nn(32,128,258,1024,wt),new nn(32,258,258,4096,wt)],f.deflateInit=function(Q,pt){return Xr(Q,pt,W,15,8,0)},f.deflateInit2=Xr,f.deflateReset=Gn,f.deflateResetKeep=Yn,f.deflateSetHeader=function(Q,pt){return Q&&Q.state?Q.state.wrap!==2?F:(Q.state.gzhead=pt,C):F},f.deflate=function(Q,pt){var dt,Ee,Se,Ye;if(!Q||!Q.state||5<pt||pt<0)return Q?Ce(Q,F):F;if(Ee=Q.state,!Q.output||!Q.input&&Q.avail_in!==0||Ee.status===666&&pt!==R)return Ce(Q,Q.avail_out===0?-5:F);if(Ee.strm=Q,dt=Ee.last_flush,Ee.last_flush=pt,Ee.status===de)if(Ee.wrap===2)Q.adler=0,tt(Ee,31),tt(Ee,139),tt(Ee,8),Ee.gzhead?(tt(Ee,(Ee.gzhead.text?1:0)+(Ee.gzhead.hcrc?2:0)+(Ee.gzhead.extra?4:0)+(Ee.gzhead.name?8:0)+(Ee.gzhead.comment?16:0)),tt(Ee,255&Ee.gzhead.time),tt(Ee,Ee.gzhead.time>>8&255),tt(Ee,Ee.gzhead.time>>16&255),tt(Ee,Ee.gzhead.time>>24&255),tt(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),tt(Ee,255&Ee.gzhead.os),Ee.gzhead.extra&&Ee.gzhead.extra.length&&(tt(Ee,255&Ee.gzhead.extra.length),tt(Ee,Ee.gzhead.extra.length>>8&255)),Ee.gzhead.hcrc&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending,0)),Ee.gzindex=0,Ee.status=69):(tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),tt(Ee,3),Ee.status=Le);else{var Tt=W+(Ee.w_bits-8<<4)<<8;Tt|=(2<=Ee.strategy||Ee.level<2?0:Ee.level<6?1:Ee.level===6?2:3)<<6,Ee.strstart!==0&&(Tt|=32),Tt+=31-Tt%31,Ee.status=Le,at(Ee,Tt),Ee.strstart!==0&&(at(Ee,Q.adler>>>16),at(Ee,65535&Q.adler)),Q.adler=1}if(Ee.status===69)if(Ee.gzhead.extra){for(Se=Ee.pending;Ee.gzindex<(65535&Ee.gzhead.extra.length)&&(Ee.pending!==Ee.pending_buf_size||(Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),fe(Q),Se=Ee.pending,Ee.pending!==Ee.pending_buf_size));)tt(Ee,255&Ee.gzhead.extra[Ee.gzindex]),Ee.gzindex++;Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),Ee.gzindex===Ee.gzhead.extra.length&&(Ee.gzindex=0,Ee.status=73)}else Ee.status=73;if(Ee.status===73)if(Ee.gzhead.name){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),fe(Q),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){Ye=1;break}Ye=Ee.gzindex<Ee.gzhead.name.length?255&Ee.gzhead.name.charCodeAt(Ee.gzindex++):0,tt(Ee,Ye)}while(Ye!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),Ye===0&&(Ee.gzindex=0,Ee.status=91)}else Ee.status=91;if(Ee.status===91)if(Ee.gzhead.comment){Se=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),fe(Q),Se=Ee.pending,Ee.pending===Ee.pending_buf_size)){Ye=1;break}Ye=Ee.gzindex<Ee.gzhead.comment.length?255&Ee.gzhead.comment.charCodeAt(Ee.gzindex++):0,tt(Ee,Ye)}while(Ye!==0);Ee.gzhead.hcrc&&Ee.pending>Se&&(Q.adler=w(Q.adler,Ee.pending_buf,Ee.pending-Se,Se)),Ye===0&&(Ee.status=103)}else Ee.status=103;if(Ee.status===103&&(Ee.gzhead.hcrc?(Ee.pending+2>Ee.pending_buf_size&&fe(Q),Ee.pending+2<=Ee.pending_buf_size&&(tt(Ee,255&Q.adler),tt(Ee,Q.adler>>8&255),Q.adler=0,Ee.status=Le)):Ee.status=Le),Ee.pending!==0){if(fe(Q),Q.avail_out===0)return Ee.last_flush=-1,C}else if(Q.avail_in===0&&qe(pt)<=qe(dt)&&pt!==R)return Ce(Q,-5);if(Ee.status===666&&Q.avail_in!==0)return Ce(Q,-5);if(Q.avail_in!==0||Ee.lookahead!==0||pt!==D&&Ee.status!==666){var It=Ee.strategy===2?(function(nt,Lt){for(var kt;;){if(nt.lookahead===0&&(Ke(nt),nt.lookahead===0)){if(Lt===D)return Z;break}if(nt.match_length=0,kt=_._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,kt&&(be(nt,!1),nt.strm.avail_out===0))return Z}return nt.insert=0,Lt===R?(be(nt,!0),nt.strm.avail_out===0?Nt:Re):nt.last_lit&&(be(nt,!1),nt.strm.avail_out===0)?Z:Ge})(Ee,pt):Ee.strategy===3?(function(nt,Lt){for(var kt,Rt,Vn,Wr,cr=nt.window;;){if(nt.lookahead<=Ne){if(Ke(nt),nt.lookahead<=Ne&&Lt===D)return Z;if(nt.lookahead===0)break}if(nt.match_length=0,nt.lookahead>=ye&&0<nt.strstart&&(Rt=cr[Vn=nt.strstart-1])===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]){Wr=nt.strstart+Ne;do;while(Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Rt===cr[++Vn]&&Vn<Wr);nt.match_length=Ne-(Wr-Vn),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=ye?(kt=_._tr_tally(nt,1,nt.match_length-ye),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(kt=_._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),kt&&(be(nt,!1),nt.strm.avail_out===0))return Z}return nt.insert=0,Lt===R?(be(nt,!0),nt.strm.avail_out===0?Nt:Re):nt.last_lit&&(be(nt,!1),nt.strm.avail_out===0)?Z:Ge})(Ee,pt):p[Ee.level].func(Ee,pt);if(It!==Nt&&It!==Re||(Ee.status=666),It===Z||It===Nt)return Q.avail_out===0&&(Ee.last_flush=-1),C;if(It===Ge&&(pt===1?_._tr_align(Ee):pt!==5&&(_._tr_stored_block(Ee,0,0,!1),pt===3&&(Et(Ee.head),Ee.lookahead===0&&(Ee.strstart=0,Ee.block_start=0,Ee.insert=0))),fe(Q),Q.avail_out===0))return Ee.last_flush=-1,C}return pt!==R?C:Ee.wrap<=0?1:(Ee.wrap===2?(tt(Ee,255&Q.adler),tt(Ee,Q.adler>>8&255),tt(Ee,Q.adler>>16&255),tt(Ee,Q.adler>>24&255),tt(Ee,255&Q.total_in),tt(Ee,Q.total_in>>8&255),tt(Ee,Q.total_in>>16&255),tt(Ee,Q.total_in>>24&255)):(at(Ee,Q.adler>>>16),at(Ee,65535&Q.adler)),fe(Q),0<Ee.wrap&&(Ee.wrap=-Ee.wrap),Ee.pending!==0?C:1)},f.deflateEnd=function(Q){var pt;return Q&&Q.state?(pt=Q.state.status)!==de&&pt!==69&&pt!==73&&pt!==91&&pt!==103&&pt!==Le&&pt!==666?Ce(Q,F):(Q.state=null,pt===Le?Ce(Q,-3):C):F},f.deflateSetDictionary=function(Q,pt){var dt,Ee,Se,Ye,Tt,It,nt,Lt,kt=pt.length;if(!Q||!Q.state||(Ye=(dt=Q.state).wrap)===2||Ye===1&&dt.status!==de||dt.lookahead)return F;for(Ye===1&&(Q.adler=x(Q.adler,pt,kt,0)),dt.wrap=0,kt>=dt.w_size&&(Ye===0&&(Et(dt.head),dt.strstart=0,dt.block_start=0,dt.insert=0),Lt=new v.Buf8(dt.w_size),v.arraySet(Lt,pt,kt-dt.w_size,dt.w_size,0),pt=Lt,kt=dt.w_size),Tt=Q.avail_in,It=Q.next_in,nt=Q.input,Q.avail_in=kt,Q.next_in=0,Q.input=pt,Ke(dt);dt.lookahead>=ye;){for(Ee=dt.strstart,Se=dt.lookahead-(ye-1);dt.ins_h=(dt.ins_h<<dt.hash_shift^dt.window[Ee+ye-1])&dt.hash_mask,dt.prev[Ee&dt.w_mask]=dt.head[dt.ins_h],dt.head[dt.ins_h]=Ee,Ee++,--Se;);dt.strstart=Ee,dt.lookahead=ye-1,Ke(dt)}return dt.strstart+=dt.lookahead,dt.block_start=dt.strstart,dt.insert=dt.lookahead,dt.lookahead=0,dt.match_length=dt.prev_length=ye-1,dt.match_available=0,Q.next_in=It,Q.input=nt,Q.avail_in=Tt,dt.wrap=Ye,C},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,l,f){l.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,l,f){l.exports=function(p,v){var _,x,w,A,D,R,C,F,N,B,j,W,$,re,ne,ce,Te,Ie,ye,Ne,et,de,Le,Z,Ge;_=p.state,x=p.next_in,Z=p.input,w=x+(p.avail_in-5),A=p.next_out,Ge=p.output,D=A-(v-p.avail_out),R=A+(p.avail_out-257),C=_.dmax,F=_.wsize,N=_.whave,B=_.wnext,j=_.window,W=_.hold,$=_.bits,re=_.lencode,ne=_.distcode,ce=(1<<_.lenbits)-1,Te=(1<<_.distbits)-1;e:do{$<15&&(W+=Z[x++]<<$,$+=8,W+=Z[x++]<<$,$+=8),Ie=re[W&ce];t:for(;;){if(W>>>=ye=Ie>>>24,$-=ye,(ye=Ie>>>16&255)===0)Ge[A++]=65535&Ie;else{if(!(16&ye)){if(!(64&ye)){Ie=re[(65535&Ie)+(W&(1<<ye)-1)];continue t}if(32&ye){_.mode=12;break e}p.msg="invalid literal/length code",_.mode=30;break e}Ne=65535&Ie,(ye&=15)&&($<ye&&(W+=Z[x++]<<$,$+=8),Ne+=W&(1<<ye)-1,W>>>=ye,$-=ye),$<15&&(W+=Z[x++]<<$,$+=8,W+=Z[x++]<<$,$+=8),Ie=ne[W&Te];n:for(;;){if(W>>>=ye=Ie>>>24,$-=ye,!(16&(ye=Ie>>>16&255))){if(!(64&ye)){Ie=ne[(65535&Ie)+(W&(1<<ye)-1)];continue n}p.msg="invalid distance code",_.mode=30;break e}if(et=65535&Ie,$<(ye&=15)&&(W+=Z[x++]<<$,($+=8)<ye&&(W+=Z[x++]<<$,$+=8)),C<(et+=W&(1<<ye)-1)){p.msg="invalid distance too far back",_.mode=30;break e}if(W>>>=ye,$-=ye,(ye=A-D)<et){if(N<(ye=et-ye)&&_.sane){p.msg="invalid distance too far back",_.mode=30;break e}if(Le=j,(de=0)===B){if(de+=F-ye,ye<Ne){for(Ne-=ye;Ge[A++]=j[de++],--ye;);de=A-et,Le=Ge}}else if(B<ye){if(de+=F+B-ye,(ye-=B)<Ne){for(Ne-=ye;Ge[A++]=j[de++],--ye;);if(de=0,B<Ne){for(Ne-=ye=B;Ge[A++]=j[de++],--ye;);de=A-et,Le=Ge}}}else if(de+=B-ye,ye<Ne){for(Ne-=ye;Ge[A++]=j[de++],--ye;);de=A-et,Le=Ge}for(;2<Ne;)Ge[A++]=Le[de++],Ge[A++]=Le[de++],Ge[A++]=Le[de++],Ne-=3;Ne&&(Ge[A++]=Le[de++],1<Ne&&(Ge[A++]=Le[de++]))}else{for(de=A-et;Ge[A++]=Ge[de++],Ge[A++]=Ge[de++],Ge[A++]=Ge[de++],2<(Ne-=3););Ne&&(Ge[A++]=Ge[de++],1<Ne&&(Ge[A++]=Ge[de++]))}break}}break}}while(x<w&&A<R);x-=Ne=$>>3,W&=(1<<($-=Ne<<3))-1,p.next_in=x,p.next_out=A,p.avail_in=x<w?w-x+5:5-(x-w),p.avail_out=A<R?R-A+257:257-(A-R),_.hold=W,_.bits=$}},{}],49:[function(a,l,f){var p=a("../utils/common"),v=a("./adler32"),_=a("./crc32"),x=a("./inffast"),w=a("./inftrees"),A=1,D=2,R=0,C=-2,F=1,N=852,B=592;function j(de){return(de>>>24&255)+(de>>>8&65280)+((65280&de)<<8)+((255&de)<<24)}function W(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function $(de){var Le;return de&&de.state?(Le=de.state,de.total_in=de.total_out=Le.total=0,de.msg="",Le.wrap&&(de.adler=1&Le.wrap),Le.mode=F,Le.last=0,Le.havedict=0,Le.dmax=32768,Le.head=null,Le.hold=0,Le.bits=0,Le.lencode=Le.lendyn=new p.Buf32(N),Le.distcode=Le.distdyn=new p.Buf32(B),Le.sane=1,Le.back=-1,R):C}function re(de){var Le;return de&&de.state?((Le=de.state).wsize=0,Le.whave=0,Le.wnext=0,$(de)):C}function ne(de,Le){var Z,Ge;return de&&de.state?(Ge=de.state,Le<0?(Z=0,Le=-Le):(Z=1+(Le>>4),Le<48&&(Le&=15)),Le&&(Le<8||15<Le)?C:(Ge.window!==null&&Ge.wbits!==Le&&(Ge.window=null),Ge.wrap=Z,Ge.wbits=Le,re(de))):C}function ce(de,Le){var Z,Ge;return de?(Ge=new W,(de.state=Ge).window=null,(Z=ne(de,Le))!==R&&(de.state=null),Z):C}var Te,Ie,ye=!0;function Ne(de){if(ye){var Le;for(Te=new p.Buf32(512),Ie=new p.Buf32(32),Le=0;Le<144;)de.lens[Le++]=8;for(;Le<256;)de.lens[Le++]=9;for(;Le<280;)de.lens[Le++]=7;for(;Le<288;)de.lens[Le++]=8;for(w(A,de.lens,0,288,Te,0,de.work,{bits:9}),Le=0;Le<32;)de.lens[Le++]=5;w(D,de.lens,0,32,Ie,0,de.work,{bits:5}),ye=!1}de.lencode=Te,de.lenbits=9,de.distcode=Ie,de.distbits=5}function et(de,Le,Z,Ge){var Nt,Re=de.state;return Re.window===null&&(Re.wsize=1<<Re.wbits,Re.wnext=0,Re.whave=0,Re.window=new p.Buf8(Re.wsize)),Ge>=Re.wsize?(p.arraySet(Re.window,Le,Z-Re.wsize,Re.wsize,0),Re.wnext=0,Re.whave=Re.wsize):(Ge<(Nt=Re.wsize-Re.wnext)&&(Nt=Ge),p.arraySet(Re.window,Le,Z-Ge,Nt,Re.wnext),(Ge-=Nt)?(p.arraySet(Re.window,Le,Z-Ge,Ge,0),Re.wnext=Ge,Re.whave=Re.wsize):(Re.wnext+=Nt,Re.wnext===Re.wsize&&(Re.wnext=0),Re.whave<Re.wsize&&(Re.whave+=Nt))),0}f.inflateReset=re,f.inflateReset2=ne,f.inflateResetKeep=$,f.inflateInit=function(de){return ce(de,15)},f.inflateInit2=ce,f.inflate=function(de,Le){var Z,Ge,Nt,Re,Ce,qe,Et,fe,be,tt,at,ct,Ke,cn,wt,nn,In,Yn,Gn,Xr,Q,pt,dt,Ee,Se=0,Ye=new p.Buf8(4),Tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!de||!de.state||!de.output||!de.input&&de.avail_in!==0)return C;(Z=de.state).mode===12&&(Z.mode=13),Ce=de.next_out,Nt=de.output,Et=de.avail_out,Re=de.next_in,Ge=de.input,qe=de.avail_in,fe=Z.hold,be=Z.bits,tt=qe,at=Et,pt=R;e:for(;;)switch(Z.mode){case F:if(Z.wrap===0){Z.mode=13;break}for(;be<16;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(2&Z.wrap&&fe===35615){Ye[Z.check=0]=255&fe,Ye[1]=fe>>>8&255,Z.check=_(Z.check,Ye,2,0),be=fe=0,Z.mode=2;break}if(Z.flags=0,Z.head&&(Z.head.done=!1),!(1&Z.wrap)||(((255&fe)<<8)+(fe>>8))%31){de.msg="incorrect header check",Z.mode=30;break}if((15&fe)!=8){de.msg="unknown compression method",Z.mode=30;break}if(be-=4,Q=8+(15&(fe>>>=4)),Z.wbits===0)Z.wbits=Q;else if(Q>Z.wbits){de.msg="invalid window size",Z.mode=30;break}Z.dmax=1<<Q,de.adler=Z.check=1,Z.mode=512&fe?10:12,be=fe=0;break;case 2:for(;be<16;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(Z.flags=fe,(255&Z.flags)!=8){de.msg="unknown compression method",Z.mode=30;break}if(57344&Z.flags){de.msg="unknown header flags set",Z.mode=30;break}Z.head&&(Z.head.text=fe>>8&1),512&Z.flags&&(Ye[0]=255&fe,Ye[1]=fe>>>8&255,Z.check=_(Z.check,Ye,2,0)),be=fe=0,Z.mode=3;case 3:for(;be<32;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.head&&(Z.head.time=fe),512&Z.flags&&(Ye[0]=255&fe,Ye[1]=fe>>>8&255,Ye[2]=fe>>>16&255,Ye[3]=fe>>>24&255,Z.check=_(Z.check,Ye,4,0)),be=fe=0,Z.mode=4;case 4:for(;be<16;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.head&&(Z.head.xflags=255&fe,Z.head.os=fe>>8),512&Z.flags&&(Ye[0]=255&fe,Ye[1]=fe>>>8&255,Z.check=_(Z.check,Ye,2,0)),be=fe=0,Z.mode=5;case 5:if(1024&Z.flags){for(;be<16;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.length=fe,Z.head&&(Z.head.extra_len=fe),512&Z.flags&&(Ye[0]=255&fe,Ye[1]=fe>>>8&255,Z.check=_(Z.check,Ye,2,0)),be=fe=0}else Z.head&&(Z.head.extra=null);Z.mode=6;case 6:if(1024&Z.flags&&(qe<(ct=Z.length)&&(ct=qe),ct&&(Z.head&&(Q=Z.head.extra_len-Z.length,Z.head.extra||(Z.head.extra=new Array(Z.head.extra_len)),p.arraySet(Z.head.extra,Ge,Re,ct,Q)),512&Z.flags&&(Z.check=_(Z.check,Ge,ct,Re)),qe-=ct,Re+=ct,Z.length-=ct),Z.length))break e;Z.length=0,Z.mode=7;case 7:if(2048&Z.flags){if(qe===0)break e;for(ct=0;Q=Ge[Re+ct++],Z.head&&Q&&Z.length<65536&&(Z.head.name+=String.fromCharCode(Q)),Q&&ct<qe;);if(512&Z.flags&&(Z.check=_(Z.check,Ge,ct,Re)),qe-=ct,Re+=ct,Q)break e}else Z.head&&(Z.head.name=null);Z.length=0,Z.mode=8;case 8:if(4096&Z.flags){if(qe===0)break e;for(ct=0;Q=Ge[Re+ct++],Z.head&&Q&&Z.length<65536&&(Z.head.comment+=String.fromCharCode(Q)),Q&&ct<qe;);if(512&Z.flags&&(Z.check=_(Z.check,Ge,ct,Re)),qe-=ct,Re+=ct,Q)break e}else Z.head&&(Z.head.comment=null);Z.mode=9;case 9:if(512&Z.flags){for(;be<16;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(fe!==(65535&Z.check)){de.msg="header crc mismatch",Z.mode=30;break}be=fe=0}Z.head&&(Z.head.hcrc=Z.flags>>9&1,Z.head.done=!0),de.adler=Z.check=0,Z.mode=12;break;case 10:for(;be<32;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}de.adler=Z.check=j(fe),be=fe=0,Z.mode=11;case 11:if(Z.havedict===0)return de.next_out=Ce,de.avail_out=Et,de.next_in=Re,de.avail_in=qe,Z.hold=fe,Z.bits=be,2;de.adler=Z.check=1,Z.mode=12;case 12:if(Le===5||Le===6)break e;case 13:if(Z.last){fe>>>=7&be,be-=7&be,Z.mode=27;break}for(;be<3;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}switch(Z.last=1&fe,be-=1,3&(fe>>>=1)){case 0:Z.mode=14;break;case 1:if(Ne(Z),Z.mode=20,Le!==6)break;fe>>>=2,be-=2;break e;case 2:Z.mode=17;break;case 3:de.msg="invalid block type",Z.mode=30}fe>>>=2,be-=2;break;case 14:for(fe>>>=7&be,be-=7&be;be<32;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if((65535&fe)!=(fe>>>16^65535)){de.msg="invalid stored block lengths",Z.mode=30;break}if(Z.length=65535&fe,be=fe=0,Z.mode=15,Le===6)break e;case 15:Z.mode=16;case 16:if(ct=Z.length){if(qe<ct&&(ct=qe),Et<ct&&(ct=Et),ct===0)break e;p.arraySet(Nt,Ge,Re,ct,Ce),qe-=ct,Re+=ct,Et-=ct,Ce+=ct,Z.length-=ct;break}Z.mode=12;break;case 17:for(;be<14;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(Z.nlen=257+(31&fe),fe>>>=5,be-=5,Z.ndist=1+(31&fe),fe>>>=5,be-=5,Z.ncode=4+(15&fe),fe>>>=4,be-=4,286<Z.nlen||30<Z.ndist){de.msg="too many length or distance symbols",Z.mode=30;break}Z.have=0,Z.mode=18;case 18:for(;Z.have<Z.ncode;){for(;be<3;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.lens[Tt[Z.have++]]=7&fe,fe>>>=3,be-=3}for(;Z.have<19;)Z.lens[Tt[Z.have++]]=0;if(Z.lencode=Z.lendyn,Z.lenbits=7,dt={bits:Z.lenbits},pt=w(0,Z.lens,0,19,Z.lencode,0,Z.work,dt),Z.lenbits=dt.bits,pt){de.msg="invalid code lengths set",Z.mode=30;break}Z.have=0,Z.mode=19;case 19:for(;Z.have<Z.nlen+Z.ndist;){for(;nn=(Se=Z.lencode[fe&(1<<Z.lenbits)-1])>>>16&255,In=65535&Se,!((wt=Se>>>24)<=be);){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(In<16)fe>>>=wt,be-=wt,Z.lens[Z.have++]=In;else{if(In===16){for(Ee=wt+2;be<Ee;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(fe>>>=wt,be-=wt,Z.have===0){de.msg="invalid bit length repeat",Z.mode=30;break}Q=Z.lens[Z.have-1],ct=3+(3&fe),fe>>>=2,be-=2}else if(In===17){for(Ee=wt+3;be<Ee;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}be-=wt,Q=0,ct=3+(7&(fe>>>=wt)),fe>>>=3,be-=3}else{for(Ee=wt+7;be<Ee;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}be-=wt,Q=0,ct=11+(127&(fe>>>=wt)),fe>>>=7,be-=7}if(Z.have+ct>Z.nlen+Z.ndist){de.msg="invalid bit length repeat",Z.mode=30;break}for(;ct--;)Z.lens[Z.have++]=Q}}if(Z.mode===30)break;if(Z.lens[256]===0){de.msg="invalid code -- missing end-of-block",Z.mode=30;break}if(Z.lenbits=9,dt={bits:Z.lenbits},pt=w(A,Z.lens,0,Z.nlen,Z.lencode,0,Z.work,dt),Z.lenbits=dt.bits,pt){de.msg="invalid literal/lengths set",Z.mode=30;break}if(Z.distbits=6,Z.distcode=Z.distdyn,dt={bits:Z.distbits},pt=w(D,Z.lens,Z.nlen,Z.ndist,Z.distcode,0,Z.work,dt),Z.distbits=dt.bits,pt){de.msg="invalid distances set",Z.mode=30;break}if(Z.mode=20,Le===6)break e;case 20:Z.mode=21;case 21:if(6<=qe&&258<=Et){de.next_out=Ce,de.avail_out=Et,de.next_in=Re,de.avail_in=qe,Z.hold=fe,Z.bits=be,x(de,at),Ce=de.next_out,Nt=de.output,Et=de.avail_out,Re=de.next_in,Ge=de.input,qe=de.avail_in,fe=Z.hold,be=Z.bits,Z.mode===12&&(Z.back=-1);break}for(Z.back=0;nn=(Se=Z.lencode[fe&(1<<Z.lenbits)-1])>>>16&255,In=65535&Se,!((wt=Se>>>24)<=be);){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(nn&&!(240&nn)){for(Yn=wt,Gn=nn,Xr=In;nn=(Se=Z.lencode[Xr+((fe&(1<<Yn+Gn)-1)>>Yn)])>>>16&255,In=65535&Se,!(Yn+(wt=Se>>>24)<=be);){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}fe>>>=Yn,be-=Yn,Z.back+=Yn}if(fe>>>=wt,be-=wt,Z.back+=wt,Z.length=In,nn===0){Z.mode=26;break}if(32&nn){Z.back=-1,Z.mode=12;break}if(64&nn){de.msg="invalid literal/length code",Z.mode=30;break}Z.extra=15&nn,Z.mode=22;case 22:if(Z.extra){for(Ee=Z.extra;be<Ee;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.length+=fe&(1<<Z.extra)-1,fe>>>=Z.extra,be-=Z.extra,Z.back+=Z.extra}Z.was=Z.length,Z.mode=23;case 23:for(;nn=(Se=Z.distcode[fe&(1<<Z.distbits)-1])>>>16&255,In=65535&Se,!((wt=Se>>>24)<=be);){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(!(240&nn)){for(Yn=wt,Gn=nn,Xr=In;nn=(Se=Z.distcode[Xr+((fe&(1<<Yn+Gn)-1)>>Yn)])>>>16&255,In=65535&Se,!(Yn+(wt=Se>>>24)<=be);){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}fe>>>=Yn,be-=Yn,Z.back+=Yn}if(fe>>>=wt,be-=wt,Z.back+=wt,64&nn){de.msg="invalid distance code",Z.mode=30;break}Z.offset=In,Z.extra=15&nn,Z.mode=24;case 24:if(Z.extra){for(Ee=Z.extra;be<Ee;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}Z.offset+=fe&(1<<Z.extra)-1,fe>>>=Z.extra,be-=Z.extra,Z.back+=Z.extra}if(Z.offset>Z.dmax){de.msg="invalid distance too far back",Z.mode=30;break}Z.mode=25;case 25:if(Et===0)break e;if(ct=at-Et,Z.offset>ct){if((ct=Z.offset-ct)>Z.whave&&Z.sane){de.msg="invalid distance too far back",Z.mode=30;break}Ke=ct>Z.wnext?(ct-=Z.wnext,Z.wsize-ct):Z.wnext-ct,ct>Z.length&&(ct=Z.length),cn=Z.window}else cn=Nt,Ke=Ce-Z.offset,ct=Z.length;for(Et<ct&&(ct=Et),Et-=ct,Z.length-=ct;Nt[Ce++]=cn[Ke++],--ct;);Z.length===0&&(Z.mode=21);break;case 26:if(Et===0)break e;Nt[Ce++]=Z.length,Et--,Z.mode=21;break;case 27:if(Z.wrap){for(;be<32;){if(qe===0)break e;qe--,fe|=Ge[Re++]<<be,be+=8}if(at-=Et,de.total_out+=at,Z.total+=at,at&&(de.adler=Z.check=Z.flags?_(Z.check,Nt,at,Ce-at):v(Z.check,Nt,at,Ce-at)),at=Et,(Z.flags?fe:j(fe))!==Z.check){de.msg="incorrect data check",Z.mode=30;break}be=fe=0}Z.mode=28;case 28:if(Z.wrap&&Z.flags){for(;be<32;){if(qe===0)break e;qe--,fe+=Ge[Re++]<<be,be+=8}if(fe!==(4294967295&Z.total)){de.msg="incorrect length check",Z.mode=30;break}be=fe=0}Z.mode=29;case 29:pt=1;break e;case 30:pt=-3;break e;case 31:return-4;default:return C}return de.next_out=Ce,de.avail_out=Et,de.next_in=Re,de.avail_in=qe,Z.hold=fe,Z.bits=be,(Z.wsize||at!==de.avail_out&&Z.mode<30&&(Z.mode<27||Le!==4))&&et(de,de.output,de.next_out,at-de.avail_out)?(Z.mode=31,-4):(tt-=de.avail_in,at-=de.avail_out,de.total_in+=tt,de.total_out+=at,Z.total+=at,Z.wrap&&at&&(de.adler=Z.check=Z.flags?_(Z.check,Nt,at,de.next_out-at):v(Z.check,Nt,at,de.next_out-at)),de.data_type=Z.bits+(Z.last?64:0)+(Z.mode===12?128:0)+(Z.mode===20||Z.mode===15?256:0),(tt==0&&at===0||Le===4)&&pt===R&&(pt=-5),pt)},f.inflateEnd=function(de){if(!de||!de.state)return C;var Le=de.state;return Le.window&&(Le.window=null),de.state=null,R},f.inflateGetHeader=function(de,Le){var Z;return de&&de.state&&2&(Z=de.state).wrap?((Z.head=Le).done=!1,R):C},f.inflateSetDictionary=function(de,Le){var Z,Ge=Le.length;return de&&de.state?(Z=de.state).wrap!==0&&Z.mode!==11?C:Z.mode===11&&v(1,Le,Ge,0)!==Z.check?-3:et(de,Le,Ge,Ge)?(Z.mode=31,-4):(Z.havedict=1,R):C},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,l,f){var p=a("../utils/common"),v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(A,D,R,C,F,N,B,j){var W,$,re,ne,ce,Te,Ie,ye,Ne,et=j.bits,de=0,Le=0,Z=0,Ge=0,Nt=0,Re=0,Ce=0,qe=0,Et=0,fe=0,be=null,tt=0,at=new p.Buf16(16),ct=new p.Buf16(16),Ke=null,cn=0;for(de=0;de<=15;de++)at[de]=0;for(Le=0;Le<C;Le++)at[D[R+Le]]++;for(Nt=et,Ge=15;1<=Ge&&at[Ge]===0;Ge--);if(Ge<Nt&&(Nt=Ge),Ge===0)return F[N++]=20971520,F[N++]=20971520,j.bits=1,0;for(Z=1;Z<Ge&&at[Z]===0;Z++);for(Nt<Z&&(Nt=Z),de=qe=1;de<=15;de++)if(qe<<=1,(qe-=at[de])<0)return-1;if(0<qe&&(A===0||Ge!==1))return-1;for(ct[1]=0,de=1;de<15;de++)ct[de+1]=ct[de]+at[de];for(Le=0;Le<C;Le++)D[R+Le]!==0&&(B[ct[D[R+Le]]++]=Le);if(Te=A===0?(be=Ke=B,19):A===1?(be=v,tt-=257,Ke=_,cn-=257,256):(be=x,Ke=w,-1),de=Z,ce=N,Ce=Le=fe=0,re=-1,ne=(Et=1<<(Re=Nt))-1,A===1&&852<Et||A===2&&592<Et)return 1;for(;;){for(Ie=de-Ce,Ne=B[Le]<Te?(ye=0,B[Le]):B[Le]>Te?(ye=Ke[cn+B[Le]],be[tt+B[Le]]):(ye=96,0),W=1<<de-Ce,Z=$=1<<Re;F[ce+(fe>>Ce)+($-=W)]=Ie<<24|ye<<16|Ne|0,$!==0;);for(W=1<<de-1;fe&W;)W>>=1;if(W!==0?(fe&=W-1,fe+=W):fe=0,Le++,--at[de]==0){if(de===Ge)break;de=D[R+B[Le]]}if(Nt<de&&(fe&ne)!==re){for(Ce===0&&(Ce=Nt),ce+=Z,qe=1<<(Re=de-Ce);Re+Ce<Ge&&!((qe-=at[Re+Ce])<=0);)Re++,qe<<=1;if(Et+=1<<Re,A===1&&852<Et||A===2&&592<Et)return 1;F[re=fe&ne]=Nt<<24|Re<<16|ce-N|0}}return fe!==0&&(F[ce+fe]=de-Ce<<24|64<<16|0),j.bits=Nt,0}},{"../utils/common":41}],51:[function(a,l,f){l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,l,f){var p=a("../utils/common"),v=0,_=1;function x(Se){for(var Ye=Se.length;0<=--Ye;)Se[Ye]=0}var w=0,A=29,D=256,R=D+1+A,C=30,F=19,N=2*R+1,B=15,j=16,W=7,$=256,re=16,ne=17,ce=18,Te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(R+2));x(et);var de=new Array(2*C);x(de);var Le=new Array(512);x(Le);var Z=new Array(256);x(Z);var Ge=new Array(A);x(Ge);var Nt,Re,Ce,qe=new Array(C);function Et(Se,Ye,Tt,It,nt){this.static_tree=Se,this.extra_bits=Ye,this.extra_base=Tt,this.elems=It,this.max_length=nt,this.has_stree=Se&&Se.length}function fe(Se,Ye){this.dyn_tree=Se,this.max_code=0,this.stat_desc=Ye}function be(Se){return Se<256?Le[Se]:Le[256+(Se>>>7)]}function tt(Se,Ye){Se.pending_buf[Se.pending++]=255&Ye,Se.pending_buf[Se.pending++]=Ye>>>8&255}function at(Se,Ye,Tt){Se.bi_valid>j-Tt?(Se.bi_buf|=Ye<<Se.bi_valid&65535,tt(Se,Se.bi_buf),Se.bi_buf=Ye>>j-Se.bi_valid,Se.bi_valid+=Tt-j):(Se.bi_buf|=Ye<<Se.bi_valid&65535,Se.bi_valid+=Tt)}function ct(Se,Ye,Tt){at(Se,Tt[2*Ye],Tt[2*Ye+1])}function Ke(Se,Ye){for(var Tt=0;Tt|=1&Se,Se>>>=1,Tt<<=1,0<--Ye;);return Tt>>>1}function cn(Se,Ye,Tt){var It,nt,Lt=new Array(B+1),kt=0;for(It=1;It<=B;It++)Lt[It]=kt=kt+Tt[It-1]<<1;for(nt=0;nt<=Ye;nt++){var Rt=Se[2*nt+1];Rt!==0&&(Se[2*nt]=Ke(Lt[Rt]++,Rt))}}function wt(Se){var Ye;for(Ye=0;Ye<R;Ye++)Se.dyn_ltree[2*Ye]=0;for(Ye=0;Ye<C;Ye++)Se.dyn_dtree[2*Ye]=0;for(Ye=0;Ye<F;Ye++)Se.bl_tree[2*Ye]=0;Se.dyn_ltree[2*$]=1,Se.opt_len=Se.static_len=0,Se.last_lit=Se.matches=0}function nn(Se){8<Se.bi_valid?tt(Se,Se.bi_buf):0<Se.bi_valid&&(Se.pending_buf[Se.pending++]=Se.bi_buf),Se.bi_buf=0,Se.bi_valid=0}function In(Se,Ye,Tt,It){var nt=2*Ye,Lt=2*Tt;return Se[nt]<Se[Lt]||Se[nt]===Se[Lt]&&It[Ye]<=It[Tt]}function Yn(Se,Ye,Tt){for(var It=Se.heap[Tt],nt=Tt<<1;nt<=Se.heap_len&&(nt<Se.heap_len&&In(Ye,Se.heap[nt+1],Se.heap[nt],Se.depth)&&nt++,!In(Ye,It,Se.heap[nt],Se.depth));)Se.heap[Tt]=Se.heap[nt],Tt=nt,nt<<=1;Se.heap[Tt]=It}function Gn(Se,Ye,Tt){var It,nt,Lt,kt,Rt=0;if(Se.last_lit!==0)for(;It=Se.pending_buf[Se.d_buf+2*Rt]<<8|Se.pending_buf[Se.d_buf+2*Rt+1],nt=Se.pending_buf[Se.l_buf+Rt],Rt++,It===0?ct(Se,nt,Ye):(ct(Se,(Lt=Z[nt])+D+1,Ye),(kt=Te[Lt])!==0&&at(Se,nt-=Ge[Lt],kt),ct(Se,Lt=be(--It),Tt),(kt=Ie[Lt])!==0&&at(Se,It-=qe[Lt],kt)),Rt<Se.last_lit;);ct(Se,$,Ye)}function Xr(Se,Ye){var Tt,It,nt,Lt=Ye.dyn_tree,kt=Ye.stat_desc.static_tree,Rt=Ye.stat_desc.has_stree,Vn=Ye.stat_desc.elems,Wr=-1;for(Se.heap_len=0,Se.heap_max=N,Tt=0;Tt<Vn;Tt++)Lt[2*Tt]!==0?(Se.heap[++Se.heap_len]=Wr=Tt,Se.depth[Tt]=0):Lt[2*Tt+1]=0;for(;Se.heap_len<2;)Lt[2*(nt=Se.heap[++Se.heap_len]=Wr<2?++Wr:0)]=1,Se.depth[nt]=0,Se.opt_len--,Rt&&(Se.static_len-=kt[2*nt+1]);for(Ye.max_code=Wr,Tt=Se.heap_len>>1;1<=Tt;Tt--)Yn(Se,Lt,Tt);for(nt=Vn;Tt=Se.heap[1],Se.heap[1]=Se.heap[Se.heap_len--],Yn(Se,Lt,1),It=Se.heap[1],Se.heap[--Se.heap_max]=Tt,Se.heap[--Se.heap_max]=It,Lt[2*nt]=Lt[2*Tt]+Lt[2*It],Se.depth[nt]=(Se.depth[Tt]>=Se.depth[It]?Se.depth[Tt]:Se.depth[It])+1,Lt[2*Tt+1]=Lt[2*It+1]=nt,Se.heap[1]=nt++,Yn(Se,Lt,1),2<=Se.heap_len;);Se.heap[--Se.heap_max]=Se.heap[1],(function(cr,lo){var ph,xo,uu,Hi,Im,r_,cu=lo.dyn_tree,i_=lo.max_code,tS=lo.stat_desc.static_tree,nS=lo.stat_desc.has_stree,rS=lo.stat_desc.extra_bits,a_=lo.stat_desc.extra_base,yl=lo.stat_desc.max_length,du=0;for(Hi=0;Hi<=B;Hi++)cr.bl_count[Hi]=0;for(cu[2*cr.heap[cr.heap_max]+1]=0,ph=cr.heap_max+1;ph<N;ph++)yl<(Hi=cu[2*cu[2*(xo=cr.heap[ph])+1]+1]+1)&&(Hi=yl,du++),cu[2*xo+1]=Hi,i_<xo||(cr.bl_count[Hi]++,Im=0,a_<=xo&&(Im=rS[xo-a_]),r_=cu[2*xo],cr.opt_len+=r_*(Hi+Im),nS&&(cr.static_len+=r_*(tS[2*xo+1]+Im)));if(du!==0){do{for(Hi=yl-1;cr.bl_count[Hi]===0;)Hi--;cr.bl_count[Hi]--,cr.bl_count[Hi+1]+=2,cr.bl_count[yl]--,du-=2}while(0<du);for(Hi=yl;Hi!==0;Hi--)for(xo=cr.bl_count[Hi];xo!==0;)i_<(uu=cr.heap[--ph])||(cu[2*uu+1]!==Hi&&(cr.opt_len+=(Hi-cu[2*uu+1])*cu[2*uu],cu[2*uu+1]=Hi),xo--)}})(Se,Ye),cn(Lt,Wr,Se.bl_count)}function Q(Se,Ye,Tt){var It,nt,Lt=-1,kt=Ye[1],Rt=0,Vn=7,Wr=4;for(kt===0&&(Vn=138,Wr=3),Ye[2*(Tt+1)+1]=65535,It=0;It<=Tt;It++)nt=kt,kt=Ye[2*(It+1)+1],++Rt<Vn&&nt===kt||(Rt<Wr?Se.bl_tree[2*nt]+=Rt:nt!==0?(nt!==Lt&&Se.bl_tree[2*nt]++,Se.bl_tree[2*re]++):Rt<=10?Se.bl_tree[2*ne]++:Se.bl_tree[2*ce]++,Lt=nt,Wr=(Rt=0)===kt?(Vn=138,3):nt===kt?(Vn=6,3):(Vn=7,4))}function pt(Se,Ye,Tt){var It,nt,Lt=-1,kt=Ye[1],Rt=0,Vn=7,Wr=4;for(kt===0&&(Vn=138,Wr=3),It=0;It<=Tt;It++)if(nt=kt,kt=Ye[2*(It+1)+1],!(++Rt<Vn&&nt===kt)){if(Rt<Wr)for(;ct(Se,nt,Se.bl_tree),--Rt!=0;);else nt!==0?(nt!==Lt&&(ct(Se,nt,Se.bl_tree),Rt--),ct(Se,re,Se.bl_tree),at(Se,Rt-3,2)):Rt<=10?(ct(Se,ne,Se.bl_tree),at(Se,Rt-3,3)):(ct(Se,ce,Se.bl_tree),at(Se,Rt-11,7));Lt=nt,Wr=(Rt=0)===kt?(Vn=138,3):nt===kt?(Vn=6,3):(Vn=7,4)}}x(qe);var dt=!1;function Ee(Se,Ye,Tt,It){at(Se,(w<<1)+(It?1:0),3),(function(nt,Lt,kt,Rt){nn(nt),tt(nt,kt),tt(nt,~kt),p.arraySet(nt.pending_buf,nt.window,Lt,kt,nt.pending),nt.pending+=kt})(Se,Ye,Tt)}f._tr_init=function(Se){dt||((function(){var Ye,Tt,It,nt,Lt,kt=new Array(B+1);for(nt=It=0;nt<A-1;nt++)for(Ge[nt]=It,Ye=0;Ye<1<<Te[nt];Ye++)Z[It++]=nt;for(Z[It-1]=nt,nt=Lt=0;nt<16;nt++)for(qe[nt]=Lt,Ye=0;Ye<1<<Ie[nt];Ye++)Le[Lt++]=nt;for(Lt>>=7;nt<C;nt++)for(qe[nt]=Lt<<7,Ye=0;Ye<1<<Ie[nt]-7;Ye++)Le[256+Lt++]=nt;for(Tt=0;Tt<=B;Tt++)kt[Tt]=0;for(Ye=0;Ye<=143;)et[2*Ye+1]=8,Ye++,kt[8]++;for(;Ye<=255;)et[2*Ye+1]=9,Ye++,kt[9]++;for(;Ye<=279;)et[2*Ye+1]=7,Ye++,kt[7]++;for(;Ye<=287;)et[2*Ye+1]=8,Ye++,kt[8]++;for(cn(et,R+1,kt),Ye=0;Ye<C;Ye++)de[2*Ye+1]=5,de[2*Ye]=Ke(Ye,5);Nt=new Et(et,Te,D+1,R,B),Re=new Et(de,Ie,0,C,B),Ce=new Et(new Array(0),ye,0,F,W)})(),dt=!0),Se.l_desc=new fe(Se.dyn_ltree,Nt),Se.d_desc=new fe(Se.dyn_dtree,Re),Se.bl_desc=new fe(Se.bl_tree,Ce),Se.bi_buf=0,Se.bi_valid=0,wt(Se)},f._tr_stored_block=Ee,f._tr_flush_block=function(Se,Ye,Tt,It){var nt,Lt,kt=0;0<Se.level?(Se.strm.data_type===2&&(Se.strm.data_type=(function(Rt){var Vn,Wr=4093624447;for(Vn=0;Vn<=31;Vn++,Wr>>>=1)if(1&Wr&&Rt.dyn_ltree[2*Vn]!==0)return v;if(Rt.dyn_ltree[18]!==0||Rt.dyn_ltree[20]!==0||Rt.dyn_ltree[26]!==0)return _;for(Vn=32;Vn<D;Vn++)if(Rt.dyn_ltree[2*Vn]!==0)return _;return v})(Se)),Xr(Se,Se.l_desc),Xr(Se,Se.d_desc),kt=(function(Rt){var Vn;for(Q(Rt,Rt.dyn_ltree,Rt.l_desc.max_code),Q(Rt,Rt.dyn_dtree,Rt.d_desc.max_code),Xr(Rt,Rt.bl_desc),Vn=F-1;3<=Vn&&Rt.bl_tree[2*Ne[Vn]+1]===0;Vn--);return Rt.opt_len+=3*(Vn+1)+5+5+4,Vn})(Se),nt=Se.opt_len+3+7>>>3,(Lt=Se.static_len+3+7>>>3)<=nt&&(nt=Lt)):nt=Lt=Tt+5,Tt+4<=nt&&Ye!==-1?Ee(Se,Ye,Tt,It):Se.strategy===4||Lt===nt?(at(Se,2+(It?1:0),3),Gn(Se,et,de)):(at(Se,4+(It?1:0),3),(function(Rt,Vn,Wr,cr){var lo;for(at(Rt,Vn-257,5),at(Rt,Wr-1,5),at(Rt,cr-4,4),lo=0;lo<cr;lo++)at(Rt,Rt.bl_tree[2*Ne[lo]+1],3);pt(Rt,Rt.dyn_ltree,Vn-1),pt(Rt,Rt.dyn_dtree,Wr-1)})(Se,Se.l_desc.max_code+1,Se.d_desc.max_code+1,kt+1),Gn(Se,Se.dyn_ltree,Se.dyn_dtree)),wt(Se),It&&nn(Se)},f._tr_tally=function(Se,Ye,Tt){return Se.pending_buf[Se.d_buf+2*Se.last_lit]=Ye>>>8&255,Se.pending_buf[Se.d_buf+2*Se.last_lit+1]=255&Ye,Se.pending_buf[Se.l_buf+Se.last_lit]=255&Tt,Se.last_lit++,Ye===0?Se.dyn_ltree[2*Tt]++:(Se.matches++,Ye--,Se.dyn_ltree[2*(Z[Tt]+D+1)]++,Se.dyn_dtree[2*be(Ye)]++),Se.last_lit===Se.lit_bufsize-1},f._tr_align=function(Se){at(Se,2,3),ct(Se,$,et),(function(Ye){Ye.bi_valid===16?(tt(Ye,Ye.bi_buf),Ye.bi_buf=0,Ye.bi_valid=0):8<=Ye.bi_valid&&(Ye.pending_buf[Ye.pending++]=255&Ye.bi_buf,Ye.bi_buf>>=8,Ye.bi_valid-=8)})(Se)}},{"../utils/common":41}],53:[function(a,l,f){l.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,l,f){(function(p){(function(v,_){if(!v.setImmediate){var x,w,A,D,R=1,C={},F=!1,N=v.document,B=Object.getPrototypeOf&&Object.getPrototypeOf(v);B=B&&B.setTimeout?B:v,x={}.toString.call(v.process)==="[object process]"?function(re){process.nextTick(function(){W(re)})}:(function(){if(v.postMessage&&!v.importScripts){var re=!0,ne=v.onmessage;return v.onmessage=function(){re=!1},v.postMessage("","*"),v.onmessage=ne,re}})()?(D="setImmediate$"+Math.random()+"$",v.addEventListener?v.addEventListener("message",$,!1):v.attachEvent("onmessage",$),function(re){v.postMessage(D+re,"*")}):v.MessageChannel?((A=new MessageChannel).port1.onmessage=function(re){W(re.data)},function(re){A.port2.postMessage(re)}):N&&"onreadystatechange"in N.createElement("script")?(w=N.documentElement,function(re){var ne=N.createElement("script");ne.onreadystatechange=function(){W(re),ne.onreadystatechange=null,w.removeChild(ne),ne=null},w.appendChild(ne)}):function(re){setTimeout(W,0,re)},B.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),ce=0;ce<ne.length;ce++)ne[ce]=arguments[ce+1];var Te={callback:re,args:ne};return C[R]=Te,x(R),R++},B.clearImmediate=j}function j(re){delete C[re]}function W(re){if(F)setTimeout(W,0,re);else{var ne=C[re];if(ne){F=!0;try{(function(ce){var Te=ce.callback,Ie=ce.args;switch(Ie.length){case 0:Te();break;case 1:Te(Ie[0]);break;case 2:Te(Ie[0],Ie[1]);break;case 3:Te(Ie[0],Ie[1],Ie[2]);break;default:Te.apply(_,Ie)}})(ne)}finally{j(re),F=!1}}}}function $(re){re.source===v&&typeof re.data=="string"&&re.data.indexOf(D)===0&&W(+re.data.slice(D.length))}})(typeof self>"u"?p===void 0?this:p:self)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),fL,tA,xq,hL,Sq,wq,p1,Eq,pL,Tq,nA,m1,g1,Zf,Mq,Pq,Cq,Ov,fs,Aq,kq,mL,rA,Gme=P(()=>{fL=J(Fe(),1),tA=J(Fe(),1),xq=t=>typeof t=="function",hL=(t,i)=>xq(t)?t(i):t,Sq=(()=>{let t=0;return()=>(++t).toString()})(),wq=20,p1=new Map,Eq=1e3,pL=t=>{if(p1.has(t))return;let i=setTimeout(()=>{p1.delete(t),Zf({type:4,toastId:t})},Eq);p1.set(t,i)},Tq=t=>{let i=p1.get(t);i&&clearTimeout(i)},nA=(t,i)=>{switch(i.type){case 0:return K(I({},t),{toasts:[i.toast,...t.toasts].slice(0,wq)});case 1:return i.toast.id&&Tq(i.toast.id),K(I({},t),{toasts:t.toasts.map(p=>p.id===i.toast.id?I(I({},p),i.toast):p)});case 2:let{toast:a}=i;return t.toasts.find(p=>p.id===a.id)?nA(t,{type:1,toast:a}):nA(t,{type:0,toast:a});case 3:let{toastId:l}=i;return l?pL(l):t.toasts.forEach(p=>{pL(p.id)}),K(I({},t),{toasts:t.toasts.map(p=>p.id===l||l===void 0?K(I({},p),{visible:!1}):p)});case 4:return i.toastId===void 0?K(I({},t),{toasts:[]}):K(I({},t),{toasts:t.toasts.filter(p=>p.id!==i.toastId)});case 5:return K(I({},t),{pausedAt:i.time});case 6:let f=i.time-(t.pausedAt||0);return K(I({},t),{pausedAt:void 0,toasts:t.toasts.map(p=>K(I({},p),{pauseDuration:p.pauseDuration+f}))})}},m1=[],g1={toasts:[],pausedAt:void 0},Zf=t=>{g1=nA(g1,t),m1.forEach(i=>{i(g1)})},Mq={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Pq=(t={})=>{let[i,a]=(0,fL.useState)(g1);(0,fL.useEffect)(()=>(m1.push(a),()=>{let f=m1.indexOf(a);f>-1&&m1.splice(f,1)}),[i]);let l=i.toasts.map(f=>{var p,v;return K(I(I(I({},t),t[f.type]),f),{duration:f.duration||((p=t[f.type])==null?void 0:p.duration)||t?.duration||Mq[f.type],style:I(I(I({},t.style),(v=t[f.type])==null?void 0:v.style),f.style)})});return K(I({},i),{toasts:l})},Cq=(t,i="blank",a)=>K(I({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0},a),{id:a?.id||Sq()}),Ov=t=>(i,a)=>{let l=Cq(i,t,a);return Zf({type:2,toast:l}),l.id},fs=(t,i)=>Ov("blank")(t,i),fs.error=Ov("error"),fs.success=Ov("success"),fs.loading=Ov("loading"),fs.custom=Ov("custom"),fs.dismiss=t=>{Zf({type:3,toastId:t})},fs.remove=t=>Zf({type:4,toastId:t}),fs.promise=(t,i,a)=>{let l=fs.loading(i.loading,I(I({},a),a?.loading));return t.then(f=>(fs.success(hL(i.success,f),I(I({id:l},a),a?.success)),f)).catch(f=>{fs.error(hL(i.error,f),I(I({id:l},a),a?.error))}),t},Aq=(t,i)=>{Zf({type:1,toast:{id:t,height:i}})},kq=()=>{Zf({type:5,time:Date.now()})},mL=t=>{let{toasts:i,pausedAt:a}=Pq(t);(0,tA.useEffect)(()=>{if(a)return;let p=Date.now(),v=i.map(_=>{if(_.duration===1/0)return;let x=(_.duration||0)+_.pauseDuration-(p-_.createdAt);if(x<0){_.visible&&fs.dismiss(_.id);return}return setTimeout(()=>fs.dismiss(_.id),x)});return()=>{v.forEach(_=>_&&clearTimeout(_))}},[i,a]);let l=(0,tA.useCallback)(()=>{a&&Zf({type:6,time:Date.now()})},[a]),f=(0,tA.useCallback)((p,v)=>{let{reverseOrder:_=!1,gutter:x=8,defaultPosition:w}=v||{},A=i.filter(C=>(C.position||w)===(p.position||w)&&C.height),D=A.findIndex(C=>C.id===p.id),R=A.filter((C,F)=>F<D&&C.visible).length;return A.filter(C=>C.visible).slice(..._?[R+1]:[0,R]).reduce((C,F)=>C+(F.height||0)+x,0)},[i]);return{toasts:i,handlers:{updateHeight:Aq,startPause:kq,endPause:l,calculateOffset:f}}},rA=fs});function Iq(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function Wme(t){em=t}function ja(t,i){if(i){if(Bq.test(t))return t.replace(zq,gL)}else if(jq.test(t))return t.replace(Vq,gL);return t}function Rq(t){return t.replace(Gq,(i,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}function mi(t,i){t=typeof t=="string"?t:t.source,i=i||"";let a={replace:(l,f)=>(f=f.source||f,f=f.replace(Wq,"$1"),t=t.replace(l,f),a),getRegex:()=>new RegExp(t,i)};return a}function Dq(t,i,a){if(t){let l;try{l=decodeURIComponent(Rq(a)).replace(qq,"").toLowerCase()}catch{return null}if(l.indexOf("javascript:")===0||l.indexOf("vbscript:")===0||l.indexOf("data:")===0)return null}i&&!Xq.test(a)&&(a=qme(i,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}function qme(t,i){v1[" "+t]||(Kq.test(t)?v1[" "+t]=t+"/":v1[" "+t]=iA(t,"/",!0)),t=v1[" "+t];let a=t.indexOf(":")===-1;return i.substring(0,2)==="//"?a?i:t.replace(Yq,"$1")+i:i.charAt(0)==="/"?a?i:t.replace($q,"$1")+i:t+i}function tu(t){let i=1,a,l;for(;i<arguments.length;i++){a=arguments[i];for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t}function Oq(t,i){let a=t.replace(/\|/g,(p,v,_)=>{let x=!1,w=v;for(;--w>=0&&_[w]==="\\";)x=!x;return x?"|":" |"}),l=a.split(/ \|/),f=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),l.length>i)l.splice(i);else for(;l.length<i;)l.push("");for(;f<l.length;f++)l[f]=l[f].trim().replace(/\\\|/g,"|");return l}function iA(t,i,a){let l=t.length;if(l===0)return"";let f=0;for(;f<l;){let p=t.charAt(l-f-1);if(p===i&&!a)f++;else if(p!==i&&a)f++;else break}return t.slice(0,l-f)}function Xme(t,i){if(t.indexOf(i[1])===-1)return-1;let a=t.length,l=0,f=0;for(;f<a;f++)if(t[f]==="\\")f++;else if(t[f]===i[0])l++;else if(t[f]===i[1]&&(l--,l<0))return f;return-1}function Nq(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Lq(t,i){if(i<1)return"";let a="";for(;i>1;)i&1&&(a+=t),i>>=1,t+=t;return a+t}function Fq(t,i,a,l){let f=i.href,p=i.title?ja(i.title):null,v=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){l.state.inLink=!0;let _={type:"link",raw:a,href:f,title:p,text:v,tokens:l.inlineTokens(v)};return l.state.inLink=!1,_}return{type:"image",raw:a,href:f,title:p,text:ja(v)}}function Kme(t,i){let a=t.match(/^(\s+)(?:```)/);if(a===null)return i;let l=a[1];return i.split(`
`).map(f=>{let p=f.match(/^\s+/);if(p===null)return f;let[v]=p;return v.length>=l.length?f.slice(l.length):f}).join(`
`)}function Yme(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Uq(t){let i="",a,l,f=t.length;for(a=0;a<f;a++)l=t.charCodeAt(a),Math.random()>.5&&(l="x"+l.toString(16)),i+="&#"+l+";";return i}function ir(t,i,a){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof i=="function"&&(a=i,i=null),i=tu({},ir.defaults,i||{}),Nq(i),a){let f=i.highlight,p;try{p=tm.lex(t,i)}catch(x){return a(x)}let v=function(x){let w;if(!x)try{i.walkTokens&&ir.walkTokens(p,i.walkTokens),w=Jf.parse(p,i)}catch(A){x=A}return i.highlight=f,x?a(x):a(null,w)};if(!f||f.length<3||(delete i.highlight,!p.length))return v();let _=0;ir.walkTokens(p,function(x){x.type==="code"&&(_++,setTimeout(()=>{f(x.text,x.lang,function(w,A){if(w)return v(w);A!=null&&A!==x.text&&(x.text=A,x.escaped=!0),_--,_===0&&v()})},0))}),_===0&&v();return}function l(f){if(f.message+=`
Please report this to https://github.com/markedjs/marked.`,i.silent)return"<p>An error occurred:</p><pre>"+ja(f.message+"",!0)+"</pre>";throw f}try{let f=tm.lex(t,i);if(i.walkTokens){if(i.async)return Promise.all(ir.walkTokens(f,i.walkTokens)).then(()=>Jf.parse(f,i)).catch(l);ir.walkTokens(f,i.walkTokens)}return Jf.parse(f,i)}catch(f){l(f)}}var em,Bq,zq,jq,Vq,Hq,gL,Gq,Wq,qq,Xq,v1,Kq,Yq,$q,_1,aA,Kn,xn,tm,oA,vL,_L,Jf,$me=P(()=>{em=Iq(),Bq=/[&<>"']/,zq=/[&<>"']/g,jq=/[<>"']|&(?!#?\w+;)/,Vq=/[<>"']|&(?!#?\w+;)/g,Hq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gL=t=>Hq[t],Gq=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,Wq=/(^|[^\[])\^/g,qq=/[^\w:]/g,Xq=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,v1={},Kq=/^[^:]+:\/*[^/]*$/,Yq=/^([^:]+:)[\s\S]*$/,$q=/^([^:]+:\/*[^/]*)[\s\S]*$/,_1={exec:function(){}},aA=class{constructor(t){this.options=t||em}space(t){let i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(t){let i=this.rules.block.code.exec(t);if(i){let a=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?a:iA(a,`
`)}}}fences(t){let i=this.rules.block.fences.exec(t);if(i){let a=i[0],l=Kme(a,i[3]||"");return{type:"code",raw:a,lang:i[2]?i[2].trim():i[2],text:l}}}heading(t){let i=this.rules.block.heading.exec(t);if(i){let a=i[2].trim();if(/#$/.test(a)){let l=iA(a,"#");(this.options.pedantic||!l||/ $/.test(l))&&(a=l.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(t){let i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:i[0]}}blockquote(t){let i=this.rules.block.blockquote.exec(t);if(i){let a=i[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:i[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(t){let i=this.rules.block.list.exec(t);if(i){let a,l,f,p,v,_,x,w,A,D,R,C,F=i[1].trim(),N=F.length>1,B={type:"list",raw:"",ordered:N,start:N?+F.slice(0,-1):"",loose:!1,items:[]};F=N?"\\d{1,9}\\".concat(F.slice(-1)):"\\".concat(F),this.options.pedantic&&(F=N?F:"[*+-]");let j=new RegExp("^( {0,3}".concat(F,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;t&&(C=!1,!(!(i=j.exec(t))||this.rules.block.hr.test(t)));){if(a=i[0],t=t.substring(a.length),w=i[2].split(`
`,1)[0],A=t.split(`
`,1)[0],this.options.pedantic?(p=2,R=w.trimLeft()):(p=i[2].search(/[^ ]/),p=p>4?1:p,R=w.slice(p),p+=i[1].length),_=!1,!w&&/^ *$/.test(A)&&(a+=A+`
`,t=t.substring(A.length+1),C=!0),!C){let $=new RegExp("^ {0,".concat(Math.min(3,p-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,p-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,p-1),"}(?:```|~~~)")),ce=new RegExp("^ {0,".concat(Math.min(3,p-1),"}#"));for(;t&&(D=t.split(`
`,1)[0],w=D,this.options.pedantic&&(w=w.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(w)||ce.test(w)||$.test(w)||re.test(t)));){if(w.search(/[^ ]/)>=p||!w.trim())R+=`
`+w.slice(p);else if(!_)R+=`
`+w;else break;!_&&!w.trim()&&(_=!0),a+=D+`
`,t=t.substring(D.length+1)}}B.loose||(x?B.loose=!0:/\n *\n *$/.test(a)&&(x=!0)),this.options.gfm&&(l=/^\[[ xX]\] /.exec(R),l&&(f=l[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),B.items.push({type:"list_item",raw:a,task:!!l,checked:f,loose:!1,text:R}),B.raw+=a}B.items[B.items.length-1].raw=a.trimRight(),B.items[B.items.length-1].text=R.trimRight(),B.raw=B.raw.trimRight();let W=B.items.length;for(v=0;v<W;v++){this.lexer.state.top=!1,B.items[v].tokens=this.lexer.blockTokens(B.items[v].text,[]);let $=B.items[v].tokens.filter(ne=>ne.type==="space"),re=$.every(ne=>{let ce=ne.raw.split(""),Te=0;for(let Ie of ce)if(Ie===`
`&&(Te+=1),Te>1)return!0;return!1});!B.loose&&$.length&&re&&(B.loose=!0,B.items[v].loose=!0)}return B}}html(t){let i=this.rules.block.html.exec(t);if(i){let a={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};if(this.options.sanitize){let l=this.options.sanitizer?this.options.sanitizer(i[0]):ja(i[0]);a.type="paragraph",a.text=l,a.tokens=this.lexer.inline(l)}return a}}def(t){let i=this.rules.block.def.exec(t);if(i)return i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),{type:"def",tag:i[1].toLowerCase().replace(/\s+/g," "),raw:i[0],href:i[2],title:i[3]}}table(t){let i=this.rules.block.table.exec(t);if(i){let a={type:"table",header:Oq(i[1]).map(l=>({text:l})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=i[0];let l=a.align.length,f,p,v,_;for(f=0;f<l;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(l=a.rows.length,f=0;f<l;f++)a.rows[f]=Oq(a.rows[f],a.header.length).map(x=>({text:x}));for(l=a.header.length,p=0;p<l;p++)a.header[p].tokens=this.lexer.inline(a.header[p].text);for(l=a.rows.length,p=0;p<l;p++)for(_=a.rows[p],v=0;v<_.length;v++)_[v].tokens=this.lexer.inline(_[v].text);return a}}}lheading(t){let i=this.rules.block.lheading.exec(t);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(t){let i=this.rules.block.paragraph.exec(t);if(i){let a=i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:a,tokens:this.lexer.inline(a)}}}text(t){let i=this.rules.block.text.exec(t);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(t){let i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:ja(i[1])}}tag(t){let i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):ja(i[0]):i[0]}}link(t){let i=this.rules.inline.link.exec(t);if(i){let a=i[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let p=iA(a.slice(0,-1),"\\");if((a.length-p.length)%2===0)return}else{let p=Xme(i[2],"()");if(p>-1){let v=(i[0].indexOf("!")===0?5:4)+i[1].length+p;i[2]=i[2].substring(0,p),i[0]=i[0].substring(0,v).trim(),i[3]=""}}let l=i[2],f="";if(this.options.pedantic){let p=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);p&&(l=p[1],f=p[3])}else f=i[3]?i[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(this.options.pedantic&&!/>$/.test(a)?l=l.slice(1):l=l.slice(1,-1)),Fq(i,{href:l&&l.replace(this.rules.inline._escapes,"$1"),title:f&&f.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}}reflink(t,i){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let l=(a[2]||a[1]).replace(/\s+/g," ");if(l=i[l.toLowerCase()],!l||!l.href){let f=a[0].charAt(0);return{type:"text",raw:f,text:f}}return Fq(a,l,a[0],this.lexer)}}emStrong(t,i,a=""){let l=this.rules.inline.emStrong.lDelim.exec(t);if(!l||l[3]&&a.match(/[\p{L}\p{N}]/u))return;let f=l[1]||l[2]||"";if(!f||f&&(a===""||this.rules.inline.punctuation.exec(a))){let p=l[0].length-1,v,_,x=p,w=0,A=l[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(A.lastIndex=0,i=i.slice(-1*t.length+p);(l=A.exec(i))!=null;){if(v=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],!v)continue;if(_=v.length,l[3]||l[4]){x+=_;continue}else if((l[5]||l[6])&&p%3&&!((p+_)%3)){w+=_;continue}if(x-=_,x>0)continue;if(_=Math.min(_,_+x+w),Math.min(p,_)%2){let R=t.slice(1,p+l.index+_);return{type:"em",raw:t.slice(0,p+l.index+_+1),text:R,tokens:this.lexer.inlineTokens(R)}}let D=t.slice(2,p+l.index+_-1);return{type:"strong",raw:t.slice(0,p+l.index+_+1),text:D,tokens:this.lexer.inlineTokens(D)}}}}codespan(t){let i=this.rules.inline.code.exec(t);if(i){let a=i[2].replace(/\n/g," "),l=/[^ ]/.test(a),f=/^ /.test(a)&&/ $/.test(a);return l&&f&&(a=a.substring(1,a.length-1)),a=ja(a,!0),{type:"codespan",raw:i[0],text:a}}}br(t){let i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}}del(t){let i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(t,i){let a=this.rules.inline.autolink.exec(t);if(a){let l,f;return a[2]==="@"?(l=ja(this.options.mangle?i(a[1]):a[1]),f="mailto:"+l):(l=ja(a[1]),f=l),{type:"link",raw:a[0],text:l,href:f,tokens:[{type:"text",raw:l,text:l}]}}}url(t,i){let a;if(a=this.rules.inline.url.exec(t)){let l,f;if(a[2]==="@")l=ja(this.options.mangle?i(a[0]):a[0]),f="mailto:"+l;else{let p;do p=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(p!==a[0]);l=ja(a[0]),a[1]==="www."?f="http://"+l:f=l}return{type:"link",raw:a[0],text:l,href:f,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(t,i){let a=this.rules.inline.text.exec(t);if(a){let l;return this.lexer.state.inRawBlock?l=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):ja(a[0]):a[0]:l=ja(this.options.smartypants?i(a[0]):a[0]),{type:"text",raw:a[0],text:l}}}},Kn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:_1,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},Kn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Kn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Kn.def=mi(Kn.def).replace("label",Kn._label).replace("title",Kn._title).getRegex(),Kn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Kn.listItemStart=mi(/^( *)(bull) */).replace("bull",Kn.bullet).getRegex(),Kn.list=mi(Kn.list).replace(/bull/g,Kn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Kn.def.source+")").getRegex(),Kn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Kn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Kn.html=mi(Kn.html,"i").replace("comment",Kn._comment).replace("tag",Kn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Kn.paragraph=mi(Kn._paragraph).replace("hr",Kn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kn._tag).getRegex(),Kn.blockquote=mi(Kn.blockquote).replace("paragraph",Kn.paragraph).getRegex(),Kn.normal=tu({},Kn),Kn.gfm=tu({},Kn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Kn.gfm.table=mi(Kn.gfm.table).replace("hr",Kn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kn._tag).getRegex(),Kn.gfm.paragraph=mi(Kn._paragraph).replace("hr",Kn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Kn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kn._tag).getRegex(),Kn.pedantic=tu({},Kn.normal,{html:mi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Kn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_1,paragraph:mi(Kn.normal._paragraph).replace("hr",Kn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Kn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),xn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_1,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_1,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},xn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",xn.punctuation=mi(xn.punctuation).replace(/punctuation/g,xn._punctuation).getRegex(),xn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,xn.escapedEmSt=/\\\*|\\_/g,xn._comment=mi(Kn._comment).replace("(?:-->|$)","-->").getRegex(),xn.emStrong.lDelim=mi(xn.emStrong.lDelim).replace(/punct/g,xn._punctuation).getRegex(),xn.emStrong.rDelimAst=mi(xn.emStrong.rDelimAst,"g").replace(/punct/g,xn._punctuation).getRegex(),xn.emStrong.rDelimUnd=mi(xn.emStrong.rDelimUnd,"g").replace(/punct/g,xn._punctuation).getRegex(),xn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,xn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,xn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,xn.autolink=mi(xn.autolink).replace("scheme",xn._scheme).replace("email",xn._email).getRegex(),xn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,xn.tag=mi(xn.tag).replace("comment",xn._comment).replace("attribute",xn._attribute).getRegex(),xn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,xn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,xn.link=mi(xn.link).replace("label",xn._label).replace("href",xn._href).replace("title",xn._title).getRegex(),xn.reflink=mi(xn.reflink).replace("label",xn._label).replace("ref",Kn._label).getRegex(),xn.nolink=mi(xn.nolink).replace("ref",Kn._label).getRegex(),xn.reflinkSearch=mi(xn.reflinkSearch,"g").replace("reflink",xn.reflink).replace("nolink",xn.nolink).getRegex(),xn.normal=tu({},xn),xn.pedantic=tu({},xn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:mi(/^!?\[(label)\]\((.*?)\)/).replace("label",xn._label).getRegex(),reflink:mi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xn._label).getRegex()}),xn.gfm=tu({},xn.normal,{escape:mi(xn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),xn.gfm.url=mi(xn.gfm.url,"i").replace("email",xn.gfm._extended_email).getRegex(),xn.breaks=tu({},xn.gfm,{br:mi(xn.br).replace("{2,}","*").getRegex(),text:mi(xn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),tm=class Xz{constructor(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||em,this.options.tokenizer=this.options.tokenizer||new aA,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={block:Kn.normal,inline:xn.normal};this.options.pedantic?(a.block=Kn.pedantic,a.inline=xn.pedantic):this.options.gfm&&(a.block=Kn.gfm,this.options.breaks?a.inline=xn.breaks:a.inline=xn.gfm),this.tokenizer.rules=a}static get rules(){return{block:Kn,inline:xn}}static lex(i,a){return new Xz(a).lex(i)}static lexInline(i,a){return new Xz(a).inlineTokens(i)}lex(i){i=i.replace(/\r\n|\r/g,`
`),this.blockTokens(i,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(i,a=[]){this.options.pedantic?i=i.replace(/\t/g,"    ").replace(/^ +$/gm,""):i=i.replace(/^( *)(\t+)/gm,(_,x,w)=>x+"    ".repeat(w.length));let l,f,p,v;for(;i;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(l=_.call({lexer:this},i,a))?(i=i.substring(l.raw.length),a.push(l),!0):!1))){if(l=this.tokenizer.space(i)){i=i.substring(l.raw.length),l.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(l);continue}if(l=this.tokenizer.code(i)){i=i.substring(l.raw.length),f=a[a.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+l.raw,f.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=f.text):a.push(l);continue}if(l=this.tokenizer.fences(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.heading(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.hr(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.blockquote(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.list(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.html(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.def(i)){i=i.substring(l.raw.length),f=a[a.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+l.raw,f.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=f.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.lheading(i)){i=i.substring(l.raw.length),a.push(l);continue}if(p=i,this.options.extensions&&this.options.extensions.startBlock){let _=1/0,x=i.slice(1),w;this.options.extensions.startBlock.forEach(function(A){w=A.call({lexer:this},x),typeof w=="number"&&w>=0&&(_=Math.min(_,w))}),_<1/0&&_>=0&&(p=i.substring(0,_+1))}if(this.state.top&&(l=this.tokenizer.paragraph(p))){f=a[a.length-1],v&&f.type==="paragraph"?(f.raw+=`
`+l.raw,f.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):a.push(l),v=p.length!==i.length,i=i.substring(l.raw.length);continue}if(l=this.tokenizer.text(i)){i=i.substring(l.raw.length),f=a[a.length-1],f&&f.type==="text"?(f.raw+=`
`+l.raw,f.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):a.push(l);continue}if(i){let _="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,a}inline(i,a=[]){return this.inlineQueue.push({src:i,tokens:a}),a}inlineTokens(i,a=[]){let l,f,p,v=i,_,x,w;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(v))!=null;)A.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(v=v.slice(0,_.index)+"["+Lq("a",_[0].length-2)+"]"+v.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(v))!=null;)v=v.slice(0,_.index)+"["+Lq("a",_[0].length-2)+"]"+v.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.escapedEmSt.exec(v))!=null;)v=v.slice(0,_.index)+"++"+v.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;i;)if(x||(w=""),x=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(A=>(l=A.call({lexer:this},i,a))?(i=i.substring(l.raw.length),a.push(l),!0):!1))){if(l=this.tokenizer.escape(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.tag(i)){i=i.substring(l.raw.length),f=a[a.length-1],f&&l.type==="text"&&f.type==="text"?(f.raw+=l.raw,f.text+=l.text):a.push(l);continue}if(l=this.tokenizer.link(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.reflink(i,this.tokens.links)){i=i.substring(l.raw.length),f=a[a.length-1],f&&l.type==="text"&&f.type==="text"?(f.raw+=l.raw,f.text+=l.text):a.push(l);continue}if(l=this.tokenizer.emStrong(i,v,w)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.codespan(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.br(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.del(i)){i=i.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.autolink(i,Uq)){i=i.substring(l.raw.length),a.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(i,Uq))){i=i.substring(l.raw.length),a.push(l);continue}if(p=i,this.options.extensions&&this.options.extensions.startInline){let A=1/0,D=i.slice(1),R;this.options.extensions.startInline.forEach(function(C){R=C.call({lexer:this},D),typeof R=="number"&&R>=0&&(A=Math.min(A,R))}),A<1/0&&A>=0&&(p=i.substring(0,A+1))}if(l=this.tokenizer.inlineText(p,Yme)){i=i.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(w=l.raw.slice(-1)),x=!0,f=a[a.length-1],f&&f.type==="text"?(f.raw+=l.raw,f.text+=l.text):a.push(l);continue}if(i){let A="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(A);break}else throw new Error(A)}}return a}},oA=class{constructor(t){this.options=t||em}code(t,i,a){let l=(i||"").match(/\S*/)[0];if(this.options.highlight){let f=this.options.highlight(t,l);f!=null&&f!==t&&(a=!0,t=f)}return t=t.replace(/\n$/,"")+`
`,l?'<pre><code class="'+this.options.langPrefix+ja(l,!0)+'">'+(a?t:ja(t,!0))+`</code></pre>
`:"<pre><code>"+(a?t:ja(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
`.concat(t,`</blockquote>
`)}html(t){return t}heading(t,i,a,l){if(this.options.headerIds){let f=this.options.headerPrefix+l.slug(a);return"<h".concat(i,' id="').concat(f,'">').concat(t,"</h").concat(i,`>
`)}return"<h".concat(i,">").concat(t,"</h").concat(i,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,i,a){let l=i?"ol":"ul",f=i&&a!==1?' start="'+a+'"':"";return"<"+l+f+`>
`+t+"</"+l+`>
`}listitem(t){return"<li>".concat(t,`</li>
`)}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>".concat(t,`</p>
`)}table(t,i){return i&&(i="<tbody>".concat(i,"</tbody>")),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow(t){return`<tr>
`.concat(t,`</tr>
`)}tablecell(t,i){let a=i.header?"th":"td";return(i.align?"<".concat(a,' align="').concat(i.align,'">'):"<".concat(a,">"))+t+"</".concat(a,`>
`)}strong(t){return"<strong>".concat(t,"</strong>")}em(t){return"<em>".concat(t,"</em>")}codespan(t){return"<code>".concat(t,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>".concat(t,"</del>")}link(t,i,a){if(t=Dq(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let l='<a href="'+ja(t)+'"';return i&&(l+=' title="'+i+'"'),l+=">"+a+"</a>",l}image(t,i,a){if(t=Dq(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let l='<img src="'.concat(t,'" alt="').concat(a,'"');return i&&(l+=' title="'.concat(i,'"')),l+=this.options.xhtml?"/>":">",l}text(t){return t}},vL=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,i,a){return""+a}image(t,i,a){return""+a}br(){return""}},_L=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,i){let a=t,l=0;if(this.seen.hasOwnProperty(a)){l=this.seen[t];do l++,a=t+"-"+l;while(this.seen.hasOwnProperty(a))}return i||(this.seen[t]=l,this.seen[a]=0),a}slug(t,i={}){let a=this.serialize(t);return this.getNextSafeSlug(a,i.dryrun)}},Jf=class Kz{constructor(i){this.options=i||em,this.options.renderer=this.options.renderer||new oA,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new vL,this.slugger=new _L}static parse(i,a){return new Kz(a).parse(i)}static parseInline(i,a){return new Kz(a).parseInline(i)}parse(i,a=!0){let l="",f,p,v,_,x,w,A,D,R,C,F,N,B,j,W,$,re,ne,ce,Te=i.length;for(f=0;f<Te;f++){if(C=i[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[C.type]&&(ce=this.options.extensions.renderers[C.type].call({parser:this},C),ce!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(C.type))){l+=ce||"";continue}switch(C.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{l+=this.renderer.heading(this.parseInline(C.tokens),C.depth,Rq(this.parseInline(C.tokens,this.textRenderer)),this.slugger);continue}case"code":{l+=this.renderer.code(C.text,C.lang,C.escaped);continue}case"table":{for(D="",A="",_=C.header.length,p=0;p<_;p++)A+=this.renderer.tablecell(this.parseInline(C.header[p].tokens),{header:!0,align:C.align[p]});for(D+=this.renderer.tablerow(A),R="",_=C.rows.length,p=0;p<_;p++){for(w=C.rows[p],A="",x=w.length,v=0;v<x;v++)A+=this.renderer.tablecell(this.parseInline(w[v].tokens),{header:!1,align:C.align[v]});R+=this.renderer.tablerow(A)}l+=this.renderer.table(D,R);continue}case"blockquote":{R=this.parse(C.tokens),l+=this.renderer.blockquote(R);continue}case"list":{for(F=C.ordered,N=C.start,B=C.loose,_=C.items.length,R="",p=0;p<_;p++)W=C.items[p],$=W.checked,re=W.task,j="",W.task&&(ne=this.renderer.checkbox($),B?W.tokens.length>0&&W.tokens[0].type==="paragraph"?(W.tokens[0].text=ne+" "+W.tokens[0].text,W.tokens[0].tokens&&W.tokens[0].tokens.length>0&&W.tokens[0].tokens[0].type==="text"&&(W.tokens[0].tokens[0].text=ne+" "+W.tokens[0].tokens[0].text)):W.tokens.unshift({type:"text",text:ne}):j+=ne),j+=this.parse(W.tokens,B),R+=this.renderer.listitem(j,re,$);l+=this.renderer.list(R,F,N);continue}case"html":{l+=this.renderer.html(C.text);continue}case"paragraph":{l+=this.renderer.paragraph(this.parseInline(C.tokens));continue}case"text":{for(R=C.tokens?this.parseInline(C.tokens):C.text;f+1<Te&&i[f+1].type==="text";)C=i[++f],R+=`
`+(C.tokens?this.parseInline(C.tokens):C.text);l+=a?this.renderer.paragraph(R):R;continue}default:{let Ie='Token with "'+C.type+'" type was not found.';if(this.options.silent){console.error(Ie);return}else throw new Error(Ie)}}}return l}parseInline(i,a){a=a||this.renderer;let l="",f,p,v,_=i.length;for(f=0;f<_;f++){if(p=i[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(v=this.options.extensions.renderers[p.type].call({parser:this},p),v!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(p.type))){l+=v||"";continue}switch(p.type){case"escape":{l+=a.text(p.text);break}case"html":{l+=a.html(p.text);break}case"link":{l+=a.link(p.href,p.title,this.parseInline(p.tokens,a));break}case"image":{l+=a.image(p.href,p.title,p.text);break}case"strong":{l+=a.strong(this.parseInline(p.tokens,a));break}case"em":{l+=a.em(this.parseInline(p.tokens,a));break}case"codespan":{l+=a.codespan(p.text);break}case"br":{l+=a.br();break}case"del":{l+=a.del(this.parseInline(p.tokens,a));break}case"text":{l+=a.text(p.text);break}default:{let x='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(x);return}else throw new Error(x)}}}return l}},ir.options=ir.setOptions=function(t){return tu(ir.defaults,t),Wme(ir.defaults),ir},ir.getDefaults=Iq,ir.defaults=em,ir.use=function(...t){let i=tu({},...t),a=ir.defaults.extensions||{renderers:{},childTokens:{}},l;t.forEach(f=>{if(f.extensions&&(l=!0,f.extensions.forEach(p=>{if(!p.name)throw new Error("extension name required");if(p.renderer){let v=a.renderers?a.renderers[p.name]:null;v?a.renderers[p.name]=function(..._){let x=p.renderer.apply(this,_);return x===!1&&(x=v.apply(this,_)),x}:a.renderers[p.name]=p.renderer}if(p.tokenizer){if(!p.level||p.level!=="block"&&p.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[p.level]?a[p.level].unshift(p.tokenizer):a[p.level]=[p.tokenizer],p.start&&(p.level==="block"?a.startBlock?a.startBlock.push(p.start):a.startBlock=[p.start]:p.level==="inline"&&(a.startInline?a.startInline.push(p.start):a.startInline=[p.start]))}p.childTokens&&(a.childTokens[p.name]=p.childTokens)})),f.renderer){let p=ir.defaults.renderer||new oA;for(let v in f.renderer){let _=p[v];p[v]=(...x)=>{let w=f.renderer[v].apply(p,x);return w===!1&&(w=_.apply(p,x)),w}}i.renderer=p}if(f.tokenizer){let p=ir.defaults.tokenizer||new aA;for(let v in f.tokenizer){let _=p[v];p[v]=(...x)=>{let w=f.tokenizer[v].apply(p,x);return w===!1&&(w=_.apply(p,x)),w}}i.tokenizer=p}if(f.walkTokens){let p=ir.defaults.walkTokens;i.walkTokens=function(v){let _=[];return _.push(f.walkTokens.call(this,v)),p&&(_=_.concat(p.call(this,v))),_}}l&&(i.extensions=a),ir.setOptions(i)})},ir.walkTokens=function(t,i){let a=[];for(let l of t)switch(a=a.concat(i.call(ir,l)),l.type){case"table":{for(let f of l.header)a=a.concat(ir.walkTokens(f.tokens,i));for(let f of l.rows)for(let p of f)a=a.concat(ir.walkTokens(p.tokens,i));break}case"list":{a=a.concat(ir.walkTokens(l.items,i));break}default:ir.defaults.extensions&&ir.defaults.extensions.childTokens&&ir.defaults.extensions.childTokens[l.type]?ir.defaults.extensions.childTokens[l.type].forEach(function(f){a=a.concat(ir.walkTokens(l[f],i))}):l.tokens&&(a=a.concat(ir.walkTokens(l.tokens,i)))}return a},ir.parseInline=function(t,i){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");i=tu({},ir.defaults,i||{}),Nq(i);try{let a=tm.lexInline(t,i);return i.walkTokens&&ir.walkTokens(a,i.walkTokens),Jf.parseInline(a,i)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,i.silent)return"<p>An error occurred:</p><pre>"+ja(a.message+"",!0)+"</pre>";throw a}},ir.Parser=Jf,ir.parser=Jf.parse,ir.Renderer=oA,ir.TextRenderer=vL,ir.Lexer=tm,ir.lexer=tm.lex,ir.Tokenizer=aA,ir.Slugger=_L,ir.parse=ir,ir.options,ir.setOptions,ir.use,ir.walkTokens,ir.parseInline,Jf.parse,tm.lex}),Zq,Jq,yL,Qq=P(()=>{ht(),eA(),Jq=_e(Dv)(Zq||(Zq=Y([`
  padding: 6px;
`]))),yL=Jq}),sa,sA,y1,lA,eX,tX,nX,bL,rX,iX,aX,xL,oX,sX,lX,uX,cX,b1,x1,dX,fX,hX,pX,mX,gX,vX,_X,yX,bX,xX,SX,SL,S1=P(()=>{sa=J(Fe()),Gme(),ht(),Gr(),bn(),Ue(),$me(),h1(),Qq(),sA=({title:t,message:i})=>"".concat(t," ").concat(i),y1=(()=>{let t=new Map;return{add:i=>{let a=sA(i);t.has(a)?t.set(a,t.get(a)+1):t.set(a,1)},delete:i=>{let a=sA(i);t.has(a)&&t.get(a)>1?t.set(a,t.get(a)-1):t.delete(a)},clear:()=>{t.clear()},check:i=>t.has(sA(i))}})(),lA=(()=>{let t=new Map;return{add:i=>{t.has(i)?t.set(i,t.get(i)+1):t.set(i,1)},delete:i=>{t.has(i)&&t.get(i)>1?t.set(i,t.get(i)-1):t.delete(i)},clear:()=>{t.clear()},check:i=>t.has(i),get types(){return Array.of(...t.keys())}}})(),tX=_e.div(eX||(eX=Y([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),zr),bL=_e.div(nX||(nX=Y([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),iX=_e.div(rX||(rX=Y([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),xL=_e.div(aX||(aX=Y([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),sX=_e.button(oX||(oX=Y([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),lX={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},cX=_e.div(uX||(uX=Y([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:t})=>lX[t]),b1=t=>(i,a,l=[],f=!1)=>{(f||!y1.check({title:i,message:a}))&&(y1.add({title:i,message:a}),lA.add(t),rA.custom(p=>sa.default.createElement(tX,null,sa.default.createElement(cX,{type:t}),sa.default.createElement(iX,null,sa.default.createElement(bL,null,i),sa.default.createElement(xL,{dangerouslySetInnerHTML:{__html:ir.parse(a)}}),l.length>0&&sa.default.createElement(xL,null,sa.default.createElement("span",null,"Docs:"," ",l.map((v,_)=>sa.default.createElement(sa.Fragment,{key:_},_>0&&", ",sa.default.createElement("a",{target:"_blank",href:v.url},v.title)))))),sa.default.createElement(sX,{onClick:()=>{rA.remove(p.id),y1.delete({title:i,message:a}),lA.delete(t)}},"Close")),{duration:1/0}))},x1={warning:b1("warning"),success:b1("success"),info:b1("info"),error:b1("error")},fX=_e.div(dX||(dX=Y([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:t})=>t==="center"?"center":"flex-end"),pX=_e.button(hX||(hX=Y([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),zr,({danger:t})=>t?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),gX=_e.div(mX||(mX=Y([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),_X=_e.div(vX||(vX=Y([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),bX=_e.div(yX||(yX=Y([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),xX=()=>{let{hasNotifications:t}=SL();return Rv({enabled:!t},()=>sa.default.createElement(yL,null,sa.default.createElement(bX,null,sa.default.createElement(bL,null,"No notifications"),"Notifications will appear here when you get them.")))},SX=()=>{var t;let{toasts:i,handlers:a}=mL(),{startPause:l,endPause:f}=a,p=(t=pr(pe().atomP.ahistoric.pinNotifications))!=null?t:!1;return sa.default.createElement(gX,null,p?i.length>0&&sa.default.createElement(_X,{onMouseEnter:l,onMouseLeave:f},sa.default.createElement("div",null,i.map(v=>sa.default.createElement("div",{key:v.id},v.message(v))))):null,sa.default.createElement(fX,{align:"side"},p&&i.length>0&&sa.default.createElement(pX,{onClick:()=>{lA.clear(),y1.clear(),rA.remove()},danger:!0},"Clear")))},SL=()=>{let{toasts:t}=mL();return{hasNotifications:t.length>0}}});function wL(t,i){var a;let l=Object.values((a=(0,wX.val)(t.pointers.historic.sheetsById))!=null?a:{}),f=l.flatMap(v=>{var _;return Object.values((_=v?.staticOverrides.byObject)!=null?_:{})}).flatMap(v=>Object.values(v??{})),p=[...l.flatMap(v=>{var _,x;return Object.values((x=(_=v?.sequence)==null?void 0:_.tracksByObject)!=null?x:{})}).flatMap(v=>{var _;return Object.values((_=v?.trackData)!=null?_:{})}).flatMap(v=>v?.keyframes).map(v=>v?.value)];return f.forEach(v=>{Pt(v,_=>{p.push(_)},[])}),p.filter(v=>v?.type&&typeof v?.type=="string").map(v=>v.id).filter((v,_,x)=>v!==null&&v!==""&&x.indexOf(v)===_)}var wX,EX=P(()=>{wX=Ut(),Tn()});function TX(t,i){let a=new File([t],i),l=URL.createObjectURL(a),f=Object.assign(document.createElement("a"),{href:l,target:"_blank",rel:"noopener"});f.setAttribute("download",i),f.click(),setTimeout(()=>{URL.revokeObjectURL(l)},4e4)}var Ls,MX,PX,CX,AX,kX,IX,RX,DX,OX,Zme=P(()=>{Ue(),Yu(),Xu(),Ls=J(Fe()),ht(),Z7(),Vme(),MX=J(Hme()),S1(),EX(),CX=_e.div(PX||(PX=Y([""]))),kX=_e.div(AX||(AX=Y([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),RX=_e(Ku)(IX||(IX=Y([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),DX=({projects:t})=>{let i=t[0],a=i.address.projectId,l=a.replace(/[^\w\d'_\-]+/g," ").trim(),f="".concat(l,".theatre-project-state.json"),[p,v]=(0,Ls.useState)(!1),_=(0,Ls.useCallback)(()=>ke(void 0,null,function*(){var w,A;let D=wL(i),R=new Map;try{yield Promise.all(D.map(F=>ke(void 0,null,function*(){let N=i.assetStorage.getAssetUrl(F),B=yield fetch(N);B.ok&&R.set(F,yield B.blob())})))}catch{x1.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((A=(w=i.config.assets)==null?void 0:w.baseUrl)!=null?A:"/",". This is likely due to a CORS issue."));return}if(R.size>0){let F=new MX.default;for(let[B,j]of R)F.file(B,j);let N=yield F.generateAsync({type:"blob"});TX(N,"".concat(l,".assets.zip"))}let C=JSON.stringify(pe().createContentOfSaveFile(i.address.projectId),null,2);TX(C,f),v(!0),setTimeout(()=>{v(!1)},2e3)}),[i,f]),x=qu({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>Ls.default.createElement(RX,null,Ls.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),Ls.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),Ls.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return Ls.default.createElement(Ls.default.Fragment,null,x.node,Ls.default.createElement(CX,null,Ls.default.createElement(bq,{projectId:a}),Ls.default.createElement(kX,null,Ls.default.createElement(JC,{onMouseEnter:w=>x.open(w,w.target),onClick:p?void 0:_,disabled:p},p?"(Exported)":"Export ".concat(a," to JSON")))))},OX=DX}),Qf,NX,LX,FX,UX,BX,zX,jX,VX,HX,GX,Jme=P(()=>{Qf=J(Fe()),ht(),Bx(),LX=_e.div(NX||(NX=Y([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),UX=_e.div(FX||(FX=Y([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),zX=_e.div(BX||(BX=Y([`
  color: rgba(145, 145, 145, 0.8);
`]))),VX=_e.a(jX||(jX=Y([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),HX=()=>Qf.default.createElement(LX,null,Qf.default.createElement(UX,null,Qf.default.createElement(zX,null,Qf.default.createElement(VO,null)),Qf.default.createElement("div",null,"Please select an object from the ",Qf.default.createElement("u",null,"Outline Menu")," to see its properties.")),Qf.default.createElement(VX,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),GX=HX});function WX(){let[t,i]=(0,EL.useState)(!1),a=(0,EL.useMemo)(()=>{let l=new Set;return()=>{let f=()=>{l.delete(f),i(l.size>0)};return l.add(f),i(!0),f}},[]);return[t,a]}var EL,qX=P(()=>{EL=J(Fe())}),xi,Nv,XX,KX,uA,YX,TL,$X,ML,ZX,PL,w1,JX,QX,cA,nm,CL=P(()=>{Hf(),bn(),xi=J(Fe()),ht(),fr(),vd(),Gr(),Bme(),Zme(),Ue(),NV(),Nv=Ut(),Jme(),qX(),Jp(),XX="32px",uA=_e.div(KX||(KX=Y([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),zr,gv.propsPanel,({pin:t})=>t?"block":"none"),TL=_e.div(YX||(YX=Y([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),zr),ML=_e.div($X||($X=Y([`
  height: `,`;
  display: flex;
  align-items: center;
`])),XX),PL=_e.div(ZX||(ZX=Y([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),zr),w1=(0,xi.createContext)([!1,()=>()=>{}]),JX=t=>{let i=pr(pe().atomP.ahistoric.pinDetails)!==!1,a=OV("right");(0,xi.useLayoutEffect)(()=>{cA.set(a)},[a]),(0,xi.useEffect)(()=>()=>{nm.set(!1),cA.set(!1)},[]);let[l]=(0,xi.useContext)(w1),f=i||a||l,[p,v]=(0,xi.useState)(null);return _W(p),ur(()=>{let _=Vf(),x=_.find(vt);if(x)return xi.default.createElement(uA,{"data-testid":"DetailPanel-Object",pin:f,ref:v,onMouseEnter:()=>{nm.set(!0)},onMouseLeave:()=>{nm.set(!1)}},xi.default.createElement(ML,null,xi.default.createElement(TL,{title:"".concat(x.sheet.address.sheetId,": ").concat(x.sheet.address.sheetInstanceId," > ").concat(x.address.objectKey)},xi.default.createElement(jf,null,x.sheet.address.sheetId," "),xi.default.createElement(Ux,null,":",""),xi.default.createElement(jf,null,x.sheet.address.sheetInstanceId," "),xi.default.createElement(Ux,null,""),xi.default.createElement(jf,null,x.address.objectKey))),xi.default.createElement(PL,null,xi.default.createElement(K7,{objects:[x]})));let w=_.find(qn);return w?xi.default.createElement(uA,{pin:f},xi.default.createElement(ML,null,xi.default.createElement(TL,{title:"".concat(w.address.projectId)},xi.default.createElement(jf,null,w.address.projectId," "))),xi.default.createElement(PL,null,xi.default.createElement(OX,{projects:[w]}))):xi.default.createElement(uA,{pin:f,onMouseEnter:()=>{nm.set(!0)},onMouseLeave:()=>{nm.set(!1)}},xi.default.createElement(GX,null))},[f])},QX=()=>{let t=WX();return xi.default.createElement(w1.Provider,{value:t},xi.default.createElement(JX,null))},cA=new Nv.Atom(!1),nm=new Nv.Atom(!1),(0,Nv.prism)(()=>{let t=(0,Nv.val)(nm.prism),i=(0,Nv.val)(cA.prism);return t||i})}),AL,dA,fA,kL,Lv,eK,IL,Fv=P(()=>{AL=Ut(),bn(),Ue(),qX(),dA=J(Fe()),ON(),fA=(t,i)=>{let a=t.left/i.width,l=(t.left+t.width)/i.width,f=t.top/i.height,p=(t.height+t.top)/i.height;return{edges:{left:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},right:l<=.5?{from:"screenLeft",distance:l}:{from:"screenRight",distance:1-l},top:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f},bottom:p<=.5?{from:"screenTop",distance:p}:{from:"screenBottom",distance:1-p}}}},kL=dA.default.createContext(null),Lv=()=>(0,dA.useContext)(kL),eK=({panelId:t,children:i,defaultPosition:a,minDims:l})=>{let f=kC(800,200),[p,v]=WX(),{stuff:_}=ur(()=>{var x;let{edges:w}=(x=(0,AL.val)(pe().atomP.historic.panelPositions[t]))!=null?x:a,A=Math.floor(f.width*(w.left.from==="screenLeft"?w.left.distance:1-w.left.distance)),D=Math.floor(f.width*(w.right.from==="screenLeft"?w.right.distance:1-w.right.distance)),R=Math.floor(f.height*(w.top.from==="screenTop"?w.top.distance:1-w.top.distance)),C=Math.floor(f.height*(w.bottom.from==="screenTop"?w.bottom.distance:1-w.bottom.distance)),F=Math.max(D-A,l.width),N=Math.max(C-R,l.height);return{stuff:{dims:AL.prism.memo("dims",()=>({width:F,left:A,top:R,height:N}),[F,A,R,N]),panelId:t,minDims:l,boundsHighlighted:p,addBoundsHighlightLock:v}}},[t,f,p,v]);return dA.default.createElement(kL.Provider,{value:_},i)},IL=eK}),E1,tK,nK,rK,RL,iK=P(()=>{Hr(),Ue(),ya(),E1=J(Fe()),ht(),Fv(),Ns(),aa(),vd(),nK=_e.div(tK||(tK=Y([`
  cursor: move;
`]))),rK=t=>{let i=Lv(),a=(0,E1.useRef)(i);a.current=i;let[l,f]=Dr(null),p=(0,E1.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let w=a.current,A,D=i.addBoundsHighlightLock();return{onDrag(R,C){let F=K(I({},w.dims),{top:pi(w.dims.top+C,0,window.innerHeight-Vu),left:pi(w.dims.left+R,-w.dims.width+Vu,window.innerWidth-Vu)}),N=fA(F,{width:window.innerWidth,height:window.innerHeight});A?.discard(),A=pe().tempTransaction(({stateEditors:B})=>{B.studio.historic.panelPositions.setPanelPosition({position:N,panelId:w.panelId})})},onDragEnd(R){D(),R?A?.commit():A?.discard()}}}}),[]),[v]=ji(f,p);dl(v,"dragging","move");let[_,x]=(0,E1.useMemo)(()=>{let w;return[function(){if(w){let A=w;w=void 0,A()}w=i.addBoundsHighlightLock()},function(){if(w){let A=w;w=void 0,A()}}]},[]);return E1.default.createElement(nK,K(I({},t),{ref:l,onMouseEnter:_,onMouseLeave:x}))},RL=rK}),hA,aK,DL,oK,OL,sK,NL,lK,uK,cK,dK,fK,LL,hK,pK,mK,gK,vK,T1,_K,yK,bK,xK,SK,wK,EK,TK,MK,FL,PK,Md,Qme=P(()=>{Hr(),Ue(),ya(),Os(),hA=J(Fe()),ht(),Fv(),Gr(),aa(),vd(),DL=_e.div(aK||(aK=Y([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),zr,lv(.2,"#478698")),OL=_e(DL)(oK||(oK=Y([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),NL=_e(OL)(sK||(sK=Y([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),uK=_e(NL)(lK||(lK=Y([`
  top: -1px;
`]))),dK=_e(NL)(cK||(cK=Y([`
  bottom: -1px;
`]))),LL=_e(OL)(fK||(fK=Y([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),pK=_e(LL)(hK||(hK=Y([`
  left: -1px;
`]))),gK=_e(LL)(mK||(mK=Y([`
  right: -1px;
`]))),T1=_e(DL)(vK||(vK=Y([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),yK=_e(T1)(_K||(_K=Y([`
  top: 0;
  left: 0;
`]))),xK=_e(T1)(bK||(bK=Y([`
  top: 0;
  right: 0;
`]))),wK=_e(T1)(SK||(SK=Y([`
  bottom: 0;
  left: 0;
`]))),TK=_e(T1)(EK||(EK=Y([`
  bottom: 0;
  right: 0;
`]))),MK={Top:uK,TopLeft:yK,TopRight:xK,Bottom:dK,BottomLeft:wK,BottomRight:TK,Left:pK,Right:gK},FL={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},PK=({which:t})=>{let i=Lv(),a=(0,hA.useRef)(i);a.current=i;let[l,f]=Dr(null),p=(0,hA.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:FL[t],onDragStart(){let w,A=a.current,D=i.addBoundsHighlightLock();return{onDrag(R,C){let F=I({},A.dims);if(t.startsWith("Bottom"))F.height=Math.max(F.height+C,A.minDims.height);else if(t.startsWith("Top")){let B=F.top+F.height,j=pi(F.top+C,0,Math.min(B-A.minDims.height,window.innerHeight-Vu)),W=B-j;F.height=W,F.top=j}if(t.endsWith("Left")){let B=F.left+F.width,j=Math.min(F.left+R,Math.min(B-A.minDims.width,window.innerWidth-Vu)),W=B-j;F.width=W,F.left=j}else t.endsWith("Right")&&(F.width=Math.max(F.width+R,Math.max(A.minDims.width,Vu-A.dims.left)));let N=fA(F,{width:window.innerWidth,height:window.innerHeight});w?.discard(),w=pe().tempTransaction(({stateEditors:B})=>{B.studio.historic.panelPositions.setPanelPosition({position:N,panelId:A.panelId})})},onDragEnd(R){D(),R?w?.commit():w?.discard()}}}}),[t]),[v]=ji(f,p),_=MK[t],x=t.length<=6;return hA.default.createElement(_,{ref:l,className:[v?"isDragging":"",i.boundsHighlighted&&x?"isHighlighted":""].join(" "),style:{cursor:FL[t]}})},Md=PK}),nu,CK,AK,ege=P(()=>{nu=J(Fe()),Qme(),CK=t=>nu.default.createElement(nu.default.Fragment,null,nu.default.createElement(Md,{which:"Bottom"}),nu.default.createElement(Md,{which:"Top"}),nu.default.createElement(Md,{which:"Left"}),nu.default.createElement(Md,{which:"Right"}),nu.default.createElement(Md,{which:"TopLeft"}),nu.default.createElement(Md,{which:"TopRight"}),nu.default.createElement(Md,{which:"BottomLeft"}),nu.default.createElement(Md,{which:"BottomRight"})),AK=CK}),pA,kK,IK,RK,UL,DK=P(()=>{Gr(),pA=J(Fe()),ht(),Fv(),ege(),IK=_e.div(kK||(kK=Y([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),zr),RK=pA.default.forwardRef((t,i)=>{let a=Lv(),l=t,{style:f,children:p}=l,v=ue(l,["style","children"]);return pA.default.createElement(IK,K(I({ref:i},v),{style:I({width:a.dims.width+"px",height:a.dims.height+"px",top:a.dims.top+"px",left:a.dims.left+"px"},f??{})}),pA.default.createElement(AK,null),p)}),UL=RK}),tge=ae((t,i)=>{(function(a,l){typeof t=="object"&&typeof i<"u"?l(t,Fe()):(a=typeof globalThis<"u"?globalThis:a||self,l(a.ReactErrorBoundary={},a.React))})(t,function(a,l){function f(C){if(C&&C.__esModule)return C;var F=Object.create(null);return C&&Object.keys(C).forEach(function(N){if(N!=="default"){var B=Object.getOwnPropertyDescriptor(C,N);Object.defineProperty(F,N,B.get?B:{enumerable:!0,get:function(){return C[N]}})}}),F.default=C,Object.freeze(F)}var p=f(l);function v(C,F){return v=Object.setPrototypeOf||function(N,B){return N.__proto__=B,N},v(C,F)}function _(C,F){C.prototype=Object.create(F.prototype),C.prototype.constructor=C,v(C,F)}var x=function(C,F){return C===void 0&&(C=[]),F===void 0&&(F=[]),C.length!==F.length||C.some(function(N,B){return!Object.is(N,F[B])})},w={error:null},A=(function(C){_(F,C);function F(){for(var B,j=arguments.length,W=new Array(j),$=0;$<j;$++)W[$]=arguments[$];return B=C.call.apply(C,[this].concat(W))||this,B.state=w,B.updatedWithError=!1,B.resetErrorBoundary=function(){for(var re,ne=arguments.length,ce=new Array(ne),Te=0;Te<ne;Te++)ce[Te]=arguments[Te];B.props.onReset==null||(re=B.props).onReset.apply(re,ce),B.reset()},B}F.getDerivedStateFromError=function(B){return{error:B}};var N=F.prototype;return N.reset=function(){this.updatedWithError=!1,this.setState(w)},N.componentDidCatch=function(B,j){var W,$;(W=($=this.props).onError)==null||W.call($,B,j)},N.componentDidMount=function(){var B=this.state.error;B!==null&&(this.updatedWithError=!0)},N.componentDidUpdate=function(B){var j=this.state.error,W=this.props.resetKeys;if(j!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(j!==null&&x(B.resetKeys,W)){var $,re;($=(re=this.props).onResetKeysChange)==null||$.call(re,B.resetKeys,W),this.reset()}},N.render=function(){var B=this.state.error,j=this.props,W=j.fallbackRender,$=j.FallbackComponent,re=j.fallback;if(B!==null){var ne={error:B,resetErrorBoundary:this.resetErrorBoundary};if(p.isValidElement(re))return re;if(typeof W=="function")return W(ne);if($)return p.createElement($,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},F})(p.Component);function D(C,F){var N=function(j){return p.createElement(A,F,p.createElement(C,j))},B=C.displayName||C.name||"Unknown";return N.displayName="withErrorBoundary("+B+")",N}function R(C){var F=p.useState(null),N=F[0],B=F[1];if(C!=null)throw C;if(N!=null)throw N;return B}a.ErrorBoundary=A,a.useErrorHandler=R,a.withErrorBoundary=D,Object.defineProperty(a,"__esModule",{value:!0})})}),to,OK,NK,LK,FK,UK,BK,zK,jK,VK,HK,GK,WK,qK,XK,KK,YK,$K,ZK,JK,nge=P(()=>{to=J(Fe()),ht(),vd(),Fv(),iK(),DK(),OK=J(tge()),Ev(),Ue(),vd(),NK={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},LK={width:300,height:300},FK=({paneInstance:t})=>to.default.createElement(IL,{panelId:"pane-".concat(t.instanceId),defaultPosition:NK,minDims:LK},to.default.createElement(ZK,{paneInstance:t})),BK=_e(UL)(UK||(UK=Y([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),gv.pluginPanes),jK=_e.div(zK||(zK=Y([`
  width: 100%;
`]))),HK=_e.div(VK||(VK=Y([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),WK=_e.button(GK||(GK=Y([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),XK=_e(D8)(qK||(qK=Y([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),YK=_e.div(KK||(KK=Y([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),$K=t=>to.default.createElement(YK,null,"An Error occurred rendering this pane. Open the console for more info.",to.default.createElement("pre",null,JSON.stringify({message:t.error.message,stack:t.error.stack},null,2))),ZK=({paneInstance:t})=>{let[i,a]=(0,to.useState)(null),l=t.definition.mount;(0,to.useLayoutEffect)(()=>{if(!i)return;let p=l({paneId:t.instanceId,node:i});if(typeof p=="function")return p},[i,l,t.instanceId]);let f=(0,to.useCallback)(()=>{pe().paneManager.destroyPane(t.instanceId)},[t]);return to.default.createElement(BK,{"data-testid":"theatre-pane-wrapper-".concat(t.instanceId)},to.default.createElement(RL,null,to.default.createElement(zO,null,to.default.createElement(HK,null,to.default.createElement(WK,{onClick:f,title:"Close Pane"},to.default.createElement(ape,null))),to.default.createElement(jK,null,t.instanceId))),to.default.createElement(OK.ErrorBoundary,{FallbackComponent:$K},to.default.createElement(XK,{"data-testid":"theatre-pane-content-".concat(t.instanceId),ref:a})))},JK=FK}),BL,zL,QK=P(()=>{BL=Ut(),zL=(t,i)=>{let a=BL.prism.memo(t,()=>new BL.Atom(i),[]);return a.set(i),a}});function eY(t,i){(0,tY.useLayoutEffect)(()=>{if(!t||i.type!=="propWithChildren"&&i.type!=="primitiveProp"&&i.type!=="sheetObject")return;let a=null,l=K(I({},i.sheetObject.address),{pathToProp:i.type==="sheetObject"?[]:i.pathToProp});function f(){a=XC.replaceLock(l,()=>{})}function p(){a?.()}return t.addEventListener("mouseenter",f),t.addEventListener("mouseleave",p),()=>{a?.(),t.removeEventListener("mouseenter",f),t.removeEventListener("mouseleave",p)}},[t])}var tY,nY=P(()=>{tY=J(Fe()),iL()}),eh,rY,jL,iY,VL,aY,HL,oY,sY,lY,uY,cY,dY,fY,mA,gA=P(()=>{Gr(),eh=J(Fe()),Ev(),ht(),$p(),nY(),jL=_e.li(rY||(rY=Y([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),t=>t.depth),VL=_e.div(iY||(iY=Y([`
  border-bottom: 1px solid #7695b705;
`]))),HL=_e(VL)(aY||(aY=Y([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),mv.panel.body.compoudThing.label.color,t=>t.isSelected&&"background: blue"),sY=_e.span(oY||(oY=Y([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),Kf,HL),uY=_e.span(lY||(lY=Y([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),t=>t.isCollapsed?0:90,t=>t.isCollapsed?15:75),dY=_e.ul(cY||(cY=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),fY=({leaf:t,label:i,children:a,isSelectable:l,isSelected:f,toggleSelect:p,toggleCollapsed:v,isCollapsed:_})=>{let x=Array.isArray(a)&&a.length>0,w=(0,eh.useRef)(null);return eY(w.current,t),t.shouldRender?eh.default.createElement(jL,{depth:t.depth},eh.default.createElement(HL,{ref:w,style:{height:t.nodeHeight+"px"},isSelectable:l===!0,isSelected:f===!0,onClick:p,isEven:t.n%2===0},eh.default.createElement(uY,{isCollapsed:_,onClick:v},eh.default.createElement(MH,null)),eh.default.createElement(sY,null,i)),x&&eh.default.createElement(dY,null,a)):null},mA=fY});function rge(t,i){return i.every((a,l)=>a===t[l])}function ige(t,i){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==i[a])return!1;return!0}function vA(t){var i;let a=[];for(;;){let l=a.length,f=(i=t[0])==null?void 0:i[l];if(f===void 0)return a;for(let p of t)if(f!==p[l])return a;a.push(f)}}var Qu,_A,ec=P(()=>{DC(),Qu=Jx(t=>JSON.stringify(t)),_A=t=>JSON.parse(t)});function age(t,i){let a=(0,GL.useRef)({combo:t,listener:i});a.current={combo:t,listener:i},(0,GL.useEffect)(()=>{function l(v){v.key===a.current.combo&&a.current.listener({down:!0,event:v})}function f(v){v.key===a.current.combo&&a.current.listener({down:!1,event:v})}function p(v){a.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",l),document.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",f),window.removeEventListener("blur",p)}},[])}var GL,oge=P(()=>{GL=J(Fe())});function hY(t){let[i,a]=(0,pY.useState)(!1);return age(t,({down:l})=>{a(l)}),i}var pY,mY=P(()=>{pY=J(Fe()),oge()});function sge(t){let i=(0,WL.useMemo)(()=>new gY.Atom(t),[]);return(0,WL.useLayoutEffect)(()=>{i.set(t)},[t]),i}var gY,WL,lge=P(()=>{gY=Ut(),WL=J(Fe())});function vY(t,i,a){let l=(0,qL.pointer)({root:{},path:[]}),f=i(l);id(t,(0,qL.getPointerParts)(f).path,a)}var qL,uge=P(()=>{qL=Ut(),W0()}),yA,_Y,Ho,ru=P(()=>{yA="data-pos",_Y={checkIfMouseEventSnapToPos(t,i){let a=t.composedPath().find(l=>l instanceof Element&&l!==i?.ignore&&l.hasAttribute(yA));if(a){let l=parseFloat(a.getAttribute(yA));if(isFinite(l))return l}return null},includePositionSnapAttrs(t){return{[yA]:t}}},Ho=_Y});function bA(t){let i=t.type==="sheet"?dge(t):XL(t);return{byPosition:cge(i),tracks:i}}function cge(t){let i=new Map;for(let a of t)for(let l of a.data.keyframes){let f=i.get(l.position);f||(f=[],i.set(l.position,f)),f.push({kf:l,track:a,itemKey:Pa.forTrackKeyframe(a.sheetObject,a.id,l.id)})}return i}function dge(t){return t.children.flatMap(XL)}function XL(t){return t.children.flatMap(i=>i.type==="propWithChildren"?XL(i):fge(i))}function fge(t){let i=t.sheetObject,a=i.address.projectId,l=pe().atomP.historic.coreByProject[a].sheetsById[i.address.sheetId].sequence.tracksByObject[i.address.objectKey],f=(0,xA.val)(l.trackIdByPropPath[Qu(t.pathToProp)]);if(!f)return[];let p=(0,xA.val)(l.trackData[f]);return p?[{id:f,data:p,sheetObject:i}]:[]}function hge(t,i){return Lu(t.children.flatMap(a=>KL(a,i)))}function KL(t,i){return Lu(t.children.flatMap(a=>a.type==="propWithChildren"?KL(a,i):pge(a,i)))}function pge(t,i){var a,l;let f=t.sheetObject,p=f.address.projectId,v=pe().atomP.historic.coreByProject[p].sheetsById[f.address.sheetId].sequence.tracksByObject[f.address.objectKey],_=(0,xA.val)(v.trackIdByPropPath[Qu(t.pathToProp)]);return _?(l=(a=i[f.address.objectKey])==null?void 0:a[_])!=null?l:[]:[]}var xA,Uv=P(()=>{Ue(),xA=Ut(),Ed(),ec(),aa()});function mge(t,i){let[a,l]=Dr(null),f=Gf("useCaptureSelection");return ji(i,(0,Bv.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(p){if(!p.shiftKey||p.target instanceof HTMLInputElement)return!1;let v=i.getBoundingClientRect(),_=p.clientX-v.left-(0,hl.val)(t.scaledSpace.leftPadding),x=(0,hl.val)(t.scaledSpace.toUnitSpace)(_);return a.current={h:[x,x],v:[p.clientY-v.top,p.clientY-v.top]},(0,hl.val)(t.selectionAtom).set({current:void 0}),{onDrag(w,A,D){let R=i.getBoundingClientRect(),C=D.clientX-R.left-(0,hl.val)(t.scaledSpace.leftPadding),F=(0,hl.val)(t.scaledSpace.toUnitSpace)(C);a.current={h:[a.current.h[0],F],v:[a.current.v[0],D.clientY-R.top]};let N=YL.boundsToSelection(f,(0,hl.val)(t),a.current);(0,hl.val)(t.selectionAtom).set({current:N})},onDragEnd(w){a.current=null}}}}),[t,i,a])),l}var hl,Bv,th,yY,bY,xY,YL,SY,wY,$L,EY,TY,gge=P(()=>{Ue(),ya(),mY(),lge(),uge(),Hr(),bn(),hl=Ut(),Bv=J(Fe()),ht(),ru(),Uv(),Wf(),th=5,bY=_e.div(yY||(yY=Y([`
  cursor: `,`;
`])),t=>t.isShiftDown?"cell":"default"),xY=({layoutP:t,children:i,height:a})=>{let[l,f]=Dr(null),p=hY("Shift"),v=mge(t,f),_=(0,Bv.useRef)(v);return _.current=v,Bv.default.createElement(bY,{style:{height:a+"px"},ref:l,isShiftDown:p,className:"selectionview"},v&&Bv.default.createElement(EY,{state:v,layoutP:t}),i)},(t=>{let i=(v,_,x,w,A)=>{let D=bA(x);if(x.top+x.nodeHeight/2+th>w.v[0]&&x.top+x.nodeHeight/2-th<w.v[1])for(let[R,C]of D.byPosition){let F=_.scaledSpace.toUnitSpace(th);if(!(R+F<=w.h[0]||R-F>=w.h[1]))for(let N of C)vY(A,B=>B[N.track.sheetObject.address.objectKey].byTrackId[N.track.id].byKeyframeId[N.kf.id],!0)}l(v,_,x,w,A)},a={sheet(v,_,x,w,A){i(v,_,x,w,A)},propWithChildren(v,_,x,w,A){i(v,_,x,w,A)},sheetObject(v,_,x,w,A){i(v,_,x,w,A)},primitiveProp(v,_,x,w,A){let{sheetObject:D,trackId:R}=x,C=(0,hl.val)(pe().atomP.historic.coreByProject[D.address.projectId].sheetsById[D.address.sheetId].sequence.tracksByObject[D.address.objectKey].trackData[R]);if(!(w.v[0]>x.top+x.heightIncludingChildren/2+th||x.top+x.heightIncludingChildren/2-th>w.v[1])){for(let F of C.keyframes)if(!(F.position+_.scaledSpace.toUnitSpace(th)<=w.h[0])){if(F.position-_.scaledSpace.toUnitSpace(th)>=w.h[1])break;vY(A,N=>N[D.address.objectKey].byTrackId[R].byKeyframeId[F.id],!0)}}}},l=(v,_,x,w,A)=>{if("children"in x)for(let D of x.children)f(v,_,D,w,A)};function f(v,_,x,w,A){if(!x.shouldRender||w.v[0]>x.top+x.heightIncludingChildren||x.top>w.v[1])return;let D=a[x.type];D?D(v,_,x,w,A):l(v,_,x,w,A)}function p(v,_,x){let w={};x=$L(x);let A=_.tree;f(v.utilFor.internal(),_,A,x,w);let D=_.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:w,getDragHandlers(R){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let C,F=_.scaledSpace.toUnitSpace;return{onDrag(N,B,j){C&&(C.discard(),C=void 0);let W=Ho.checkIfMouseEventSnapToPos(j,{ignore:R.domNode}),$=W!=null?W-R.positionAtStartOfDrag:F(N);C=pe().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ce of Object.keys(w)){let{byTrackId:Te}=w[ce];for(let Ie of Object.keys(Te)){let{byKeyframeId:ye}=Te[Ie];ne({trackId:Ie,keyframeIds:Object.keys(ye),translate:$,scale:1,origin:0,snappingFunction:D.getSequence().closestGridPosition,objectKey:ce,projectId:R.projectId,sheetId:R.sheetId})}}})},onDragEnd(N){N?C?.commit():C?.discard()}}}}},delete(){pe().transaction(({stateEditors:R})=>{let C=R.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let F of Object.keys(w)){let{byTrackId:N}=w[F];for(let B of Object.keys(N)){let{byKeyframeId:j}=N[B];C(K(I({},D.address),{objectKey:F,trackId:B,keyframeIds:Object.keys(j)}))}}})}}}t.boundsToSelection=p})(YL||(YL={})),wY=_e.div(SY||(SY=Y([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),$L=t=>({h:[...t.h].sort((i,a)=>i-a),v:[...t.v].sort((i,a)=>i-a)}),EY=({state:t,layoutP:i})=>{let a=sge(t);return ur(()=>{let l=(0,hl.val)(a.pointer),f=$L(l),p=(0,hl.val)(i.scaledSpace.fromUnitSpace),v=(0,hl.val)(i.scaledSpace.leftPadding),_=f.h.map(p).map(R=>R+v),x=f.v[0],w=f.v[1]-f.v[0],A=_[0],D=_[1]-_[0];return Bv.default.createElement(wY,{style:{top:x+"px",height:w+"px",left:A+"px",width:D+"px"}})},[i,a])},TY=xY}),rm,MY,PY,ZL,CY,AY,kY,IY=P(()=>{vv(),rm=J(Fe()),ht(),Od(),PY=_e.div(MY||(MY=Y([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>cc.scrollableArea),ZL=(0,rm.createContext)($l),CY=()=>(0,rm.useContext)(ZL),AY=t=>{let i=(0,rm.useRef)(null),a=(0,rm.useCallback)(l=>{i.current.scrollBy(0,l.deltaY)},[]);return rm.default.createElement(ZL.Provider,{value:a},rm.default.createElement(PY,{ref:i},t.children))},kY=AY}),RY,vge=P(()=>{RY='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),pl,SA=P(()=>{pl=(t,i=t)=>`
  left: `.concat(t*-.5,`px;
  top: `).concat(i*-.5,`px;
  width: `).concat(t,`px;
  height: `).concat(i,`px;
`)}),wA,DY,OY,_ge=P(()=>{wA=Ut(),DY=(0,wA.prism)(()=>{let[t,i]=wA.prism.state("pos",null);return wA.prism.effect("setupListeners",()=>{let a=l=>{i(l)};return document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)}},[]),t}),OY=DY}),Pd,Go,M1,NY,LY,FY,UY,Cd,tc,EA,BY,zY,no=P(()=>{Pd=Ut(),_ge(),aa(),Go=J(Fe()),M1=(0,Go.createContext)(null),NY=0,LY=({children:t,layoutP:i})=>{let a=(0,Go.useMemo)(()=>new Pd.Atom([]),[]),l=(0,Go.useMemo)(()=>(0,Pd.prism)(()=>{let v=Pd.prism.memo("p",()=>BY(i),[i]).getValue(),_=(0,Pd.val)(a.pointer);return _.length>0?nd(_).position:v}),[i]),f=(0,Go.useCallback)(()=>{let v=NY++;return a.reduce(_=>[..._,{id:v,position:[-1,0]}]),{set:_=>{a.reduce(x=>{let w=x.findIndex(D=>D.id===v);if(w===-1)return console.warn("Lock is already freed. This is a bug."),x;let A=[...x];return A.splice(w,1,{id:v,position:[_,_===-1?0:1]}),A})},unlock:()=>{a.reduce(_=>_.filter(x=>x.id!==v))}}},[]),p={currentD:l,getLock:f};return Go.default.createElement(M1.Provider,{value:p},t)},FY=()=>(0,Go.useContext)(M1).currentD,UY=()=>{let{getLock:t}=(0,Go.useContext)(M1),i=(0,Go.useRef)();return(0,Go.useLayoutEffect)(()=>()=>{var a;(a=i.current)==null||a.unlock()},[]),(0,Go.useMemo)(()=>{let a;return(l,f)=>{var p,v;a?.shouldLock!==l&&(l?i.current=t():(p=i.current)==null||p.unlock()),a?.pos!==f&&l&&((v=i.current)==null||v.set(f)),a={shouldLock:l,pos:f}}},[t])},Cd=(t,i)=>{let{getLock:a}=(0,Go.useContext)(M1),l=(0,Go.useRef)();(0,Go.useLayoutEffect)(()=>{if(t)return l.current=a(),()=>{l.current.unlock()}},[t,a]),(0,Go.useLayoutEffect)(()=>{t&&l.current.set(i)},[i,t])},tc=t=>({[EA]:t==="hide"?t:t.toFixed(3)}),EA="data-theatre-lock-framestamp-to",BY=t=>(0,Pd.prism)(()=>{let i=(0,Pd.val)(t.rightDims),a=(0,Pd.val)(t.clippedSpace.toUnitSpace),l=(0,Pd.val)(OY);if(!l)return[-1,0];for(let A of l.composedPath()){if(!(A instanceof HTMLElement||A instanceof SVGElement))break;if(A.hasAttribute(EA)){let D=A.getAttribute(EA);if(typeof D!="string")continue;if(D==="hide")return[-1,0];let R=parseFloat(D);if(isFinite(R)&&R>=0)return[R,2]}}let{clientX:f,clientY:p}=l,{screenX:v,screenY:_,width:x,height:w}=i;if(zl(f,v,v+x)&&zl(p,_+16,_+w)){let A=f-v;return[a(A),3]}else return[-1,0]}),zY=LY}),jY,P1,JL,VY,HY,nc,GY=P(()=>{Gr(),Ns(),ht(),vge(),SA(),ru(),no(),jY=12,P1=34,JL="beingDragged",nc={BEING_DRAGGED_CLASS:JL,CSS:$a(VY||(VY=Y([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),pl(jY),zr,JL),CSS_WHEN_SOMETHING_DRAGGING:$a(HY||(HY=Y([`
    pointer-events: auto;
    cursor: var(`,`);

    //  thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),yd,P1/2,P1/2,P1,P1,RY),reactProps(t){return K(I(I({},tc(t.position)),Ho.includePositionSnapAttrs(t.position)),{className:t.isDragging?nc.BEING_DRAGGED_CLASS:""})}}});function QL(){A1.set({mode:"snapToAll"})}function im(){A1.set({mode:"snapToNone"})}function WY(t){A1.set({mode:"snapToSome",positions:t})}function qY(t,i){return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,Object.fromEntries(Object.entries(l.trackData).map(([f,p])=>[f,p.keyframes.filter(v=>i(v,{trackId:f,trackData:p,objectKey:a})).map(v=>v.position)]))]))}var XY,KY,eF,YY,$Y,ZY,JY,QY,C1,A1,tF,am=P(()=>{XY=Ut(),KY=Ut(),eF=J(Fe()),ht(),GY(),$Y=_e.div(YY||(YY=Y([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),nc.CSS,nc.CSS_WHEN_SOMETHING_DRAGGING),JY=_e.div(ZY||(ZY=Y([`
  position: absolute;
`]))),QY=t=>eF.default.createElement(JY,{style:{top:"".concat(t.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,KY.val)(t.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(t.position,"px))")}},eF.default.createElement($Y,I({},nc.reactProps({isDragging:!1,position:t.position})))),C1=QY,A1=new XY.Atom({mode:"snapToNone"}),tF=A1.prism});function yge(t,i){let a=(0,om.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(f){if(f.target instanceof HTMLInputElement||f.shiftKey||f.altKey||f.ctrlKey||f.metaKey||f.composedPath().some(D=>D instanceof HTMLElement&&D.draggable===!0))return!1;let p=f.clientX-i.getBoundingClientRect().left,v=pi((0,Vi.val)(t.clippedSpace.toUnitSpace)(p),0,1/0),_=(0,Vi.val)(t.seeker.setIsSeeking),x=(0,Vi.val)(t.sheet).getSequence();x.position=v;let w=v,A=(0,Vi.val)(t.scaledSpace.toUnitSpace);return _(!0),QL(),{onDrag(D,R,C){let F=A(D),N=pi(w+F,0,x.length),B=Ho.checkIfMouseEventSnapToPos(C,{});B!=null&&(N=B),x.position=N},onDragEnd(){_(!1),im()}}}}),[t,i]),[l]=ji(i,a);dl(l,"draggingPositionInSequenceEditor","ew-resize")}function bge(t,i){let a=CY();(0,om.useLayoutEffect)(()=>{if(!i)return;let l=p=>{if(p.ctrlKey){p.preventDefault(),p.stopPropagation();let v=p.clientX-i.getBoundingClientRect().left,_=(0,Vi.val)(t.clippedSpace.toUnitSpace)(v),x=(0,Vi.val)(t.clippedSpace.range),w=1+nF(p.deltaY,[-50,50])*.03,A=Ou(x,C=>(C-_)*w+_),D=(0,Vi.val)(t.sheet).getSequence().length,R=D+D*.25;(0,Vi.val)(t.clippedSpace.setRange)(xge(A,[0,R]));return}else if(p.shiftKey){p.preventDefault(),p.stopPropagation();let v=(0,Vi.val)(t.sheet).getSequence().length,_=(0,Vi.val)(t.clippedSpace.range),x=(_.end-_.start)/v,w=nF(p.deltaY||p.deltaX,[-50,50])*.05*x,A=Ou(_,D=>D+w);(0,Vi.val)(t.clippedSpace.setRange)(A);return}else{a(p),p.preventDefault(),p.stopPropagation();let v=(0,Vi.val)(t.scaledSpace.toUnitSpace)(p.deltaX*1),_=(0,Vi.val)(t.clippedSpace.range),x=Ou(_,w=>w+v);(0,Vi.val)(t.clippedSpace.setRange)(x);return}},f={capture:!0,passive:!1};return i.addEventListener("wheel",l,f),()=>{i.removeEventListener("wheel",l,f)}},[i,t]),ji(i,(0,om.useMemo)(()=>({onDragStart(l){let f=(0,Vi.val)(t.clippedSpace.range),p=(0,Vi.val)(t.clippedSpace.setRange),v=(0,Vi.val)(t.scaledSpace.toUnitSpace);return l.preventDefault(),l.stopPropagation(),{onDrag(_,x,w,A,D){a({deltaY:-D});let R=-v(_),C=Ou(f,F=>F+R);p(C)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[t]))}function nF(t,[i,a]){return Math.max(Math.min(t,a),i)}function xge(t,i){return Ou(t,a=>nF(a,i))}function Sge(t,i){(0,om.useLayoutEffect)(()=>{if(!i)return;let a=(0,Vi.prism)(()=>{let v=(0,Vi.val)(t.clippedSpace.range);return(0,Vi.val)(t.scaledSpace.fromUnitSpace)(v.start)}),l=()=>{let v=a.getValue();i.scrollLeft=v},f=a.onStale(l);l();let p=setTimeout(l,100);return()=>{clearTimeout(p),f()}},[t,i])}var Vi,om,e$,t$,n$,rF,r$=P(()=>{ya(),Hr(),bn(),Vi=Ut(),aa(),om=J(Fe()),ht(),IY(),Gr(),Ns(),ru(),am(),t$=_e.div(e$||(e$=Y([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),zr),n$=om.default.memo(({layoutP:t,children:i,height:a})=>{let{width:l,unitSpaceToScaledSpaceMultiplier:f}=ur(()=>({width:(0,Vi.val)(t.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Vi.val)(t.scaledSpace.fromUnitSpace)(1)}),[t]),[p,v]=Dr(null);return bge(t,v),yge(t,v),Sge(t,v),om.default.createElement(t$,{ref:p,style:{width:l+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":f}},i)}),rF=n$}),TA,i$,a$,o$,s$,l$,u$,c$,zv,MA=P(()=>{TA=J(Fe()),ht(),a$=_e.li(i$||(i$=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),s$=_e.div(o$||(o$=Y([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),t=>t.isEven?"transparent":"#6b8fb505"),u$=_e.ul(l$||(l$=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),c$=({leaf:t,children:i,node:a,isCollapsed:l})=>{let f=Array.isArray(i)&&i.length>0;return t.shouldRender?TA.default.createElement(a$,null,TA.default.createElement(s$,{style:{height:t.nodeHeight+"px"},isEven:t.n%2===0},a),f&&TA.default.createElement(u$,null,i)):null},zv=c$}),wge=ae((t,i)=>{(function(){var a=this,l={};typeof t<"u"?i.exports=l:a.fuzzy=l,l.simpleFilter=function(f,p){return p.filter(function(v){return l.test(f,v)})},l.test=function(f,p){return l.match(f,p)!==null},l.match=function(f,p,v){v=v||{};var _=0,x=[],w=p.length,A=0,D=0,R=v.pre||"",C=v.post||"",F=v.caseSensitive&&p||p.toLowerCase(),N;f=v.caseSensitive&&f||f.toLowerCase();for(var B=0;B<w;B++)N=p[B],F[B]===f[_]?(N=R+N+C,_+=1,D+=1+D):D=0,A+=D,x[x.length]=N;return _===f.length?(A=F===f?1/0:A,{rendered:x.join(""),score:A}):null},l.filter=function(f,p,v){return!p||p.length===0?[]:typeof f!="string"?p:(v=v||{},p.reduce(function(_,x,w,A){var D=x;v.extract&&(D=v.extract(x));var R=l.match(f,D,v);return R!=null&&(_[_.length]={string:R.rendered,score:R.score,index:w,original:x}),_},[]).sort(function(_,x){var w=x.score-_.score;return w||_.index-x.index}))}})()});function Ege(t,i){let[a,l]=(0,PA.useState)(!1),f=(0,PA.useRef)(i);return a||(f.current=i),(0,PA.useMemo)(()=>t(l),f.current)}var PA,Tge=P(()=>{PA=J(Fe())}),iF,nh,CA=P(()=>{iF="rgba(26, 28, 30, 0.97);",nh="#272B2F"});function d$(t,i,a,l){let f=Ege(p=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return p(!0),{onDrag(v,_){t&&a.onCurveChange(l(v,_))},onDragEnd(v){p(!1),a.onCancelCurveChange()}}}}),[t,a.onCurveChange,a.onCancelCurveChange]);ji(i,f)}var Ur,AA,k1,jv,f$,I1,h$,kA,p$,m$,g$,Vv,v$,sm,_$,y$,aF,b$,IA,x$,oF,S$,w$,Mge=P(()=>{Ur=J(Fe()),ya(),Hr(),Cp(),ht(),Gr(),Tge(),CA(),AA=.12,k1=1+AA*2,jv=.01,f$=8,I1=(1-jv)/(f$-1),h$="#3EAAA4",kA="#3EAAA4",p$="#3EAAA4",m$="#3EAAA4",g$="#3EAAA4",Vv="#3EAAA4",v$="#3EAAA4",sm="#B3B3B3",_$="#3eaaa4",y$="#67dfd8",aF=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],IA=_e.circle(b$||(b$=Y([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),_$),oF=_e.circle(x$||(x$=Y([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),zr,IA,y$),S$=t=>{let{curveConnection:{left:i,right:a},backgroundConnections:l}=t,f=Math.min(0,1-a.handles[1],1-i.handles[3]),p=Math.max(1,1-a.handles[1],1-i.handles[3]),v=Math.max(1,p-f),_=j=>(j-f)/v,[x,w]=Dr(null),A=k1/(w?.clientWidth||1),D=k1/(w?.clientHeight||1),[R,C]=Dr(null);d$(w,C,t,(j,W)=>{let $=pi(i.handles[2]+j*A,0,1),re=i.handles[3]-W*D;return[$,re,a.handles[0],a.handles[1]]});let[F,N]=Dr(null);d$(w,N,t,(j,W)=>{let $=pi(a.handles[0]+j*A,0,1),re=a.handles[1]-W*D;return[i.handles[2],i.handles[3],$,re]});let B=j=>"M0 ".concat(_(1)," C").concat(j.left.handles[2]," ").concat(_(1-j.left.handles[3])," ").concat(j.right.handles[0]," ").concat(_(1-j.right.handles[1])," 1 ").concat(_(0));return Ur.default.createElement("svg",{height:"100%",width:"100%",ref:x,viewBox:"".concat(-AA," ").concat(-AA," ").concat(k1," ").concat(k1),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},Ur.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},Ur.default.createElement("stop",{offset:_(-1),stopColor:v$}),Ur.default.createElement("stop",{offset:_(0),stopColor:Vv}),Ur.default.createElement("stop",{offset:_(.3),stopColor:g$}),Ur.default.createElement("stop",{offset:_(.5),stopColor:m$}),Ur.default.createElement("stop",{offset:_(.7),stopColor:p$}),Ur.default.createElement("stop",{offset:_(1),stopColor:kA}),Ur.default.createElement("stop",{offset:_(2),stopColor:h$})),Ur.default.createElement("pattern",{id:"dot-background-pattern-1",width:I1,height:I1/v,y:-f/v},Ur.default.createElement("rect",{width:jv,height:jv,fill:sm,opacity:.3})),Ur.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),Ur.default.createElement("pattern",{id:"dot-background-pattern-2",width:I1,height:I1},Ur.default.createElement("rect",{width:jv,height:jv,fill:sm})),Ur.default.createElement("rect",{x:0,y:_(0),width:"1",height:_(1)-_(0),fill:"url(#dot-background-pattern-2)"}),!i.type||i.type==="bezier"?Ur.default.createElement(Ur.default.Fragment,null,Ur.default.createElement("line",{x1:0,y1:_(1),x2:i.handles[2],y2:_(1-i.handles[3]),stroke:sm,strokeWidth:"0.01"}),Ur.default.createElement("line",{x1:1,y1:_(0),x2:a.handles[0],y2:_(1-a.handles[1]),stroke:sm,strokeWidth:"0.01"}),Ur.default.createElement("path",{d:B(t.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),l.map((j,W)=>Ur.default.createElement("path",{key:j.objectKey+"/"+j.left.id,d:B(j),stroke:aF[W%aF.length],opacity:.6,strokeWidth:"0.01"})),Ur.default.createElement("path",{d:B(t.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),Ur.default.createElement("circle",{cx:0,cy:_(1),r:"0.025",stroke:kA,strokeWidth:"0.02",fill:nh}),Ur.default.createElement("circle",{cx:1,cy:_(0),r:"0.025",stroke:Vv,strokeWidth:"0.02",fill:nh}),Ur.default.createElement(oF,{ref:R,cx:i.handles[2],cy:_(1-i.handles[3]),fill:kA,opacity:.2}),Ur.default.createElement(IA,{cx:i.handles[2],cy:_(1-i.handles[3])}),Ur.default.createElement(oF,{ref:F,cx:a.handles[0],cy:_(1-a.handles[1]),fill:Vv,opacity:.2}),Ur.default.createElement(IA,{cx:a.handles[0],cy:_(1-a.handles[1])})):Ur.default.createElement(Ur.default.Fragment,null,Ur.default.createElement("line",{x1:0,y1:_(1),x2:1,y2:_(1),stroke:sm,strokeWidth:"0.01"}),Ur.default.createElement("line",{x1:1,y1:_(1),x2:1,y2:0,stroke:sm,strokeWidth:"0.01"}),Ur.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:Vv,strokeWidth:"0.02",fill:nh}),Ur.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:Vv,strokeWidth:"0.02",fill:nh})))},w$=S$});function RA(t){return t.map(i=>i.toFixed(3)).join(", ")}function DA(t){if(!t||t?.length>E$)return null;let i=t.split(",");if(i.length!==4)return null;let a=i.map(l=>Number(l.trim()));return!a.every(l=>isFinite(l))||a[0]<0||a[0]>1||a[2]<0||a[2]>1?null:a}function Pge(t,i,a={threshold:.02}){if(!t||!i)return!1;let l=0;for(let f=0;f<4;f++)l+=Math.abs(t[f]-i[f]);return l<a.threshold}var E$,OA,T$=P(()=>{E$=128,OA=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),bo,NA,lm,sF,M$,P$,R1,lF,uF,C$,A$,Cge=P(()=>{bo=J(Fe()),NA=.75,lm=.1,sF=1+NA*2,M$="#F5F5F5",P$="#888888",R1="#4f4f4f",lF="rgba(255, 255, 255, 0.1)",uF=t=>1-t,C$=t=>{let{easing:i,isSelected:a}=t,l=a?M$:P$,f="".concat(-NA," ").concat(-NA," ").concat(sF," ").concat(sF);if(i){let p=[i[0],uF(i[1])],v=[i[2],uF(i[3])];return bo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},bo.default.createElement("line",{x1:"0",y1:"1",x2:p[0],y2:p[1],stroke:R1,strokeWidth:"0.1"}),bo.default.createElement("line",{x1:"1",y1:"0",x2:v[0],y2:v[1],stroke:R1,strokeWidth:"0.1"}),bo.default.createElement("circle",{cx:p[0],cy:p[1],r:.1,fill:lF}),bo.default.createElement("circle",{cx:v[0],cy:v[1],r:.1,fill:lF}),bo.default.createElement("circle",{cx:p[0],cy:p[1],r:lm,fill:R1}),bo.default.createElement("circle",{cx:v[0],cy:v[1],r:lm,fill:R1}),bo.default.createElement("path",{d:"M0 1 C".concat(p[0]," ").concat(p[1]," ").concat(v[0],` 
        `).concat(v[1]," 1 0"),stroke:l,strokeWidth:"0.08"}),bo.default.createElement("circle",{cx:0,cy:1,r:lm,fill:l}),bo.default.createElement("circle",{cx:1,cy:0,r:lm,fill:l}))}return bo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},bo.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:l,strokeWidth:"0.08"}),bo.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:l,strokeWidth:"0.08"}),bo.default.createElement("circle",{cx:0,cy:1,r:lm,fill:l}),bo.default.createElement("circle",{cx:1,cy:0,r:lm,fill:l}))},A$=C$}),D1,k$,I$,R$,D$,O$,N$,L$,Age=P(()=>{h1(),D1=J(Fe()),ht(),T$(),Cge(),hC(),CA(),Yu(),R$=_e.div(I$||(I$=Y([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),nh,({isSelected:t})=>t&&$a(k$||(k$=Y([`
      background-color: #383d42;
    `])))),O$=_e(Ku)(D$||(D$=Y([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),N$=D1.default.forwardRef((t,i)=>{let[a,l]=Rv({enabled:!0,verticalPlacement:t.tooltipPlacement,verticalGap:0},()=>D1.default.createElement(O$,{showPopoverEdgeTriangle:!1},t.easing.label));return D1.default.createElement(R$,I({ref:fC([l,i])},t),a,D1.default.createElement(A$,{easing:DA(t.easing.value),isSelected:t.isSelected}))}),L$=N$});function kge(t){var i;let[a,l]=(0,F$.useState)(null),f=v=>{if(a===null){t.items.length>0&&l(0);return}let _=a+v*t.uiColumns,x=_<0,w=_>t.items.length-1;if(x||w){if(t.canVerticleExit&&t.canVerticleExit(x?"top":"bottom")){l(null);return}return}l(_)},p=v=>{a===null?l(Oge(v,t.items.length)):a+v<0?l(null):l(Math.min(a+v,t.items.length-1))};return{focusFirstItem(){l(0)},onParentEltKeyDown:v=>{if(v.key==="ArrowRight")p(1);else if(v.key==="ArrowLeft")p(-1);else if(v.key==="ArrowUp")f(-1);else if(v.key==="ArrowDown")f(1);else return 0;return 1},gridItems:t.items.map((v,_)=>t.renderItem({isSelected:_===a,item:v,select(x){l(_),t.onSelectItem(v)===1&&(x?.preventDefault(),x?.stopPropagation())}})),currentSelection:(i=t.items[a??-1])!=null?i:null}}var F$,Ige=P(()=>{F$=J(Fe()),FA()});function U$(t,i,a){var l;(l=t.current)==null||l.discard(),t.current=null;let f=DA(a);f===null?t.current=Dge(i):t.current=Rge(i,f)}function B$(t){var i;(i=t.current)==null||i.discard(),t.current=null}function Rge(t,i){return pe().tempTransaction(({stateEditors:a})=>{let{setHandlesForKeyframe:l,setKeyframeType:f}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:p,sheetId:v,objectKey:_,trackId:x,left:w,right:A}of t)l({projectId:p,sheetId:v,objectKey:_,trackId:x,keyframeId:w.id,start:[i[0],i[1]]}),l({projectId:p,sheetId:v,objectKey:_,trackId:x,keyframeId:A.id,end:[i[2],i[3]]}),f({projectId:p,sheetId:v,objectKey:_,trackId:x,keyframeId:w.id,keyframeType:"bezier"})})}function Dge(t){return pe().tempTransaction(({stateEditors:i})=>{let{setKeyframeType:a}=i.coreByProject.historic.sheetsById.sequence;for(let{projectId:l,sheetId:f,objectKey:p,trackId:v,left:_}of t)a({projectId:l,sheetId:f,objectKey:p,trackId:v,keyframeId:_.id,keyframeType:"hold"})})}function Oge(t,i){return(t%i+i)%i}function Nge(t,i){return()=>setTimeout(t,i)}function Lge({left:t,right:i}){return({left:a,right:l})=>t.handles[2]!==a.handles[2]||t.handles[3]!==a.handles[3]||i.handles[0]!==l.handles[0]||i.handles[1]!==l.handles[1]}var LA,ki,z$,cF,dF,j$,V$,H$,G$,W$,q$,X$,K$,Y$,$$,Z$,J$,fF,Fge,hF,Q$,FA=P(()=>{LA=Ut(),ki=J(Fe()),ht(),z$=J(wge()),Ue(),Mge(),Age(),T$(),CA(),Hr(),Ige(),cF=3,dF=53,j$=25,H$=_e.div(V$||(V$=Y([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),iF,cF*dF),W$=_e.div(G$||(G$=Y([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),cF),X$=_e.input.attrs({type:"text"})(q$||(q$=Y([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),nh),Y$=_e.div(K$||(K$=Y([`
  grid-area: tween;
  background: `,`;
`])),nh),Z$=_e.div($$||($$=Y([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),J$=t=>{let i=(0,ki.useMemo)(()=>[t.curveConnection,...t.additionalConnections],[t.curveConnection,...t.additionalConnections]),a=(0,ki.useRef)(null);(0,ki.useEffect)(()=>{let de=Q$(i);return()=>{var Le;de(),(Le=a.current)==null||Le.commit()}},[a]);let l=[t.curveConnection.left.handles[2],t.curveConnection.left.handles[3],t.curveConnection.right.handles[0],t.curveConnection.right.handles[1]],f=(0,ki.useRef)(null);(0,ki.useLayoutEffect)(()=>{var de,Le;(de=f.current)==null||de.select(),(Le=f.current)==null||Le.focus()},[f.current]);let[p,v]=(0,ki.useState)(RA(l)),_=de=>{de!==void 0&&(A(1),v(de.target.value),DA(de.target.value)&&R(de.target.value))},x=de=>{var Le,Z;A(1),(de.key==="ArrowDown"||de.key==="ArrowUp")&&de.preventDefault(),de.key==="ArrowDown"?(et.focusFirstItem(),(Z=(Le=ce.current[j[0].label])==null?void 0:Le.current)==null||Z.focus()):de.key==="Escape"?(B$(a),t.onRequestClose("key Escape")):de.key==="Enter"&&t.onRequestClose("key Enter")},[w,A]=(0,ki.useState)(0);(0,ki.useEffect)(()=>{w===2?v(RA(l)):w===3&&p!==""&&v("")},i);let[D,R]=(0,ki.useState)(RA(l)),[C,F]=(0,ki.useState)(null);(0,ki.useEffect)(()=>{var de;w!==0&&w!==3&&U$(a,i,(de=C??D)!=null?de:"")},[C,D,w]),i.some(Lge(t.curveConnection))&&w===0&&A(3);let N=de=>{var Le,Z;A(2);let Ge=RA(de);v(Ge),R(Ge),(Le=f.current)==null||Le.select(),(Z=f.current)==null||Z.focus()},B=()=>{},j=(0,ki.useMemo)(()=>/^[A-Za-z]/.test(p)?z$.default.filter(p,OA,{extract:de=>de.label}).map(de=>de.original):OA,[p]);(0,ki.useEffect)(()=>{w===1&&j[0]&&R(j[0].value)},[j]);let W=de=>{de.key==="Escape"?(B$(a),t.onRequestClose("key Escape"),de.stopPropagation()):de.key==="Enter"&&(t.onRequestClose("key Enter"),de.stopPropagation())},$=de=>{w===0&&A(2),F(de.value)},re=()=>F(null),ne=de=>(U$(a,i,de.value),t.onRequestClose("selected easing option"),1),ce=(0,ki.useRef)(OA.reduce((de,Le)=>(de[Le.label]={current:null},de),{})),[Te,Ie]=Dr(null),[ye,Ne]=(0,ki.useState)(0);(0,ki.useEffect)(()=>{let de=()=>{var Le;Ne((Le=Ie?.scrollTop)!=null?Le:0)};return Ie?.addEventListener("scroll",de),()=>Ie?.removeEventListener("scroll",de)},[Ie]);let et=kge({items:j,uiColumns:3,onSelectItem:ne,canVerticleExit(de){var Le,Z;return de==="top"?((Le=f.current)==null||Le.select(),(Z=f.current)==null||Z.focus(),1):0},renderItem:({item:de,select:Le})=>{var Z,Ge;return ki.default.createElement(L$,{key:de.label,easing:de,tabIndex:0,onKeyDown:W,ref:ce.current[de.label],onMouseOver:()=>$(de),onMouseOut:re,onClick:Le,tooltipPlacement:((Ge=(Z=ce.current[de.label].current)==null?void 0:Z.offsetTop)!=null?Ge:0)-(ye??0)<dF+j$?"bottom":"top",isSelected:Pge(l,DA(de.value))})}});return(0,ki.useLayoutEffect)(()=>{var de,Le;if(et.currentSelection!==null&&document.activeElement!==f.current){let Z=(Le=(de=ce.current)==null?void 0:de[et.currentSelection.label])==null?void 0:Le.current;Z?.focus(),R(et.currentSelection.value),/^[A-Za-z]/.test(p)||v(et.currentSelection.value)}},[et.currentSelection]),ki.default.createElement(H$,null,ki.default.createElement(X$,{value:p,placeholder:w===3?"Multiple easings selected":"Search presets...",onPaste:Nge(_),onChange:_,ref:f,onKeyDown:x}),ki.default.createElement(W$,{ref:Te,onKeyDown:de=>et.onParentEltKeyDown(de)},et.gridItems,et.gridItems.length===0?ki.default.createElement(Z$,null,"No results found"):void 0),ki.default.createElement(Y$,{onClick:()=>{var de;return(de=f.current)==null?void 0:de.focus()}},ki.default.createElement(w$,{curveConnection:t.curveConnection,backgroundConnections:t.additionalConnections,onCurveChange:N,onCancelCurveChange:B})))},fF=J$,{isCurveEditorOpenD:Fge,isConnectionEditingInCurvePopover:hF,getLock:Q$}=(()=>{let t=new LA.Atom([]);return{getLock(i){return t.set(i),function(){t.set([])}},isCurveEditorOpenD:(0,LA.prism)(()=>t.prism.getValue().length>0),isConnectionEditingInCurvePopover(i){return LA.prism.ensurePrism(),t.prism.getValue().some(({left:a,right:l})=>i.left.id===a.id&&i.right.id===l.id)}}})()});function Uge(t,i){for(let{keyframeId:a}of jge(i))if(t.left.id===a)return!0;return!1}function eZ(t,i,a){return(0,BA.prism)(()=>{if(a===void 0)return[];let l=[];for(let{objectKey:f,trackId:p}of tZ(a)){let v=(0,BA.val)(pe().atomP.historic.coreByProject[t].sheetsById[i].sequence.tracksByObject[f].trackData[p]);v&&(l=l.concat(zge(v.keyframes).filter(_=>Uge(_,a)).map(({left:_,right:x})=>({left:_,right:x,trackId:p,objectKey:f,sheetId:i,projectId:t}))))}return l})}function UA(t,i,a){var l;if(a===void 0)return[];let f=[];for(let{objectKey:v,trackId:_,keyframeIds:x}of tZ(a))f=f.concat((l=pF({projectId:t,sheetId:i,objectKey:v,trackId:_,keyframeIds:x}))!=null?l:[]);let p=vA(f.map(v=>v.pathToProp));return f.map(({keyframe:v,pathToProp:_})=>({keyframe:v,pathToProp:_.slice(p.length)}))}function pF({projectId:t,sheetId:i,objectKey:a,trackId:l,keyframeIds:f}){let p=(0,BA.val)(pe().atomP.historic.coreByProject[t].sheetsById[i].sequence.tracksByObject[a]),v=p?.trackData[l];if(!v)return null;let _=Bge(p?.trackIdByPropPath||{})[l];if(!_)return null;let x=[a,..._A(_)];return f.map(w=>({keyframe:v.keyframes.find(A=>A.id===w),pathToProp:x})).filter(({keyframe:w})=>w!==void 0)}function Bge(t){let i={};for(let[a,l]of Object.entries(t))i[l]=a;return i}function zge(t){return t.map((i,a)=>({left:i,right:t[a+1]})).slice(0,-1)}function jge(t){var i,a,l;let f=[];for(let[p,v]of Object.entries((i=t?.byObjectKey)!=null?i:{}))for(let[_,x]of Object.entries((a=v?.byTrackId)!=null?a:{}))for(let w of Object.keys((l=x?.byKeyframeId)!=null?l:{}))f.push({objectKey:p,trackId:_,keyframeId:w});return f}function tZ(t){var i,a,l;let f=[];for(let[p,v]of Object.entries((i=t?.byObjectKey)!=null?i:{}))for(let[_,x]of Object.entries((a=v?.byTrackId)!=null?a:{}))f.push({objectKey:p,trackId:_,keyframeIds:Object.keys((l=x?.byKeyframeId)!=null?l:{})});return f}var BA,Hv=P(()=>{BA=Ut(),Ue(),ec()});function Vge(t,i){return(0,nZ.useMemo)(()=>Hge(t,i),[])}function Hge(t,i){let a=null,l=v=>pe().tempTransaction(_=>t(_,v));function f(){a?.discard(),a=null}let p={createAsset:i.sheet.project.assetStorage.createAsset,getAssetUrl:v=>v.id?i.sheet.project.assetStorage.getAssetUrl(v.id):void 0};return I({temporarilySetValue(v){f(),a=l(v)},discardTemporaryValue:f,permanentlySetValue(v){f(),l(v).commit()}},p)}var nZ,Gge=P(()=>{Ue(),nZ=J(Fe())});function mF(t){var i;if(t.type==="sheetObject")return ro.default.createElement(ro.default.Fragment,null,ro.default.createElement(zA,{style:{paddingLeft:"".concat(t.indent*jA,"px")}},t.sheetObject.address.objectKey),t.children.map((a,l)=>ro.default.createElement(mF,K(I({key:l},a),{autoFocusInput:t.autoFocusInput&&l===0,indent:t.indent+1}))));if(t.type==="propWithChildren"){let a=(i=t.propConfig.label)!=null?i:nd(t.pathToProp);return ro.default.createElement(ro.default.Fragment,null,ro.default.createElement(zA,{style:{paddingLeft:"".concat(t.indent*jA,"px")}},a),t.children.map((l,f)=>ro.default.createElement(mF,K(I({key:f},l),{autoFocusInput:t.autoFocusInput&&f===0,indent:t.indent+1}))))}else return ro.default.createElement(Wge,K(I({},t),{autoFocusInput:t.autoFocusInput,indent:t.indent}))}function Wge(t){var i;let a=(i=t.propConfig.label)!=null?i:nd(t.pathToProp),l=qge(t);if(t.propConfig.type==="enum")return ro.default.createElement(ro.default.Fragment,null);{let f=WN[t.propConfig.type];return ro.default.createElement(iZ,null,ro.default.createElement(zA,null,ro.default.createElement("span",{style:{paddingLeft:"".concat(t.indent*jA,"px")}},a)),ro.default.createElement(sZ,null,ro.default.createElement(f,{editingTools:l,propConfig:t.propConfig,value:NC(t.keyframe.value,t.propConfig),autoFocus:t.autoFocusInput})))}}function qge(t){let i=t.sheetObject;return Vge(({stateEditors:a},l)=>{let f=K(I({},t.keyframe),{value:l});a.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},i.address),{trackId:t.trackId,keyframes:[f],snappingFunction:i.sheet.getSequence().closestGridPosition}))},i)}var ro,rZ,iZ,aZ,zA,jA,oZ,sZ,Xge=P(()=>{ro=J(Fe()),ht(),WG(),F0(),Gge(),Xf(),iZ=_e.div(rZ||(rZ=Y([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),zA=_e.div(aZ||(aZ=Y([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),jA=10,sZ=_e.div(oZ||(oZ=Y([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function VA(t){return qu({debugName:"useKeyframeInlineEditorPopover"},()=>HA.default.createElement(Ku,{showPopoverEdgeTriangle:!0},HA.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(t)?t.map((i,a)=>HA.default.createElement(mF,K(I({key:a},i),{autoFocusInput:a===0,indent:0}))):void 0)))}var HA,GA=P(()=>{HA=J(Fe()),Xu(),Yu(),Xge()});function Kge(t,i,a){return jo(t,{displayName:"Keyframe",menuItems:()=>{let l=UA(a.leaf.sheetObject.address.projectId,a.leaf.sheetObject.address.sheetId,a.selection);return[{label:l.length>0?"Copy (selection)":"Copy",callback:()=>{l.length>0?pe().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(l)}):pe().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a.keyframe,pathToProp:a.leaf.pathToProp}])})}},{label:a.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{a.selection?a.selection.delete():pe().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},a.leaf.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.leaf.trackId}))})}}]},onOpen(){i._debug("Show keyframe",a)}})}function Yge(t,i,a){let l=(0,rh.useRef)(i);l.current=i;let{onClickFromDrag:f}=a,p=(0,rh.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(_){let x=l.current,w=(0,WA.val)(pe().atomP.historic.coreByProject[x.leaf.sheetObject.address.projectId].sheetsById[x.leaf.sheetObject.address.sheetId].sequence.tracksByObject),A=qY(w,function(F,{trackId:N,objectKey:B}){var j,W;return F.id!==x.keyframe.id&&!(x.selection&&(W=(j=x.selection.byObjectKey[B])==null?void 0:j.byTrackId[N])!=null&&W.byKeyframeId[F.id])});if(WY(A),x.selection){let{selection:F,leaf:N}=x,{sheetObject:B}=N,j=F.getDragHandlers(K(I({},B.address),{domNode:t,positionAtStartOfDrag:x.track.data.keyframes[x.index].position})).onDragStart(_);return j&&K(I({},j),{onClick:f,onDragEnd:(...W)=>{var $;($=j.onDragEnd)==null||$.call(j,...W),im()}})}let D=x,R=(0,WA.val)(D.layoutP.scaledSpace.toUnitSpace),C;return{onDrag(F,N,B){var j;let W=D.track.data.keyframes[D.index],$=Math.max((j=Ho.checkIfMouseEventSnapToPos(B,{ignore:t}))!=null?j:W.position+R(F),0);C?.discard(),C=void 0,C=pe().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},D.leaf.sheetObject.address),{trackId:D.leaf.trackId,keyframes:[K(I({},W),{position:$})],snappingFunction:(0,WA.val)(D.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(F){F?C?.commit():C?.discard(),im()},onClick(F){f(F)}}}}),[f]),[v]=ji(t,p);return Cd(v,i.keyframe.position),dl(v,"draggingPositionInSequenceEditor","ew-resize"),[v]}var rh,WA,O1,gF,N1,vF,lZ,qA,uZ,cZ,dZ,fZ,hZ,pZ,mZ=P(()=>{rh=J(Fe()),ht(),Ue(),Vo(),ya(),Hr(),WA=Ut(),no(),Ns(),ru(),SA(),Wf(),Hv(),Gr(),am(),GA(),Jp(),O1=6,gF=O1+2,N1={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},vF=({isSelected:t,isInlineEditorPopoverOpen:i})=>t&&i?N1.inlineEditorOpenColor:t?N1.selectedColor:i?N1.selectedAndInlineEditorOpenColor:N1.normalColor,qA=_e.div(lZ||(lZ=Y([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),pl(O1),t=>vF(t),t=>t.flag===2?"outline: 2px solid white;":""),cZ=_e.div(uZ||(uZ=Y([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),pl(O1*1.5),t=>vF(t),t=>t.flag===2?"outline: 2px solid white;":""),fZ=_e.div(dZ||(dZ=Y([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),pl(12),zr,qA,t=>t.isInlineEditorPopoverOpen?pl(gF):"",qA,pl(gF)),hZ=t=>{let i=Gf("SingleKeyframeDot",t.keyframe.id),a=Zp(t.itemKey),[l,f]=Dr(null),[p]=Kge(f,i,t),{node:v,toggle:_,isOpen:x}=VA([{type:"primitiveProp",keyframe:t.keyframe,pathToProp:t.leaf.pathToProp,propConfig:t.leaf.propConf,sheetObject:t.leaf.sheetObject,trackId:t.leaf.trackId}]);Yge(f,t,{onClickFromDrag(A){_(A,l.current)}});let w=!t.keyframe.type||t.keyframe.type==="bezier";return rh.default.createElement(rh.default.Fragment,null,rh.default.createElement(fZ,I({ref:l,isInlineEditorPopoverOpen:x},a.attrs)),w?rh.default.createElement(qA,{isSelected:!!t.selection,isInlineEditorPopoverOpen:x,flag:a.flag}):rh.default.createElement(cZ,{isSelected:!!t.selection,isInlineEditorPopoverOpen:x,flag:a.flag}),v,p)},pZ=hZ}),_F,yF,bF,um,gZ,vZ,xF,_Z=P(()=>{Os(),_F=J(Fe()),ht(),mZ(),yF=O1/2+1,bF=1e3,um={normalColor:"#365b59",selectedColor:"#8A7842",barColor:t=>{let i=t.isSelected?um.selectedColor:um.normalColor;return t.isPopoverOpen?JP(.2,lv(.2,i)):i},hoverColor:t=>{let i=t.isSelected?um.selectedColor:um.normalColor;return t.isPopoverOpen?JP(.2,lv(.2,i)):JP(.1,lv(.1,i))}},vZ=_e.div(gZ||(gZ=Y([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),um.barColor,yF,bF,yF/2,um.hoverColor),xF=_F.default.forwardRef((t,i)=>{let a={isPopoverOpen:t.isPopoverOpen,isSelected:t.isSelected};return _F.default.createElement(vZ,K(I({},a),{ref:i,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(t.connectorLengthInUnitSpace/bF,"))")},onClick:l=>{var f;(f=t.openPopover)==null||f.call(t,l)}}),t.children)})});function $ge(t,i){let a=(0,SF.useRef)(i);a.current=i;let l=(0,SF.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let p=a.current,v;if(p.selection){let{selection:A,leaf:D}=p,{sheetObject:R}=D;return A.getDragHandlers(K(I({},R.address),{domNode:t,positionAtStartOfDrag:p.track.data.keyframes[p.index].position})).onDragStart(f)}let _=p,x=(0,XA.val)(_.layoutP.sheet).getSequence(),w=(0,XA.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(A,D,R){let C=w(A);v&&(v.discard(),v=void 0),v=pe().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.transformKeyframes(K(I({},_.leaf.sheetObject.address),{trackId:_.leaf.trackId,keyframeIds:[_.keyframe.id,_.track.data.keyframes[_.index+1].id],translate:C,scale:1,origin:0,snappingFunction:x.closestGridPosition}))})},onDragEnd(A){A?v&&v.commit():v&&v.discard()}}}}),[]);ji(t,l)}function Zge(t,i,a,l){return jo(i,{displayName:"Tween",menuItems:()=>{let f=UA(t.leaf.sheetObject.address.projectId,t.leaf.sheetObject.address.sheetId,t.selection);return[{label:f.length>0?"Copy (selection)":"Copy",callback:()=>{f.length>0?pe().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(f)}):pe().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a,pathToProp:t.leaf.pathToProp},{keyframe:l,pathToProp:t.leaf.pathToProp}])})}},{label:t.selection?"Delete (selection)":"Delete",callback:()=>{t.selection?t.selection.delete():pe().transaction(({stateEditors:p})=>{p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},t.leaf.sheetObject.address),{keyframeIds:[a.id,l.id],trackId:t.leaf.trackId}))})}}]}})}var XA,ih,SF,wF,yZ,bZ,xZ,SZ,wZ,Jge=P(()=>{Ue(),Vo(),ya(),Hr(),XA=Ut(),ih=J(Fe()),SF=J(Fe()),Xu(),Yu(),FA(),_Z(),CA(),bn(),Hv(),Hv(),ht(),wF=5,bZ=_e(Ku)(yZ||(yZ=Y([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),iF),xZ=t=>{let{index:i,track:a}=t,l=a.data.keyframes[i],f=a.data.keyframes[i+1],[p,v]=Dr(null),{node:_,toggle:x,close:w}=qu(()=>{let C=(0,XA.val)(t.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:C.screenX+wF,maxX:C.screenX+C.width-wF}}},()=>ih.default.createElement(wZ,K(I({},t),{closePopover:w}))),[A]=Zge(t,v,l,f);$ge(v,t);let D=f.position-l.position,R={isPopoverOpen:ur(()=>hF(K(I({},t.leaf.sheetObject.address),{trackId:t.leaf.trackId,left:l,right:f})),[t.leaf.sheetObject.address,t.leaf.trackId,l,f]),isSelected:t.selection!==void 0};return ih.default.createElement(ih.default.Fragment,null,ih.default.createElement(xF,K(I({ref:p,connectorLengthInUnitSpace:D},R),{openPopover:C=>{v&&x(C,v)}}),_),A)},SZ=xZ,wZ=ih.default.forwardRef((t,i)=>{let{index:a,track:{data:l},selection:f}=t,p=l.keyframes[a],v=l.keyframes[a+1],_=t.leaf.trackId,x=t.leaf.sheetObject.address,w=ur(()=>eZ(x.projectId,x.sheetId,f).getValue(),[x,f]),A=I({left:p,right:v,trackId:_},x);return ih.default.createElement(bZ,{showPopoverEdgeTriangle:!1,ref:i},ih.default.createElement(fF,{curveConnection:A,additionalConnections:w,onRequestClose:t.closePopover}))})}),EZ,cm,TZ,MZ,PZ,CZ,AZ,Qge=P(()=>{EZ=Ut(),cm=J(Fe()),ht(),Jge(),mZ(),MZ=_e.div(TZ||(TZ=Y([`
  position: absolute;
`]))),PZ=cm.default.createElement(cm.default.Fragment,null),CZ=cm.default.memo(t=>{let{index:i,track:{data:a}}=t,l=a.keyframes[i],f=a.keyframes[i+1],p=l.connectedRight&&!!f;return cm.default.createElement(MZ,{style:{top:"".concat(t.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,EZ.val)(t.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(l.position,"px))")}},cm.default.createElement(pZ,K(I({},t),{itemKey:t.itemKey})),p?cm.default.createElement(SZ,I({},t)):PZ)}),AZ=CZ});function e0e(t,i){return jo(t,{displayName:"Keyframe Track",menuItems:()=>{var a;let l=(a=(0,Gv.val)(pe().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?a:[];return[t0e(i,l)]}})}function t0e(t,i){return{label:"Paste Keyframes",enabled:i.length>0,callback:()=>{var a;let l=(0,Gv.val)(t.layoutP.sheet).getSequence(),f=(a=i[0])==null?void 0:a.pathToProp,p=i.filter(({keyframe:v,pathToProp:_})=>ige(f,_)).map(({keyframe:v,pathToProp:_})=>v);pe().transaction(({stateEditors:v})=>{var _;l.position=l.closestGridPosition(l.position);let x=(_=n0e(p))==null?void 0:_.position;for(let w of p)v.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(K(I({},t.leaf.sheetObject.address),{trackId:t.leaf.trackId,position:l.position+w.position-x,handles:w.handles,value:w.value,snappingFunction:l.closestGridPosition,type:w.type}))})}}}function n0e(t){let i=null;for(let a of t)(i===null||a.position<i.position)&&(i=a);return i}var Gv,Ad,kZ,IZ,EF,RZ,r0e=P(()=>{bn(),Gv=Ut(),Ad=J(Fe()),ht(),Qge(),Vo(),Hr(),Ue(),ec(),am(),Ed(),IZ=_e.div(kZ||(kZ=Y([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),EF=Ad.default.memo(t=>{var i;let{layoutP:a,trackData:l,leaf:f}=t,[p,v]=Dr(null),{selectedKeyframeIds:_,selection:x}=ur(()=>{let $=(0,Gv.val)(a.selectionAtom),re=(0,Gv.val)($.pointer.current.byObjectKey[f.sheetObject.address.objectKey].byTrackId[f.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Gv.val)($.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[a,f.trackId]),[w,A,D]=e0e(v,t),R=pr(tF),C=R.mode==="snapToSome"?(i=R.positions[f.sheetObject.address.objectKey])==null?void 0:i[f.trackId]:[],F=R.mode==="snapToAll",N=(0,Ad.useMemo)(()=>({data:l,id:f.trackId,sheetObject:t.leaf.sheetObject}),[l,f.trackId]),B=l.keyframes.map(($,re)=>Ad.default.createElement(AZ,{key:"keyframe-"+$.id,itemKey:Pa.forTrackKeyframe(f.sheetObject,f.trackId,$.id),keyframe:$,index:re,track:N,layoutP:a,leaf:f,selection:_[$.id]===!0?x:void 0})),j=C.map($=>Ad.default.createElement(C1,{key:"snap-target-"+$,layoutP:a,leaf:f,position:$})),W=F?l.keyframes.map($=>Ad.default.createElement(C1,{key:"additionalSnapTarget-".concat($.id),layoutP:a,leaf:f,position:$.position})):null;return Ad.default.createElement(IZ,{ref:p,style:{background:D?"#444850 ":"unset"}},B,j,Ad.default.createElement(Ad.default.Fragment,null,W),w)}),EF.displayName="BasicKeyframedTrack",RZ=EF}),DZ,L1,OZ,NZ,i0e=P(()=>{Ue(),bn(),DZ=Ut(),L1=J(Fe()),MA(),r0e(),Wf(),OZ=({leaf:t,layoutP:i})=>{let a=Gf("PrimitivePropRow",t.pathToProp.join());return ur(()=>{let{sheetObject:l}=t,{trackId:f}=t,p=(0,DZ.val)(pe().atomP.historic.coreByProject[l.address.projectId].sheetsById[l.address.sheetId].sequence.tracksByObject[l.address.objectKey].trackData[f]);return p?.type!=="BasicKeyframedTrack"?(a.errorDev("trackData type ".concat(p?.type," is not yet supported on the sequence editor")),L1.default.createElement(zv,{leaf:t,isCollapsed:!1,node:L1.default.createElement("div",null)})):L1.default.createElement(zv,{leaf:t,isCollapsed:!1,node:L1.default.createElement(RZ,{layoutP:i,trackData:p,leaf:t})})},[t,i])},NZ=OZ});function a0e(t){return t()}var o0e=P(()=>{});function LZ(t){let{index:i,aggregateKeyframes:a,selection:l}=t;return ur(FZ(t),[i,a,l,t.viewModel])}function FZ(t){let{index:i,aggregateKeyframes:a,selection:l}=t,{projectId:f,sheetId:p}=t.viewModel.type==="sheet"?t.viewModel.sheet.address:t.viewModel.sheetObject.address;return()=>{let v=a[i],_=a[i+1],x=_&&v.keyframes.length===_.keyframes.length&&v.keyframes.every(({track:R},C)=>_.keyframes[C].track===R)?{length:_.position-v.position,selected:v.selected===0&&_.selected===0}:null,w=x?v.keyframes.map(({kf:R,track:C},F)=>K(I({},C.sheetObject.address),{trackId:C.id,left:R,right:_.keyframes[F].kf})):[],A=a0e(()=>{let R=TF.prism.memo("selectedConnections",()=>eZ(f,p,l),[f,p,l]).getValue();return[...w,...R]}),D=w.every(R=>hF(R));return{itemKey:TF.prism.memo("itemKey",()=>t.viewModel.type==="sheet"?Pa.forSheetAggregateKeyframe(t.viewModel.sheet,v.position):t.viewModel.type==="sheetObject"?Pa.forSheetObjectAggregateKeyframe(t.viewModel.sheetObject,v.position):Pa.forCompoundPropAggregateKeyframe(t.viewModel.sheetObject,t.viewModel.pathToProp,v.position),[t.viewModel,v.position]),cur:v,connected:x,isAggregateEditingInCurvePopover:D,allConnections:A}}}var TF,MF=P(()=>{TF=Ut(),Ed(),FA(),bn(),Hv(),o0e()});function s0e(t,i){let a=(0,ml.useRef)(i);a.current=i;let l=(0,ml.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let p=a.current,v,_=p.aggregateKeyframes[p.index].keyframes,{selection:x,viewModel:w}=p,A=w.type==="sheet"?w.sheet.address:w.sheetObject.address;if(x&&p.aggregateKeyframes[p.index].selected===0)return x.getDragHandlers(K(I({},A),{domNode:t,positionAtStartOfDrag:p.aggregateKeyframes[p.index].position})).onDragStart(f);let D=p,R=(0,KA.val)(D.layoutP.sheet).getSequence(),C=(0,KA.val)(D.layoutP.scaledSpace.toUnitSpace);return{onDrag(F,N,B){let j=C(F);v&&(v.discard(),v=void 0),v=pe().tempTransaction(({stateEditors:W})=>{for(let $ of _)W.coreByProject.historic.sheetsById.sequence.transformKeyframes(K(I({},$.track.sheetObject.address),{trackId:$.track.id,keyframeIds:[$.kf.id,$.track.data.keyframes[$.track.data.keyframes.indexOf($.kf)+1].id],translate:j,scale:1,origin:0,snappingFunction:R.closestGridPosition}))})},onDragEnd(F){F?v&&v.commit():v&&v.discard()}}}}),[]);return ji(t,l)}function l0e(t,i){return jo(i,{displayName:"Aggregate Tween",menuItems:()=>{let a=t.utils.allConnections.reduce((_,x)=>{var w;return _.concat((w=pF(K(I({},x),{keyframeIds:[x.left.id,x.right.id]})))!=null?w:[])},[]),l=vA(a.map(_=>_.pathToProp)),f=a.map(({keyframe:_,pathToProp:x})=>({keyframe:_,pathToProp:x.slice(l.length)})),p=t.editorProps.viewModel,v=p.type==="sheet"?p.sheet.address:p.sheetObject.address;return[{label:"Copy",callback:()=>{if(t.editorProps.selection){let _=UA(v.projectId,v.sheetId,t.editorProps.selection);pe().transaction(x=>{x.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}else pe().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}},{label:"Delete",callback:()=>{t.editorProps.selection?t.editorProps.selection.delete():pe().transaction(({stateEditors:_})=>{for(let x of t.utils.allConnections)_.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},v),{objectKey:x.objectKey,keyframeIds:[x.left.id,x.right.id],trackId:x.trackId}))})}}]}})}var KA,ml,PF,UZ,BZ,zZ,jZ,u0e=P(()=>{KA=Ut(),ml=J(Fe()),_Z(),Xu(),Hr(),Ue(),ya(),FA(),MF(),ht(),Yu(),Hv(),Vo(),ec(),PF=5,BZ=_e(Ku)(UZ||(UZ=Y([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),zZ=ml.default.forwardRef((t,i)=>{let{allConnections:a}=LZ(t);return ml.default.createElement(BZ,{showPopoverEdgeTriangle:!1,ref:i},ml.default.createElement(fF,{curveConnection:a[0],additionalConnections:a,onRequestClose:t.closePopover}))}),jZ=t=>{let[i,a]=Dr(null),{editorProps:l}=t,[f]=l0e(t,a),[p]=s0e(a,t.editorProps),{node:v,toggle:_,close:x}=qu(()=>{let D=(0,KA.val)(l.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:D.screenX+PF,maxX:D.screenX+D.width-PF}}},()=>ml.default.createElement(zZ,K(I({},l),{closePopover:x}))),{connected:w,isAggregateEditingInCurvePopover:A}=t.utils;return w||p?ml.default.createElement(ml.default.Fragment,null,ml.default.createElement(xF,{ref:i,connectorLengthInUnitSpace:w?w.length:0,isSelected:w?w.selected:!1,isPopoverOpen:A,openPopover:D=>{a&&_(D,a)}}),v,f):ml.default.createElement(ml.default.Fragment,null)}});function c0e(t){let i={isSelected:t.isSelected,flag:t.flag};return kd.default.createElement(YA,null,t.isAllHere?kd.default.createElement(XZ,I({},i)):kd.default.createElement(KZ,I({},i)))}var kd,CF,VZ,HZ,YA,GZ,WZ,AF,kF,IF,RF,qZ,XZ,KZ,d0e=P(()=>{kd=J(Fe()),ht(),SA(),Gr(),CF=16,VZ=CF+2,YA=_e.div(HZ||(HZ=Y([`
  position: absolute;
  `,`
  z-index: 1;
`])),pl(CF)),WZ=_e.div(GZ||(GZ=Y([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),pl(12),zr,YA,YA,pl(VZ)),AF="#F2C95C",kF="#40AAA4",IF="#45747C",RF=t=>t.isSelected===0?AF:t.isSelected===1?kF:IF,qZ=t=>t.isSelected===0?AF:t.isSelected===1?kF:IF,XZ=t=>kd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kd.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:qZ(t)}),kd.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:RF(t),stroke:t.flag===2?"white":void 0,strokeWidth:t.flag===2?"2px":void 0})),KZ=t=>kd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kd.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:t.flag===2?"white":RF(t),strokeWidth:t.flag===2?"2px":void 0}))});function f0e(t,i){let a=t.children.map(l=>l.type==="propWithChildren"?DF(l,i):YZ(l,i)).filter(OF);return a.length===0?null:{type:"sheetObject",sheetObject:t.sheetObject,children:a}}function DF(t,i){let a=t.children.map(l=>l.type==="propWithChildren"?DF(l,i):YZ(l,i)).filter(OF);return a.length===0?null:{type:"propWithChildren",pathToProp:t.pathToProp,propConfig:t.propConf,children:a}}function YZ(t,i){let a=i.find(l=>l.track.id===t.trackId);return a?{type:"primitiveProp",keyframe:a.kf,pathToProp:t.pathToProp,propConfig:t.propConf,sheetObject:t.sheetObject,trackId:t.trackId}:null}function h0e(t){var i,a,l,f;let{cur:p}=t.utils,v=VA(t.editorProps.viewModel.type==="sheet"?null:t.editorProps.viewModel.type==="sheetObject"?(a=(i=f0e(t.editorProps.viewModel,p.keyframes))==null?void 0:i.children)!=null?a:null:(f=(l=DF(t.editorProps.viewModel,p.keyframes))==null?void 0:l.children)!=null?f:null),_=Zp(t.utils.itemKey);_.useRelations(()=>p.keyframes.map(D=>({affects:D.itemKey,flag:2})),[p.keyframes.map(D=>D.track.id).join("-")]);let[x,w]=Dr(null),[A]=p0e(t,w);return F1.default.createElement(F1.default.Fragment,null,F1.default.createElement(WZ,K(I(I({ref:x},_.attrs),Ho.includePositionSnapAttrs(p.position)),{onClick:D=>t.editorProps.viewModel.type!=="sheet"?v.open(D,x.current):null})),F1.default.createElement(c0e,{flag:_.flag,isAllHere:p.allHere,isSelected:p.selected}),A,v.node)}function p0e(t,i){return jo(i,{displayName:"Aggregate Keyframe",menuItems:()=>{let a=t.editorProps.viewModel,l=t.editorProps.selection;return[{label:l?"Copy (selection)":"Copy",callback:()=>{if(l){let{projectId:f,sheetId:p}=a.type==="sheet"?a.sheet.address:a.sheetObject.address,v=UA(f,p,l);pe().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(v)})}else{let f=t.utils.cur.keyframes.flatMap(x=>{var w;return(w=pF(K(I({},x.track.sheetObject.address),{trackId:x.track.id,keyframeIds:[x.kf.id]})))!=null?w:[]}),p=a.type==="sheet"?[]:a.type==="sheetObject"?[a.sheetObject.address.objectKey]:a.type==="propWithChildren"?[a.sheetObject.address.objectKey,...a.pathToProp]:[],v=vA([p,...f.map(x=>x.pathToProp)]),_=f.map(({keyframe:x,pathToProp:w})=>({keyframe:x,pathToProp:w.slice(v.length)}));pe().transaction(x=>{x.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}}},{label:l?"Delete (selection)":"Delete",callback:()=>{l?l.delete():pe().transaction(({stateEditors:f})=>{for(let p of t.utils.cur.keyframes)f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},p.track.sheetObject.address),{keyframeIds:[p.kf.id],trackId:p.track.id}))})}}]}})}var F1,OF,m0e=P(()=>{F1=J(Fe()),Hr(),Jp(),Vo(),d0e(),Ue(),Hv(),ec(),ru(),GA(),OF=t=>t!==null}),$Z,U1,ZZ,JZ,QZ,eJ,g0e=P(()=>{$Z=Ut(),U1=J(Fe()),ht(),u0e(),MF(),m0e(),JZ=_e.div(ZZ||(ZZ=Y([`
  position: absolute;
`]))),QZ=U1.default.memo(t=>{let i=LZ(t);return U1.default.createElement(JZ,{style:{top:"".concat(t.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,$Z.val)(t.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(i.cur.position,"px))")}},U1.default.createElement(h0e,{editorProps:t,utils:i}),U1.default.createElement(jZ,{editorProps:t,utils:i}))}),eJ=QZ});function v0e(t){let{layoutP:i,aggregatedKeyframes:a,viewModel:l}=t,f=Gf("AggregatedKeyframeTrack"),[p,v]=Dr(null),{selectedPositions:_,selection:x}=_0e(i,a),[w,A,D]=x0e(v,t,()=>f._debug("see aggregatedKeyframes",t.aggregatedKeyframes)),R=(0,gl.useMemo)(()=>[...a.byPosition.entries()].sort(($,re)=>$[0]-re[0]).map(([$,re])=>({position:$,keyframes:re,selected:_.get($),allHere:re.length===a.tracks.length})),[a,_]),C=pr(tF),F=C.mode==="snapToAll",N=C.mode==="snapToSome"?C.positions:rL,B=(0,gl.useMemo)(()=>l.type==="sheet"?hge(l,N):KL(l,N),[N]).map($=>gl.default.createElement(C1,{key:"snap-target-"+$,layoutP:i,leaf:l,position:$})),j=(0,gl.useMemo)(()=>R.map(({position:$,keyframes:re},ne)=>({position:$,editorProps:{index:ne,layoutP:i,viewModel:l,aggregateKeyframes:R,selection:_.has($)?x:void 0}})),[R,l,_]);T0e(v,$=>{var re;return(re=j.find(ne=>ne.position===$))==null?void 0:re.editorProps},{onClickFromDrag($){}});let W=j.map(($,re)=>gl.default.createElement(gl.Fragment,{key:"agg-"+R[re].keyframes[0].kf.id},F&&gl.default.createElement(C1,{layoutP:i,leaf:l,position:$.position}),gl.default.createElement(eJ,I({},$.editorProps))));return gl.default.createElement(iJ,{ref:p,style:{background:D?"#444850 ":"unset"}},W,B,w)}function _0e(t,i){return ur(()=>(0,Wo.val)(y0e(t,i)),[t,i])}function y0e(t,i){return(0,Wo.prism)(()=>{let a=(0,Wo.val)(t.selectionAtom),l=(0,Wo.val)(a.pointer.current);if(!l)return aJ;let f=new Map;for(let[p,v]of i.byPosition){let _=b0e(v,l);_!==void 0&&_!==ZA&&f.set(p,_)}return{selectedPositions:f,selection:(0,Wo.val)(a.pointer.current)}})}function b0e(t,i){var a,l,f;let p;for(let{track:v,kf:_}of t){let x=((f=(l=(a=i.byObjectKey[v.sheetObject.address.objectKey])==null?void 0:a.byTrackId[v.id])==null?void 0:l.byKeyframeId)==null?void 0:f[_.id])===!0;p===void 0?x?p=FF:p=ZA:x?p===ZA&&(p=UF):p===FF&&(p=UF)}return p}function x0e(t,i,a){return jo(t,{onOpen:a,displayName:"Aggregate Keyframe Track",menuItems:()=>{var l;let f=(l=(0,Wo.pointerToPrism)(pe().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?l:[];return[S0e(i,f)]}})}function S0e(t,i){return{label:"Paste Keyframes",enabled:i.length>0,callback:()=>{let a=(0,Wo.val)(t.layoutP.sheet).getSequence();t.viewModel.type==="sheet"?w0e(t.viewModel,i,a):E0e(t.viewModel,i,a)}}}function w0e(t,i,a){var l;let{projectId:f,sheetId:p,sheetInstanceId:v}=t.sheet.address;if(i.every(({pathToProp:_})=>_.length===0))for(let _ of t.children.map(x=>x.sheetObject)){let x=(0,Wo.pointerToPrism)(pe().atomP.historic.coreByProject[f].sheetsById[p].sequence.tracksByObject[_.address.objectKey]).getValue(),w=Object.keys((l=x?.trackData)!=null?l:{});NF(_.address,w,i,a)}else{let _=(0,Wo.pointerToPrism)(pe().atomP.historic.coreByProject[f].sheetsById[p].sequence.tracksByObject).getValue(),x=i.map(({keyframe:w,pathToProp:A})=>{var D,R;let C=A[0],F=A.slice(1),N=Qu([...F]),B=((R=(D=_?.[C])==null?void 0:D.trackIdByPropPath)!=null?R:{})[N];return B?{keyframe:w,trackId:B,address:{objectKey:C,projectId:f,sheetId:p,sheetInstanceId:v}}:null}).filter(w=>w!==null);tJ(x,a)}}function E0e(t,i,a){var l;let{projectId:f,sheetId:p,objectKey:v}=t.sheetObject.address,_=(0,Wo.pointerToPrism)(pe().atomP.historic.coreByProject[f].sheetsById[p].sequence.tracksByObject[v]).getValue();if(i.every(({pathToProp:x})=>x.length===0)){let x=Object.keys((l=_?.trackData)!=null?l:{});if(t.type==="sheetObject")NF(t.sheetObject.address,x,i,a);else{let w=_?.trackIdByPropPath||{},A=Object.entries(w).filter(([D,R])=>R!==void 0&&rge(_A(D),t.pathToProp)).map(([D,R])=>R);NF(t.sheetObject.address,A,i,a)}}else{let x=_?.trackIdByPropPath||{},w=t.type==="propWithChildren"?t.pathToProp:[],A=i.map(({keyframe:D,pathToProp:R})=>{let C=Qu([...w,...R]),F=x[C];return F?{keyframe:D,trackId:F,address:t.sheetObject.address}:null}).filter(D=>D!==null);tJ(A,a)}}function NF(t,i,a,l){var f;l.position=l.closestGridPosition(l.position);let p=(f=nJ(a.map(({keyframe:v})=>v)))==null?void 0:f.position;pe().transaction(({stateEditors:v})=>{for(let _ of i)for(let{keyframe:x}of a)v.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(K(I({},t),{trackId:_,position:l.position+x.position-p,handles:x.handles,value:x.value,snappingFunction:l.closestGridPosition,type:x.type}))})}function tJ(t,i){var a;i.position=i.closestGridPosition(i.position);let l=(a=nJ(t.map(({keyframe:f})=>f)))==null?void 0:a.position;pe().transaction(({stateEditors:f})=>{for(let{keyframe:p,trackId:v,address:_}of t)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(K(I({},_),{trackId:v,position:i.position+p.position-l,handles:p.handles,value:p.value,snappingFunction:i.closestGridPosition,type:p.type}))})}function nJ(t){let i=null;for(let a of t)(i===null||a.position<i.position)&&(i=a);return i}function T0e(t,i,a){let l=Gf("useDragForAggregateKeyframeDot"),f=UY(),p=(0,gl.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(_){l._debug("onDragStart",{target:_.target});let x=Number(_.target.dataset.pos),w=i(x);if(!w)return l._debug("no props found for ",{positionToFind:x}),!1;f(!0,x);let A=(0,Wo.prism)(FZ(w)).getValue().cur.keyframes,D=w.viewModel.type==="sheet"?w.viewModel.sheet.address:w.viewModel.sheetObject.address,R=(0,Wo.val)(pe().atomP.historic.coreByProject[D.projectId].sheetsById[D.sheetId].sequence.tracksByObject),C=qY(R,function(j,{trackId:W,objectKey:$}){var re,ne;return A.every(ce=>j.id!==ce.kf.id)&&!(w.selection&&(ne=(re=w.selection.byObjectKey[$])==null?void 0:re.byTrackId[W])!=null&&ne.byKeyframeId[j.id])});if(WY(C),w.selection&&w.aggregateKeyframes[w.index].selected===0){let{selection:j,viewModel:W}=w,$=j.getDragHandlers(K(I({},D),{domNode:t,positionAtStartOfDrag:A[0].kf.position})).onDragStart(_);return $&&K(I({},$),{onClick:a.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=$.onDragEnd)==null||ne.call($,...re),im()}})}let F=w,N=(0,Wo.val)(F.layoutP.scaledSpace.toUnitSpace),B;return{onDrag(j,W,$){var re;let ne=Math.max((re=Ho.checkIfMouseEventSnapToPos($,{}))!=null?re:A[0].kf.position+N(j),0);f(!0,ne),B?.discard(),B=void 0,B=pe().tempTransaction(({stateEditors:ce})=>{for(let Te of A){let Ie=Te.kf;ce.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},Te.track.sheetObject.address),{trackId:Te.track.id,keyframes:[K(I({},Ie),{position:ne})],snappingFunction:(0,Wo.val)(F.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(j){f(!1,-1),j?B?.commit():(B?.discard(),a.onClickFromDrag(_)),im()},onClick(j){a.onClickFromDrag(j)}}}}),[i,a.onClickFromDrag]),[v]=ji(t,p);return dl(v,"draggingPositionInSequenceEditor","ew-resize"),[v]}var Wo,gl,rJ,iJ,aJ,oJ,$A,LF,FF,UF,ZA,BF=P(()=>{bn(),Wo=Ut(),gl=J(Fe()),ht(),Vo(),Hr(),g0e(),Uv(),Wf(),MF(),ru(),ya(),no(),Ns(),Ue(),ec(),am(),KW(),am(),Uv(),iJ=_e.div(rJ||(rJ=Y([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),aJ=Object.freeze({selectedPositions:new Map,selection:void 0}),oJ=gl.default.memo(v0e),$A=oJ,LF=(t=>(t[t.AllSelected=0]="AllSelected",t[t.AtLeastOneUnselected=1]="AtLeastOneUnselected",t[t.NoneSelected=2]="NoneSelected",t))(LF||{}),{AllSelected:FF,AtLeastOneUnselected:UF,NoneSelected:ZA}=LF}),Wv,zF,sJ,M0e=P(()=>{bn(),Wv=J(Fe()),i0e(),MA(),BF(),Uv(),Wf(),zF=(t,i)=>t.type==="propWithChildren"?Wv.default.createElement(sJ,{layoutP:i,viewModel:t,key:"prop"+t.pathToProp[t.pathToProp.length-1]}):Wv.default.createElement(NZ,{layoutP:i,leaf:t,key:"prop"+t.pathToProp[t.pathToProp.length-1]}),sJ=({viewModel:t,layoutP:i})=>{let a=Gf("RightPropWithChildrenRow",t.pathToProp.join());return ur(()=>{let l=bA(t);return Wv.default.createElement(tH,{logger:a},Wv.default.createElement(zv,{leaf:t,node:Wv.default.createElement($A,{layoutP:i,aggregatedKeyframes:l,viewModel:t}),isCollapsed:t.isCollapsed},t.children.map(f=>zF(f,i))))},[t,i])}}),jF,lJ,uJ,P0e=P(()=>{bn(),jF=J(Fe()),M0e(),MA(),Uv(),BF(),lJ=({leaf:t,layoutP:i})=>ur(()=>{let a=bA(t);return jF.default.createElement(zv,{leaf:t,node:jF.default.createElement($A,{layoutP:i,aggregatedKeyframes:a,viewModel:t}),isCollapsed:t.isCollapsed},t.children.map(l=>zF(l,i)))},[t,i]),uJ=lJ}),JA,cJ,dJ,C0e=P(()=>{bn(),JA=J(Fe()),P0e(),MA(),Uv(),BF(),cJ=({leaf:t,layoutP:i})=>ur(()=>{let a=bA(t);return JA.default.createElement(zv,{leaf:t,node:JA.default.createElement($A,{layoutP:i,aggregatedKeyframes:a,viewModel:t}),isCollapsed:t.isCollapsed},t.children.map(l=>JA.default.createElement(uJ,{layoutP:i,key:"sheetObject-"+l.sheetObject.address.objectKey,leaf:l})))},[t,i]),dJ=cJ}),B1,dm,QA,fJ,hJ,pJ,mJ,gJ=P(()=>{bn(),B1=Ut(),dm=J(Fe()),ht(),gge(),r$(),C0e(),QA=1e6,hJ=_e.ul(fJ||(fJ=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),QA),pJ=({layoutP:t})=>ur(()=>{let i=(0,B1.val)(t.tree),a=(0,B1.val)(t.tree.top)+Math.max((0,B1.val)(t.tree.heightIncludingChildren),(0,B1.val)(t.dopeSheetDims.height));return dm.default.createElement(dm.default.Fragment,null,dm.default.createElement(rF,{layoutP:t,height:a},dm.default.createElement(TY,{layoutP:t,height:a},dm.default.createElement(hJ,{style:{top:i.top+"px"}},dm.default.createElement(dJ,{leaf:i,layoutP:t})))))},[t]),mJ=pJ});function VF(t,i,a,l){let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(t,"px)"),p="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(i,") * 1px)");a===0&&(a=1e-4);let v="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(a,")");l===0&&(l=.001);let _="calc(var(--graphEditorVerticalSpace) * ".concat(l*-1,")");return"translate(".concat(f,", ").concat(p,") scale(").concat(v,", ").concat(_,")")}function A0e(t,i){let{index:a,trackData:l}=i,f=l.keyframes[a],p=l.keyframes[a+1];return jo(t,{menuItems:()=>[{label:"Delete",callback:()=>{pe().transaction(({stateEditors:v})=>{let{deleteKeyframes:_}=v.coreByProject.historic.sheetsById.sequence;_(K(I({},i.sheetObject.address),{trackId:i.trackId,keyframeIds:[f.id,p.id]}))})}}]})}var ek,vJ,_J,yJ,bJ,xJ,HF=P(()=>{Xf(),Ue(),Vo(),Hr(),ek=J(Fe()),ht(),_J=_e.path(vJ||(vJ=Y([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),yJ="M 0 0 L 1 0 L 1 1",bJ=t=>{let{index:i,trackData:a}=t,l=a.keyframes[i],f=a.keyframes[i+1],p=f.position-l.position,[v,_]=Dr(null),[x]=A0e(_,t),w=t.isScalar?NC(l.value,t.propConfig):0,A=t.isScalar?NC(f.value,t.propConfig):1,D=t.extremumSpace.fromValueSpace(w),R=t.extremumSpace.fromValueSpace(A)-D,C=VF(l.position,D,p,R),F=l.handles[2],N=l.handles[3],B=f.handles[0],j=f.handles[1],W="M 0 0 C ".concat(F," ").concat(N," ").concat(B," ").concat(j," 1 1");return ek.default.createElement(ek.default.Fragment,null,ek.default.createElement(_J,{ref:v,d:!l.type||l.type==="bezier"?W:yJ,style:{transform:C}}),x)},xJ=bJ});function k0e(t,i){let a=(0,fm.useRef)(i);a.current=i;let l=(0,fm.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let f,p=a.current,v=(0,z1.val)(p.layoutP.scaledSpace.toUnitSpace),_=(0,z1.val)(p.layoutP.graphEditorVerticalSpace.toExtremumSpace),x=p.extremumSpace.lock();return{onDrag(w,A){f&&(f.discard(),f=void 0);let{index:D,trackData:R}=p,C=R.keyframes[D],F=R.keyframes[D+1],N=v(w)/(F.position-C.position),B=-A,j=_(B),W=p.extremumSpace.deltaToValueSpace(j),$=i.isScalar?C.value:0,re=i.isScalar?F.value:1,ne=W/(re-$);if(p.which==="left"){let ce=pi(C.handles[2]+N,0,1),Te=C.handles[3]+ne;f=pe().tempTransaction(({stateEditors:Ie})=>{Ie.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},p.sheetObject.address),{snappingFunction:(0,z1.val)(p.layoutP.sheet).getSequence().closestGridPosition,trackId:p.trackId,keyframes:[K(I({},C),{handles:[C.handles[0],C.handles[1],ce,Te]})]}))})}else{let ce=pi(F.handles[0]+N,0,1),Te=F.handles[1]+ne;f=pe().tempTransaction(({stateEditors:Ie})=>{Ie.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},p.sheetObject.address),{trackId:p.trackId,snappingFunction:(0,z1.val)(p.layoutP.sheet).getSequence().closestGridPosition,keyframes:[K(I({},F),{handles:[ce,Te,F.handles[2],F.handles[3]]})]}))})}},onDragEnd(w){x(),w?f&&f.commit():f&&f.discard()}}}}),[]);ji(t,l)}function I0e(t,i){return jo(t,{menuItems:()=>[{label:"Delete",callback:()=>{pe().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},i.sheetObject.address),{keyframeIds:[i.keyframe.id],trackId:i.trackId}))})}}]})}var z1,fm,SJ,GF,wJ,EJ,TJ,MJ,PJ,WF,R0e=P(()=>{Ue(),Vo(),ya(),Hr(),z1=Ut(),aa(),fm=J(Fe()),ht(),HF(),Gr(),GF=_e.circle(SJ||(SJ=Y([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),EJ=_e.circle(wJ||(wJ=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),zr,GF),MJ=_e.path(TJ||(TJ=Y([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),PJ=t=>{let[i,a]=Dr(null),{index:l,trackData:f}=t,p=f.keyframes[l],v=f.keyframes[l+1],[_]=I0e(a,t);k0e(a,t);let x=t.which==="left"?p.handles[2]:v.handles[0],w=p.position+(v.position-p.position)*x,A=t.which==="left"?p.handles[3]:v.handles[1],D=t.isScalar?p.value:0,R=t.isScalar?v.value:1,C=D+(R-D)*A,F=t.extremumSpace.fromValueSpace(C),N=F-t.extremumSpace.fromValueSpace(t.which==="left"?D:R),B=VF(t.which==="left"?p.position:v.position,t.extremumSpace.fromValueSpace(t.which==="left"?D:R),w-(t.which==="left"?p.position:v.position),N);return fm.default.createElement("g",null,fm.default.createElement(EJ,{ref:i,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(w," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),fm.default.createElement(GF,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(w," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(F,") * 1px)")}}),fm.default.createElement(MJ,{d:"M 0 0 L 1 1",style:{transform:B}}),_)},WF=PJ});function D0e(t){let[i,a]=(0,ah.useState)(!1);Cd(i,t.props.keyframe.position);let l=(0,ah.useRef)(t.props);l.current=t.props;let f=(0,ah.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(p){a(!0);let v=!!p.altKey,_=l.current,x=(0,tk.val)(_.layoutP.scaledSpace.toUnitSpace),w=(0,tk.val)(_.layoutP.graphEditorVerticalSpace.toExtremumSpace),A=_.extremumSpace.lock(),D;return{onDrag(R,C){let F=_.trackData.keyframes[_.index],N=x(R),B=-C,j=w(B),W=_.extremumSpace.deltaToValueSpace(j),$=[],re=K(I({},F),{position:F.position+N,value:F.value+W,handles:[...F.handles]});if($.push(re),v){let ne=_.trackData.keyframes[_.index-1];if(ne&&Math.abs(F.value-ne.value)>0){let Te=K(I({},ne),{handles:[...ne.handles]});$.push(Te),Te.handles[3]=N0e(ne.handles[3],ne.value,ne.value,F.value,re.value)}let ce=_.trackData.keyframes[_.index+1];if(ce&&Math.abs(F.value-ce.value)>0){let Te=K(I({},ce),{handles:[...ce.handles]});$.push(Te),Te.handles[1]=L0e(Te.handles[1],Te.value,Te.value,F.value,re.value)}}D?.discard(),D=pe().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},_.sheetObject.address),{trackId:_.trackId,keyframes:$,snappingFunction:(0,tk.val)(_.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(R){a(!1),A(),R?D?.commit():(D?.discard(),t.onDetectedClick(p))}}}}),[]);return ji(t.node,f),dl(i,"draggingPositionInSequenceEditor","move"),i}function O0e(t,i){return jo(t,{menuItems:()=>[{label:"Delete",callback:()=>{pe().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},i.sheetObject.address),{keyframeIds:[i.keyframe.id],trackId:i.trackId}))})}}]})}function N0e(t,i,a,l,f){return(l-i)*t/(f-a)}function L0e(t,i,a,l,f){return((i-l)*t+l-i+a-f)/(a-f)}var tk,ah,CJ,qF,AJ,kJ,IJ,RJ,F0e=P(()=>{Ue(),Vo(),ya(),Hr(),tk=Ut(),ah=J(Fe()),ht(),no(),no(),Gr(),Ns(),ru(),GA(),Jp(),qF=_e.circle(CJ||(CJ=Y([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),kJ=_e.circle(AJ||(AJ=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),zr,qF,yd),IJ=t=>{let[i,a]=Dr(null),{index:l,trackData:f}=t,p=f.keyframes[l],[v]=O0e(a,t),_=Zp(t.itemKey),x=p.value,w=t.extremumSpace.fromValueSpace(x),A=VA([{type:"primitiveProp",keyframe:t.keyframe,pathToProp:t.pathToProp,propConfig:t.propConfig,sheetObject:t.sheetObject,trackId:t.trackId}]),D=D0e({node:a,props:t,onDetectedClick:R=>A.toggle(R,R.target instanceof Element?R.target:a)});return ah.default.createElement(ah.default.Fragment,null,ah.default.createElement(kJ,K(I(I(I({ref:i,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(p.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(w,") * 1px)")}},tc(p.position)),Ho.includePositionSnapAttrs(p.position)),_.attrs),{className:D?"beingDragged":""})),ah.default.createElement(qF,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(p.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(w,") * 1px)"),fill:_.flag===2?"white":void 0}}),A.node,v)},RJ=IJ});function U0e(t){let[i,a]=(0,oh.useState)(!1);Cd(i,t.props.keyframe.position);let l=(0,oh.useRef)(t.props);l.current=t.props;let f=(0,oh.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(p){a(!0);let v=l.current,_=(0,XF.val)(v.layoutP.scaledSpace.toUnitSpace),x=v.extremumSpace.lock(),w;return{onDrag(A,D){let R=v.trackData.keyframes[v.index],C=_(A),F=[],N=K(I({},R),{position:R.position+C,value:R.value,handles:[...R.handles]});F.push(N),w?.discard(),w=pe().tempTransaction(({stateEditors:B})=>{B.coreByProject.historic.sheetsById.sequence.replaceKeyframes(K(I({},v.sheetObject.address),{trackId:v.trackId,keyframes:F,snappingFunction:(0,XF.val)(v.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){a(!1),x(),A?w?.commit():(w?.discard(),t.onDetectedClick(p))}}}}),[]);return ji(t.node,f),dl(i,"draggingPositionInSequenceEditor","ew-resize"),i}function B0e(t,i){return jo(t,{menuItems:()=>[{label:"Delete",callback:()=>{pe().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(K(I({},i.sheetObject.address),{keyframeIds:[i.keyframe.id],trackId:i.trackId}))})}}]})}var XF,oh,DJ,KF,OJ,NJ,LJ,YF,z0e=P(()=>{Ue(),Vo(),ya(),Hr(),XF=Ut(),oh=J(Fe()),ht(),no(),no(),Gr(),Ns(),ru(),GA(),Jp(),KF=_e.circle(DJ||(DJ=Y([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),NJ=_e.circle(OJ||(OJ=Y([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),zr,KF,yd),LJ=t=>{let[i,a]=Dr(null),{index:l,trackData:f,itemKey:p}=t,v=f.keyframes[l],[_]=B0e(a,t),x=Zp(p),w=t.which==="left"?0:1,A=VA([{type:"primitiveProp",keyframe:t.keyframe,pathToProp:t.pathToProp,propConfig:t.propConfig,sheetObject:t.sheetObject,trackId:t.trackId}]),D=U0e({node:a,props:t,onDetectedClick:C=>A.toggle(C,C.target instanceof Element?C.target:a)}),R=t.extremumSpace.fromValueSpace(w);return oh.default.createElement(oh.default.Fragment,null,oh.default.createElement(NJ,K(I(I(I({ref:i,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(v.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)")}},x.attrs),tc(v.position)),Ho.includePositionSnapAttrs(v.position)),{className:D?"beingDragged":""})),oh.default.createElement(KF,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(v.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)"),fill:x.flag===2?"white":void 0}}),A.node,_)},YF=LJ}),nk,FJ,UJ,BJ,zJ,j0e=P(()=>{nk=J(Fe()),ht(),HF(),UJ=_e.path(FJ||(FJ=Y([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),BJ=t=>{let{index:i,trackData:a}=t,l="M 0 0 L 1 1",f=VF(a.keyframes[i].position,t.extremumSpace.fromValueSpace(0),0,t.extremumSpace.fromValueSpace(1)-t.extremumSpace.fromValueSpace(0));return nk.default.createElement(nk.default.Fragment,null,nk.default.createElement(UJ,{d:l,style:{transform:f}}))},zJ=BJ}),io,jJ,VJ,HJ,GJ,WJ,V0e=P(()=>{io=J(Fe()),ht(),HF(),R0e(),F0e(),z0e(),j0e(),VJ=_e.g(jJ||(jJ=Y([`
  /* position: absolute; */
`]))),HJ=io.default.createElement(io.default.Fragment,null),GJ=t=>{let{index:i,trackData:a,isScalar:l}=t,f=a.keyframes[i],p=a.keyframes[i+1],v=f.connectedRight&&!!p&&p.value!==f.value;return io.default.createElement(VJ,null,v?io.default.createElement(io.default.Fragment,null,io.default.createElement(xJ,I({},t)),!f.type||f.type==="bezier"&&io.default.createElement(io.default.Fragment,null,io.default.createElement(WF,K(I({},t),{which:"left"})),io.default.createElement(WF,K(I({},t),{which:"right"})))):HJ,l?io.default.createElement(RJ,I({},t)):io.default.createElement(io.default.Fragment,null,io.default.createElement(YF,K(I({},t),{which:"left"})),io.default.createElement(YF,K(I({},t),{which:"right"})),io.default.createElement(zJ,I({},t))))},WJ=GJ});function H0e(t,i){let a=1/0,l=-1/0;function f(p){a=Math.min(p,a),l=Math.max(p,l)}return t.forEach((p,v)=>{let _=NC(p.value,i);if(f(_),!p.connectedRight)return;let x=t[v+1];if(!x)return;let w=(typeof x.value=="number"?x.value:1)-_;f(_+p.handles[3]*w),f(_+x.handles[1]*w)}),[a,l]}function G0e(t){let i=0,a=1;function l(f){i=Math.min(f,i),a=Math.max(f,a)}return t.forEach((f,p)=>{if(!f.connectedRight)return;let v=t[p+1];v&&(l(f.handles[3]),l(v.handles[1]))}),[i,a]}var rc,qJ,XJ,W0e=P(()=>{Ed(),rc=J(Fe()),ik(),V0e(),Xf(),bn(),qJ=rc.default.memo(({layoutP:t,trackData:i,sheetObject:a,trackId:l,color:f,pathToProp:p})=>{let v=OC(pr(a.template.configPointer),p);if(Zu(v))return console.error("Composite prop types cannot be keyframed"),rc.default.createElement(rc.default.Fragment,null);let[_,x]=(0,rc.useState)(!1),w=(0,rc.useMemo)(()=>{let C=new Set;return function(){let F=C.size===0;C.add(N),F&&x(!0);function N(){let B=C.size>0;C.delete(N),B&&C.size===0&&x(!1)}return N}},[]),A=(0,rc.useMemo)(()=>{let C=v.type==="number"?H0e(i.keyframes,v):G0e(i.keyframes),F=j=>(j-C[0])/(C[1]-C[0]),N=j=>C[0]+B(j),B=j=>j*(C[1]-C[0]);return{fromValueSpace:F,toValueSpace:N,deltaToValueSpace:B,lock:w}},[i.keyframes]),D=(0,rc.useRef)(void 0);_||(D.current=A);let R=i.keyframes.map((C,F)=>rc.default.createElement(WJ,{pathToProp:p,propConfig:v,itemKey:Pa.forTrackKeyframe(a,l,C.id),keyframe:C,index:F,trackData:i,layoutP:t,sheetObject:a,trackId:l,isScalar:v.type==="number",key:C.id,extremumSpace:D.current,color:f}));return rc.default.createElement("g",{style:{"--main-color":j1[f].iconColor}},R)}),XJ=qJ}),KJ,rk,YJ,$J,q0e=P(()=>{Ue(),bn(),KJ=Ut(),rk=J(Fe()),W0e(),YJ=t=>ur(()=>{let{sheetObject:i,trackId:a}=t,l=(0,KJ.val)(pe().atomP.historic.coreByProject[i.address.projectId].sheetsById[i.address.sheetId].sequence.tracksByObject[i.address.objectKey].trackData[a]);return l?.type!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(l?.type," is not yet supported on the graph editor")),rk.default.createElement(rk.default.Fragment,null)):rk.default.createElement(XJ,K(I({},t),{trackData:l}))},[t.trackId,t.layoutP]),$J=YJ});function ZJ({clippedSpaceRange:t,clippedSpaceWidth:i,fps:a,gapWidth:l=120},f){let p=1/a,v=t.end-t.start,_=i/(a*v),x=Math.floor(l/_),w=(x<a?JJ(a).find(R=>R>=x):a*Math.floor(x/a))*p,A=Math.floor(t.start/w),D=Math.ceil(t.end/w);for(let R=A;R<=D;R++){let C=R*w,F=C%1===0;f(C,F)}}var JJ,QJ=P(()=>{aa(),JJ=v0(t=>{let i=[];for(let a=1;a<=t;a++)t%a===0&&i.push(a);return i})});function X0e(t){let{clippedSpaceWidth:i,height:a,ctx:l,unitSpaceToClippedSpace:f,snapToGrid:p}=t;l.clearRect(0,0,i,a),ZJ(t,(v,_)=>{let x=p(v),w=Math.floor(f(x));l.strokeStyle=_?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",l.beginPath(),l.moveTo(w,0),l.lineTo(w,a),l.stroke(),l.closePath()})}var hm,pm,eQ,tQ,nQ,rQ,iQ,aQ,oQ,sQ,$F,lQ=P(()=>{hm=Ut(),pm=J(Fe()),ht(),QJ(),Ue(),tQ=_e.div(eQ||(eQ=Y([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),rQ=_e.canvas(nQ||(nQ=Y([`
  position: relative;
  left: 0;
`]))),iQ=t=>{let i=t;return i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1},aQ=()=>window.devicePixelRatio||1,oQ=t=>aQ()/iQ(t),sQ=({layoutP:t,width:i,height:a})=>{let l=(0,pm.useRef)(null),[f,p]=(0,pm.useState)(null),{ctx:v,ratio:_}=(0,pm.useMemo)(()=>{if(!f)return{};let x=f.getContext("2d"),w=oQ(x);return{ctx:x,ratio:w}},[f]);return(0,pm.useLayoutEffect)(()=>{if(!v)return;f.width=i*_,f.height=a*_;let x=(0,hm.prism)(()=>{let w=(0,hm.val)(t.sheet).getSequence();return{ctx:v,clippedSpaceRange:(0,hm.val)(t.clippedSpace.range),clippedSpaceWidth:(0,hm.val)(t.clippedSpace.width),unitSpaceToClippedSpace:(0,hm.val)(t.clippedSpace.fromUnitSpace),height:a,leftPadding:(0,hm.val)(t.scaledSpace.leftPadding),fps:w.subUnitsPerUnit,snapToGrid:A=>w.closestGridPosition(A)}}).onChange(pe().ticker,w=>{v.save(),v.scale(_,_),X0e(w),v.restore()},!0);return()=>{x()}},[v,i,a,t]),pm.default.createElement(tQ,{ref:l,style:{width:i+"px"}},pm.default.createElement(rQ,{ref:p,style:{width:i+"px",height:a+"px"}}))},$F=sQ}),ic,mm,j1,uQ,cQ,dQ,fQ,hQ,pQ,ik=P(()=>{Ue(),ec(),BC(),bn(),ic=Ut(),mm=J(Fe()),ht(),gJ(),r$(),q0e(),lQ(),Os(),j1={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},cQ=_e.div(uQ||(uQ=Y([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),Yl(.03,"#1a1c1e")),fQ=_e.svg(dQ||(dQ=Y([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),hQ=({layoutP:t})=>ur(()=>{let i=(0,ic.val)(t.sheet),a=(0,ic.val)(pe().atomP.historic.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].sequenceEditor.selectedPropsByObject),l=(0,ic.val)(t.graphEditorDims.height),f=(0,ic.val)(t.scaledSpace.fromUnitSpace)(1),p=[];if(a)for(let[_,x]of Object.entries(a)){let w=i.getObject(_);if(!w)continue;let A=(0,ic.val)(w.template.getMapOfValidSequenceTracks_forStudio());for(let[D,R]of Object.entries(x)){let C=_A(D),F=Yf(A,C);F&&p.push(mm.default.createElement($J,{key:"graph-".concat(_,"-").concat(D),sheetObject:w,pathToProp:C,layoutP:t,trackId:F,color:R}))}}let v=(0,ic.val)(t.rightDims.width);return mm.default.createElement(cQ,{style:{width:v+"px",height:l+"px","--unitSpaceToScaledSpaceMultiplier":f,"--graphEditorVerticalSpace":"".concat((0,ic.val)(t.graphEditorVerticalSpace.space))}},mm.default.createElement($F,{layoutP:t,width:v,height:l}),mm.default.createElement(rF,{layoutP:t,height:l},mm.default.createElement(fQ,{width:QA,height:l,viewBox:"0 0 ".concat(QA," ").concat(l)},mm.default.createElement("g",{style:{transform:"translate(".concat((0,ic.val)(t.scaledSpace.leftPadding),"px, ").concat((0,ic.val)(t.graphEditorDims.padding.top),"px)")}},p))))},[t]),pQ=hQ}),mQ,vl,gQ,vQ,_Q,yQ,ZF,bQ,xQ,SQ,wQ,EQ,TQ,MQ,K0e=P(()=>{Ue(),ec(),zC(),bn(),mQ=Ut(),vl=J(Fe()),ht(),sL(),WC(),ik(),gA(),$p(),nY(),gQ={label:{color:"#9a9a9a"}},_Q=_e(jL)(vQ||(vQ=Y([""]))),ZF=_e(VL)(yQ||(yQ=Y([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),gQ.label.color),xQ=_e.button(bQ||(bQ=Y([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),t=>t.isSelected?j1[t.graphEditorColor].iconColor:$f.offColor),SQ=()=>vl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},vl.default.createElement("g",{transform:"translate(0 100)"},vl.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),EQ=_e.span(wQ||(wQ=Y([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),Kf,ZF),TQ=({leaf:t})=>{var i;let a=r1(t.sheetObject.propsP,t.pathToProp),l=t.sheetObject,{controlIndicators:f}=oL(a,l,t.propConf),p=ur(()=>{let D=t.sheetObject.address,R=Qu(t.pathToProp);return(0,mQ.val)(pe().atomP.historic.projects.stateByProjectId[D.projectId].stateBySheetId[D.sheetId].sequenceEditor.selectedPropsByObject[D.objectKey][R])},[t]),v=(0,vl.useRef)(!1),_=typeof p=="string";v.current=_;let x=(0,vl.useCallback)(()=>{let D=t.sheetObject.address;pe().transaction(({stateEditors:R})=>{v.current?R.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(K(I({},D),{pathToProp:t.pathToProp})):(R.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(K(I({},D),{pathToProp:t.pathToProp})),R.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[t]),w=(i=t.propConf.label)!=null?i:t.pathToProp[t.pathToProp.length-1],A=(0,vl.useRef)(null);return eY(A.current,t),vl.default.createElement(_Q,{depth:t.depth},vl.default.createElement(ZF,{ref:A,isEven:t.n%2===0,style:{height:t.nodeHeight+"px"},isSelected:_===!0},vl.default.createElement(EQ,null,w),f,vl.default.createElement(xQ,{onClick:x,isSelected:_===!0,graphEditorColor:p??"1",style:{opacity:1},disabled:!1},vl.default.createElement(SQ,null))))},MQ=TQ});function JF(t,i){pe().transaction(({stateEditors:a})=>{a.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(K(I({},i.sheetAddress),{studioSheetItemKey:i.sheetItemKey,isCollapsed:t}))})}var QF=P(()=>{Ue()}),qv,eU,PQ,Y0e=P(()=>{qv=J(Fe()),gA(),K0e(),QF(),eU=t=>{let i="prop"+t.pathToProp[t.pathToProp.length-1];return t.shouldRender?t.type==="propWithChildren"?qv.default.createElement(PQ,{leaf:t,key:i}):qv.default.createElement(MQ,{leaf:t,key:i}):qv.default.createElement(qv.default.Fragment,{key:i})},PQ=({leaf:t})=>qv.default.createElement(mA,{leaf:t,label:t.pathToProp[t.pathToProp.length-1],isCollapsed:t.isCollapsed,toggleCollapsed:()=>JF(!t.isCollapsed,{sheetAddress:t.sheetObject.address,sheetItemKey:t.sheetItemKey})},t.children.map(i=>eU(i)))}),CQ,AQ,kQ,$0e=P(()=>{CQ=J(Fe()),gA(),Y0e(),QF(),Ue(),AQ=({leaf:t})=>CQ.default.createElement(mA,{leaf:t,label:t.sheetObject.address.objectKey,isCollapsed:t.isCollapsed,toggleSelect:()=>{pe().transaction(({stateEditors:i})=>{i.studio.historic.panels.outline.selection.set([t.sheetObject])})},toggleCollapsed:()=>JF(!t.isCollapsed,{sheetAddress:t.sheetObject.address,sheetItemKey:t.sheetItemKey})},t.children.map(i=>eU(i))),kQ=AQ}),tU,IQ,RQ,Z0e=P(()=>{bn(),tU=J(Fe()),$0e(),gA(),QF(),V7(),IQ=({leaf:t})=>ur(()=>tU.default.createElement(mA,{leaf:t,label:t.sheet.address.sheetId,isCollapsed:t.isCollapsed,toggleCollapsed:()=>{JF(!t.isCollapsed,{sheetAddress:t.sheet.address,sheetItemKey:t.sheetItemKey})}},t.children.map(i=>tU.default.createElement(kQ,{key:"sheetObject-"+z7(i.sheetObject),leaf:i}))),[t]),RQ=IQ}),nU,ak,DQ,OQ,NQ,LQ,FQ,UQ,J0e=P(()=>{bn(),nU=Ut(),ak=J(Fe()),ht(),Z0e(),OQ=_e.div(DQ||(DQ=Y([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),LQ=_e.ul(NQ||(NQ=Y([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),FQ=({layoutP:t})=>ur(()=>{let i=(0,nU.val)(t.tree),a=(0,nU.val)(t.leftDims.width);return ak.default.createElement(OQ,{style:{width:a+"px",top:i.top+"px"}},ak.default.createElement(LQ,null,ak.default.createElement(RQ,{leaf:i})))},[t]),UQ=FQ}),rU,BQ,zQ,jQ,VQ,Q0e=P(()=>{Gr(),Od(),bn(),Os(),rU=J(Fe()),ht(),lQ(),zQ=_e.div(BQ||(BQ=Y([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>cc.rightBackground,Yl(.01,Ix(1*.03,mv.panel.bg))),jQ=({layoutP:t})=>{let i=pr(t.rightDims.width),a=pr(t.panelDims.height);return rU.default.createElement(zQ,{style:{width:i+"px"}},rU.default.createElement($F,{width:i,height:a,layoutP:t}))},VQ=jQ}),Xv,HQ,GQ,WQ,qQ,eve=P(()=>{bn(),Xv=J(Fe()),ht(),J0e(),Q0e(),gJ(),IY(),GQ=_e.div(HQ||(HQ=Y([`
  position: absolute;
  left: 0;
  right: 0;
`]))),WQ=({layoutP:t})=>{let i=pr(t.dopeSheetDims.height);return Xv.default.createElement(GQ,{style:{height:i+"px"}},Xv.default.createElement(VQ,{layoutP:t}),Xv.default.createElement(kY,null,Xv.default.createElement(UQ,{layoutP:t}),Xv.default.createElement(mJ,{layoutP:t})))},qQ=WQ});function tve(t,i,a){return iU.prism.memo(t,()=>(0,iU.prism)(i),a).getValue()}var iU,nve=P(()=>{iU=Ut()});function Si(t){return function(i,a){return t(i,a())}}function Fs(t){return Object.freeze({audience:gm(t,8)?"internal":gm(t,16)?"dev":"public",category:gm(t,4)?"troubleshooting":gm(t,2)?"todo":"general",level:gm(t,512)?512:gm(t,256)?256:gm(t,128)?128:64})}function gm(t,i){return(t&i)===i}function wi(t,i){return((i&32)===32?!0:(i&16)===16?t.dev:(i&8)===8?t.internal:!1)&&t.min<=i}function XQ(t=console,i={}){let a=K(I({},ac),{includes:I({},ac.includes)}),l={styled:ave.bind(a,t),noStyle:sve.bind(a,t)},f=ive.bind(a);function p(){return a.loggingConsoleStyle&&a.loggerConsoleStyle?l.styled:l.noStyle}return a.create=p(),{configureLogger(v){var _;v==="console"?(a.loggerConsoleStyle=ac.loggerConsoleStyle,a.create=p()):v.type==="console"?(a.loggerConsoleStyle=(_=v.style)!=null?_:ac.loggerConsoleStyle,a.create=p()):v.type==="keyed"?(a.creatExt=x=>v.keyed(x.names),a.create=f):v.type==="named"&&(a.creatExt=rve.bind(null,v.named),a.create=f)},configureLogging(v){var _,x,w,A,D;a.includes.dev=(_=v.dev)!=null?_:ac.includes.dev,a.includes.internal=(x=v.internal)!=null?x:ac.includes.internal,a.includes.min=(w=v.min)!=null?w:ac.includes.min,a.include=(A=v.include)!=null?A:ac.include,a.loggingConsoleStyle=(D=v.consoleStyle)!=null?D:ac.loggingConsoleStyle,a.create=p()},getLogger(){return a.create({names:[]})}}}function rve(t,i){let a=[];for(let{name:l,key:f}of i.names)a.push(f==null?l:"".concat(l," (").concat(f,")"));return t(a)}function ive(t){let i=I(I({},this.includes),this.include(t)),a=this.filtered,l=this.named.bind(this,t),f=this.creatExt(t),p=wi(i,524),v=wi(i,522),_=wi(i,521),x=wi(i,529),w=wi(i,545),A=wi(i,265),D=wi(i,268),R=wi(i,273),C=wi(i,289),F=wi(i,137),N=wi(i,145),B=wi(i,73),j=wi(i,81),W=p?f.error.bind(f,hs._hmm):a.bind(t,524),$=v?f.error.bind(f,hs._todo):a.bind(t,522),re=_?f.error.bind(f,hs._error):a.bind(t,521),ne=x?f.error.bind(f,hs.errorDev):a.bind(t,529),ce=w?f.error.bind(f,hs.errorPublic):a.bind(t,545),Te=D?f.warn.bind(f,hs._kapow):a.bind(t,268),Ie=A?f.warn.bind(f,hs._warn):a.bind(t,265),ye=R?f.warn.bind(f,hs.warnDev):a.bind(t,273),Ne=C?f.warn.bind(f,hs.warnPublic):a.bind(t,273),et=F?f.debug.bind(f,hs._debug):a.bind(t,137),de=N?f.debug.bind(f,hs.debugDev):a.bind(t,145),Le=B?f.trace.bind(f,hs._trace):a.bind(t,73),Z=j?f.trace.bind(f,hs.traceDev):a.bind(t,81),Ge={_hmm:W,_todo:$,_error:re,errorDev:ne,errorPublic:ce,_kapow:Te,_warn:Ie,warnDev:ye,warnPublic:Ne,_debug:et,debugDev:de,_trace:Le,traceDev:Z,lazy:{_hmm:p?Si(W):W,_todo:v?Si($):$,_error:_?Si(re):re,errorDev:x?Si(ne):ne,errorPublic:w?Si(ce):ce,_kapow:D?Si(Te):Te,_warn:A?Si(Ie):Ie,warnDev:R?Si(ye):ye,warnPublic:C?Si(Ne):Ne,_debug:F?Si(et):et,debugDev:N?Si(de):de,_trace:B?Si(Le):Le,traceDev:j?Si(Z):Z},named:l,utilFor:{internal(){return{debug:Ge._debug,error:Ge._error,warn:Ge._warn,trace:Ge._trace,named(Nt,Re){return Ge.named(Nt,Re).utilFor.internal()}}},dev(){return{debug:Ge.debugDev,error:Ge.errorDev,warn:Ge.warnDev,trace:Ge.traceDev,named(Nt,Re){return Ge.named(Nt,Re).utilFor.dev()}}},public(){return{error:Ge.errorPublic,warn:Ge.warnPublic,debug(Nt,Re){Ge._warn('(public "debug" filtered out) '.concat(Nt),Re)},trace(Nt,Re){Ge._warn('(public "trace" filtered out) '.concat(Nt),Re)},named(Nt,Re){return Ge.named(Nt,Re).utilFor.public()}}}}};return Ge}function ave(t,i){let a=I(I({},this.includes),this.include(i)),l=[],f="";for(let x=0;x<i.names.length;x++){let{name:w,key:A}=i.names[x];if(f+=" %c".concat(w),l.push(this.style.css(w)),A!=null){let D="%c#".concat(A);f+=D,l.push(this.style.css(D))}}let p=this.filtered,v=this.named.bind(this,i),_=[f,...l];return KQ(p,i,a,t,_,ove(_),v)}function ove(t){let i=t.slice(0);for(let a=1;a<i.length;a++)i[a]+=";background-color:#e0005a;padding:2px;color:white";return i}function sve(t,i){let a=I(I({},this.includes),this.include(i)),l="";for(let _=0;_<i.names.length;_++){let{name:x,key:w}=i.names[_];l+=" ".concat(x),w!=null&&(l+="#".concat(w))}let f=this.filtered,p=this.named.bind(this,i),v=[l];return KQ(f,i,a,t,v,v,p)}function KQ(t,i,a,l,f,p,v){let _=wi(a,524),x=wi(a,522),w=wi(a,521),A=wi(a,529),D=wi(a,545),R=wi(a,265),C=wi(a,268),F=wi(a,273),N=wi(a,289),B=wi(a,137),j=wi(a,145),W=wi(a,73),$=wi(a,81),re=_?l.error.bind(l,...f):t.bind(i,524),ne=x?l.error.bind(l,...f):t.bind(i,522),ce=w?l.error.bind(l,...f):t.bind(i,521),Te=A?l.error.bind(l,...f):t.bind(i,529),Ie=D?l.error.bind(l,...f):t.bind(i,545),ye=C?l.warn.bind(l,...p):t.bind(i,268),Ne=R?l.warn.bind(l,...f):t.bind(i,265),et=F?l.warn.bind(l,...f):t.bind(i,273),de=N?l.warn.bind(l,...f):t.bind(i,273),Le=B?l.info.bind(l,...f):t.bind(i,137),Z=j?l.info.bind(l,...f):t.bind(i,145),Ge=W?l.debug.bind(l,...f):t.bind(i,73),Nt=$?l.debug.bind(l,...f):t.bind(i,81),Re={_hmm:re,_todo:ne,_error:ce,errorDev:Te,errorPublic:Ie,_kapow:ye,_warn:Ne,warnDev:et,warnPublic:de,_debug:Le,debugDev:Z,_trace:Ge,traceDev:Nt,lazy:{_hmm:_?Si(re):re,_todo:x?Si(ne):ne,_error:w?Si(ce):ce,errorDev:A?Si(Te):Te,errorPublic:D?Si(Ie):Ie,_kapow:C?Si(ye):ye,_warn:R?Si(Ne):Ne,warnDev:F?Si(et):et,warnPublic:N?Si(de):de,_debug:B?Si(Le):Le,debugDev:j?Si(Z):Z,_trace:W?Si(Ge):Ge,traceDev:$?Si(Nt):Nt},named:v,utilFor:{internal(){return{debug:Re._debug,error:Re._error,warn:Re._warn,trace:Re._trace,named(Ce,qe){return Re.named(Ce,qe).utilFor.internal()}}},dev(){return{debug:Re.debugDev,error:Re.errorDev,warn:Re.warnDev,trace:Re.traceDev,named(Ce,qe){return Re.named(Ce,qe).utilFor.dev()}}},public(){return{error:Re.errorPublic,warn:Re.warnPublic,debug(Ce,qe){Re._warn('(public "debug" filtered out) '.concat(Ce),qe)},trace(Ce,qe){Re._warn('(public "trace" filtered out) '.concat(Ce),qe)},named(Ce,qe){return Re.named(Ce,qe).utilFor.public()}}}}};return Re}var hs,ac,YQ=P(()=>{hs={_hmm:Fs(524),_todo:Fs(522),_error:Fs(521),errorDev:Fs(529),errorPublic:Fs(545),_kapow:Fs(268),_warn:Fs(265),warnDev:Fs(273),warnPublic:Fs(289),_debug:Fs(137),debugDev:Fs(145),_trace:Fs(73),traceDev:Fs(81)},ac={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(t,i,a){return this.create({names:[...t.names,{name:i,key:a}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(t){if(t.length<5)return t;let i=t.replace(this.collapseOnRE,"");return this.cssMemo.has(i)||this.cssMemo.set(i,this.css(t)),i},css(t){var i,a,l,f;let p=this.cssMemo.get(t);if(p)return p;let v="color:".concat((a=(i=this.color)==null?void 0:i.call(this,t))!=null?a:"hsl(".concat((t.charCodeAt(0)+t.charCodeAt(t.length-1))%360,", 100%, 60%)"));return(l=this.bold)!=null&&l.test(t)&&(v+=";font-weight:600"),(f=this.italic)!=null&&f.test(t)&&(v+=";font-style:italic"),this.cssMemo.set(t,v),v}}}}),aU,ok,sk=P(()=>{YQ(),YQ(),aU=XQ(console,{}),aU.configureLogging({dev:!0,min:64}),ok=aU.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),sh,vm,$Q,lve=P(()=>{Ed(),sh=Ut(),sk(),vd(),vm=28,$Q=(t,i)=>{var a;sh.prism.ensurePrism();let l=!0,f=oC+vm,p=0,v=i.atomP.ahistoric.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId].sequence.collapsableItems,_=v.byId[Pa.forSheet()].isCollapsed,x=(a=(0,sh.pointerToPrism)(_).getValue())!=null?a:!1,w={type:"sheet",isCollapsed:x,sheet:t,children:[],sheetItemKey:Pa.forSheet(),shouldRender:l,top:oC,depth:0,n:p,nodeHeight:vm,heightIncludingChildren:-1};p+=1;for(let N of Object.values((0,sh.val)(t.objectsP)))N&&A(N,w.children,w.depth+1,!x);w.heightIncludingChildren=f-w.top;function A(N,B,j,W){var $;let re=(0,sh.val)(N.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,sh.val)(N.template.configPointer);if(Object.keys(re).length===0)return;let ce=v.byId[Pa.forSheetObject(N)].isCollapsed,Te=($=(0,sh.pointerToPrism)(ce).getValue())!=null?$:!1,Ie={type:"sheetObject",isCollapsed:Te,sheetItemKey:Pa.forSheetObject(N),shouldRender:W,top:f,children:[],depth:j,n:p,sheetObject:N,nodeHeight:W?vm:0,heightIncludingChildren:-1};B.push(Ie),W&&(p+=1,f+=Ie.nodeHeight),D(N,re,[],ne,Ie.children,j+1,W&&!Te),Ie.heightIncludingChildren=f-Ie.top}function D(N,B,j,W,$,re,ne){for(let[ce,Te]of Object.entries(B)){let Ie=W.props[ce];R(N,Te,[...j,ce],Ie,$,re,ne)}}function R(N,B,j,W,$,re,ne){W.type==="compound"?C(N,B,W,j,W,$,re,ne):W.type==="enum"?ok.warn("Prop type enum is not yet supported in the sequence editor"):F(N,B,j,W,$,re,ne)}function C(N,B,j,W,$,re,ne,ce){var Te;let Ie=v.byId[Pa.forSheetObjectProp(N,W)].isCollapsed,ye=(Te=(0,sh.pointerToPrism)(Ie).getValue())!=null?Te:!1,Ne={type:"propWithChildren",isCollapsed:ye,propConf:j,pathToProp:W,sheetItemKey:Pa.forSheetObjectProp(N,W),sheetObject:N,shouldRender:ce,top:f,children:[],nodeHeight:ce?vm:0,heightIncludingChildren:-1,depth:ne,trackMapping:B,n:p};re.push(Ne),ce&&(f+=Ne.nodeHeight,p+=1),D(N,B,W,$,Ne.children,ne+1,ce&&!ye),Ne.heightIncludingChildren=f-Ne.top}function F(N,B,j,W,$,re,ne){let ce={type:"primitiveProp",propConf:W,depth:re,sheetItemKey:Pa.forSheetObjectProp(N,j),sheetObject:N,pathToProp:j,shouldRender:ne,top:f,nodeHeight:ne?vm:0,heightIncludingChildren:ne?vm:0,trackId:B,n:p};$.push(ce),p+=1,f+=ce.nodeHeight}return w}});function uve(t,i){let a=pe(),l=a.atomP.ahistoric.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId],f=a.atomP.historic.projects.stateByProjectId[t.address.projectId].stateBySheetId[t.address.sheetId];return(0,ps.prism)(()=>{var p;let v=tve("tree",()=>$Q(t,a),[]),_=(0,ps.val)(i),x=(0,ps.val)(a.atomP.historic.panels.sequenceEditor.graphEditor),w=(0,ps.val)(f.sequenceEditor.selectedPropsByObject),A=!!w&&Object.keys(w).length>0,{leftDims:D,rightDims:R,graphEditorDims:C,dopeSheetDims:F,horizontalScrollbarDims:N}=ps.prism.memo("leftDims",()=>{var Ne;let et={width:Math.floor(_.width*ZQ),height:_.height,screenX:_.screenX,screenY:_.screenY},de={width:_.width-et.width,height:_.height,screenX:_.screenX+et.width,screenY:_.screenY},Le=A&&x?.isOpen===!0,Z=Math.floor((Le?pi((Ne=x?.height)!=null?Ne:.5,.1,.7):0)*_.heightWithoutBorder),Ge=0+Z,Nt=_.height-Ge,Re={width:_.width,height:Nt,screenX:_.screenX,screenY:_.screenY},Ce={isAvailable:A,isOpen:Le,width:de.width,height:Z,screenX:_.screenX,screenY:_.screenY+Nt,padding:{top:20,bottom:20}};return{leftDims:et,rightDims:de,graphEditorDims:Ce,dopeSheetDims:Re,horizontalScrollbarDims:{bottom:0}}},[_,x,A]),B=ps.prism.memo("graphEditorVerticalSpace",()=>{let Ne=C.height-C.padding.top-C.padding.bottom;return{space:Ne,fromExtremumSpace(et){return et*Ne},toExtremumSpace(et){return et/Ne}}},[C]),[j,W]=ps.prism.state("isSeeking",!1),$={isSeeking:j,setIsSeeking:W},re={},ne=(p=(0,ps.val)(l.sequence.clippedSpaceRange))!=null?p:JQ,ce=ps.prism.memo("scaledSpace",()=>{let Ne=ne.end-ne.start,et=R.width,de=Ne/et,Le=et/Ne;return{fromUnitSpace(Z){return Z*Le},toUnitSpace(Z){return Z*de},leftPadding:10}},[ne,R.width]),Te=ps.prism.memo("setClippedSpaceRange",()=>function(Ne){a.transaction(({stateEditors:et})=>{let de=I({},Ne);if(de.end<=de.start&&(de.end=de.start+1),de.start<0){let Le=de.end-de.start;de.start=0,de.end=Le}et.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(K(I({},t.address),{range:de}))})},[]),Ie=ps.prism.memo("clippedSpace",()=>({range:ne,width:R.width,fromUnitSpace(Ne){return ce.fromUnitSpace(Ne-ne.start)+ce.leftPadding},toUnitSpace(Ne){return ce.toUnitSpace(Ne-ce.leftPadding)+ne.start},setRange:Te}),[ne,R.width,ce,Te]),ye=ps.prism.memo("selection.current",()=>new ps.Atom({}),[]);return zL("finalAtom",{sheet:t,tree:v,panelDims:_,leftDims:D,rightDims:R,dopeSheetDims:F,horizontalScrollbarDims:N,seeker:$,unitSpace:re,scaledSpace:ce,clippedSpace:Ie,graphEditorDims:C,graphEditorVerticalSpace:B,selectionAtom:ye}).pointer})}var ps,ZQ,JQ,cve=P(()=>{Ue(),nve(),QK(),ps=Ut(),lve(),aa(),ZQ=.2,JQ={start:0,end:10}});function dve(t){let{fullSecondStampsContainer:i,sequencePositionFormatter:a,snapToGrid:l,unitSpaceToClippedSpace:f}=t,p="";ZJ(t,(v,_)=>{let x=l(v),w=f(x);_?p+=QQ(a.formatFullUnitForGrid(x),w,"full-unit"):p+=QQ(a.formatSubUnitForGrid(x),w,"sub-unit")}),i.innerHTML=p}function QQ(t,i,a){return'<span class="'.concat(a,'" style="transform: translate3d(').concat(i.toFixed(1),'px, -50%, 0);">').concat(t,"</span>")}var _m,ym,eee,tee,lh,nee,ree,iee,aee,oee,see,lee=P(()=>{_m=Ut(),Os(),ym=J(Fe()),ht(),QJ(),Ue(),tee=_e.div(eee||(eee=Y([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),lh={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Ix(.2,lh.fullUnitStampColor)}},ree=_e.div(nee||(nee=Y([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),aee=_e.div(iee||(iee=Y([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),lh.fullUnitStampColor,lh.stampFontSize,lh.fullUnitStampColor,lh.subUnitStampColor),oee=({layoutP:t,width:i})=>{let a=(0,ym.useRef)(null),[l,f]=(0,ym.useState)(null);return(0,ym.useLayoutEffect)(()=>{if(l)return(0,_m.prism)(()=>{let p=(0,_m.val)(t.sheet).getSequence();return{fullSecondStampsContainer:l,clippedSpaceRange:(0,_m.val)(t.clippedSpace.range),clippedSpaceWidth:(0,_m.val)(t.clippedSpace.width),unitSpaceToClippedSpace:(0,_m.val)(t.clippedSpace.fromUnitSpace),leftPadding:(0,_m.val)(t.scaledSpace.leftPadding),fps:p.subUnitsPerUnit,sequencePositionFormatter:p.positionFormatter,snapToGrid:v=>p.closestGridPosition(v)}}).onChange(pe().ticker,dve,!0)},[l,i,t]),ym.default.createElement(tee,{ref:a,style:{width:i+"px"}},ym.default.createElement(ree,{style:{width:i+"px"}},ym.default.createElement(aee,{ref:f})))},see=oee});function fve(t){let[i,a]=(0,oU.useState)(!1);return(0,oU.useEffect)(()=>{if(a(!1),!t)return;let l=p=>{p.target===t?a(!0):a(!1)},f=()=>{a(!1)};return t.addEventListener("mouseenter",l),t.addEventListener("mousemove",l),t.addEventListener("mouseleave",f),()=>{a(!1),t.removeEventListener("mouseenter",l),t.removeEventListener("mousemove",l),t.removeEventListener("mouseleave",f)}},[t]),i}var oU,hve=P(()=>{oU=J(Fe())});function pve(t,i){let a=0,[l,f]=t,[p,v]=i;return f-l>v-p?[p,v]:(l<p&&(a=0-l),f>v&&(a=v-f),[l+a,f+a])}var oc,uh,ba,sU,uee,lk,cee,dee,fee=P(()=>{oc=Ut(),bn(),Gr(),Ue(),xm(),Vo(),ya(),Hr(),uh=J(Fe()),ht(),no(),ba={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},sU=1e3,lk=_e.div(uee||(uee=Y([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>lc-1,t=>t.enabled?ba.enabled.backgroundColor:ba.disabled.backgroundColor,sU,ba.hover.backgroundColor,ba.dragging.backgroundColor,zr),cee=({layoutP:t})=>{let i=(0,uh.useMemo)(()=>(0,oc.prism)(()=>{let{projectId:w,sheetId:A}=(0,oc.val)(t.sheet).address;return(0,oc.val)(pe().atomP.ahistoric.projects.stateByProjectId[w].stateBySheetId[A].sequence.focusRange)}),[t]),[a,l]=Dr(null),[f]=jo(l,{menuItems:()=>{let w=(0,oc.val)(t.sheet),A=i.getValue();return[{label:"Delete focus range",callback:()=>{pe().tempTransaction(({stateEditors:D})=>{D.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(I({},w.address))}).commit()}},{label:A!=null&&A.enabled?"Disable focus range":"Enable focus range",callback:()=>{A!==void 0&&pe().tempTransaction(({stateEditors:D})=>{D.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(K(I({},w.address),{range:A.range,enabled:!A.enabled}))}).commit()}}]}}),p=pr(t.scaledSpace.toUnitSpace),v=pr(t.sheet),_=(0,uh.useMemo)(()=>{let w,A;return{debugName:"FocusRangeStrip",onDragStart(D){let R,C=i.getValue();if(!C)return!1;let F=C.range.start,N=C.range.end,B=!1,j=(0,oc.val)(t.sheet).getSequence();return{onDrag(W){if(C=i.getValue(),C){B=!0;let $=p(W),re=F+$,ne=N+$;ne<re&&(ne=re),[w,A]=pve([re,ne],[0,j.length]).map(ce=>j.closestGridPosition(ce)),R&&R.discard(),R=pe().tempTransaction(({stateEditors:ce})=>{var Te;ce.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(K(I({},v.address),{range:{start:w,end:A},enabled:(Te=C?.enabled)!=null?Te:!0}))})}},onDragEnd(){C&&(B&&R!==void 0?R.commit():R&&R.discard())}}},lockCSSCursorTo:"grabbing"}},[v,p]),[x]=ji(l,_);return Cd(x,-1),ur(()=>{let w=i.getValue(),A=w?.range||{start:0,end:0},D=(0,oc.val)(t.clippedSpace.fromUnitSpace)(A.start),R=(0,oc.val)(t.clippedSpace.fromUnitSpace)(A.end),C,F;return D<0&&(D=0),R>(0,oc.val)(t.clippedSpace.width)&&(R=(0,oc.val)(t.clippedSpace.width)),D>R?(F=0,C=0):(F=D,C=(R-D)/sU),w?uh.default.createElement(uh.default.Fragment,null,f,uh.default.createElement(lk,{id:"range-strip",enabled:w.enabled,className:"".concat(x?"dragging":""," ").concat(w.enabled?"enabled":""),ref:a,style:{transform:"translateX(".concat(F,"px) scale(").concat(C,", 1)")}})):uh.default.createElement(uh.default.Fragment,null)},[t,a,i,f,x])},dee=cee}),ch,Id,hee,pee,mee,gee,vee,_ee,yee,lU,mve=P(()=>{ch=Ut(),bn(),Ue(),xm(),Ns(),ya(),Hr(),Id=J(Fe()),ht(),no(),fee(),ru(),pee=_e.div(hee||(hee=Y([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),t=>t.type==="start"?0:-ba.thumbWidth,ba.thumbWidth,()=>lc-1,({enabled:t})=>t?ba.enabled.backgroundColor:ba.disabled.backgroundColor,ba.enabled.stroke,t=>t.type==="start"?"w-resize":"e-resize",yd,()=>lk,ba.hover.backgroundColor,ba.hover.stroke,()=>lk,ba.dragging.backgroundColor,ba.dragging.stroke,ba.dragging.backgroundColor),gee=_e.div(mee||(mee=Y([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),t=>t.type==="start"?90:-90,t=>t.type==="start"?ba.thumbWidth:-ba.thumbWidth+1),_ee=_e.div(vee||(vee=Y([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),t=>t.type==="start"?-90:90,()=>V1.backgroundColor,t=>t.type==="start"?-12:ba.thumbWidth),yee=({layoutP:t,thumbType:i})=>{var a;let[l,f]=Dr(null),p=(0,Id.useMemo)(()=>(0,ch.prism)(()=>{let{projectId:w,sheetId:A}=(0,ch.val)(t.sheet).address;return(0,ch.val)(pe().atomP.ahistoric.projects.stateByProjectId[w].stateBySheetId[A].sequence.focusRange)}),[t]),v=(0,Id.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let w,A,D=(0,ch.val)(t.sheet),R={start:0,end:D.getSequence().length},C=p.getValue()||{range:R,enabled:!1},F=C.enabled,N=C.range[i],B=(0,ch.val)(t.scaledSpace.toUnitSpace),j=B(ba.rangeStripMinWidth);return{onDrag(W,$,re){var ne;let ce,Te=Ho.checkIfMouseEventSnapToPos(re,{ignore:f});if(Te==null){let ye=B(W);ce=N+ye}else ce=Te;A=((ne=p.getValue())==null?void 0:ne.range)||R,i==="start"?ce=Math.max(Math.min(ce,A.end-j),0):ce=Math.min(Math.max(ce,A.start+j),D.getSequence().length);let Ie=D.getSequence().closestGridPosition(ce);w!==void 0&&w.discard(),w=pe().tempTransaction(({stateEditors:ye})=>{ye.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(K(I({},D.address),{range:K(I({},A),{[i]:Ie}),enabled:F}))})},onDragEnd(W){W?w?.commit():w?.discard()}}}}),[t]),[_]=ji(f,v);dl(_,"draggingPositionInSequenceEditor",i==="start"?"w-resize":"e-resize");let x=pr(p);return Cd(_,(a=x?.range[i])!=null?a:0),ur(()=>{let w=p.getValue();if(!w)return null;let{enabled:A}=w,D=w.range[i],R=(0,ch.val)(t.clippedSpace.fromUnitSpace)(D);return(R<0||(0,ch.val)(t.clippedSpace.width)<R)&&(R=-1e4),Id.default.createElement(pee,K(I(I({ref:l},Ho.includePositionSnapAttrs(D)),tc(D)),{className:"".concat(_&&"dragging"," ").concat(A&&"enabled"),enabled:A,type:i,style:{transform:"translate3d(".concat(R,"px, 0, 0)")}}),Id.default.createElement(gee,{type:i,enabled:A}),Id.default.createElement(_ee,{type:i}),Id.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Id.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Id.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[t,l,p,_])},lU=yee});function gve(t,i){let[a,l]=(0,sc.useState)("none");return dl(a!=="none","dragging",a==="creating"?"ew-resize":"move"),(0,sc.useMemo)(()=>{let f=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(v){let _,x=(0,bm.val)(t.clippedSpace.toUnitSpace),w=(0,bm.val)(t.scaledSpace.toUnitSpace),A=(0,bm.val)(t.sheet),D=A.getSequence(),R=v.target.getBoundingClientRect(),C=x(v.clientX-R.left),F=w(ba.rangeStripMinWidth);return{onDrag(N){let B=w(N),j=C,W=C+B;[j,W]=[pi(j,0,D.length),pi(W,0,D.length)].map($=>D.closestGridPosition($)),W<j?[j,W]=[Math.max(Math.min(W,j-F),0),j]:N>0&&(W=Math.min(Math.max(W,j+F),D.length)),_&&_.discard(),_=pe().tempTransaction(({stateEditors:$})=>{$.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(K(I({},A.address),{range:{start:j,end:W},enabled:!0}))})},onDragEnd(N){N&&_!==void 0?_.commit():_&&_.discard()}}},lockCSSCursorTo:"ew-resize"}),p=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let v,_=i.current,x=i.current.addBoundsHighlightLock();return{onDrag(w,A){let D=K(I({},_.dims),{top:pi(_.dims.top+A,0,window.innerHeight-Vu),left:pi(_.dims.left+w,-_.dims.width+Vu,window.innerWidth-Vu)}),R=fA(D,{width:window.innerWidth,height:window.innerHeight});v?.discard(),v=pe().tempTransaction(({stateEditors:C})=>{C.studio.historic.panelPositions.setPanelPosition({position:R,panelId:_.panelId})})},onDragEnd(w){x(),w?v?.commit():v?.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(v){let[_,x]=v.shiftKey?["creating",f().onDragStart(v)]:["moving-panel",p().onDragStart(v)];return l(_),x===!1?!1:{onDrag(w,A,D,R,C){x.onDrag(w,A,D,R,C)},onDragEnd(w){var A;l("none"),(A=x.onDragEnd)==null||A.call(x,w)}}}}},[t,i])}var bm,sc,bee,xee,See,wee,vve=P(()=>{bm=Ut(),bn(),Ue(),Fv(),xm(),Ns(),ya(),hve(),mY(),Hr(),aa(),sc=J(Fe()),ht(),fee(),mve(),vd(),xee=_e.div(bee||(bee=Y([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>lc,t=>t.isShiftDown?"ew-resize":"move"),See=({layoutP:t})=>{let[i,a]=Dr(null),l=Lv(),f=(0,sc.useRef)(l);f.current=l;let p=(0,sc.useMemo)(()=>(0,bm.prism)(()=>{let{projectId:x,sheetId:w}=(0,bm.val)(t.sheet).address;return(0,bm.val)(pe().atomP.ahistoric.projects.stateByProjectId[x].stateBySheetId[w].sequence.focusRange)}),[t]);ji(a,gve(t,f));let v=hY("Shift"),_=fve(a);return(0,sc.useEffect)(()=>{if(!v&&_)return f.current.addBoundsHighlightLock()},[!v&&_]),ur(()=>sc.default.createElement(xee,{ref:i,isShiftDown:v},sc.default.createElement(dee,{layoutP:t}),sc.default.createElement(lU,{thumbType:"start",layoutP:t}),sc.default.createElement(lU,{thumbType:"end",layoutP:t})),[t,p,v])},wee=See}),Kv,lc,V1,Eee,Tee,Mee,Pee,xm=P(()=>{bn(),Kv=J(Fe()),ht(),lee(),no(),Gr(),vve(),lc=18,V1={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},Tee=_e.div(Eee||(Eee=Y([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),lc,V1.backgroundColor,V1.borderColor,zr),Mee=({layoutP:t})=>{let i=pr(t.rightDims.width);return Kv.default.createElement(Kv.default.Fragment,null,Kv.default.createElement(Tee,I({},tc("hide")),Kv.default.createElement(see,{layoutP:t,width:i,height:lc}),Kv.default.createElement(wee,{layoutP:t})))},Pee=Mee}),Sm,Cee,Aee,kee,Iee,Ree,Dee,Oee,Nee,_ve=P(()=>{Sm=J(Fe()),ht(),bn(),Ue(),hN(),$p(),Cee=t=>isFinite(t)&&t>0,kee=_e.div(Aee||(Aee=Y([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Ree=_e.div(Iee||(Iee=Y([`
  `,`;
  white-space: nowrap;
`])),Kf),Dee=({deltaX:t})=>t*.25,Oee=({layoutP:t})=>{let i=pr(t.sheet),a=(0,Sm.useMemo)(()=>{let f;return{temporarilySetValue(p){f&&(f.discard(),f=void 0),f=pe().tempTransaction(({stateEditors:v})=>{v.coreByProject.historic.sheetsById.sequence.setLength(K(I({},i.address),{length:p}))})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(p){f&&(f.discard(),f=void 0),pe().transaction(({stateEditors:v})=>{v.coreByProject.historic.sheetsById.sequence.setLength(K(I({},i.address),{length:p}))})}}},[t,i]),l=(0,Sm.useRef)(null);return(0,Sm.useLayoutEffect)(()=>{l.current.focus()},[]),ur(()=>{let f=i.getSequence().length;return Sm.default.createElement(kee,null,Sm.default.createElement(Ree,null,"Sequence length"),Sm.default.createElement(mC,K(I({value:f},a),{isValid:Cee,inputRef:l,nudge:Dee})))},[i,a,l])},Nee=Oee});function yve(t,i){let a=(0,ms.useRef)(i);a.current=i;let l=(0,ms.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(p){let v,_=a.current,x=(0,wm.val)(a.current.layoutP.sheet),w=x.getSequence().length,A=(0,wm.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(D,R,C){let F=A(D);v&&(v.discard(),v=void 0),v=pe().tempTransaction(({stateEditors:N})=>{N.coreByProject.historic.sheetsById.sequence.setLength(K(I({},x.address),{length:w+F}))})},onDragEnd(D){D?v&&v.commit():v&&v.discard()}}}}),[]),[f]=ji(t,l);return Cd(f,-1),[f]}var wm,ms,uU,H1,Lee,dh,Fee,Uee,Bee,zee,jee,Vee,Hee,Gee,Wee,qee,Xee,bve=P(()=>{bn(),wm=Ut(),ms=J(Fe()),ht(),Od(),xm(),Hr(),ya(),Ue(),Xu(),no(),Ev(),_ve(),Gr(),Yu(),uU=1e3,H1={stripNormal:"#0000006c",stripActive:"#000000"},dh=_e.div(Lee||(Lee=Y([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>cc.lengthIndicatorStrip,lc,H1.stripNormal,H1.stripActive),Uee=_e.div(Fee||(Fee=Y([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),lc-15),zee=_e.div(Bee||(Bee=Y([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),zr,dh,dh,H1.stripActive),Vee=_e.div(jee||(jee=Y([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),zr,dh,dh,H1.stripActive),Gee=_e.div(Hee||(Hee=Y([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),uU,()=>cc.lengthIndicatorCover,dh,dh),Wee=-1e4,qee=({layoutP:t})=>{let[i,a]=Dr(null),[l]=yve(a,{layoutP:t}),{node:f,toggle:p,close:v}=qu({debugName:"LengthIndicator"},()=>ms.default.createElement(Ku,null,ms.default.createElement(Nee,{layoutP:t,onRequestClose:v})));return ur(()=>{let _=(0,wm.val)(t.sheet),x=(0,wm.val)(t.rightDims.height),w=_.getSequence(),A=w.length,D=A,R=(0,wm.val)(t.clippedSpace.fromUnitSpace)(D),C=(0,wm.val)(t.clippedSpace.width),F,N;return R>C?(N=0,F=0):(R<0&&(R=0),N=R,F=(C-R)/uU),ms.default.createElement(ms.default.Fragment,null,f,ms.default.createElement(dh,{style:{height:x+"px",transform:"translateX(".concat(N===0?Wee:N,"px)")},className:l?"dragging":""},ms.default.createElement(Uee,null,ms.default.createElement(Vee,I({ref:i,onClick:B=>{p(B,a)}},tc("hide")),ms.default.createElement(upe,null),ms.default.createElement(cpe,null)),ms.default.createElement(zee,null,"Sequence length:"," ",w.positionFormatter.formatBasic(A)))),ms.default.createElement(Gee,{title:"Length",style:{height:x+"px",transform:"translateX(".concat(N,"px) scale(").concat(F,", 1)")}}))},[t,i,l,f])},Xee=qee}),cU,Rd,Kee,Yee,$ee,Zee,Jee,Qee,ete,tte,xve=P(()=>{bn(),cU=Ut(),Rd=J(Fe()),ht(),lee(),Od(),xm(),no(),Yee=_e.div(Kee||(Kee=Y([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Zee=_e.div($ee||($ee=Y([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),lh.stampFontSize,lh.fullUnitStampColor,V1.backgroundColor,()=>cc.currentFrameStamp),Qee=_e.div(Jee||(Jee=Y([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),ete=Rd.default.memo(({layoutP:t})=>{let[i,a]=pr(FY()),l=pr(t.clippedSpace.fromUnitSpace),{sequence:f,formatter:p,clippedSpaceWidth:v}=ur(()=>{let A=(0,cU.val)(t.sheet).getSequence(),D=(0,cU.val)(t.clippedSpace.width);return{sequence:A,formatter:A.positionFormatter,clippedSpaceWidth:D}},[t]);if(i==-1)return Rd.default.createElement(Rd.default.Fragment,null);let _=a===3?f.closestGridPosition(i):i,x=l(_),w=x>=0&&x<=v;return Rd.default.createElement(Rd.default.Fragment,null,Rd.default.createElement(Yee,null,Rd.default.createElement(Zee,{style:{opacity:w?1:0,transform:"translate3d(calc(".concat(x,"px - 50%), 0, 0)")}},p.formatForPlayhead(_)),Rd.default.createElement(Qee,{posType:a,style:{opacity:w?1:0,transform:"translate3d(".concat(x,"px, 0, 0)")}}))," ")}),tte=ete}),iu,qo,nte,rte,ite,ate,ote,uk,ste,dU,lte,ck,ute,dk,cte,fU,dte,fte,Sve=P(()=>{bn(),iu=Ut(),ax(),Os(),qo=J(Fe()),ht(),Od(),no(),Gr(),ya(),rte=_e.div(nte||(nte=Y([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>cc.horizontalScrollbar,zr),ate=_e.div(ite||(ite=Y([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),uk=_e.div(ote||(ote=Y([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),vO("absolute","-4px")),dU=_e.div(ste||(ste=Y([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),vO("absolute","0"),vO("absolute","-4px")),ck=_e(dU)(lte||(lte=Y([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),dk=_e(dU)(ute||(ute=Y([`
  cursor: e-resize;
  left: 0px;
`]))),fU=_e.div(cte||(cte=Y([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),t=>t.active?"block":"none",ck,dk,uk,ck,uk,dk),dte=({layoutP:t})=>{let i=(0,qo.useCallback)(B=>B.toFixed(2),[]),a=(0,qo.useMemo)(()=>(0,iu.prism)(()=>{let B=(0,iu.val)(t.rightDims.width)-25,j=(0,iu.val)(t.clippedSpace.range),W=(0,iu.val)(t.sheet).getSequence().length,$=Math.max(j.end,W),re=j.start/$*B,ne=j.end/$*B;return{rightWidth:B,clippedSpaceRange:j,sequenceLength:W,assumedLengthOfSequence:$,rangeStartX:re,rangeEndX:ne,bottom:(0,iu.val)(t.horizontalScrollbarDims.bottom)}}),[t]),{rangeStartX:l,rangeEndX:f,clippedSpaceRange:p,bottom:v}=pr(a),[_,x]=(0,qo.useState)("nothing"),w=(0,qo.useMemo)(()=>{let B=(0,iu.val)(a),j=()=>{B=(0,iu.val)(a)},W=$=>$/B.rightWidth*B.assumedLengthOfSequence;return{onRangeDragStart(){return j(),{onDrag($){x("both");let re=W($),ne=Ou(B.clippedSpaceRange,ce=>ce+re);(0,iu.val)(t.clippedSpace.setRange)(ne)},onDragEnd(){x("nothing")}}},onRangeStartDragStart(){return j(),{onDrag($){x("start");let re=W($),ne={start:B.clippedSpaceRange.start+re,end:B.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,iu.val)(t.clippedSpace.setRange)(ne)},onDragEnd(){x("nothing")}}},onRangeEndDragStart(){return j(),{onDrag($){x("end");let re=W($),ne={start:B.clippedSpaceRange.start,end:B.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=B.assumedLengthOfSequence&&(ne.end=B.assumedLengthOfSequence),(0,iu.val)(t.clippedSpace.setRange)(ne)},onDragEnd(){x("nothing")}}}}},[t,a]),[A,D]=(0,qo.useState)(null);ji(A,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:w.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[R,C]=(0,qo.useState)(null);ji(R,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:w.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[F,N]=(0,qo.useState)(null);return ji(F,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:w.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),qo.default.createElement(rte,I({style:{bottom:v+8+"px"}},tc("hide")),qo.default.createElement(ate,null,qo.default.createElement(uk,{ref:D,style:{width:"".concat(f-l,"px"),transform:"translate3d(".concat(l,"px, 0, 0)")}}),qo.default.createElement(ck,{ref:C,style:{transform:"translate3d(".concat(l,"px, 0, 0)")}},qo.default.createElement(fU,{active:_==="both"||_==="start"},i(p.start))),qo.default.createElement(dk,{ref:N,style:{transform:"translate3d(".concat(f,"px, 0, 0)")}},qo.default.createElement(fU,{active:_==="both"||_==="end"},i(p.end)))))},fte=dte}),hte,pte,mte,gte,vte,wve=P(()=>{hte=J(Fe()),ht(),mte=_e.div(pte||(pte=Y([`
  position: absolute;
  inset: `,`px;
`])),t=>t.room*-1),gte=t=>hte.default.createElement(mte,{room:t.room}),vte=gte}),fk,hk,hU,_te,yte,bte,xte,Ste,wte,Ete,Tte,Eve=P(()=>{ht(),bn(),hN(),$p(),fk=J(Fe()),hk=J(Fe()),hU=Ut(),Cp(),_te=t=>isFinite(t)&&t>=0,bte=_e.div(yte||(yte=Y([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Ste=_e.div(xte||(xte=Y([`
  `,`;
  white-space: nowrap;
`])),Kf),wte=({deltaX:t})=>t*.25,Ete=({layoutP:t,onRequestClose:i})=>{let a=(0,hU.val)(t.sheet),l=a.getSequence(),f=(0,fk.useMemo)(()=>{let v,_=l.position;return{temporarilySetValue(x){v&&(v=void 0),v=pi(x,0,l.length),l.position=v},discardTemporaryValue(){v&&(v=void 0,l.position=_,i("discardTemporaryValue"))},permanentlySetValue(x){v&&(v=void 0),l.position=pi(x,0,l.length),i("permanentlySetValue")}}},[t,l]),p=(0,fk.useRef)(null);return(0,fk.useLayoutEffect)(()=>{p.current.focus()},[]),ur(()=>{let v=a.getSequence(),_=Number((0,hU.val)(v.pointer.position).toFixed(3));return hk.default.createElement(bte,null,hk.default.createElement(Ste,null,"Sequence position"),hk.default.createElement(mC,K(I({value:_},f),{isValid:_te,inputRef:p,nudge:wte})))},[a,f,p])},Tte=Ete}),Mte,Tve=P(()=>{Mte=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),Pte,Mve=P(()=>{Tve(),Pte=t=>Mte?t.metaKey===!0:t.ctrlKey===!0});function Pve(){pk=!1}function Cve(){pk=!0}function Ave(){let t=pe();(0,Cte.useEffect)(()=>{let i=a=>{let l=a.composedPath()[0];if(!(l&&(l.tagName==="INPUT"||l.tagName==="TEXTAREA"))){if(a.key==="z"||a.key==="Z"||a.code==="KeyZ")if(Pte(a))a.shiftKey===!0?t.redo():t.undo();else return;else if(a.code==="Space"&&!a.shiftKey&&!a.metaKey&&!a.altKey&&!a.ctrlKey){if(!pk)return;let f=Rhe();if(f)if(f.playing)f.pause();else{let{projectId:p,sheetId:v}=f.address,_=(0,au.prism)(()=>{let A=(0,au.val)(pe().atomP.ahistoric.projects.stateByProjectId[p].stateBySheetId[v].sequence.focusRange);return au.prism.memo("shouldFollowFocusRange",()=>{let D=f.position;if(A){let R=D>=A.range.start&&D<=A.range.end;return A.enabled?!!R:!0}else return!0},[])&&A&&A.enabled?{range:[A.range.start,A.range.end],isFollowingARange:!0}:{range:[0,(0,au.val)(f.pointer.length)],isFollowingARange:!1}}),x=f.playDynamicRange((0,au.prism)(()=>(0,au.val)(_).range),pe().ticker),w=pU(f);x.finally(()=>{w.set(void 0)}),w.set(_)}else return}else if(a.altKey&&(a.key==="\\"||a.code==="Backslash"||a.code==="IntlBackslash"))t.transaction(({stateEditors:f,drafts:p})=>{f.studio.ahistoric.setVisibilityState(p.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;a.preventDefault(),a.stopPropagation()}};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[])}var Cte,au,pk,pU,Ate,mU=P(()=>{Cte=J(Fe()),Ue(),Mve(),Hf(),au=Ut(),DC(),pk=!0,pU=Jx(t=>new au.Atom(void 0)),Ate=Jx(t=>(0,au.prism)(()=>{let i=pU(t).prism.getValue();if(i)return i.getValue().isFollowingARange;{let{projectId:a,sheetId:l}=t.address,f=(0,au.val)(pe().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[l].sequence.focusRange);if(!f||!f.enabled)return!1;let p=(0,au.val)(t.pointer.position);return p>=f.range.start&&p<=f.range.end}}))});function kve(t,i){return jo(t,{menuItems(){return[{label:"Place marker",callback:()=>{pe().transaction(({stateEditors:a})=>{let l=(0,uc.val)(i.layoutP.sheet),f=l.getSequence();a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:l.address,markers:[{id:gme(),position:f.position}],snappingFunction:f.closestGridPosition})})}}]}})}var uc,_l,kte,Em,Ite,Rte,Dte,gU,Ote,Nte,Lte,Fte,Ute,Bte,Ive=P(()=>{wve(),ya(),Hr(),bn(),uc=Ut(),Cp(),_l=J(Fe()),ht(),Od(),no(),Gr(),Xu(),Yu(),Eve(),mU(),Ns(),Vo(),Ue(),Ed(),ru(),am(),Em=_e.div(kte||(kte=Y([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>cc.playhead,t=>t.isVisible?"block":"none"),Rte=_e.div(Ite||(Ite=Y([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),yd),gU=_e.div(Dte||(Dte=Y([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),zr,Em,Em,yd,Em),Nte=_e.div(Ote||(Ote=Y([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Em),Fte=_e.div(Lte||(Lte=Y([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),gU,Em),Ute=({layoutP:t})=>{let[i,a]=Dr(null),{node:l,toggle:f,close:p}=qu({debugName:"Playhead"},()=>_l.default.createElement(Ku,null,_l.default.createElement(Tte,{layoutP:t,onRequestClose:p}))),v=(0,_l.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let w=(0,uc.val)(t.sheet).getSequence(),A=w.position,D=(0,uc.val)(t.scaledSpace.toUnitSpace),R=(0,uc.val)(t.seeker.setIsSeeking);return R(!0),QL(),{onDrag(C,F,N){var B;let j=D(C);w.position=(B=Ho.checkIfMouseEventSnapToPos(N,{ignore:a}))!=null?B:pi(A+j,0,w.length)},onDragEnd(C){R(!1),im()},onClick(C){f(C,i.current)}}}}),[t,a]),[_]=ji(a,v);dl(_,"draggingPositionInSequenceEditor","ew-resize"),Cd(pr(t.seeker.isSeeking)||_,-1);let[x]=kve(a,{layoutP:t});return ur(()=>{let w=(0,uc.val)(t.seeker.isSeeking),A=(0,uc.val)(t.sheet).getSequence(),D=(0,uc.val)(Ate(A)),R=A.positionPrism.getValue(),C=(0,uc.val)(t.clippedSpace.fromUnitSpace)(R),F=C>=0&&C<=(0,uc.val)(t.clippedSpace.width);return _l.default.createElement(_l.default.Fragment,null,x,l,_l.default.createElement(Em,I({isVisible:F,style:{transform:"translate3d(".concat(C,"px, 0, 0)")},className:"".concat(w&&"seeking"," ").concat(D&&"playheadattachedtofocusrange")},tc("hide")),_l.default.createElement(gU,I({ref:i},Ho.includePositionSnapAttrs(R)),_l.default.createElement(vte,{room:8}),_l.default.createElement(Nte,null),_l.default.createElement(Fte,null,A.positionFormatter.formatForPlayhead(A.closestGridPosition(R)))),_l.default.createElement(Rte,K(I({},Ho.includePositionSnapAttrs(R)),{className:w?"seeking":""}))))},[t,i,l])},Bte=Ute}),Tm,G1,mk,zte,jte,Vte,Hte,Rve=P(()=>{Tm=Ut(),bn(),Ue(),xm(),G1=J(Fe()),ht(),mk=1e3,jte=_e.div(zte||(zte=Y([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),lc,mk,t=>t.enabled?"#000000":"transparent"),Vte=({layoutP:t})=>{let i=(0,G1.useMemo)(()=>(0,Tm.prism)(()=>{let{projectId:a,sheetId:l}=(0,Tm.val)(t.sheet).address;return(0,Tm.val)(pe().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[l].sequence.focusRange)}),[t]);return ur(()=>{let a=i.getValue();if(!a||!a.enabled)return null;let{range:l}=a,f=(0,Tm.val)(t.rightDims.height)-lc,p=(0,Tm.val)(t.clippedSpace.fromUnitSpace),v=(0,Tm.val)(t.clippedSpace.width),_=[];{let x=0,w=p(a.range.start),A,D;x>w?(D=0,A=0):(w>v&&(w=v),D=x,A=(w-x)/mk),_.push({translateX:D,scaleX:A})}{let x=p(a.range.end),w=v,A,D;x>w?(D=0,A=0):(x<0&&(x=0),D=x,A=(w-x)/mk),_.push({translateX:D,scaleX:A})}return G1.default.createElement(G1.default.Fragment,null,_.map(({translateX:x,scaleX:w},A)=>G1.default.createElement(jte,{key:"curtain-".concat(A),enabled:!0,style:{height:"".concat(f,"px"),transform:"translateX(".concat(x,"px) scaleX(").concat(w,")")}})))},[t,i])},Hte=Vte}),Yv,Gte,Wte,qte,Xte,Kte,Dve=P(()=>{Yv=J(Fe()),ht(),bn(),Ue(),$p(),bN(),Wte=_e.div(Gte||(Gte=Y([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),_e.div(qte||(qte=Y([`
  `,`;
  white-space: nowrap;
`])),Kf),Xte=({layoutP:t,marker:i})=>{var a;let l=pr(t.sheet),f=(0,Yv.useMemo)(()=>{let v;return{temporarilySetValue(_){v&&(v.discard(),v=void 0),v=pe().tempTransaction(({stateEditors:x})=>{x.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:l.address,markerId:i.id,label:_})})},discardTemporaryValue(){v&&(v.discard(),v=void 0)},permanentlySetValue(_){v&&(v.discard(),v=void 0),pe().transaction(({stateEditors:x})=>{x.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:l.address,markerId:i.id,label:_})})}}},[t,l]),p=(0,Yv.useRef)(null);return(0,Yv.useLayoutEffect)(()=>{p.current.focus()},[]),Yv.default.createElement(Wte,null,Yv.default.createElement(vC,K(I({value:(a=i.label)!=null?a:""},f),{isValid:()=>!0,inputRef:p})))},Kte=Xte});function Ove(t,i){return jo(t,{menuItems(){return[{label:"Remove marker",callback:()=>{pe().transaction(({stateEditors:a})=>{a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:i.sheetAddress,markerId:i.markerId})})}}]}})}function Nve(t,i){let a=(0,Xo.useRef)(i);a.current=i;let l=(0,Xo.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(i.marker.id,")"),onDragStart(p){let v=a.current.marker,_=(0,gk.val)(i.layoutP.scaledSpace.toUnitSpace),x;return QL(),{onDrag(w,A,D){var R;let C=v,F=Math.max((R=Ho.checkIfMouseEventSnapToPos(D,{ignore:t}))!=null?R:C.position+_(w),0);x?.discard(),x=pe().tempTransaction(({stateEditors:N})=>{N.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,gk.val)(i.layoutP.sheet.address),markers:[K(I({},C),{position:F})],snappingFunction:(0,gk.val)(i.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(w){w?x?.commit():x?.discard(),im()}}}}),[]),[f]=ji(t,l);return Cd(f,i.marker.position),dl(f,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[f]}var gk,Xo,vU,_U,Yte,$te,Zte,Jte,Qte,vk,ene,tne,nne,rne,ine,ane,Lve=P(()=>{gk=Ut(),bn(),Ue(),Ns(),Vo(),Hr(),Xo=J(Fe()),ht(),no(),ya(),Od(),ru(),SA(),GY(),am(),Xu(),Yu(),Dve(),vU=12,_U=12,Yte=vU*2,$te=_U*2,Jte=_e.div(Zte||(Zte=Y([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>cc.marker),vk=_e.div(Qte||(Qte=Y([`
  position: absolute;
  `,`
  pointer-events: none;
`])),pl(vU,_U)),ene=Xo.default.memo(()=>Xo.default.createElement(vk,{children:Xo.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Xo.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),nne=_e.div(tne||(tne=Y([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),nc.CSS,nc.CSS_WHEN_SOMETHING_DRAGGING,nc.BEING_DRAGGED_CLASS,yd,vk,nc.BEING_DRAGGED_CLASS,vk,pl(Yte,$te)),rne=({layoutP:t,markerId:i})=>{let a=pr(t.sheet.address),l=pr(pe().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet.byId[i]);if(!l)return null;let f=pr(t.clippedSpace.width),p=pr(t.clippedSpace.fromUnitSpace)(l.position),v=p<=0||p>f,_=v?-1e4:p,x=v?0:1;return Xo.default.createElement(Jte,{style:{transform:"translateX(".concat(_,"px) scale(").concat(x,")")}},Xo.default.createElement(ane,{marker:l,layoutP:t}))},ine=rne,ane=({layoutP:t,marker:i})=>{let a=pr(t.sheet.address),[l,f]=Dr(null),[p]=Ove(f,{sheetAddress:a,markerId:i.id}),[v]=Nve(f,{layoutP:t,marker:i}),{node:_,toggle:x,close:w}=qu({debugName:"MarkerPopover"},()=>Xo.default.createElement(Ku,null,Xo.default.createElement(Kte,{marker:i,layoutP:t,onRequestClose:w})));return Xo.default.createElement(Xo.default.Fragment,null,p,_,Xo.default.createElement(nne,I({title:i.label?"Marker: ".concat(i.label):"Marker",ref:l,onClick:A=>{x(A,l.current)}},nc.reactProps({isDragging:v,position:i.position}))),Xo.default.createElement(ene,null))}}),_k,one,sne,Fve=P(()=>{bn(),Ue(),_k=J(Fe()),Lve(),one=({layoutP:t})=>{let i=pr(t.sheet.address),a=pe().atomP.historic.projects.stateByProjectId[i.projectId].stateBySheetId[i.sheetId].sequenceEditor.markerSet,l=pr(a.allIds);return _k.default.createElement(_k.default.Fragment,null,l&&Object.keys(l).map(f=>_k.default.createElement(ine,{key:f,layoutP:t,markerId:f})))},sne=one}),lne,Dd,une,cne,dne,fne,Uve=P(()=>{Od(),bn(),lne=Ut(),Dd=J(Fe()),ht(),bve(),xve(),Sve(),Ive(),xm(),Rve(),Fve(),cne=_e.div(une||(une=Y([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>cc.rightOverlay),dne=({layoutP:t})=>ur(()=>{let i=(0,lne.val)(t.rightDims.width);return Dd.default.createElement(cne,{style:{width:i+"px"}},Dd.default.createElement(Bte,{layoutP:t}),Dd.default.createElement(fte,{layoutP:t}),Dd.default.createElement(tte,{layoutP:t}),Dd.default.createElement(Pee,{layoutP:t}),Dd.default.createElement(sne,{layoutP:t}),Dd.default.createElement(Xee,{layoutP:t}),Dd.default.createElement(Hte,{layoutP:t}))},[t]),fne=dne}),hne,yk,pne,mne,gne,vne,Bve=P(()=>{hne=Ut(),bn(),Ue(),yk=J(Fe()),ht(),Ev(),no(),mne=_e.button(pne||(pne=Y([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),gne=({layoutP:t})=>{let i=pr(t.graphEditorDims.isOpen),a=(0,yk.useCallback)(()=>{let l=(0,hne.val)(t.graphEditorDims.isOpen);pe().transaction(({stateEditors:f})=>{f.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!l})})},[t]);return yk.default.createElement(mne,I({onClick:a,title:"Toggle graph editor",className:i?"open":""},tc("hide")),yk.default.createElement(Ppe,null))},vne=gne}),ou,Ii,_ne,yne,bne,xne,cc,Sne,wne,Ene,Tne,Mne,Pne,Cne,Ane,kne,Od=P(()=>{Hf(),bn(),QK(),ou=Ut(),Ii=J(Fe()),ht(),eve(),ik(),cve(),Uve(),Fv(),iK(),DK(),no(),fr(),aa(),Bve(),vd(),Jp(),yne=_e(UL)(_ne||(_ne=Y([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),gv.sequenceEditorPanel),xne=_e.div(bne||(bne=Y([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),cc=(()=>{let t={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},i=-1;for(let a of Object.keys(t))t[a]=i,i++;return t})(),wne=_e(RL)(Sne||(Sne=Y([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),Ene={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Tne={width:800,height:200},Mne=t=>Ii.default.createElement(IL,{panelId:"sequenceEditor",defaultPosition:Ene,minDims:Tne},Ii.default.createElement(Pne,null)),Pne=()=>{let{dims:t}=Lv(),[i,a]=(0,Ii.useState)(null);return _W(i),ur(()=>{let l=ou.prism.memo("panelSize",()=>{let R=t.width,C=t.height;return{width:R,height:C,widthWithoutBorder:R-2,heightWithoutBorder:C-4,screenX:t.left,screenY:t.top}},[t]),f=Lu(Vf().filter(R=>Dn(R)||vt(R)).map(R=>vt(R)?R.sheet:R));if(Lu(f.map(R=>R.template)).length!==1)return Ii.default.createElement(Ii.default.Fragment,null);let p=f[0];if(!p)return Ii.default.createElement(Ii.default.Fragment,null);let v=zL("panelSizeP",l).pointer,_=ou.prism.memo("key",()=>JSON.stringify(p.address),[p]),x=ou.prism.memo("layout",()=>uve(p,v),[p,v]).getValue();if((0,ou.val)(x.tree.children).length===0)return Ii.default.createElement(Ii.default.Fragment,null);let w=ou.prism.memo("containerRef",kne,[]),A=(0,ou.val)(x.graphEditorDims.isAvailable),D=(0,ou.val)(x.graphEditorDims.isOpen);return Ii.default.createElement(yne,{ref:R=>{w(R),R!==i&&a(R)}},Ii.default.createElement(xne,{style:{width:"".concat((0,ou.val)(x.leftDims.width),"px")}}),Ii.default.createElement(zY,{layoutP:x},Ii.default.createElement(Cne,{layoutP:x}),Ii.default.createElement(qQ,{key:_+"-dopeSheet",layoutP:x}),D&&Ii.default.createElement(pQ,{key:_+"-graphEditor",layoutP:x}),A&&Ii.default.createElement(vne,{layoutP:x}),Ii.default.createElement(fne,{layoutP:x})))},[t,i])},Cne=({layoutP:t})=>ur(()=>{let i=(0,ou.val)(t.sheet);return Ii.default.createElement(wne,{style:{width:(0,ou.val)(t.leftDims.width)}},Ii.default.createElement(zO,null,Ii.default.createElement(jf,null,i.address.sheetId," "),Ii.default.createElement(Ux,null,":",""),Ii.default.createElement(jf,null,i.address.sheetInstanceId," "),Ii.default.createElement(Ux,null,"",">",""),Ii.default.createElement(jf,null,"Sequence")))},[t]),Ane=Mne,kne=()=>{let t=null,i={passive:!1,capture:!1},a=l=>{Math.abs(l.deltaY)<Math.abs(l.deltaX)&&(l.preventDefault(),l.stopPropagation())};return l=>{t!==l&&t&&t.removeEventListener("wheel",a,i),t=l,l&&l.addEventListener("wheel",a,i)}}}),Mm,Ine,Rne,zve=P(()=>{Vhe(),CL(),Mm=J(Fe()),Ue(),bn(),nge(),Od(),Ine=()=>{let t=pr(pe().paneManager.allPanesD),i=Object.entries(t).map(([a,l])=>Mm.default.createElement(JK,{key:"pane-".concat(a),paneInstance:l}));return Mm.default.createElement(Mm.default.Fragment,null,i,Mm.default.createElement(BV,null),Mm.default.createElement(QX,null),Mm.default.createElement(Ane,null))},Rne=Ine}),Dne,One,Nne,jve=P(()=>{ht(),eA(),One=_e(Dv)(Dne||(Dne=Y([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),Nne=One}),Vve=ae((t,i)=>{var a,l;a=[],l=[];function f(p,v,_){var x,w,A,D,R,C,F,N;if(p===v)return 0;if(x=p.length,w=v.length,x===0)return w;if(w===0)return x;for(_&&(p=p.toLowerCase(),v=v.toLowerCase()),F=0;F<x;)l[F]=p.charCodeAt(F),a[F]=++F;for(N=0;N<w;)for(A=v.charCodeAt(N),D=R=N++,F=-1;++F<x;)C=A===l[F]?R:R+1,R=a[F],a[F]=D=R>D?C>D?D+1:C:C>R?R+1:C;return D}i.exports=f}),Hve=ae((t,i)=>{var a=Vve();function l(){var f,p,v,_,x,w=0,A=arguments[0],D=arguments[1],R=D.length,C=arguments[2];C&&(_=C.threshold,x=C.ignoreCase),_===void 0&&(_=0);for(var F=0;F<R;++F)x?p=a(A,D[F],!0):p=a(A,D[F]),p>A.length?f=1-p/D[F].length:f=1-p/A.length,f>w&&(w=f,v=D[F]);return w>=_?v:null}i.exports=l});function Gve(t,i,a="Did you mean ",l="?"){let f=(0,Lne.default)(t,i,{threshold:.7});return f?a+JSON.stringify(f)+l:""}var Lne,Wve=P(()=>{Lne=J(Hve())});function Fne(t,i){return t.length<=i?t:t.substr(0,i-3)+"..."}var qve=P(()=>{}),Une,yU,Bne=P(()=>{qve(),Une=t=>typeof t=="string"?'string("'.concat(Fne(t,10),'")'):typeof t=="number"?"number(".concat(Fne(String(t),10),")"):t===null?"null":t===void 0?"undefined":typeof t=="boolean"?String(t):Array.isArray(t)?"array":typeof t=="object"?"object":"unknown",yU=Une}),zne,jne,bU,Vne=P(()=>{ht(),Xp(),jne=_e(x8)(zne||(zne=Y([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),bU=jne}),$v,Hne,Gne,Wne,Zv,W1=P(()=>{ht(),Gr(),$v=J(Fe()),h1(),hC(),Qq(),Vne(),Gne=_e.button(Hne||(Hne=Y([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),zr,bU),Wne=$v.default.forwardRef((t,i)=>{var a=t,{title:l}=a,f=ue(a,["title"]);let[p,v]=Rv({enabled:typeof l=="string"},()=>$v.default.createElement(yL,null,l));return $v.default.createElement($v.default.Fragment,null,p,$v.default.createElement(Gne,I({ref:fC([v,i])},f))," ")}),Zv=Wne}),qne,Xne,Kne,Yne,$ne,Xve=P(()=>{qne=J(Fe()),W1(),ht(),Gr(),Kne=_e(Zv)(Xne||(Xne=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),zr),Yne=({config:t,testId:i})=>{var a;return qne.default.createElement(Kne,{onClick:t.onClick,"data-testid":i,title:t.title,dangerouslySetInnerHTML:{__html:(a=t.svgSource)!=null?a:""}})},$ne=Yne});function Kve({value:t,label:i,icon:a,onClick:l,isSelected:f}){return Jv.default.createElement(Jv.default.Fragment,null,Jv.default.createElement(Zv,{forwardedAs:_8,className:f?"selected":void 0,"aria-label":i,onClick:l,title:i},a))}var Jv,Zne,Jne,Yve=P(()=>{Jv=J(Fe()),Xp(),W1(),Vne(),Zne=({value:t,onChange:i,options:a})=>Jv.default.createElement(bU,null,a.map(({label:l,icon:f,value:p})=>Jv.default.createElement(Kve,{key:p,value:p,isSelected:t===p,label:l,icon:f,onClick:()=>i(p)}))),Jne=Zne}),xU,Qne,ere,tre,nre,$ve=P(()=>{xU=J(Fe()),ht(),Gr(),Yve(),ere=_e.div(Qne||(Qne=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),zr),tre=({config:t})=>xU.default.createElement(Jne,{onChange:t.onChange,options:t.options.map(({label:i,value:a,svgSource:l})=>({label:i,value:a,icon:xU.default.createElement(ere,{dangerouslySetInnerHTML:{__html:l}})})),value:t.value}),nre=tre}),q1,rre,ire,are,ore,Zve=P(()=>{q1=J(Fe()),ht(),Gr(),W1(),lW(),Xu(),ire=_e.div(rre||(rre=Y([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),zr),are=({config:t})=>{let i=(0,q1.useRef)(null),a=qu(()=>{let l=i.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+t.label,constraints:{maxX:l.right,maxY:8,minX:l.left,minY:8},verticalGap:2}},()=>q1.default.createElement(YN,{items:t.items.map((l,f)=>({label:l.label,callback:()=>{var p;try{(p=l.onClick)==null||p.call(l)}catch(v){console.error(v)}}})),onRequestClose:()=>{a.close("clicked")}}));return q1.default.createElement(ire,null,a.node,q1.default.createElement(Zv,{ref:i,onClick:l=>{a.open(l,i.current)}},t.label))},ore=are});function Jve(t){return SU[t]}var X1,sre,SU,lre,ure,Qve=P(()=>{Wve(),Bne(),X1=J(Fe()),Xve(),$ve(),Zve(),sre=t=>X1.default.createElement(X1.default.Fragment,null,t.config.map((i,a)=>X1.default.createElement(lre,{config:i,key:a}))),SU={Icon:$ne,Switch:nre,Flyout:ore},lre=({config:t})=>{let i=Jve(t.type);if(!i)throw new Error("No tool with tool.type ".concat(yU(t.type)," exists. Did you mean ").concat(Gve(t.type,Object.keys(SU))));return X1.default.createElement(i,{config:t})},ure=sre}),cre,dc,dre,fre,hre,wU,pre,mre,EU,gre=P(()=>{cre=Ut(),bn(),Ue(),dc=J(Fe()),ht(),Qve(),fre=_e.div(dre||(dre=Y([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),wU=_e.div(hre||(hre=Y([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),pre=({extension:t,toolbarId:i})=>{var a;let l=(0,dc.useMemo)(()=>new cre.Atom([]),[]),f=(a=t.toolbars)==null?void 0:a[i];(0,dc.useLayoutEffect)(()=>{let v=f?.(l.set.bind(l),pe().publicApi);if(typeof v=="function")return v},[t,i,f]);let p=pr(l.prism);return dc.default.createElement(ure,{config:p})},mre=({toolbarId:t,showLeftDivider:i})=>{var a;let l=[],f=pr(pe().atomP.ephemeral.extensions.byId),p=!1;for(let[,v]of Object.entries(f))!v||!((a=v.toolbars)!=null&&a[t])||(l.push(dc.default.createElement(dc.default.Fragment,{key:"extensionToolbar-"+v.id},p?dc.default.createElement(wU,null):void 0,dc.default.createElement(pre,{extension:v,toolbarId:t}))),p=!0);return l.length===0?null:dc.default.createElement(fre,{"data-testid":"theatre-extensionToolbar-".concat(t)},i?dc.default.createElement(wU,null):void 0,l)},EU=mre}),K1,vre,_re,yre,bk,e_e=P(()=>{ht(),K1=J(Fe()),W1(),_re=_e(Zv)(vre||(vre=Y([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:t})=>t?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:t})=>t?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),yre=(0,K1.forwardRef)((t,i)=>{var a=t,{children:l,hint:f,pinned:p,icon:v,pinHintIcon:_,unpinHintIcon:x}=a,w=ue(a,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[A,D]=(0,K1.useState)(!1),R=A||f;return K1.default.createElement(_re,K(I({},w),{pinned:p,ref:i,onMouseOver:()=>D(!0),onMouseOut:()=>D(!1)}),K1.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},R&&!p?_:R&&p?x:v),l)}),bk=yre});function t_e(t){return TU.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),TU.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var TU,MU,n_e=P(()=>{TU=J(Fe()),MU=t_e});function r_e(t){return PU.createElement("svg",I({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),PU.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var PU,CU,i_e=P(()=>{PU=J(Fe()),CU=r_e}),xa,bre,xre,Sre,AU,wre,fh,Ere,Tre,Mre,Pre,Cre,Are,kre,Ire,Rre,xk,Dre,Ore,kU,IU,Nre,Lre,a_e=P(()=>{bn(),Ue(),xa=J(Fe()),ht(),xre=_e.div(bre||(bre=Y([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),AU=_e.div(Sre||(Sre=Y([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),fh=_e(AU)(wre||(wre=Y([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),Tre=_e(AU)(Ere||(Ere=Y([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),Pre=_e.div(Mre||(Mre=Y([`
  font-weight: 600;
`]))),Are=_e.div(Cre||(Cre=Y([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),Ire=_e.div(kre||(kre=Y([`
  margin-left: 2px;
`]))),xk=_e.div(Rre||(Rre=Y([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),Ore=_e.div(Dre||(Dre=Y([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),kU="0.7.2",IU=kU.match(/^[^\-]+/)[0],Nre=xa.default.forwardRef((t,i)=>{let a=pr(pe().atomP.ahistoric.updateChecker.result.hasUpdates);return xa.default.createElement(xre,{ref:i},xa.default.createElement(fh,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),xa.default.createElement(fh,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),xa.default.createElement(xk,null),xa.default.createElement(fh,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),xa.default.createElement(fh,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),xa.default.createElement(fh,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),xa.default.createElement(xk,null),xa.default.createElement(Tre,null,xa.default.createElement(Pre,null,"Version"),xa.default.createElement(Are,null,xa.default.createElement(Ire,null,kU," ",a===!0?"(outdated)":a===!1?"(latest)":""))),a===!0&&xa.default.createElement(xa.default.Fragment,null,xa.default.createElement(xk,null),xa.default.createElement(fh,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(IU)),className:"",target:"_blank"},"Update",xa.default.createElement(Ore,null)),xa.default.createElement(fh,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(IU)),className:"",target:"_blank"},"What's new?")))}),Lre=Nre}),ri,Fre,Ure,Bre,zre,jre,Vre,RU,Hre,DU,Gre,OU,Wre,qre,o_e=P(()=>{bn(),Ue(),ri=J(Fe()),ht(),h1(),jve(),eA(),Fre=Ut(),gre(),e_e(),Bx(),n_e(),i_e(),W1(),Xu(),a_e(),S1(),Bre=_e.div(Ure||(Ure=Y([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),jre=_e.div(zre||(zre=Y([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),RU=_e.div(Vre||(Vre=Y([`
  display: flex;
  gap: 8px;
`]))),DU=_e.div(Hre||(Hre=Y([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:t})=>t==="info"?"#40aaa4":"#f59e0b"),_e.div(Gre||(Gre=Y([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),OU=!1,Wre=()=>{var t,i,a;let l=ur(()=>{let N=(0,Fre.val)(pe().atomP.ephemeral.coreByProject);return Object.entries(N).map(([B,j])=>({projectId:B,state:j})).filter(({state:B})=>B.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[f,p]=Rv({enabled:l.length>0,enterDelay:l.length>0?0:200},()=>l.length>0?ri.default.createElement(Nne,null,l.length===1?'There is a state conflict in project "'.concat(l[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(l.length," projects that have state conflicts. They are highlighted in the outline below. ")):ri.default.createElement(Dv,null,ri.default.createElement(ri.default.Fragment,null,"Outline"))),v=(t=pr(pe().atomP.ahistoric.pinOutline))!=null?t:!0,_=(i=pr(pe().atomP.ahistoric.pinDetails))!=null?i:!0,x=pr(pe().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,w=qu(()=>{let N=A.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:N.right,maxY:8,minX:N.left-140,minY:8},verticalGap:2}},()=>ri.default.createElement(Lre,null)),A=(0,ri.useRef)(null),D=(0,ri.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(OU||(OU=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),x||window.__IS_VISUAL_REGRESSION_TESTING?!0:x),[x]),{hasNotifications:R}=SL(),[C,F]=xX();return ri.default.createElement(Bre,null,ri.default.createElement(RU,null,f,ri.default.createElement(bk,{ref:p,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{pe().transaction(({stateEditors:N,drafts:B})=>{var j;N.studio.ahistoric.setPinOutline(!((j=B.ahistoric.pinOutline)==null||j))})},icon:ri.default.createElement(VO,null),pinHintIcon:ri.default.createElement(CU,null),unpinHintIcon:ri.default.createElement(MU,null),pinned:v}),l.length>0?ri.default.createElement(jre,null,l.length):null,ri.default.createElement(EU,{showLeftDivider:!0,toolbarId:"global"})),ri.default.createElement(RU,null,C,ri.default.createElement(bk,{ref:F,onClick:()=>{pe().transaction(({stateEditors:N,drafts:B})=>{var j;N.studio.ahistoric.setPinNotifications(!((j=B.ahistoric.pinNotifications)!=null&&j))})},icon:ri.default.createElement(sC,null),pinHintIcon:ri.default.createElement(sC,null),unpinHintIcon:ri.default.createElement(sC,null),pinned:(a=pr(pe().atomP.ahistoric.pinNotifications))!=null?a:!1},R&&ri.default.createElement(DU,{type:"warning"})),w.node,ri.default.createElement(Zv,{ref:A,onClick:N=>{w.toggle(N,A.current)}},ri.default.createElement(U8,null),D&&ri.default.createElement(DU,{type:"info"})),ri.default.createElement(bk,{ref:p,onClick:()=>{pe().transaction(({stateEditors:N,drafts:B})=>{var j;N.studio.ahistoric.setPinDetails(!((j=B.ahistoric.pinDetails)==null||j))})},icon:ri.default.createElement(F8,null),pinHintIcon:ri.default.createElement(MU,null),unpinHintIcon:ri.default.createElement(CU,null),pinned:_})))},qre=Wre}),Xre,Y1,Kre,$1,Yre,$re,Zre,Jre,Qre=P(()=>{Xre=Ut(),bn(),Y1=J(Fe()),Kre=J(Ma()),$1=new Xre.Atom({set:{},byId:{}}),Yre=1,$re=()=>{let t=Yre++;function i(l,f,p){$1.reduce(v=>({byId:K(I({},v.byId),{[t]:{comp:l,props:f,portalNode:p}}),set:K(I({},v.set),{[t]:!0})}))}function a(){$1.reduce(l=>{let f=I({},l.set),p=I({},l.byId);return delete f[t],{byId:p,set:f}})}return{mountOrRender:i,unmount:a}},Zre=()=>{let t=Object.keys(pr($1.pointer.set));return Y1.default.createElement(Y1.default.Fragment,null,t.map(i=>Y1.default.createElement(Jre,{key:"id-"+i,id:i})))},Jre=({id:t})=>{let{comp:i,portalNode:a,props:l}=pr($1.pointer.byId[t]);return(0,Kre.createPortal)(Y1.default.createElement(i,I({},l)),a)}});function s_e(t){let i=pe(),[a,l]=Dr(void 0),f=XQ();f.configureLogging({min:128,dev:LU,internal:LU});let p=f.getLogger().named("Theatre.js UIRoot");Ave();let v=pr(i.atomP.ahistoric.visibilityState);return(0,ao.useEffect)(()=>(v==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[v]),ur(()=>{let _=(0,NU.val)(i.atomP.ahistoric.visibilityState);return(0,NU.val)(i.atomP.ephemeral.initialised)?ao.default.createElement(tH,{logger:p},ao.default.createElement(aq,null,ao.default.createElement(Xhe,null,ao.default.createElement(aie,null),ao.default.createElement(pv.Provider,{value:l},ao.default.createElement(BO,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:t.containerShadow},ao.default.createElement(ao.default.Fragment,null,ao.default.createElement(tie,null),ao.default.createElement(rie,{className:_==="everythingIsHidden"?"invisible":""},ao.default.createElement(UO,{ref:a}),ao.default.createElement(qre,null),ao.default.createElement(Rne,null),ao.default.createElement(SX,null)))))))):null},[i,a,l])}var NU,ao,eie,tie,nie,rie,iie,LU,aie,l_e=P(()=>{Ue(),bn(),NU=Ut(),ao=J(Fe()),ht(),zve(),o_e(),Hr(),Xp(),mU(),Ns(),oq(),cN(),Qre(),Gr(),sk(),Wf(),S1(),tie=typeof window<"u"?yx(eie||(eie=Y([`
  :host {
    contain: strict;
  }
`]))):{},rie=_e(eH)(nie||(nie=Y([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),LU=/Playground.+Theatre\.js/.test((iie=typeof document<"u"?document?.title:null)!=null?iie:""),aie=()=>ao.default.createElement(Zre,null)}),u_e=ae(t=>{var i=Ma();t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot}),oie={};ge(oie,{default:()=>uie});var sie,lie,uie,c_e=P(()=>{l_e(),sie=J(Fe()),lie=J(u_e()),Qre(),Gr(),gre(),uie=class{constructor(){oe(this,"containerEl",document.createElement("div")),oe(this,"_renderTimeout"),oe(this,"_documentBodyUIIsRenderedIn"),oe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let t=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let i=document.createElement("div");return i.id="theatrejs-faux-shadow-root",document.body.appendChild(i),i}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=t()}render(){let t=()=>{if(!document.body){this._renderTimeout=setTimeout(t,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),lie.default.createRoot(this.containerShadow).render(sie.default.createElement(s_e,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(t,10)}renderToolset(t,i){let a=$re();return a.mountOrRender(mhe(EU),{toolbarId:t},i),a.unmount}}}),d_e=ae(t=>{t.compare=f,t.reduce=p;var i,a,l;t.REMOVE=i=-1,t.ADD=a=1,t.EQUAL=l=0;function f(A,D){var R=A.length,C=D.length,F=v(A,D),N=F<R&&F<C?_(A,D):0,B=N+F-1;R-=B,C-=B;for(var j=w(R,C),W=R-1;W>=0;--W)for(var $=C-1;$>=0;--$)j[$][W]=x(j,A,D,F,W,$);return{prefix:F,matrix:j,suffix:N}}function p(A,D,R){var C,F,N,B,j=R.matrix,W=R.prefix;for(C=0;C<W;++C)D=A(D,l,C,C);for(N=C,W=j.length,C=0,F=0;C<W;)switch(B=j[C][F].type,D=A(D,B,C+N,F+N),B){case l:++C,++F;break;case i:++F;break;case a:++C;break}for(C+=N,F+=N,W=R.suffix,N=0;N<W;++N)D=A(D,l,C+N,F+N);return D}function v(A,D){for(var R=0,C=Math.min(A.length,D.length);R<C&&A[R]===D[R];)++R;return R}function _(A,D){for(var R=A.length-1,C=D.length-1,F=Math.min(R,C),N=0;N<F&&A[R-N]===D[C-N];)++N;return N}function x(A,D,R,C,F,N){return D[F+C]===R[N+C]?{value:A[N+1][F+1].value,type:l}:A[N][F+1].value<A[N+1][F].value?{value:A[N][F+1].value+1,type:i}:{value:A[N+1][F].value+1,type:a}}function w(A,D){var R=[],C,F,N;for(N=R[D]=[],F=0;F<A;++F)N[F]={value:A-F,type:i};for(C=0;C<D;++C)R[C]=[],R[C][A]={value:D-C,type:a};return R[D][A]={value:0,type:l},R}}),cie=ae(t=>{t.cons=i,t.tail=a,t.map=l;function i(f,p){var v=p.length,_=new Array(v+1);_[0]=f;for(var x=0;x<v;++x)_[x+1]=p[x];return _}function a(f){for(var p=f.length-1,v=new Array(p),_=0;_<p;++_)v[_]=f[_+1];return v}function l(f,p){for(var v=new Array(p.length),_=0;_<p.length;++_)v[_]=f(p[_]);return v}}),f_e=ae((t,i)=>{i.exports=v;var a=/\/|~1|~0/g,l="/",f="~",p="~1";function v(_,x){var w,A,D,R;for(w=_.charAt(0)===l?1:0,A="",a.lastIndex=w;D=a.exec(_);)if(R=D[0],A+=_.slice(w,a.lastIndex-R.length),w=a.lastIndex,R===l){if(x(A)===!1)return _;A=""}else A+=R===p?l:f;return A+=_.slice(w),x(A),_}}),FU=ae(t=>{var i=f_e();t.find=A,t.join=R,t.absolute=D,t.parse=C,t.contains=F,t.encodeSegment=B,t.decodeSegment=N,t.parseArrayIndex=$,t.isValidArrayIndex=W;var a="/",l=/\//g,f="~1",p=/~1/g,v="~",_=/~/g,x="~0",w=/~0/g;function A(ne,ce,Te,Ie){if(typeof ce=="string"){if(ce==="")return{target:ne,key:void 0};if(ce===a)return{target:ne,key:""};var ye=ne,Ne,et=Ie!==void 0;return i(ce,function(de){if(ne==null)return ye=null,!1;Array.isArray(ne)?Ne=et?re(Te,$(de),ne,Ie):de==="-"?de:$(de):Ne=de,ye=ne,ne=ne[Ne]}),ye===null?void 0:{target:ye,key:Ne}}}function D(ne){return ne[0]===a?ne:a+ne}function R(ne){return ne.join(a)}function C(ne){var ce=[];return i(ne,ce.push.bind(ce)),ce}function F(ne,ce){return ce.indexOf(ne)===0&&ce[ne.length]===a}function N(ne){return ne.replace(p,a).replace(w,v)}function B(ne){return ne.replace(_,x).replace(l,f)}var j=/^(0|[1-9]\d*)$/;function W(ne){return j.test(ne)}function $(ne){if(W(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,ce,Te,Ie){var ye=ce;if(ye<0)throw new Error("array index out of bounds "+ye);if(Ie!==void 0&&typeof ne=="function"&&(ye=ne(ce,Te,Ie),ye<0))throw new Error("could not find patch context "+Ie);return ye}}),die=ae((t,i)=>{i.exports=a;function a(p){return p==null||typeof p!="object"?p:Array.isArray(p)?l(p):f(p)}function l(p){for(var v=p.length,_=new Array(v),x=0;x<v;++x)_[x]=a(p[x]);return _}function f(p){for(var v=Object.keys(p),_={},x,w=0,A=v.length;w<A;++w)x=v[w],_[x]=a(p[x]);return _}}),h_e=ae((t,i)=>{i.exports=a;function a(p,v){return p===v?!0:Array.isArray(p)&&Array.isArray(v)?l(p,v):typeof p=="object"&&typeof v=="object"?f(p,v):!1}function l(p,v){if(p.length!==v.length)return!1;for(var _=0;_<p.length;++_)if(!a(p[_],v[_]))return!1;return!0}function f(p,v){if(p===null&&v!==null||p!==null&&v===null)return!1;var _=Object.keys(p),x=Object.keys(v);if(_.length!==x.length)return!1;for(var w=0,A;w<_.length;++w)if(A=_[w],!(A in v&&a(p[A],v[A])))return!1;return!0}}),p_e=ae((t,i)=>{var a=FU();i.exports=function(A,D){var R=a.parse(A.path),C=a.parse(D.path),F=x(R,C),N=p(R,C,F.length),B=w(A),j=w(D);return F.length===0&&!N?[j,B]:N?f(B,R,j,C):l(B,R,j)};function l(A,D,R,C){if(A.path===R.path)throw new TypeError("cannot commute "+A.op+","+R.op+" with identical object paths");return[R,A]}function f(A,D,R,C){return D.length===C.length?v(A,D,R,C):(D.length>C.length?(D=_(R,C,A,D,-1),A.path=a.absolute(a.join(D))):(C=_(A,D,R,C,1),R.path=a.absolute(a.join(C))),[R,A])}function p(A,D,R){return a.isValidArrayIndex(A[R])&&a.isValidArrayIndex(D[R])}function v(A,D,R,C){var F=D.length-1,N=+D[F],B=+C[F],j;return N<B?A.op==="add"||A.op==="copy"?(j=C.slice(),j[F]=Math.max(0,B-1),R.path=a.absolute(a.join(j))):A.op==="remove"&&(j=C.slice(),j[F]=B+1,R.path=a.absolute(a.join(j))):R.op==="add"||R.op==="copy"?(j=D.slice(),j[F]=N+1,A.path=a.absolute(a.join(j))):N>B&&R.op==="remove"&&(j=D.slice(),j[F]=Math.max(0,N-1),A.path=a.absolute(a.join(j))),[R,A]}function _(A,D,R,C,F){var N=D.length-1,B=+D[N],j=+C[N],W=C.slice();return B>j||(A.op==="add"||A.op==="copy"?W[N]=Math.max(0,j-F):A.op==="remove"&&(W[N]=Math.max(0,j+F))),W}function x(A,D){var R=A.length,C=D.length;if(R===0||C===0||R<2&&C<2)return[];for(var F=R===C?R-1:Math.min(R,C),N=0;N<F&&A[N]===D[N];)++N;return A.slice(0,N)}function w(A){return A.op==="remove"?{op:A.op,path:A.path}:A.op==="copy"||A.op==="move"?{op:A.op,path:A.path,from:A.from}:{op:A.op,path:A.path,value:A.value}}}),fie=ae((t,i)=>{i.exports=a;function a(l){Error.call(this),this.name=this.constructor.name,this.message=l,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),UU=ae((t,i)=>{i.exports=a;function a(l){Error.call(this),this.name=this.constructor.name,this.message=l,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),hie=ae((t,i)=>{i.exports=a;function a(l){Error.call(this),this.name=this.constructor.name,this.message=l,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),pie=ae(t=>{var i=FU(),a=die(),l=h_e(),f=p_e(),p=cie(),v=fie(),_=UU(),x=hie(),w=i.find,A=i.parseArrayIndex;t.test={apply:D,inverse:R,commute:C},t.add={apply:F,inverse:B,commute:j},t.remove={apply:ne,inverse:Te,commute:Ie},t.replace={apply:W,inverse:$,commute:re},t.move={apply:ye,inverse:Ne,commute:et},t.copy={apply:de,inverse:Le,commute:j};function D(Re,Ce,qe){var Et=w(Re,Ce.path,qe.findContext,Ce.context),fe=Et.target,be,tt;if(Array.isArray(fe)?(be=A(Et.key),tt=fe[be]):tt=Et.key===void 0?Et.target:Et.target[Et.key],!l(tt,Ce.value))throw new v("test failed "+JSON.stringify(Ce));return Re}function R(Re,Ce){return Re.push(Ce),1}function C(Re,Ce){if(Re.path===Ce.path&&Ce.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Ce.op==="test"||Ce.op==="replace"?[Ce,Re]:f(Re,Ce)}function F(Re,Ce,qe){var Et=w(Re,Ce.path,qe.findContext,Ce.context);if(Z(Et))throw new _("path does not exist "+Ce.path);if(Ce.value===void 0)throw new _("missing value");var fe=a(Ce.value);return Et.key===void 0?fe:(N(Et,fe),Re)}function N(Re,Ce){var qe=Re.target;if(Array.isArray(qe))if(Re.key==="-")qe.push(Ce);else{if(Re.key>qe.length)throw new _("target of add outside of array bounds");qe.splice(Re.key,0,Ce)}else if(Nt(qe))qe[Re.key]=Ce;else throw new _("target of add must be an object or array "+Re.key)}function B(Re,Ce){var qe=Ce.context;return qe!==void 0&&(qe={before:qe.before,after:p.cons(Ce.value,qe.after)}),Re.push({op:"test",path:Ce.path,value:Ce.value,context:qe}),Re.push({op:"remove",path:Ce.path,context:qe}),1}function j(Re,Ce){if(Re.path===Ce.path&&Ce.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return f(Re,Ce)}function W(Re,Ce,qe){var Et=w(Re,Ce.path,qe.findContext,Ce.context);if(Z(Et)||Ge(Et))throw new _("path does not exist "+Ce.path);if(Ce.value===void 0)throw new _("missing value");var fe=a(Ce.value);if(Et.key===void 0)return fe;var be=Et.target;return Array.isArray(be)?be[A(Et.key)]=fe:be[Et.key]=fe,Re}function $(Re,Ce,qe,Et){var fe=Et[qe-1];if(fe===void 0||fe.op!=="test"||fe.path!==Ce.path)throw new x("cannot invert replace w/o test");var be=fe.context;return be!==void 0&&(be={before:be.before,after:p.cons(fe.value,p.tail(be.after))}),Re.push({op:"test",path:fe.path,value:Ce.value}),Re.push({op:"replace",path:fe.path,value:fe.value}),2}function re(Re,Ce){if(Re.path===Ce.path&&Ce.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Ce.op==="test"||Ce.op==="replace"?[Ce,Re]:f(Re,Ce)}function ne(Re,Ce,qe){var Et=w(Re,Ce.path,qe.findContext,Ce.context);if(Z(Et)||Et.target[Et.key]===void 0)throw new _("path does not exist "+Ce.path);return ce(Et),Re}function ce(Re){var Ce=Re.target,qe;if(Array.isArray(Ce))return qe=Ce.splice(A(Re.key),1),qe[0];if(Nt(Ce))return qe=Ce[Re.key],delete Ce[Re.key],qe;throw new _("target of remove must be an object or array")}function Te(Re,Ce,qe,Et){var fe=Et[qe-1];if(fe===void 0||fe.op!=="test"||fe.path!==Ce.path)throw new x("cannot invert remove w/o test");var be=fe.context;return be!==void 0&&(be={before:be.before,after:p.tail(be.after)}),Re.push({op:"add",path:fe.path,value:fe.value,context:be}),2}function Ie(Re,Ce){return Re.path===Ce.path&&Ce.op==="remove"?[Ce,Re]:f(Re,Ce)}function ye(Re,Ce,qe){if(i.contains(Ce.path,Ce.from))throw new _("move.from cannot be ancestor of move.path");var Et=w(Re,Ce.path,qe.findContext,Ce.context),fe=w(Re,Ce.from,qe.findContext,Ce.fromContext);return N(Et,ce(fe)),Re}function Ne(Re,Ce){return Re.push({op:"move",path:Ce.from,context:Ce.fromContext,from:Ce.path,fromContext:Ce.context}),1}function et(Re,Ce){if(Re.path===Ce.path&&Ce.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return f(Re,Ce)}function de(Re,Ce,qe){var Et=w(Re,Ce.path,qe.findContext,Ce.context),fe=w(Re,Ce.from,qe.findContext,Ce.fromContext);if(Z(fe)||Ge(fe))throw new _("copy.from must exist");var be=fe.target,tt;return Array.isArray(be)?tt=be[A(fe.key)]:tt=be[fe.key],N(Et,a(tt)),Re}function Le(Re,Ce){throw new x("cannot invert "+Ce.op)}function Z(Re){return Re===void 0||Re.target==null&&Re.key!==void 0}function Ge(Re){return Re.key!==void 0&&Re.target[Re.key]===void 0}function Nt(Re){return Re!==null&&typeof Re=="object"}}),m_e=ae(t=>{var i=pie(),a=die(),l=UU();t.apply=p,t.applyInPlace=v,t.clone=a,t.isValidObject=x,t.defaultHash=_;var f={};function p(A,D,R){return v(A,a(D),R)}function v(A,D,R){if(R||(R=f),!Array.isArray(A))return D;for(var C,F,N=0;N<A.length;++N){if(F=A[N],C=i[F.op],C===void 0)throw new l("invalid op "+JSON.stringify(F));D=C.apply(D,F,R)}return D}function _(A){return x(A)||w(A)?JSON.stringify(A):A}function x(A){return A!==null&&Object.prototype.toString.call(A)==="[object Object]"}function w(A){return Object.prototype.toString.call(A)==="[object Array]"}}),g_e=ae((t,i)=>{var a=pie();i.exports=function(f){var p=[],v,_;for(v=f.length-1;v>=0;v-=_)_=l(p,f[v],v,f);return p};function l(f,p,v,_){var x=a[p.op];return x!==void 0&&typeof x.inverse=="function"?x.inverse(f,p,v,_):1}}),v_e=ae(t=>{var i=d_e(),a=cie(),l=m_e(),f=g_e(),p=FU(),v=p.encodeSegment;t.diff=w,t.patch=l.apply,t.patchInPlace=l.applyInPlace,t.inverse=f,t.clone=l.clone,t.InvalidPatchOperationError=UU(),t.TestFailedError=fie(),t.PatchNotInvertibleError=hie();var _=l.isValidObject,x=l.defaultHash;function w($,re,ne){return D($,re,"",A(ne,[])).patch}function A($,re){return typeof $=="object"?{patch:re,hash:B(W,$.hash,x),makeContext:B(W,$.makeContext,j),invertible:$.invertible!==!1}:{patch:re,hash:B(W,$,x),makeContext:j,invertible:!0}}function D($,re,ne,ce){return Array.isArray($)&&Array.isArray(re)?C($,re,ne,ce):_($)&&_(re)?R($,re,ne,ce):N($,re,ne,ce)}function R($,re,ne,ce){var Te=Object.keys(re),Ie=ce.patch,ye,Ne;for(ye=Te.length-1;ye>=0;--ye){Ne=Te[ye];var et=ne+"/"+v(Ne);$[Ne]!==void 0?D($[Ne],re[Ne],et,ce):Ie.push({op:"add",path:et,value:re[Ne]})}for(Te=Object.keys($),ye=Te.length-1;ye>=0;--ye)if(Ne=Te[ye],re[Ne]===void 0){var de=ne+"/"+v(Ne);ce.invertible&&Ie.push({op:"test",path:de,value:$[Ne]}),Ie.push({op:"remove",path:de})}return ce}function C($,re,ne,ce){var Te=a.map(ce.hash,$),Ie=a.map(ce.hash,re),ye=i.compare(Te,Ie);return F($,re,ne,ce,ye)}function F($,re,ne,ce,Te){var Ie=0;return i.reduce(function(ye,Ne,et,de){var Le,Z,Ge=ye.patch,Nt=ne+"/"+(de+Ie);return Ne===i.REMOVE?(Le=Ge[Ge.length-1],Z=ye.makeContext(de,$),ye.invertible&&Ge.push({op:"test",path:Nt,value:$[de],context:Z}),Le!==void 0&&Le.op==="add"&&Le.path===Nt?(Le.op="replace",Le.context=Z):Ge.push({op:"remove",path:Nt,context:Z}),Ie-=1):Ne===i.ADD?(Ge.push({op:"add",path:Nt,value:re[et],context:ye.makeContext(de,$)}),Ie+=1):D($[de],re[et],Nt,ye),ye},ce,Te)}function N($,re,ne,ce){return $!==re&&(ce.invertible&&ce.patch.push({op:"test",path:ne,value:$}),ce.patch.push({op:"replace",path:ne,value:re})),ce}function B($,re,ne){return $(re)?re:ne}function j(){}function W($){return typeof $=="function"}}),Pm=ae((t,i)=>{function a(l,f){for(var p=0,v=f.length-1;p<v;p++){if(!l[f[p]])return null;l=l[f[p]]}return l}i.exports=a}),hh=ae((t,i)=>{function a(f){return f==="~0"?"~":"/"}function l(f){var p=f.split("/");if(f.indexOf("~")===-1)return p;for(var v=0,_=p.length;v<_;v++)p[v].indexOf("~")!==-1&&(p[v]=p[v].replace(/~[01]/g,a));return p}i.exports=l}),__e=ae((t,i)=>{var a=Pm(),l=hh();function f(p,v){var _=l(v),x=_[_.length-1],w=a(p,_);return w?w[x]:void 0}i.exports=f}),Sk=ae((t,i)=>{function a(l,f){if(l===f)return!0;if(!(l&&f)||typeof l!="object"||typeof f!="object"||l.length!==f.length)return!1;if(Array.isArray(l)){if(!Array.isArray(f))return!1;for(var p=0,v=l.length;p<v;p++)if(!a(l[p],f[p]))return!1;return!0}var _=Object.keys(l);if(_.length!==Object.keys(f).length)return!1;for(var x=0,w=_.length;x<w;x++){var A=_[x];if(!a(l[A],f[A]))return!1}return!0}i.exports=a}),wk=ae((t,i)=>{function a(l,f){if(f==="-")return l.length;for(var p=0,v=f.length;p<v;p++){var _=f.charCodeAt(p);if(57<_||_<48)return 1/0}return+f}i.exports=a}),Ek=ae((t,i)=>{var a=Sk(),l=Pm(),f=wk(),p=hh();function v(_,x,w,A){if(typeof w>"u")return"[op:add] require value, but got undefined";var D=p(x),R=D[D.length-1],C=l(_,D);if(C===null)return"[op:add] path not found: "+x;if(Array.isArray(C)){var F=f(C,R);if(C.length<F)return"[op:add] invalid array index: "+x;A(_,D).splice(F,0,w)}else a(C[R],w)||(A(_,D)[R]=w)}i.exports=v}),mie=ae((t,i)=>{var a=Pm(),l=wk(),f=hh();function p(v,_,x){var w=f(_),A=w[w.length-1],D=a(v,w);if(D===null)return"[op:remove] path not found: "+_;if(Array.isArray(D)){var R=l(D,A);if(D.length<=R)return"[op:remove] invalid array index: "+_;x(v,w).splice(R,1)}else delete x(v,w)[A]}i.exports=p}),gie=ae((t,i)=>{var a=Sk(),l=Pm(),f=wk(),p=hh();function v(_,x,w,A){if(typeof w>"u")return"[op:replace] require value, but got undefined";var D=p(x),R=D[D.length-1],C=l(_,D);if(C===null)return"[op:replace] path not found: "+x;if(Array.isArray(C)){var F=f(C,R);if(C.length<=F)return"[op:replace] invalid array index: "+x;a(C[F],w)||A(_,D).splice(F,1,w)}else a(C[R],w)||(A(_,D)[R]=w)}i.exports=v}),vie=ae((t,i)=>{var a=Ek(),l=Pm(),f=wk(),p=hh();function v(_,x,w,A){if(w!==x){var D=p(x),R=D[D.length-1],C=l(_,D);if(C===null)return"[op:move] path not found: "+x;var F=void 0;if(Array.isArray(C)){var N=f(C,R);if(C.length<=N)return"[op:move] invalid array index: "+w;F=C[N],A(_,D).splice(N,1)}else F=C[R],delete A(_,D)[R];return a(_,w,F,A)}}i.exports=v}),_ie=ae((t,i)=>{var a=Pm(),l=hh(),f=Ek();function p(v,_,x,w){var A=l(_),D=A[A.length-1],R=a(v,A);return R===null?"[op:copy] path not found: "+_:f(v,x,R[D],w)}i.exports=p}),yie=ae((t,i)=>{var a=Sk(),l=Pm(),f=hh();function p(v,_,x){var w=f(_),A=w[w.length-1],D=l(v,w);if(D===null)return"[op:test] path not found: "+_;if(!a(D[A],x)){var R=JSON.stringify(D[A]),C=JSON.stringify(x);return"[op:test] not matched: "+R+" "+C}}i.exports=p}),BU=ae((t,i)=>{function a(l){if(!l||typeof l!="object")return l;if(Array.isArray(l)){for(var f=l.length,p=new Array(f),v=0;v<f;v++)p[v]=l[v];return p}for(var _=Object.keys(l),x={},w=0,A=_.length;w<A;w++){var D=_[w];x[D]=l[D]}return x}i.exports=a}),y_e=ae((t,i)=>{var a=__e(),l=Ek(),f=mie(),p=gie(),v=vie(),_=_ie(),x=yie(),w=Sk(),A=BU(),D=hh();function R(C,F){return{get:function(N){return a(C,N)},add:function(N,B){return l(C,N,B,F)},remove:function(N){return f(C,N,F)},replace:function(N,B){return p(C,N,B,F)},move:function(N,B){return v(C,N,B,F)},copy:function(N,B){return _(C,N,B,F)},test:function(N,B){return x(C,N,B)},deepEqual:w,shallowCopy:A,toKeys:D}}i.exports=R}),b_e=ae((t,i)=>{function a(l,f,p,v){return v.error=p,v.partial?f[""]:l}i.exports=a}),x_e=ae((t,i)=>{function a(l){return!!l}i.exports=a}),S_e=ae((t,i)=>{function a(l){if(l)throw new TypeError(l)}i.exports=a}),w_e=ae((t,i)=>{var a=BU();function l(f,p){for(var v=0,_=p.length-1;v<_;v++)f=f[p[v]]=a(f[p[v]]);return f}i.exports=l}),E_e=ae((t,i)=>{var a=BU();function l(p,v,_){var x=p[v];return _.has(x)||(x=a(x),_.add(x)),x}function f(p,v,_){for(var x=0,w=v.length-1;x<w;x++)p=p[v[x]]=l(p,v[x],_);return p}i.exports=f}),T_e=ae((t,i)=>{var a=y_e(),l=b_e(),f=x_e(),p=S_e(),v=w_e(),_=E_e(),x=Ek(),w=mie(),A=gie(),D=vie(),R=_ie(),C=yie(),F=Set||function(){var B=[];return B.has=function(j){return this.indexOf(j)!==-1},B.add=function(j){this.push(j)},B};function N(B,j,W){if(j.length===0)return B;W=W||{};for(var $=W.strict?p:f,re=j.length===1?v:(function(Ne){return function(et,de){return _(et,de,Ne)}})(new F),ne={"":B},ce,Te=0,Ie=j.length;Te<Ie;Te++){var ye=j[Te];switch(ye.op){case"add":if($(x(ne,""+ye.path,ye.value,re)))return l(B,ne,ye,W);break;case"remove":if($(w(ne,""+ye.path,re)))return l(B,ne,ye,W);break;case"replace":if($(A(ne,""+ye.path,ye.value,re)))return l(B,ne,ye,W);break;case"move":if($(D(ne,""+ye.from,""+ye.path,re)))return l(B,ne,ye,W);break;case"copy":if($(R(ne,""+ye.from,""+ye.path,re)))return l(B,ne,ye,W);break;case"test":if($(C(ne,""+ye.path,ye.value)))return l(B,ne,ye,W);break;default:if(W.custom&&W.custom[ye.op]){if(ce=ce||a(ne,re),$(W.custom[ye.op](ce,ye,Te,j)))return l(B,ne,ye,W)}else return $("[op:"+ye.op+"] unknown"),l(B,ne,ye,W);break}}return ne[""]}i.exports=N}),M_e=ae((t,i)=>{i.exports=T_e()}),P_e=ae((t,i)=>{(function(a,l){typeof t=="object"&&typeof i=="object"?i.exports=l():typeof t=="object"?t.blobCompare=l():a.blobCompare=l()})(window,function(){return(function(a){var l={};function f(p){if(l[p])return l[p].exports;var v=l[p]={i:p,l:!1,exports:{}};return a[p].call(v.exports,v,v.exports,f),v.l=!0,v.exports}return f.m=a,f.c=l,f.d=function(p,v,_){f.o(p,v)||Object.defineProperty(p,v,{enumerable:!0,get:_})},f.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},f.t=function(p,v){if(1&v&&(p=f(p)),8&v||4&v&&typeof p=="object"&&p&&p.__esModule)return p;var _=Object.create(null);if(f.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:p}),2&v&&typeof p!="string")for(var x in p)f.d(_,x,(function(w){return p[w]}).bind(null,x));return _},f.n=function(p){var v=p&&p.__esModule?function(){return p.default}:function(){return p};return f.d(v,"a",v),v},f.o=function(p,v){return Object.prototype.hasOwnProperty.call(p,v)},f.p="",f(f.s=4)})([function(a,l,f){var p=function(A,D){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return(function(R,C){var F=[],N=!0,B=!1,j=void 0;try{for(var W,$=R[Symbol.iterator]();!(N=(W=$.next()).done)&&(F.push(W.value),!C||F.length!==C);N=!0);}catch(re){B=!0,j=re}finally{try{!N&&$.return&&$.return()}finally{if(B)throw j}}return F})(A,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=(function(){function A(D,R){for(var C=0;C<R.length;C++){var F=R[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,F.key,F)}}return function(D,R,C){return R&&A(D.prototype,R),C&&A(D,C),D}})();function _(A){if(Array.isArray(A)){for(var D=0,R=Array(A.length);D<A.length;D++)R[D]=A[D];return R}return Array.from(A)}var x=f(2),w=(function(A){function D(R){(function(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")})(this,D);var C=(function(F,N){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?F:N})(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));return C._messageId=1,C._messages=new Map,C._worker=R,C._worker.onmessage=C._onMessage.bind(C),C._id=Math.ceil(1e7*Math.random()),C}return(function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);R.prototype=Object.create(C&&C.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(R,C):R.__proto__=C)})(D,A),v(D,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(R){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,F=this,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],B=arguments[3];return new Promise(function(j,W){var $=F._messageId++;F._messages.set($,[j,W,B]),F._worker.postMessage([$,C,R],N||[])})}},{key:"postMessage",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,C=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=arguments[2];return new Promise(function(B,j){var W=C._messageId++;C._messages.set(W,[B,j,N]),C._worker.postMessage([W,R],F||[])})}},{key:"emit",value:function(R){for(var C=arguments.length,F=Array(C>1?C-1:0),N=1;N<C;N++)F[N-1]=arguments[N];this._worker.postMessage({eventName:R,args:F})}},{key:"_onMessage",value:function(R){var C;if(!Array.isArray(R.data)&&R.data.eventName)return(C=(function W($,re,ne){$===null&&($=Function.prototype);var ce=Object.getOwnPropertyDescriptor($,re);if(ce===void 0){var Te=Object.getPrototypeOf($);return Te===null?void 0:W(Te,re,ne)}if("value"in ce)return ce.value;var Ie=ce.get;return Ie!==void 0?Ie.call(ne):void 0})(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"emit",this)).call.apply(C,[this,R.data.eventName].concat(_(R.data.args)));var F,N=(F=R.data,Array.isArray(F)?F:Array.from(F)),B=N[0],j=N.slice(1);if(B===1)this._onEvent.apply(this,_(j));else{if(B!==0)throw new Error("Wrong message type '"+B+"'");this._onResult.apply(this,_(j))}}},{key:"_onResult",value:function(R,C,F){var N=this._messages.get(R),B=p(N,2),j=B[0],W=B[1];return this._messages.delete(R),C===1?j(F):W(F)}},{key:"_onEvent",value:function(R,C,F){var N=this._messages.get(R),B=p(N,3)[2];B&&B(C,F)}}]),D})(x);a.exports=w},function(a,l,f){a.exports=function(){return f(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(a,l,f){var p=(function(){function _(x,w){for(var A=0;A<w.length;A++){var D=w[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,w,A){return w&&_(x.prototype,w),A&&_(x,A),x}})(),v=(function(){function _(){(function(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")})(this,_),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return p(_,[{key:"emit",value:function(x){if(!this.__listeners[x])return this;for(var w=arguments.length,A=Array(w>1?w-1:0),D=1;D<w;D++)A[D-1]=arguments[D];var R=!0,C=!1,F=void 0;try{for(var N,B=this.__listeners[x][Symbol.iterator]();!(R=(N=B.next()).done);R=!0){var j=N.value;j.apply(void 0,A)}}catch(W){C=!0,F=W}finally{try{!R&&B.return&&B.return()}finally{if(C)throw F}}return this}},{key:"once",value:function(x,w){var A=this,D=function R(){A.off(x,R),w.apply(void 0,arguments)};return this.on(x,D)}},{key:"on",value:function(x,w){return this.__listeners[x]||(this.__listeners[x]=[]),this.__listeners[x].push(w),this}},{key:"off",value:function(x,w){return this.__listeners[x]=w?this.__listeners[x].filter(function(A){return A!==w}):[],this}}]),_})();a.exports=v},function(a,l,f){var p=window.URL||window.webkitURL;a.exports=function(v,_){try{try{var x;try{(x=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(v),x=x.getBlob()}catch{x=new Blob([v])}return new Worker(p.createObjectURL(x))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(v))}}catch{if(!_)throw Error("Inline worker is not supported");return new Worker(_)}}},function(a,l,f){f.r(l);var p=f(0),v=f.n(p),_=f(1),x=f.n(_);f.d(l,"workersEnabled",function(){return w}),f.d(l,"default",function(){return A});let w=!!window.Worker;class A{static toBinaryStringWithWorker(R,C){return ke(this,null,function*(){let F=new v.a(new x.a),N=yield F.exec("binary",{blob:R,chunk:C});return F.terminate(),N})}static toBinaryStringWithoutWorker(R,C){return(function(F,N){return new Promise((B,j)=>{let W=new FileReader,$=N?Math.min(N,F.size):F.size,re=F.slice(0,$);W.onload=()=>B(W.result),W.onerror=j,W.readAsBinaryString(re)})})(R,C)}static toBinaryString(R,C,F=!0){return F&&w?this.toBinaryStringWithWorker(R,C):this.toBinaryStringWithoutWorker(R,C)}static toArrayBufferWithWorker(R,C){return ke(this,null,function*(){let F=new v.a(new x.a),N=yield F.exec("buffer",{blob:R,chunk:C});return F.terminate(),N})}static toArrayBufferWithoutWorker(R,C){return(function(F,N){return new Promise((B,j)=>{let W=new FileReader,$=N?Math.min(N,F.size):F.size,re=F.slice(0,$);W.onload=()=>B(W.result),W.onerror=j,W.readAsArrayBuffer(re)})})(R,C)}static toArrayBuffer(R,C,F=!0){return F&&w?this.toArrayBufferWithWorker(R,C):this.toArrayBufferWithoutWorker(R,C)}static compareBuffersWithWorker(R,C){return ke(this,null,function*(){if(R===C)return!0;let F=new v.a(new x.a),N=yield F.exec("compare",{buf1:R,buf2:C},[R,C]);return F.terminate(),N})}static compareBuffersWithoutWorker(R,C){return(function(F,N){if(F===N)return!0;if(F.byteLength!==N.byteLength)return!1;let B=new DataView(F),j=new DataView(N);for(var W=F.byteLength;W--;)if(B.getUint8(W)!==j.getUint8(W))return!1;return!0})(R,C)}static compareBuffers(R,C,F=!0){return F&&w?this.compareBuffersWithWorker(R,C):this.compareBuffersWithoutWorker(R,C)}static sizeEqual(R,C){return R.size===C.size}static typeEqual(R,C){return R.type===C.type}static magicNumbersEqual(R,C,F=!0){return ke(this,null,function*(){if(R===C)return!0;let N=[24,16,14,12,8,6,4],[B,j]=yield Promise.all([this.toBinaryString(R,24,F),this.toBinaryString(C,24,F)]);for(let W of N)if(B.substring(0,W)===j.substring(0,W))return!0;return!1})}static bytesEqualWithBinaryString(R,C,F,N=!0){return ke(this,null,function*(){if(R===C)return!0;let[B,j]=yield Promise.all([this.toBinaryString(R,F,N),this.toBinaryString(C,F,N)]);return B===j})}static bytesEqualWithArrayBuffer(R,C,F,N=!0){return ke(this,null,function*(){if(R===C)return!0;let[B,j]=yield Promise.all([this.toArrayBuffer(R,F,N),this.toArrayBuffer(C,F,N)]);return this.compareBuffers(B,j,N)})}static isEqual(R,C){return ke(this,arguments,function*(F,N,{methods:B=["size","type","magic","byte"],byte:j="buffer",partial:W=!1,chunks:$=null,worker:re=!0}={}){let ne=null;for(let ce of B){if(ne===!1||W&&ne===!0)break;switch(ce){case"byte":case"bytes":case"content":$=$ instanceof Array?$:[F.size],ne=!0;for(let Te of $){let Ie=!1;Ie=j==="buffer"?yield this.bytesEqualWithArrayBuffer(F,N,Te,re):yield this.bytesEqualWithBinaryString(F,N,Te,re),Ie||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(F,N,re);break;case"size":case"sizes":ne=this.sizeEqual(F,N);break;case"type":case"types":ne=this.typeEqual(F,N);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),bie={};ge(bie,{ToolbarDropdownSelect:()=>Wye,default:()=>Xye}),c.exports=te(bie),Ue(),Tn();var xie=Ut();fr();var C_e=0,A_e=class{constructor(t){this._studio=t,oe(this,"_id"),oe(this,"_state",{type:"Ready"}),this._id=String(C_e++)}get status(){return this._state.type}reset(){let{_state:t}=this;if(t.type!=="Ready")if(t.type==="Captured")this._state={type:"Ready"},t.transaction.discard(),t.flagsTransaction.discard();else throw t.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:t}=this;if(t.type==="Captured")t.transaction.commit(),t.flagsTransaction.discard(),this._state={type:"Committed"};else if(t.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw t.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(t){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let i=!0;try{this._state=I({type:"Captured"},this._capture(t)),i=!1}finally{i&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(t){let i=[],a=this._studio.tempTransaction(f=>{let p=!0,v={set:(_,x)=>{if(!p)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:w,path:A}=(0,xie.getPointerParts)(_);if(!vt(w))throw new Error("We can only scrub props of Sheet Objects for now");f.set(_,x),i.push(_)}};try{t(v)}finally{p=!1}}),l=this._studio.tempTransaction(({stateEditors:f})=>{i.forEach(p=>{let{root:v,path:_}=(0,xie.getPointerParts)(p);if(!vt(v))return;let x=v.template.getDefaultsAtPointer(p);Pt(x,(w,A)=>{f.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(K(I({},v.address),{pathToProp:A}))},_)})});return{transaction:a,flagsTransaction:l}}discard(){let{_state:t}=this;if(t.type==="Captured"||t.type==="Ready")t.type==="Captured"&&(t.transaction.discard(),t.flagsTransaction.discard()),this._state={type:"Discarded"};else throw t.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},k_e=Ut(),Sie=typeof window<"u"?Promise.resolve().then(()=>(c_e(),oie)).then(t=>t.default):null,I_e=class{constructor(t){this.studio=t,oe(this,"_rendered",!1),oe(this,"_nonSSRBits",Sie?Sie.then(i=>new i):Promise.reject()),oe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(t=>{t.render()}).catch(t=>{throw console.error(t),t}))}hide(){this.studio.transaction(({drafts:t})=>{t.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:t})=>{t.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,k_e.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(t,i){let a=!1,l=null;return this._nonSSRBits.then(f=>{a||(l=f.renderToolset(t,i))}).catch(f=>{console.error(f)}),()=>{if(l){l();return}a||(a=!0)}}},Tk=Ut();function R_e(t){return t}var D_e=(t,i=R_e)=>{let a=l=>({type:t,payload:i(l)});return a.type=t,a.is=l=>l&&l.type&&l.type===t,a},fc=D_e,wie=J(v_e()),Eie=J(M_e());F0();var Mk,O_e=new Uint8Array(16);function N_e(){if(!Mk&&(Mk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Mk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mk(O_e)}var L_e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function F_e(t){return typeof t=="string"&&L_e.test(t)}var U_e=F_e,oo=[];for(Pk=0;Pk<256;++Pk)oo.push((Pk+256).toString(16).substr(1));var Pk;function B_e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(oo[t[i+0]]+oo[t[i+1]]+oo[t[i+2]]+oo[t[i+3]]+"-"+oo[t[i+4]]+oo[t[i+5]]+"-"+oo[t[i+6]]+oo[t[i+7]]+"-"+oo[t[i+8]]+oo[t[i+9]]+"-"+oo[t[i+10]]+oo[t[i+11]]+oo[t[i+12]]+oo[t[i+13]]+oo[t[i+14]]+oo[t[i+15]]).toLowerCase();if(!U_e(a))throw TypeError("Stringified UUID is invalid");return a}var z_e=B_e;function j_e(t,i,a){t=t||{};var l=t.random||(t.rng||N_e)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,i){a=a||0;for(var f=0;f<16;++f)i[a+f]=l[f];return i}return z_e(l)}var V_e=j_e,Z1={replaceHistory:fc("@history/replaceHistory"),startHistoryFromScratch:fc("@history/startHistoryFromScratch"),undo:fc("@history/undo"),redo:fc("@history/redo")},H_e={type:"@history/unknownAction",payload:""},G_e={maxNumberOfCommits:100},W_e=(t,i=G_e)=>{let a=zU(t(void 0,H_e));return function(l,f){return Z1.startHistoryFromScratch.is(f)?zU(t(void 0,f.payload)):Z1.replaceHistory.is(f)?f.payload:Z1.undo.is(f)?l?K_e(l):a:Z1.redo.is(f)?l?Y_e(l):a:l?q_e(l,t(l.innerState,f),i):zU(t(void 0,f))}};function zU(t){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:t}}function q_e(t,i,a){if(i===t.innerState)return t;let l=X_e(t.innerState,i);if(l.forwardDiff.length===0)return t;let f=nd(t.listOfCommitHashes),p={currentCommitHash:l.hash,commitsByHash:I({},t.commitsByHash),listOfCommitHashes:[...t.listOfCommitHashes],innerState:i};if(t.currentCommitHash!==f){let v=t.listOfCommitHashes.findIndex(_=>_===t.currentCommitHash);t.listOfCommitHashes.slice(v+1).forEach(_=>{delete p.commitsByHash[_]}),p.listOfCommitHashes.splice(v+1,p.listOfCommitHashes.length)}if(p.listOfCommitHashes.push(l.hash),p.commitsByHash[l.hash]=l,p.listOfCommitHashes.length>a.maxNumberOfCommits){let v=p.listOfCommitHashes.length-a.maxNumberOfCommits;p.listOfCommitHashes.slice(0,v).forEach(_=>{delete p.commitsByHash[_]}),p.listOfCommitHashes.splice(0,v)}return p}function X_e(t,i){let a=wie.default.diff(t,i,{invertible:!1}),l=wie.default.diff(i,t,{invertible:!1}),f=Date.now(),p=V_e();return{forwardDiff:a,backwardDiff:l,timestamp:f,hash:p}}function K_e(t){if(t.currentCommitHash===void 0)return t;let i=t.listOfCommitHashes.findIndex(v=>v===t.currentCommitHash);if(i===-1)throw new Error("This should never happen");let a=t.commitsByHash[t.currentCommitHash],l=(0,Eie.default)(t.innerState,a.backwardDiff),f=i-1,p=f===-1?void 0:t.listOfCommitHashes[f];return K(I({},t),{currentCommitHash:p,innerState:l})}function Y_e(t){if(t.listOfCommitHashes.length===0)return t;let i=t.listOfCommitHashes.findIndex(v=>v===t.currentCommitHash);if(i===t.listOfCommitHashes.length-1)return t;let a=i+1,l=t.listOfCommitHashes[a],f=t.commitsByHash[l],p=(0,Eie.default)(t.innerState,f.forwardDiff);return K(I({},t),{currentCommitHash:l,innerState:p})}sk();var Ck={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},Tie=fc("@storeBundle/replacePersistentState",t=>t),Mie=fc("@storeBundle/reduceParts",t=>t),Qv={historic:Z1,replacePersistentState:Tie,reduceParts:Mie},Pie=fc("@storeBundle/setInnerHistoricState",t=>t),$_e=(t=Ck.historic,i)=>Pie.is(i)?i.payload:t,jU=W_e($_e),Cie=(t,i)=>{if(Tie.is(i)){let{historic:a,ahistoric:l}=i.payload,f=t?.ephemeral||Ck.ephemeral;return{$persistent:{historic:a,ahistoric:l},ephemeral:f}}else if(t){let{historic:a,ahistoric:l}=t.$persistent,{ephemeral:f}=t;if(Mie.is(i)){let p={historic:t.$persistent.historic.innerState,ahistoric:t.$persistent.ahistoric,ephemeral:t.ephemeral},v=i.payload(p);if(v===p)return t;a.innerState!==v.historic&&(a=jU(a,Pie(v.historic))),l=v.ahistoric,f=v.ephemeral}else{let p=jU(a,i);if(p===a)return t;a=p}return{$persistent:a===t.$persistent.historic&&l===t.$persistent.ahistoric?t.$persistent:{historic:a,ahistoric:l},ephemeral:f}}else{let a=jU(void 0,{}),l=Ck.ahistoric,f=Ck.ephemeral;return{$persistent:{historic:a,ahistoric:l},ephemeral:f}}},Aie=fc("@history/pushTempAction",t=>t),kie=fc("@history/discardTempAction",t=>t),Iie=fc("@history/commitTempAction",t=>t),Z_e=0,J_e=()=>{let t=Z_e++;return{push:i=>Aie({id:t,originalAction:i}),discard:()=>kie(t),commit:()=>Iie(t)}},Q_e=(t,i)=>{if(t){let{tempActions:a,permanent:l}=t.$temps,f;if(Aie.is(i))a=[...a,i];else if(Iie.is(i)){let v=a.find(_=>_.payload.id===i.payload);v?(f=v.payload.originalAction,a=a.filter(_=>_.payload.id!==i.payload)):ok.error("Comitting temp action group ".concat(i.payload," isn't possible as this group doesn't exist"))}else kie.is(i)?a=a.filter(v=>v.payload.id!==i.payload):f=i;f&&(l=Cie(t.$temps.permanent,f));let p={historic:l.$persistent.historic.innerState,ahistoric:l.$persistent.ahistoric,ephemeral:l.ephemeral};for(let v of a)p=v.payload.originalAction.payload(p);return I({$temps:{tempActions:a,permanent:l},$persistent:l.$persistent},p)}else{let a=Cie(void 0,i);return{$temps:{permanent:a,tempActions:[]},$persistent:a.$persistent,historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral}}};ec(),ec(),Ed();function Rie(t,i){if(typeof t!="object"||t===null)return;if(i.length===0){for(let v of Object.keys(t))delete t[v];return}let a=i.slice(0,i.length-1),l=t,f=new WeakMap;for(let v of a){let _=l,x=_[v];if(typeof x!="object"||x===null)return;f.set(x,_),l=x}let p=i.slice().reverse();for(let v of p){if(delete l[v],Object.keys(l).length>0)return;l=f.get(l)}}function eye(t,{scale:i,origin:a,translate:l}){let f=a+(t-a)*i;return l+f}function su(t){for(var i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];throw Error("[Immer] minified error nr: "+t+(a.length?" "+a.map(function(f){return"'"+f+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function e_(t){return!!t&&!!t[Us]}function Cm(t){return!!t&&((function(i){if(!i||typeof i!="object")return!1;var a=Object.getPrototypeOf(i);if(a===null)return!0;var l=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===sye})(t)||Array.isArray(t)||!!t[Vie]||!!t.constructor[Vie]||HU(t)||GU(t))}function J1(t,i,a){a===void 0&&(a=!1),t_(t)===0?(a?Object.keys:n5)(t).forEach(function(l){a&&typeof l=="symbol"||i(l,t[l],t)}):t.forEach(function(l,f){return i(f,l,t)})}function t_(t){var i=t[Us];return i?i.i>3?i.i-4:i.i:Array.isArray(t)?1:HU(t)?2:GU(t)?3:0}function VU(t,i){return t_(t)===2?t.has(i):Object.prototype.hasOwnProperty.call(t,i)}function tye(t,i){return t_(t)===2?t.get(i):t[i]}function Die(t,i,a){var l=t_(t);l===2?t.set(i,a):l===3?(t.delete(i),t.add(a)):t[i]=a}function nye(t,i){return t===i?t!==0||1/t==1/i:t!=t&&i!=i}function HU(t){return aye&&t instanceof Map}function GU(t){return oye&&t instanceof Set}function Am(t){return t.o||t.t}function WU(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var i=lye(t);delete i[Us];for(var a=n5(i),l=0;l<a.length;l++){var f=a[l],p=i[f];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(i[f]={configurable:!0,writable:!0,enumerable:p.enumerable,value:t[f]})}return Object.create(Object.getPrototypeOf(t),i)}function qU(t,i){return i===void 0&&(i=!1),XU(t)||e_(t)||!Cm(t)||(t_(t)>1&&(t.set=t.add=t.clear=t.delete=rye),Object.freeze(t),i&&J1(t,function(a,l){return qU(l,!0)},!0)),t}function rye(){su(2)}function XU(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Nd(t){var i=uye[t];return i||su(18,t),i}function Oie(){return Q1}function KU(t,i){i&&(Nd("Patches"),t.u=[],t.s=[],t.v=i)}function Ak(t){YU(t),t.p.forEach(iye),t.p=null}function YU(t){t===Q1&&(Q1=t.l)}function Nie(t){return Q1={p:[],l:Q1,h:t,m:!0,_:0}}function iye(t){var i=t[Us];i.i===0||i.i===1?i.j():i.O=!0}function $U(t,i){i._=i.p.length;var a=i.p[0],l=t!==void 0&&t!==a;return i.h.g||Nd("ES5").S(i,t,l),l?(a[Us].P&&(Ak(i),su(4)),Cm(t)&&(t=kk(i,t),i.l||Ik(i,t)),i.u&&Nd("Patches").M(a[Us],t,i.u,i.s)):t=kk(i,a,[]),Ak(i),i.u&&i.v(i.u,i.s),t!==jie?t:void 0}function kk(t,i,a){if(XU(i))return i;var l=i[Us];if(!l)return J1(i,function(p,v){return Lie(t,l,i,p,v,a)},!0),i;if(l.A!==t)return i;if(!l.P)return Ik(t,l.t,!0),l.t;if(!l.I){l.I=!0,l.A._--;var f=l.i===4||l.i===5?l.o=WU(l.k):l.o;J1(l.i===3?new Set(f):f,function(p,v){return Lie(t,l,f,p,v,a)}),Ik(t,f,!1),a&&t.u&&Nd("Patches").R(l,a,t.u,t.s)}return l.o}function Lie(t,i,a,l,f,p){if(e_(f)){var v=kk(t,f,p&&i&&i.i!==3&&!VU(i.D,l)?p.concat(l):void 0);if(Die(a,l,v),!e_(v))return;t.m=!1}if(Cm(f)&&!XU(f)){if(!t.h.F&&t._<1)return;kk(t,f),i&&i.A.l||Ik(t,f)}}function Ik(t,i,a){a===void 0&&(a=!1),t.h.F&&t.m&&qU(i,a)}function ZU(t,i){var a=t[Us];return(a?Am(a):t)[i]}function Fie(t,i){if(i in t)for(var a=Object.getPrototypeOf(t);a;){var l=Object.getOwnPropertyDescriptor(a,i);if(l)return l;a=Object.getPrototypeOf(a)}}function JU(t){t.P||(t.P=!0,t.l&&JU(t.l))}function QU(t){t.o||(t.o=WU(t.t))}function e5(t,i,a){var l=HU(i)?Nd("MapSet").N(i,a):GU(i)?Nd("MapSet").T(i,a):t.g?(function(f,p){var v=Array.isArray(f),_={i:v?1:0,A:p?p.A:Oie(),P:!1,I:!1,D:{},l:p,t:f,k:null,o:null,j:null,C:!1},x=_,w=Dk;v&&(x=[_],w=Ok);var A=Proxy.revocable(x,w),D=A.revoke,R=A.proxy;return _.k=R,_.j=D,R})(i,a):Nd("ES5").J(i,a);return(a?a.A:Oie()).p.push(l),l}function Rk(t){return e_(t)||su(22,t),(function i(a){if(!Cm(a))return a;var l,f=a[Us],p=t_(a);if(f){if(!f.P&&(f.i<4||!Nd("ES5").K(f)))return f.t;f.I=!0,l=Uie(a,p),f.I=!1}else l=Uie(a,p);return J1(l,function(v,_){f&&tye(f.t,v)===_||Die(l,v,i(_))}),p===3?new Set(l):l})(t)}function Uie(t,i){switch(i){case 2:return new Map(t);case 3:return Array.from(t)}return WU(t)}var Bie,Q1,t5=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aye=typeof Map<"u",oye=typeof Set<"u",zie=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jie=t5?Symbol.for("immer-nothing"):((Bie={})["immer-nothing"]=!0,Bie),Vie=t5?Symbol.for("immer-draftable"):"__$immer_draftable",Us=t5?Symbol.for("immer-state"):"__$immer_state",sye=""+Object.prototype.constructor,n5=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,lye=Object.getOwnPropertyDescriptors||function(t){var i={};return n5(t).forEach(function(a){i[a]=Object.getOwnPropertyDescriptor(t,a)}),i},uye={},Dk={get:function(t,i){if(i===Us)return t;var a=Am(t);if(!VU(a,i))return(function(f,p,v){var _,x=Fie(p,v);return x?"value"in x?x.value:(_=x.get)===null||_===void 0?void 0:_.call(f.k):void 0})(t,a,i);var l=a[i];return t.I||!Cm(l)?l:l===ZU(t.t,i)?(QU(t),t.o[i]=e5(t.A.h,l,t)):l},has:function(t,i){return i in Am(t)},ownKeys:function(t){return Reflect.ownKeys(Am(t))},set:function(t,i,a){var l=Fie(Am(t),i);if(l!=null&&l.set)return l.set.call(t.k,a),!0;if(!t.P){var f=ZU(Am(t),i),p=f?.[Us];if(p&&p.t===a)return t.o[i]=a,t.D[i]=!1,!0;if(nye(a,f)&&(a!==void 0||VU(t.t,i)))return!0;QU(t),JU(t)}return t.o[i]===a&&typeof a!="number"&&(a!==void 0||i in t.o)||(t.o[i]=a,t.D[i]=!0,!0)},deleteProperty:function(t,i){return ZU(t.t,i)!==void 0||i in t.t?(t.D[i]=!1,QU(t),JU(t)):delete t.D[i],t.o&&delete t.o[i],!0},getOwnPropertyDescriptor:function(t,i){var a=Am(t),l=Reflect.getOwnPropertyDescriptor(a,i);return l&&{writable:!0,configurable:t.i!==1||i!=="length",enumerable:l.enumerable,value:a[i]}},defineProperty:function(){su(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){su(12)}},Ok={};J1(Dk,function(t,i){Ok[t]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),Ok.deleteProperty=function(t,i){return Dk.deleteProperty.call(this,t[0],i)},Ok.set=function(t,i,a){return Dk.set.call(this,t[0],i,a,t[0])};var cye=(function(){function t(a){var l=this;this.g=zie,this.F=!0,this.produce=function(f,p,v){if(typeof f=="function"&&typeof p!="function"){var _=p;p=f;var x=l;return function(C){var F=this;C===void 0&&(C=_);for(var N=arguments.length,B=Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return x.produce(C,function(W){var $;return($=p).call.apply($,[F,W].concat(B))})}}var w;if(typeof p!="function"&&su(6),v!==void 0&&typeof v!="function"&&su(7),Cm(f)){var A=Nie(l),D=e5(l,f,void 0),R=!0;try{w=p(D),R=!1}finally{R?Ak(A):YU(A)}return typeof Promise<"u"&&w instanceof Promise?w.then(function(C){return KU(A,v),$U(C,A)},function(C){throw Ak(A),C}):(KU(A,v),$U(w,A))}if(!f||typeof f!="object")return(w=p(f))===jie?void 0:(w===void 0&&(w=f),l.F&&qU(w,!0),w);su(21,f)},this.produceWithPatches=function(f,p){return typeof f=="function"?function(x){for(var w=arguments.length,A=Array(w>1?w-1:0),D=1;D<w;D++)A[D-1]=arguments[D];return l.produceWithPatches(x,function(R){return f.apply(void 0,[R].concat(A))})}:[l.produce(f,p,function(x,w){v=x,_=w}),v,_];var v,_},typeof a?.useProxies=="boolean"&&this.setUseProxies(a.useProxies),typeof a?.autoFreeze=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var i=t.prototype;return i.createDraft=function(a){Cm(a)||su(8),e_(a)&&(a=Rk(a));var l=Nie(this),f=e5(this,a,void 0);return f[Us].C=!0,YU(l),f},i.finishDraft=function(a,l){var f=a&&a[Us],p=f.A;return KU(p,l),$U(void 0,p)},i.setAutoFreeze=function(a){this.F=a},i.setUseProxies=function(a){a&&!zie&&su(20),this.g=a},i.applyPatches=function(a,l){var f;for(f=l.length-1;f>=0;f--){var p=l[f];if(p.path.length===0&&p.op==="replace"){a=p.value;break}}var v=Nd("Patches").$;return e_(a)?v(a,l):this.produce(a,function(_){return v(_,l.slice(f+1))})},t})(),Bs=new cye;Bs.produce,Bs.produceWithPatches.bind(Bs),Bs.setAutoFreeze.bind(Bs),Bs.setUseProxies.bind(Bs),Bs.applyPatches.bind(Bs);var r5=Bs.createDraft.bind(Bs),i5=Bs.finishDraft.bind(Bs);GD(),qD(),eO(),W0(),nO(),ik(),aa(),fr();var lu={create(t){let i={byId:{},allIds:{}};if(t)for(let[a,l]of t)i.byId[a]=l,i.allIds[a]=!0;return i},shallowCopy(t){return{byId:I({},t?.byId),allIds:I({},t?.allIds)}},add(t,i,a){return{byId:K(I({},t?.byId),{[i]:a}),allIds:K(I({},t?.allIds),{[i]:!0})}},merge(t){let i=lu.create();for(let a=0;a<t.length;a++)i.byId=I(I({},i.byId),t[a].byId),i.allIds=I(I({},i.allIds),t[a].allIds);return i},remove(t,i){let a=lu.shallowCopy(t);return delete a.allIds[i],delete a.byId[i],a},filter(t,i){let a=lu.shallowCopy(t);for(let[l,f]of Object.entries(a.byId))i(f)||(delete a.allIds[l],delete a.byId[l]);return a}},Hie=t=>(a5=t,o5),a5,so=()=>{if(a5===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return a5},o5;(t=>{(i=>{(a=>{(l=>{function f(p){let v=so().historic;v.panelPositions!=null||(v.panelPositions={}),v.panelPositions[p.panelId]=p.position}l.setPanelPosition=f})(a.panelPositions||(a.panelPositions={})),(l=>{function f(){var p;return(p=so().historic).panels!=null||(p.panels={}),so().historic.panels}l._ensure=f,(p=>{function v(){let _=t.studio.historic.panels._ensure();return _.outlinePanel!=null||(_.outlinePanel={}),_.outlinePanel}p._ensure=v,(_=>{function x(A){let D=[];for(let R of Lu(A))qn(R)?D.push(I({type:"Project"},R.address)):Dn(R)?(D.push(I({type:"Sheet"},R.template.address)),t.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.address)):xt(R)?D.push(I({type:"Sheet"},R.address)):vt(R)?(D.push(I({type:"SheetObject"},R.template.address)),t.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.sheet.address)):Mn(R)&&D.push(I({type:"SheetObject"},R.address));p._ensure().selection=D}_.set=x;function w(){p._ensure().selection=[]}_.unset=w})(p.selection||(p.selection={}))})(l.outline||(l.outline={})),(p=>{function v(){let _=t.studio.historic.panels._ensure();return _.sequenceEditor!=null||(_.sequenceEditor={}),_.sequenceEditor}p._ensure=v,(_=>{function x(){let A=p._ensure();return A.graphEditor!=null||(A.graphEditor={height:.5,isOpen:!1}),A.graphEditor}function w(A){x().isOpen=A.isOpen}_.setIsOpen=w})(p.graphEditor||(p.graphEditor={}))})(l.sequenceEditor||(l.sequenceEditor={}))})(a.panels||(a.panels={})),(l=>{(f=>{function p(v){let _=so().historic;return _.projects.stateByProjectId[v.projectId]||(_.projects.stateByProjectId[v.projectId]={stateBySheetId:{}}),_.projects.stateByProjectId[v.projectId]}f._ensure=p,(v=>{function _(w){let A=t.studio.historic.projects.stateByProjectId._ensure(w);return A.stateBySheetId[w.sheetId]||(A.stateBySheetId[w.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),A.stateBySheetId[w.sheetId]}v._ensure=_;function x(w){t.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(w).selectedInstanceId=w.sheetInstanceId}v.setSelectedInstanceId=x,(w=>{function A(B){let{selectedPropsByObject:j}=v._ensure(B).sequenceEditor;j[B.objectKey]||(j[B.objectKey]={});let W=j[B.objectKey],$=Qu(B.pathToProp),re=new Set(Object.keys(j1));for(let[ce,Te]of Object.entries(Rk(j)))for(let[Ie,ye]of Object.entries(Te))re.delete(ye);let ne=re.size>0?re.values().next().value:Object.keys(j1)[0];W[$]=ne}w.addPropToGraphEditor=A;function D(B){let{selectedPropsByObject:j}=v._ensure(B).sequenceEditor;if(!j[B.objectKey])return;let W=j[B.objectKey],$=Qu(B.pathToProp);W[$]&&Rie(j,[B.objectKey,$])}w.removePropFromGraphEditor=D;function R(B){let j=t.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(B).sequenceEditor;return j.markerSet||(j.markerSet=lu.create()),j.markerSet}function C(B){let j=R(B.sheetAddress),W=B.markers.filter(ce=>!!isFinite(ce.position)).map(ce=>K(I({},ce),{position:B.snappingFunction(ce.position)})),$=Dp(W,"id"),re=lu.filter(j,ce=>ce&&!$[ce.id]),ne=Dp(Object.values(re.byId),"position");W.forEach(({position:ce})=>{let Te=ne[ce];Te&&(re=lu.remove(re,Te.id))}),Object.assign(j,lu.merge([re,lu.create(W.map(ce=>[ce.id,ce]))]))}w.replaceMarkers=C;function F(B){let j=R(B.sheetAddress);Object.assign(j,lu.remove(j,B.markerId))}w.removeMarker=F;function N(B){let j=R(B.sheetAddress).byId[B.markerId];j!==void 0&&(j.label=B.label)}w.updateMarker=N})(v.sequenceEditor||(v.sequenceEditor={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(l.stateByProjectId||(l.stateByProjectId={}))})(a.projects||(a.projects={}))})(i.historic||(i.historic={})),(a=>{function l(f){so().ephemeral.showOutline=f}a.setShowOutline=l,(f=>{(p=>{function v(_){let x=so().ephemeral;return x.projects.stateByProjectId[_.projectId]||(x.projects.stateByProjectId[_.projectId]={stateBySheetId:{}}),x.projects.stateByProjectId[_.projectId]}p._ensure=v,(_=>{function x(w){let A=t.studio.ephemeral.projects.stateByProjectId._ensure(w);return A.stateBySheetId[w.sheetId]||(A.stateBySheetId[w.sheetId]={stateByObjectKey:{}}),A.stateBySheetId[w.sheetId]}_._ensure=x,(w=>{function A(D){var R;let C=t.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(D).stateByObjectKey;return C[R=D.objectKey]!=null||(C[R]={}),C[D.objectKey]}w._ensure=A,(D=>{function R(F){let N=t.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(F);return N.valuesBeingScrubbed!=null||(N.valuesBeingScrubbed={}),N.valuesBeingScrubbed}D._ensure=R;function C(F){id(R(F),F.pathToProp,!0)}D.flag=C})(w.propsBeingScrubbed||(w.propsBeingScrubbed={}))})(_.stateByObjectKey||(_.stateByObjectKey={}))})(p.stateBySheetId||(p.stateBySheetId={}))})(f.stateByProjectId||(f.stateByProjectId={}))})(a.projects||(a.projects={}))})(i.ephemeral||(i.ephemeral={})),(a=>{function l(x){so().ahistoric.pinOutline=x}a.setPinOutline=l;function f(x){so().ahistoric.pinDetails=x}a.setPinDetails=f;function p(x){so().ahistoric.pinNotifications=x}a.setPinNotifications=p;function v(x){so().ahistoric.visibilityState=x}a.setVisibilityState=v;function _(x){let w=vA(x.map(R=>R.pathToProp)),A=x.map(({keyframe:R,pathToProp:C})=>({keyframe:R,pathToProp:C.slice(w.length)})),D=so();D.ahistoric.clipboard?D.ahistoric.clipboard.keyframesWithRelativePaths=A:D.ahistoric.clipboard={keyframesWithRelativePaths:A}}a.setClipboardKeyframes=_,(x=>{(w=>{function A(D){let R=so().ahistoric;return R.projects.stateByProjectId[D.projectId]||(R.projects.stateByProjectId[D.projectId]={stateBySheetId:{}}),R.projects.stateByProjectId[D.projectId]}w._ensure=A,(D=>{function R(F){let N=t.studio.ahistoric.projects.stateByProjectId._ensure(F);return N.collapsedItemsInOutline||(N.collapsedItemsInOutline={}),N.collapsedItemsInOutline}D._ensure=R;function C(F){let N=t.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(F);F.isCollapsed?N[F.itemKey]=!0:delete N[F.itemKey]}D.set=C})(w.collapsedItemsInOutline||(w.collapsedItemsInOutline={})),(D=>{function R(C){let F=t.studio.ahistoric.projects.stateByProjectId._ensure(C);return F.stateBySheetId[C.sheetId]||(F.stateBySheetId[C.sheetId]={}),F.stateBySheetId[C.sheetId]}D._ensure=R,(C=>{function F(N){let B=t.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(N);return B.sequence||(B.sequence={}),B.sequence}C._ensure=F,(N=>{function B(W){t.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W).focusRange={range:W.range,enabled:W.enabled}}N.set=B;function j(W){t.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W).focusRange=void 0}N.unset=j})(C.focusRange||(C.focusRange={})),(N=>{function B(j){t.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(j).clippedSpaceRange=I({},j.range)}N.set=B})(C.clippedSpaceRange||(C.clippedSpaceRange={})),(N=>{function B(W){let $=t.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W),re=$.collapsableItems;return re||(re=$.collapsableItems=lu.create()),re}function j(W){let $=B(W);Object.assign($,lu.add($,W.studioSheetItemKey,{isCollapsed:W.isCollapsed}))}N.set=j})(C.sequenceEditorCollapsableItems||(C.sequenceEditorCollapsableItems={}))})(D.sequence||(D.sequence={}))})(w.stateBySheetId||(w.stateBySheetId={}))})(x.stateByProjectId||(x.stateByProjectId={}))})(a.projects||(a.projects={}))})(i.ahistoric||(i.ahistoric={}))})(t.studio||(t.studio={})),(i=>{(a=>{(l=>{function f(p){let v=so().historic.coreByProject[p.projectId].revisionHistory,_=50;v.unshift(p.revision),v.length>_&&(v.length=_)}l.add=f})(a.revisionHistory||(a.revisionHistory={})),(l=>{function f(_){let x=so().historic.coreByProject[_.projectId].sheetsById;return x[_.sheetId]||(x[_.sheetId]={staticOverrides:{byObject:{}}}),x[_.sheetId]}l._ensure=f;function p(_){let x=so().historic.coreByProject[_.projectId].sheetsById[_.sheetId];if(!x)return;delete x.staticOverrides.byObject[_.objectKey];let w=x.sequence;w&&delete w.tracksByObject[_.objectKey]}l.forgetObject=p;function v(_){so().historic.coreByProject[_.projectId].sheetsById[_.sheetId]&&delete so().historic.coreByProject[_.projectId].sheetsById[_.sheetId]}l.forgetSheet=v,(_=>{function x(ye){let Ne=t.coreByProject.historic.sheetsById._ensure(ye);return Ne.sequence!=null||(Ne.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),Ne.sequence}_._ensure=x;function w(ye){x(ye).length=pi(parseFloat(ye.length.toFixed(2)),.01,1/0)}_.setLength=w;function A(ye){x(ye).subUnitsPerUnit=pi(ye.subUnitsPerUnit,1,G(2,12))}_.setSubUnitsPerUnit=A;function D(ye){var Ne;let et=t.coreByProject.historic.sheetsById.sequence._ensure(ye).tracksByObject;return et[Ne=ye.objectKey]!=null||(et[Ne]={trackData:{},trackIdByPropPath:{}}),et[ye.objectKey]}function R(ye,Ne){let et=D(ye),de=Qu(ye.pathToProp);if(typeof et.trackIdByPropPath[de]=="string")return;let Le=mme(),Z={type:"BasicKeyframedTrack",__debugName:"".concat(ye.objectKey,":").concat(de),keyframes:[]};et.trackData[Le]=Z,et.trackIdByPropPath[de]=Le}_.setPrimitivePropAsSequenced=R;function C(ye){let Ne=D(ye),et=Qu(ye.pathToProp),de=Ne.trackIdByPropPath[et];typeof de=="string"&&(delete Ne.trackIdByPropPath[et],delete Ne.trackData[de],t.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ye))}_.setPrimitivePropAsStatic=C;function F(ye){let Ne=D(ye);for(let et of Object.keys(Ne.trackIdByPropPath)){let de=JSON.parse(et);if(ye.pathToProp.every((Le,Z)=>de[Z]===Le)){let Le=Ne.trackIdByPropPath[et];if(typeof Le!="string")continue;delete Ne.trackIdByPropPath[et],delete Ne.trackData[Le]}}t.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ye)}_.setCompoundPropAsStatic=F;function N(ye){return D(ye).trackData[ye.trackId]}function B(ye){let Ne=N(ye);if(Ne)return Ne.keyframes.find(et=>et.id===ye.keyframeId)}function j(ye){let Ne=ye.snappingFunction(ye.position),et=N(ye);if(!et)return;let{keyframes:de}=et,Le=de.findIndex(Nt=>Nt.position===Ne);if(Le!==-1){let Nt=de[Le];Nt.value=ye.value;return}let Z=rx(de,Nt=>Nt.position<Ne);if(Z===-1){de.unshift({id:GW(),position:Ne,connectedRight:!0,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value});return}let Ge=de[Z];de.splice(Z+1,0,{id:GW(),position:Ne,connectedRight:Ge.connectedRight,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value})}_.setKeyframeAtPosition=j;function W(ye){let Ne=N(ye);if(!Ne)return;let{keyframes:et}=Ne,de=et.findIndex(Le=>Le.position===ye.position);de!==-1&&et.splice(de,1)}_.unsetKeyframeAtPosition=W;function $(ye){let Ne=N(ye);if(!Ne)return;let et=Rk(Ne.keyframes).filter(de=>ye.keyframeIds.includes(de.id)).map(de=>{let Le=de.position,Z=ye.snappingFunction(eye(Le,ye));return K(I({},de),{position:Z})});Ie(K(I({},ye),{keyframes:et}))}_.transformKeyframes=$;function re(ye){let Ne=N(ye);Ne&&(Ne.keyframes=Ne.keyframes.map((et,de)=>{let Le=Ne.keyframes[de-1],Z=ye.keyframeIds.includes(et.id),Ge=ye.keyframeIds.includes(Le?.id);return Z&&!Ge?K(I({},et),{handles:[et.handles[0],et.handles[1],ye.handles[0],ye.handles[1]]}):Z&&Ge?K(I({},et),{handles:[ye.handles[2],ye.handles[3],ye.handles[0],ye.handles[1]]}):Ge?K(I({},et),{handles:[ye.handles[2],ye.handles[3],et.handles[2],et.handles[3]]}):et}))}_.setTweenBetweenKeyframes=re;function ne(ye){var Ne,et,de,Le,Z,Ge,Nt,Re;let Ce=B(ye);Ce&&(Ce.handles=[(et=(Ne=ye.end)==null?void 0:Ne[0])!=null?et:Ce.handles[0],(Le=(de=ye.end)==null?void 0:de[1])!=null?Le:Ce.handles[1],(Ge=(Z=ye.start)==null?void 0:Z[0])!=null?Ge:Ce.handles[2],(Re=(Nt=ye.start)==null?void 0:Nt[1])!=null?Re:Ce.handles[3]])}_.setHandlesForKeyframe=ne;function ce(ye){let Ne=N(ye);Ne&&(Ne.keyframes=Ne.keyframes.filter(et=>ye.keyframeIds.indexOf(et.id)===-1))}_.deleteKeyframes=ce;function Te(ye){let Ne=B(ye);Ne&&(Ne.type=ye.keyframeType)}_.setKeyframeType=Te;function Ie(ye){let Ne=N(ye);if(!Ne)return;let et=Rk(Ne.keyframes),de=ye.keyframes.filter(Re=>!(typeof Re.value=="number"&&!isFinite(Re.value)||!Re.handles.every(Ce=>isFinite(Ce)))).map(Re=>K(I({},Re),{position:ye.snappingFunction(Re.position)})),Le=Dp(de,"id"),Z=et.filter(Re=>!Le[Re.id]),Ge=Dp(Z,"position");de.forEach(({position:Re})=>{let Ce=Ge[Re];Ce&&yP(Z,Ce)});let Nt=xP([...Z,...de],"position");Ne.keyframes=Nt}_.replaceKeyframes=Ie})(l.sequence||(l.sequence={})),(_=>{(x=>{function w(C){var F;let N=t.coreByProject.historic.sheetsById._ensure(C).staticOverrides.byObject;return N[F=C.objectKey]!=null||(N[F]={}),N[C.objectKey]}function A(C){let F=w(C);id(F,C.pathToProp,C.value)}x.setValueOfCompoundProp=A;function D(C){let F=w(C);id(F,C.pathToProp,C.value)}x.setValueOfPrimitiveProp=D;function R(C){let F=t.coreByProject.historic.sheetsById._ensure(C).staticOverrides.byObject[C.objectKey];F&&Rie(F,C.pathToProp)}x.unsetValueOfPrimitiveProp=R})(_.byObject||(_.byObject={}))})(l.staticOverrides||(l.staticOverrides={}))})(a.sheetsById||(a.sheetsById={}))})(i.historic||(i.historic={}))})(t.coreByProject||(t.coreByProject={}))})(o5||(o5={}));function s5(){let t,i,a=new Promise((f,p)=>{t=v=>{f(v),l.status="resolved"},i=v=>{p(v),l.status="rejected"}}),l={resolve:t,reject:i,promise:a,status:"pending"};return l}var dye=Ut();function fye(t){let i=t.getState(),a=new dye.Atom(i);return t.subscribe(()=>{let l=t.getState();a.set(l),i=l}),a}_T();function hye(t){var i,a=t.Symbol;return typeof a=="function"?a.observable?i=a.observable:(i=a("observable"),a.observable=i):i="@@observable",i}var eS;typeof self<"u"?eS=self:typeof window<"u"?eS=window:typeof qi<"u"?eS=qi:eS=c;var pye=hye(eS),Gie=pye,Wie={INIT:"@@redux/INIT"};function qie(t,i,a){var l;if(typeof i=="function"&&typeof a>"u"&&(a=i,i=void 0),typeof a<"u"){if(typeof a!="function")throw new Error("Expected the enhancer to be a function.");return a(qie)(t,i)}if(typeof t!="function")throw new Error("Expected the reducer to be a function.");var f=t,p=i,v=[],_=v,x=!1;function w(){_===v&&(_=v.slice())}function A(){return p}function D(N){if(typeof N!="function")throw new Error("Expected listener to be a function.");var B=!0;return w(),_.push(N),function(){if(B){B=!1,w();var j=_.indexOf(N);_.splice(j,1)}}}function R(N){if(!x0(N))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof N.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(x)throw new Error("Reducers may not dispatch actions.");try{x=!0,p=f(p,N)}finally{x=!1}for(var B=v=_,j=0;j<B.length;j++){var W=B[j];W()}return N}function C(N){if(typeof N!="function")throw new Error("Expected the nextReducer to be a function.");f=N,R({type:Wie.INIT})}function F(){var N,B=D;return N={subscribe:function(j){if(typeof j!="object")throw new TypeError("Expected the observer to be an object.");function W(){j.next&&j.next(A())}W();var $=B(W);return{unsubscribe:$}}},N[Gie]=function(){return this},N}return R({type:Wie.INIT}),l={dispatch:R,subscribe:D,getState:A,replaceReducer:C},l[Gie]=F,l}function mye(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.length===0?function(l){return l}:i.length===1?i[0]:i.reduce(function(l,f){return function(){return l(f.apply(void 0,arguments))}})}function gye(t){let i=mye();return qie(t.rootReducer,void 0,i)}sk(),JM();var l5=new WeakMap,vye=(t,i,a)=>{let l=x=>{t.dispatch(Qv.replacePersistentState(x))},f=Xie(a),p=()=>t.getState().$persistent;_();let v=()=>{let x=p(),w=l5.get(t);x!==w&&(l5.set(t,x),localStorage.setItem(f,JSON.stringify(x)))};t.subscribe(L0(v,1e3)),window&&window.addEventListener("beforeunload",v);function _(){let x=localStorage.getItem(f);if(x){let w,A=!0;try{w=JSON.parse(x),A=!1}catch{ok.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{A||l(w),i()}}else i()}},_ye=(t,i)=>{let a=Xie(i),l=t.getState().$persistent;localStorage.removeItem(a),l5.set(t,l)};function Xie(t){return t+".persistent"}eq(),fr(),Tp(),sP(),Tn(),BC();var Nk=Ut();Xf(),aa(),Bne();function u5(t){if(typeof t=="boolean"||typeof t=="string"||typeof t=="number")return t;if(x0(t)){let i={},a=!1;for(let[l,f]of Object.entries(t))u5(f)!==void 0&&(i[l]=f,a=!0);if(a)return i}else return}function Kie(t,i,a){for(let[l,f]of Object.entries(t.props))if(f.type==="compound")Kie(f,[...i,l],a);else{if(f.type==="enum")throw new Error("Not yet implemented");a(f,[...i,l])}}function yye(t,i,a){return{set:(l,f)=>{t();let p=u5(f);if(typeof p>"u")return;let{root:v,path:_}=(0,Nk.getPointerParts)(l);if(vt(v)){let x=v.template.getMapOfValidSequenceTracks_forStudio().getValue(),w=OC(v.template.staticConfig,_);if(!w)throw new Error("Object ".concat(v.address.objectKey," does not have a prop at ").concat(JSON.stringify(_)));let A=(D,R,C)=>{if(D==null)return;if(u5(R.deserializeAndSanitize(D))===void 0)throw new Error("Invalid value ".concat(yU(D)," for object.props").concat(C.map(B=>"[".concat(JSON.stringify(B),"]")).join("")," is invalid"));let F=K(I({},v.address),{pathToProp:C}),N=Qc(x,C);if(typeof N=="string"){let B=v.sheet.getSequence();B.position=B.closestGridPosition(B.position),i.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(K(I({},F),{trackId:N,position:B.position,value:D,snappingFunction:B.closestGridPosition,type:"bezier"}))}else i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(K(I({},F),{value:D}))};if(w.type==="compound"){let D=(0,Nk.getPointerParts)(l).path,R=D.length;Kie(w,D,(C,F)=>{let N=F.slice(R),B=Yf(p,N);if(typeof B<"u")A(B,C,F);else throw new Error("Property object.props".concat(F.map(j=>"[".concat(JSON.stringify(j),"]")).join("")," is required but not provided"))})}else{if(w.type==="enum")throw new Error("Enums aren't implemented yet");A(p,w,_)}}else if(Zt(v)){let[x]=_;if(x==="subUnitsPerUnit"){if(typeof p!="number"||!B0(p)||p<1)throw new Error("Value ".concat(p," is not an integer, which is required for setting sequence prop ").concat(x));i.coreByProject.historic.sheetsById.sequence.setSubUnitsPerUnit(K(I({},v.address),{subUnitsPerUnit:p}))}else if(x==="length"){if(typeof p!="number"||p<=.001)throw new Error("Value ".concat(p," is not a positive number, which is required for setting sequence prop ").concat(x));i.coreByProject.historic.sheetsById.sequence.setLength(K(I({},v.address),{length:p}))}else throw new Error("Setting sequence prop ".concat(x," is not supported"))}else throw new Error("Only setting props of SheetObject-s and sequences is supported in a transaction so far")},unset:l=>{t();let{root:f,path:p}=(0,Nk.getPointerParts)(l);if(vt(f)){let v=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),_=Yf(f.template.getDefaultValues().getValue(),p),x=OC(f.template.staticConfig,p),w=(A,D)=>{let R=K(I({},f.address),{pathToProp:D}),C=Qc(v,D);typeof C=="string"?i.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(K(I({},R),{trackId:C,position:f.sheet.getSequence().positionSnappedToGrid})):x!==void 0&&i.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(R)};x.type==="compound"?Pt(_,(A,D)=>{w(A,D)},(0,Nk.getPointerParts)(l).path):w(_,p)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return t(),a},get stateEditors(){return i}}}var bye=class{constructor(){oe(this,"_reduxStore"),oe(this,"_atom"),oe(this,"atomP"),this._reduxStore=gye({rootReducer:Q_e}),this._atom=fye(this._reduxStore),this.atomP=this._atom.pointer}initialize(t){let i=s5();return t.usePersistentStorage===!0?vye(this._reduxStore,()=>{this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),i.resolve()},t.persistenceKey):(this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),i.resolve()),i.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(t){return _ye(this._reduxStore,t),this.getState()}__dev_startHistoryFromScratch(t){this._reduxStore.dispatch(Qv.historic.startHistoryFromScratch(Qv.reduceParts(i=>K(I({},i),{historic:t}))))}tempTransaction(t){let i=J_e(),a,l=i.push(Qv.reduceParts(f=>{let p={historic:r5(f.historic),ahistoric:r5(f.ahistoric),ephemeral:r5(f.ephemeral)},v=!0,_=()=>{if(!v)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},x=Hie(p),w=yye(_,x,p);try{return t(w),v=!1,{historic:i5(p.historic),ahistoric:i5(p.ahistoric),ephemeral:i5(p.ephemeral)}}catch(A){return a=A,f}finally{Hie(void 0)}}));if(this._reduxStore.dispatch(l),a)throw this._reduxStore.dispatch(i.discard()),a;return{commit:()=>{this._reduxStore.dispatch(i.commit())},discard:()=>{this._reduxStore.dispatch(i.discard())}}}undo(){this._reduxStore.dispatch(Qv.historic.undo())}redo(){this._reduxStore.dispatch(Qv.historic.redo())}createContentOfSaveFile(t){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[t])throw new Error("Project ".concat(t," has not been initialized."));let i=Q7();this.tempTransaction(({stateEditors:l})=>{l.coreByProject.historic.revisionHistory.add({projectId:t,revision:i})}).commit();let a=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[t];return I({},a)}},xye=Ut(),c5=class{constructor(){oe(this,"_values",{})}get(t,i){if(this.has(t))return this._values[t];{let a=i();return this._values[t]=a,a}}has(t){return this._values.hasOwnProperty(t)}};fr(),Hf(),Ue(),aa(),mU();var Sye=class{constructor(t){oe(this,"ui",{hide(){pe().ui.hide()},get isHidden(){return pe().ui.isHidden},restore(){pe().ui.restore()},renderToolset(i,a){return pe().ui.renderToolset(i,a)}}),oe(this,"_cache",new c5),oe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){Pve()},__experimental_enablePlayPauseKeyboardShortcut(){Cve()},__experimental_clearPersistentStorage(i){return pe().clearPersistentStorage(i)},__experimental_createContentOfSaveFileTyped(i){return pe().createContentOfSaveFile(i)}})}initialize(t){return pe().initialize(t)}extend(t,i){pe().extend(t,i)}transaction(t){return pe().transaction(({set:i,unset:a,stateEditors:l})=>t({set:i,unset:a,__experimental_forgetObject:f=>{if(!Fn(f))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");l.coreByProject.historic.sheetsById.forgetObject(f.address)},__experimental_forgetSheet:f=>{if(!sn(f))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");l.coreByProject.historic.sheetsById.forgetSheet(f.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,xye.prism)(()=>Vf().filter(t=>t.type==="Theatre_SheetObject"||t.type==="Theatre_Sheet").map(t=>t.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(t){let i=[...t].filter(a=>Fn(a)||sn(a)).map(a=>pe().corePrivateAPI(a));pe().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set(i)})}onSelectionChange(t){let i=pe();return this._getSelectionPrism().onChange(i.ticker,t,!0)}get selection(){return this._getSelection()}scrub(){return pe().scrub()}getStudioProject(){let t=pe().core;if(!t)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return pe().getStudioProject(t)}debouncedScrub(t=1e3){let i,a=L0(()=>{let l=i;l&&(i=void 0,l.commit())},t);return{capture:l=>{i||(i=this.scrub());let f=!0;try{i.capture(l),f=!1}finally{if(f){let p=i;i=void 0,p.discard()}else a()}}}}createPane(t){return pe().paneManager.createPane(t)}destroyPane(t){return pe().paneManager.destroyPane(t)}createContentOfSaveFile(t){return pe().createContentOfSaveFile(t)}};HW();var km=Ut(),wye=class{constructor(t){this._studio=t,oe(this,"_cache",new c5),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let t=this._getAllPanes();t.onStale(()=>{t.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,km.prism)(()=>{if(!(0,km.val)(this._studio.coreP))return{};let t=(0,km.val)(this._studio.atomP.historic.panelInstanceDesceriptors),i=(0,km.val)(this._studio.atomP.ephemeral.extensions.paneClasses),a={};for(let l of Object.values(t)){if(!l)continue;let f=i[l.paneClass];if(!f)continue;let{instanceId:p}=l,{extensionId:v,classDefinition:_}=f,x=km.prism.memo("instance-".concat(l.instanceId),()=>({extensionId:v,instanceId:p,definition:_}),[_]);a[p]=x}return a}))}get allPanesD(){return this._getAllPanes()}createPane(t){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let i=(0,km.val)(this._studio.atomP.ephemeral.extensions.paneClasses[t].extensionId),a=(0,km.val)(this._studio.atomP.historic.panelInstanceDesceriptors),l;for(let f=1;f<1e3&&(l="".concat(t," #").concat(f),!!a[l]);f++);if(!i)throw new Error('Pane class "'.concat(t,'" is not registered.'));return this._studio.transaction(({drafts:f})=>{f.historic.panelInstanceDesceriptors[l]={instanceId:l,paneClass:t}}),this._getAllPanes().getValue()[l]}destroyPane(t){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:i})=>{delete i.historic.panelInstanceDesceriptors[t]})}},Lk=Ut();Ue();var Yie=1800*1e3,Eye=1e3*60*60;function Tye(){return ke(this,null,function*(){let t=pe().atomP.ahistoric.visibilityState;if((0,Lk.val)(t)==="everythingIsVisible")return;let i=s5(),a=(0,Lk.pointerToPrism)(t).onStale(()=>{(0,Lk.val)(t)==="everythingIsVisible"&&(a(),i.resolve(void 0))});return i.promise})}function Mye(){return ke(this,null,function*(){if(!"0.7.2".match(/COMPAT/))for(yield Fk(500),yield Tye();;){let t=(0,Lk.val)(pe().atomP.ahistoric.updateChecker);if(t&&t.result!=="error"){let i=t.lastChecked,a=Date.now(),l=Math.abs(a-i);l<Yie&&(yield Fk(Yie-l))}try{let i=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.2"));if(i.ok){let a=yield i.json();if(!Pye(a))throw new Error("Bad response");pe().transaction(({drafts:l})=>{l.ahistoric.updateChecker={lastChecked:Date.now(),result:I({},a)}}),yield Fk(1e3)}else throw new Error("HTTP Error ".concat(i.statusText))}catch{yield Fk(Eye)}}})}var Fk=t=>new Promise(i=>setTimeout(i,t));function Pye(t){if(typeof t!="object")return!1;let i=t;return typeof i.hasUpdates!="boolean"?!1:i.hasUpdates===!0&&typeof i.newVersion=="string"&&typeof i.releasePage=="string"||i.hasUpdates===!1}var Cye=J(OP());function Ld(t){return new Promise((i,a)=>{t.oncomplete=t.onsuccess=()=>i(t.result),t.onabort=t.onerror=()=>a(t.error)})}function $ie(t,i){let a=indexedDB.open(t);a.onupgradeneeded=()=>a.result.createObjectStore(i);let l=Ld(a);return(f,p)=>l.then(v=>p(v.transaction(i,f).objectStore(i)))}var d5;function n_(){return d5||(d5=$ie("keyval-store","keyval")),d5}function Aye(t,i=n_()){return i("readonly",a=>Ld(a.get(t)))}function kye(t,i,a=n_()){return a("readwrite",l=>(l.put(i,t),Ld(l.transaction)))}function Iye(t,i=n_()){return i("readwrite",a=>(a.delete(t),Ld(a.transaction)))}function f5(t,i){return t.openCursor().onsuccess=function(){this.result&&(i(this.result),this.result.continue())},Ld(t.transaction)}function Rye(t=n_()){return t("readonly",i=>{if(i.getAllKeys)return Ld(i.getAllKeys());let a=[];return f5(i,l=>a.push(l.key)).then(()=>a)})}function Dye(t=n_()){return t("readonly",i=>{if(i.getAll)return Ld(i.getAll());let a=[];return f5(i,l=>a.push(l.value)).then(()=>a)})}function Oye(t=n_()){return t("readonly",i=>{if(i.getAll&&i.getAllKeys)return Promise.all([Ld(i.getAllKeys()),Ld(i.getAll())]).then(([l,f])=>l.map((p,v)=>[p,f[v]]));let a=[];return t("readonly",l=>f5(l,f=>a.push([f.key,f.value])).then(()=>a))})}var Nye=t=>{let i=$ie("theatrejs-".concat(t),"default-store");return{set:(a,l)=>kye(a,l,i),get:a=>Aye(a,i),del:a=>Iye(a,i),keys:()=>Rye(i),entries:()=>Oye(i),values:()=>Dye(i)}};EX(),S1();var Zie="theatre-0.4",Lye=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,Fye="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",Uye=class{constructor(){oe(this,"ui"),oe(this,"publicApi"),oe(this,"address"),oe(this,"_projectsProxy",new Tk.PointerProxy(new Tk.Atom({}).pointer)),oe(this,"projectsP",this._projectsProxy.pointer),oe(this,"_store",new bye),oe(this,"_corePrivateApi"),oe(this,"_cache",new c5),oe(this,"paneManager"),oe(this,"_coreAtom",new Tk.Atom({})),oe(this,"_initializedDeferred",s5()),oe(this,"_initializeFnCalled",!1),oe(this,"_didWarnAboutNotInitializing",!1),oe(this,"_coreBits"),oe(this,"_rafDriver"),this.address={studioId:u1(10)},this.publicApi=new Sye(this),this.ui=new I_e(this),this._attachToIncomingProjects(),this.paneManager=new wye(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(Lye),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(t){return ke(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(Fye);let i={persistenceKey:Zie,usePersistentStorage:!0};if(typeof t?.persistenceKey=="string"&&(i.persistenceKey=t.persistenceKey),(t?.usePersistentStorage===!1||typeof window>"u")&&(i.usePersistentStorage=!1),t!=null&&t.__experimental_rafDriver){if(t.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let a=this._coreBits.privateAPI(t.__experimental_rafDriver);if(!a)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=a}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(i)}catch(a){this._initializedDeferred.reject(a);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),Mye().catch(a=>{console.error(a)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let t=(0,Tk.pointerToPrism)(this.projectsP),i=a=>{for(let l of Object.values(a))l.isAttachedToStudio||l.attachToStudio(this)};t.onStale(()=>{i(t.getValue())}),i(t.getValue())}setCoreBits(t){this._coreBits=t,this._corePrivateApi=t.privateAPI,this._coreAtom.setByPointer(i=>i.core,t.coreExports),this._setProjectsP(t.projectsP)}_setProjectsP(t){this._projectsProxy.setPointer(t)}scrub(){return new A_e(this)}tempTransaction(t){return this._store.tempTransaction(t)}transaction(t){return this.tempTransaction(t).commit()}__dev_startHistoryFromScratch(t){return this._store.__dev_startHistoryFromScratch(t)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(t,i){if(!t||typeof t!="object")throw new Error("Extensions must be JS objects");if(typeof t.id!="string")throw new Error("extension.id must be a string");let a=i?.__experimental_reconfigure===!0,l=t.id,f=this._store.getState().ephemeral.extensions.byId[l];if(f&&!a){if(t===f||(0,Cye.default)(t,f))return;throw new Error('Extension id "'.concat(t.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:p})=>{var v,_;p.ephemeral.extensions.byId[t.id]=t;let x=p.ephemeral.extensions.paneClasses;a&&f&&((v=f.panes)==null||v.forEach(w=>{delete x[w.class]})),(_=t.panes)==null||_.forEach(w=>{if(typeof w.class!="string")throw new Error("pane.class must be a string");if(w.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let A=x[w.class];if(A)if(a&&A.extensionId===t.id)console.warn('Pane class "'.concat(w.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(w.class,'" already exists and is supplied by extension ').concat(A));x[w.class]={extensionId:t.id,classDefinition:w}})})}getStudioProject(t){return this._cache.get("getStudioProject",()=>t.getProject("Studio"))}getExtensionSheet(t,i){return this._cache.get("extensionSheet-"+t,()=>this.getStudioProject(i).sheet("Extension "+t))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(t){return this._store.createContentOfSaveFile(t)}createAssetStorage(t,i){return ke(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:w=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:w=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let a=Nye("".concat(t.address.projectId,"-assets")),l=wL(t),f=yield a.keys();yield Promise.all(f.map(w=>ke(this,null,function*(){l.includes(w)||(yield a.del(w))}))),yield Promise.all(f.map(w=>ke(this,null,function*(){var A,D;let R="".concat(i,"/").concat(w);try{(yield fetch(R,{method:"HEAD"})).ok&&(yield a.del(w))}catch{x1.error("Failed to access assets","Failed to access assets at ".concat((D=(A=t.config.assets)==null?void 0:A.baseUrl)!=null?D:"/",". This is likely due to a CORS issue."))}})));let p=new Map(yield a.entries()),v=new Map,_=w=>{if(v.has(w))return v.get(w);{let A=URL.createObjectURL(w);return v.set(w,A),A}},x=w=>{let A=p.get(w);if(!A)throw new Error("Asset with id ".concat(w," not found"));return _(A)};return{getAssetUrl:w=>p.has(w)?x(w):"".concat(i,"/").concat(w),createAsset:w=>ke(this,null,function*(){var A,D,R;let C=wL(t),F=!1;if(C.includes(w.name)){let N;try{N=(A=p.get(w.name))!=null?A:yield fetch("".concat(i,"/").concat(w.name)).then(B=>B.ok?B.blob():void 0)}catch{return x1.error("Failed to access assets","Failed to access assets at ".concat((R=(D=t.config.assets)==null?void 0:D.baseUrl)!=null?R:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(N){if(F=yield(yield Promise.resolve().then(()=>J(P_e()))).default.isEqual(w,N),F)return w.name;{let B=j=>{let W=prompt(j,w.name);return W===null?!1:W===""?B("Asset name cannot be empty. Please choose a different file name for this asset."):C.includes(W)?(console.log(C),B("An asset with this name already exists. Please choose a different file name for this asset.")):(w=new File([w],W,{type:w.type}),!0)};if(!B("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return p.set(w.name,w),yield a.set(w.name,w),w.name})}})}clearPersistentStorage(t=Zie){this._store.__experimental_clearPersistentStorage(t)}},h5="__TheatreJS_StudioBundle",Bye="__TheatreJS_CoreBundle",zye="__TheatreJS_Notifications",jye=class{constructor(t){this._studio=t,oe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(t){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=t;let i;t.getBitsForStudio(this._studio,a=>{i=a}),this._studio.setCoreBits(i)}},Vye=J(Fe());ht();var Jie,Hye=_e.div(Jie||(Jie=Y([""]))),Gye=t=>Vye.default.createElement(Hye,null),Wye=Gye;S1();var p5=new Uye;Qe(p5);var qye=p5.publicApi,Xye=qye;Kye();function Kye(){if(typeof window>"u")return;let t=window[h5];if(typeof t<"u")throw typeof t=="object"&&t&&typeof t.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(h5," seems to be already set by a module other than @theatre/core."));let i=new jye(p5);window[h5]=i;let a=window[Bye];a&&a!==null&&a.type==="Theatre_CoreBundle"&&i.registerCoreBundle(a)}typeof window<"u"&&(window[zye]={notify:x1});})(rw,rw.exports)),rw.exports}var gCe=mCe();const I4=fCe(gCe);function Zd(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Nce(c,e){c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.__proto__=e}var nl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_y={duration:.5,overwrite:!1,delay:0},Gj,po,zi,Rl=1e8,vi=1/Rl,Yz=Math.PI*2,vCe=Yz/4,_Ce=0,Lce=Math.sqrt,yCe=Math.cos,bCe=Math.sin,Ya=function(e){return typeof e=="string"},ta=function(e){return typeof e=="function"},cf=function(e){return typeof e=="number"},Wj=function(e){return typeof e>"u"},Lc=function(e){return typeof e=="object"},ws=function(e){return e!==!1},qj=function(){return typeof window<"u"},xI=function(e){return ta(e)||Ya(e)},Fce=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Do=Array.isArray,xCe=/random\([^)]+\)/g,SCe=/,\s*/g,oue=/(?:-?\.?\d|\.)+/gi,Uce=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Z_=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,R4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Bce=/[+-]=-?[.\d]+/,wCe=/[^,'"\[\]\s]+/gi,ECe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ki,bc,$z,Xj,il={},o3={},zce,jce=function(e){return(o3=yy(e,il))&&Ps},Kj=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},Ow=function(e,n){return!n&&console.warn(e)},Vce=function(e,n){return e&&(il[e]=n)&&o3&&(o3[e]=n)||il},Nw=function(){return 0},TCe={suppressEvents:!0,isStart:!0,kill:!1},VI={suppressEvents:!0,kill:!1},MCe={suppressEvents:!0},Yj={},$h=[],Zz={},Hce,Ks={},D4={},sue=30,HI=[],$j="",Zj=function(e){var n=e[0],r,o;if(Lc(n)||ta(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(o=HI.length;o--&&!HI[o].targetTest(n););r=HI[o]}for(o=e.length;o--;)e[o]&&(e[o]._gsap||(e[o]._gsap=new hde(e[o],r)))||e.splice(o,1);return e},cg=function(e){return e._gsap||Zj(Dl(e))[0]._gsap},Gce=function(e,n,r){return(r=e[n])&&ta(r)?e[n]():Wj(r)&&e.getAttribute&&e.getAttribute(n)||r},Es=function(e,n){return(e=e.split(",")).forEach(n)||e},ca=function(e){return Math.round(e*1e5)/1e5||0},Xi=function(e){return Math.round(e*1e7)/1e7||0},ry=function(e,n){var r=n.charAt(0),o=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+o:r==="-"?e-o:r==="*"?e*o:e/o},PCe=function(e,n){for(var r=n.length,o=0;e.indexOf(n[o])<0&&++o<r;);return o<r},s3=function(){var e=$h.length,n=$h.slice(0),r,o;for(Zz={},$h.length=0,r=0;r<e;r++)o=n[r],o&&o._lazy&&(o.render(o._lazy[0],o._lazy[1],!0)._lazy=0)},Jj=function(e){return!!(e._initted||e._startAt||e.add)},Wce=function(e,n,r,o){$h.length&&!po&&s3(),e.render(n,r,!!(po&&n<0&&Jj(e))),$h.length&&!po&&s3()},qce=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(wCe).length<2?n:Ya(e)?e.trim():e},Xce=function(e){return e},al=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},CCe=function(e){return function(n,r){for(var o in r)o in n||o==="duration"&&e||o==="ease"||(n[o]=r[o])}},yy=function(e,n){for(var r in n)e[r]=n[r];return e},lue=function c(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Lc(n[r])?c(e[r]||(e[r]={}),n[r]):n[r]);return e},l3=function(e,n){var r={},o;for(o in e)o in n||(r[o]=e[o]);return r},pw=function(e){var n=e.parent||Ki,r=e.keyframes?CCe(Do(e.keyframes)):al;if(ws(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},ACe=function(e,n){for(var r=e.length,o=r===n.length;o&&r--&&e[r]===n[r];);return r<0},Kce=function(e,n,r,o,u){var h=e[o],m;if(u)for(m=n[u];h&&h[u]>m;)h=h._prev;return h?(n._next=h._next,h._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[o]=n,n._prev=h,n.parent=n._dp=e,n},S3=function(e,n,r,o){r===void 0&&(r="_first"),o===void 0&&(o="_last");var u=n._prev,h=n._next;u?u._next=h:e[r]===n&&(e[r]=h),h?h._prev=u:e[o]===n&&(e[o]=u),n._next=n._prev=n.parent=null},Qh=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},dg=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},kCe=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},Jz=function(e,n,r,o){return e._startAt&&(po?e._startAt.revert(VI):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,o))},ICe=function c(e){return!e||e._ts&&c(e.parent)},uue=function(e){return e._repeat?by(e._tTime,e=e.duration()+e._rDelay)*e:0},by=function(e,n){var r=Math.floor(e=Xi(e/n));return e&&r===e?r-1:r},u3=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},w3=function(e){return e._end=Xi(e._start+(e._tDur/Math.abs(e._ts||e._rts||vi)||0))},E3=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Xi(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),w3(e),r._dirty||dg(r,e)),e},Yce=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=u3(e.rawTime(),n),(!n._dur||qw(0,n.totalDuration(),r)-n._tTime>vi)&&n.render(r,!0)),dg(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-vi}},Ec=function(e,n,r,o){return n.parent&&Qh(n),n._start=Xi((cf(r)?r:r||e!==Ki?Pl(e,r,n):e._time)+n._delay),n._end=Xi(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Kce(e,n,"_first","_last",e._sort?"_start":0),Qz(n)||(e._recent=n),o||Yce(e,n),e._ts<0&&E3(e,e._tTime),e},$ce=function(e,n){return(il.ScrollTrigger||Kj("scrollTrigger",n))&&il.ScrollTrigger.create(n,e)},Zce=function(e,n,r,o,u){if(e6(e,n,u),!e._initted)return 1;if(!r&&e._pt&&!po&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Hce!==Zs.frame)return $h.push(e),e._lazy=[u,o],1},RCe=function c(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||c(n))},Qz=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},DCe=function(e,n,r,o){var u=e.ratio,h=n<0||!n&&(!e._start&&RCe(e)&&!(!e._initted&&Qz(e))||(e._ts<0||e._dp._ts<0)&&!Qz(e))?0:1,m=e._rDelay,b=0,S,T,k;if(m&&e._repeat&&(b=qw(0,e._tDur,n),T=by(b,m),e._yoyo&&T&1&&(h=1-h),T!==by(e._tTime,m)&&(u=1-h,e.vars.repeatRefresh&&e._initted&&e.invalidate())),h!==u||po||o||e._zTime===vi||!n&&e._zTime){if(!e._initted&&Zce(e,n,o,r,b))return;for(k=e._zTime,e._zTime=n||(r?vi:0),r||(r=n&&!k),e.ratio=h,e._from&&(h=1-h),e._time=0,e._tTime=b,S=e._pt;S;)S.r(h,S.d),S=S._next;n<0&&Jz(e,n,r,!0),e._onUpdate&&!r&&el(e,"onUpdate"),b&&e._repeat&&!r&&e.parent&&el(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===h&&(h&&Qh(e,1),!r&&!po&&(el(e,h?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},OCe=function(e,n,r){var o;if(r>n)for(o=e._first;o&&o._start<=r;){if(o.data==="isPause"&&o._start>n)return o;o=o._next}else for(o=e._last;o&&o._start>=r;){if(o.data==="isPause"&&o._start<n)return o;o=o._prev}},xy=function(e,n,r,o){var u=e._repeat,h=Xi(n)||0,m=e._tTime/e._tDur;return m&&!o&&(e._time*=h/e._dur),e._dur=h,e._tDur=u?u<0?1e10:Xi(h*(u+1)+e._rDelay*u):h,m>0&&!o&&E3(e,e._tTime=e._tDur*m),e.parent&&w3(e),r||dg(e.parent,e),e},cue=function(e){return e instanceof is?dg(e):xy(e,e._dur)},NCe={_start:0,endTime:Nw,totalDuration:Nw},Pl=function c(e,n,r){var o=e.labels,u=e._recent||NCe,h=e.duration()>=Rl?u.endTime(!1):e._dur,m,b,S;return Ya(n)&&(isNaN(n)||n in o)?(b=n.charAt(0),S=n.substr(-1)==="%",m=n.indexOf("="),b==="<"||b===">"?(m>=0&&(n=n.replace(/=/,"")),(b==="<"?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(S?(m<0?u:r).totalDuration()/100:1)):m<0?(n in o||(o[n]=h),o[n]):(b=parseFloat(n.charAt(m-1)+n.substr(m+1)),S&&r&&(b=b/100*(Do(r)?r[0]:r).totalDuration()),m>1?c(e,n.substr(0,m-1),r)+b:h+b)):n==null?h:+n},mw=function(e,n,r){var o=cf(n[1]),u=(o?2:1)+(e<2?0:1),h=n[u],m,b;if(o&&(h.duration=n[1]),h.parent=r,e){for(m=h,b=r;b&&!("immediateRender"in m);)m=b.vars.defaults||{},b=ws(b.vars.inherit)&&b.parent;h.immediateRender=ws(m.immediateRender),e<2?h.runBackwards=1:h.startAt=n[u-1]}return new Ta(n[0],h,n[u+1])},rp=function(e,n){return e||e===0?n(e):n},qw=function(e,n,r){return r<e?e:r>n?n:r},Io=function(e,n){return!Ya(e)||!(n=ECe.exec(e))?"":n[1]},LCe=function(e,n,r){return rp(r,function(o){return qw(e,n,o)})},ej=[].slice,Jce=function(e,n){return e&&Lc(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Lc(e[0]))&&!e.nodeType&&e!==bc},FCe=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(o){var u;return Ya(o)&&!n||Jce(o,1)?(u=r).push.apply(u,Dl(o)):r.push(o)})||r},Dl=function(e,n,r){return zi&&!n&&zi.selector?zi.selector(e):Ya(e)&&!r&&($z||!Sy())?ej.call((n||Xj).querySelectorAll(e),0):Do(e)?FCe(e,r):Jce(e)?ej.call(e,0):e?[e]:[]},tj=function(e){return e=Dl(e)[0]||Ow("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Dl(n,r.querySelectorAll?r:r===e?Ow("Invalid scope")||Xj.createElement("div"):e)}},Qce=function(e){return e.sort(function(){return .5-Math.random()})},ede=function(e){if(ta(e))return e;var n=Lc(e)?e:{each:e},r=fg(n.ease),o=n.from||0,u=parseFloat(n.base)||0,h={},m=o>0&&o<1,b=isNaN(o)||m,S=n.axis,T=o,k=o;return Ya(o)?T=k={center:.5,edges:.5,end:1}[o]||0:!m&&b&&(T=o[0],k=o[1]),function(O,L,H){var G=(H||n).length,V=h[G],I,K,ue,P,ae,ge,me,J,te;if(!V){if(te=n.grid==="auto"?0:(n.grid||[1,Rl])[1],!te){for(me=-Rl;me<(me=H[te++].getBoundingClientRect().left)&&te<G;);te<G&&te--}for(V=h[G]=[],I=b?Math.min(te,G)*T-.5:o%te,K=te===Rl?0:b?G*k/te-.5:o/te|0,me=0,J=Rl,ge=0;ge<G;ge++)ue=ge%te-I,P=K-(ge/te|0),V[ge]=ae=S?Math.abs(S==="y"?P:ue):Lce(ue*ue+P*P),ae>me&&(me=ae),ae<J&&(J=ae);o==="random"&&Qce(V),V.max=me-J,V.min=J,V.v=G=(parseFloat(n.amount)||parseFloat(n.each)*(te>G?G-1:S?S==="y"?G/te:te:Math.max(te,G/te))||0)*(o==="edges"?-1:1),V.b=G<0?u-G:u,V.u=Io(n.amount||n.each)||0,r=r&&G<0?cde(r):r}return G=(V[O]-V.min)/V.max||0,Xi(V.b+(r?r(G):G)*V.v)+V.u}},nj=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var o=Xi(Math.round(parseFloat(r)/e)*e*n);return(o-o%1)/n+(cf(r)?0:Io(r))}},tde=function(e,n){var r=Do(e),o,u;return!r&&Lc(e)&&(o=r=e.radius||Rl,e.values?(e=Dl(e.values),(u=!cf(e[0]))&&(o*=o)):e=nj(e.increment)),rp(n,r?ta(e)?function(h){return u=e(h),Math.abs(u-h)<=o?u:h}:function(h){for(var m=parseFloat(u?h.x:h),b=parseFloat(u?h.y:0),S=Rl,T=0,k=e.length,O,L;k--;)u?(O=e[k].x-m,L=e[k].y-b,O=O*O+L*L):O=Math.abs(e[k]-m),O<S&&(S=O,T=k);return T=!o||S<=o?e[T]:h,u||T===h||cf(h)?T:T+Io(h)}:nj(e))},nde=function(e,n,r,o){return rp(Do(e)?!n:r===!0?!!(r=0):!o,function(){return Do(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(o=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*o)/o})},UCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(o){return n.reduce(function(u,h){return h(u)},o)}},BCe=function(e,n){return function(r){return e(parseFloat(r))+(n||Io(r))}},zCe=function(e,n,r){return ide(e,n,0,1,r)},rde=function(e,n,r){return rp(r,function(o){return e[~~n(o)]})},jCe=function c(e,n,r){var o=n-e;return Do(e)?rde(e,c(0,e.length),n):rp(r,function(u){return(o+(u-e)%o)%o+e})},VCe=function c(e,n,r){var o=n-e,u=o*2;return Do(e)?rde(e,c(0,e.length-1),n):rp(r,function(h){return h=(u+(h-e)%u)%u||0,e+(h>o?u-h:h)})},Lw=function(e){return e.replace(xCe,function(n){var r=n.indexOf("[")+1,o=n.substring(r||7,r?n.indexOf("]"):n.length-1).split(SCe);return nde(r?o:+o[0],r?0:+o[1],+o[2]||1e-5)})},ide=function(e,n,r,o,u){var h=n-e,m=o-r;return rp(u,function(b){return r+((b-e)/h*m||0)})},HCe=function c(e,n,r,o){var u=isNaN(e+n)?0:function(L){return(1-L)*e+L*n};if(!u){var h=Ya(e),m={},b,S,T,k,O;if(r===!0&&(o=1)&&(r=null),h)e={p:e},n={p:n};else if(Do(e)&&!Do(n)){for(T=[],k=e.length,O=k-2,S=1;S<k;S++)T.push(c(e[S-1],e[S]));k--,u=function(H){H*=k;var G=Math.min(O,~~H);return T[G](H-G)},r=n}else o||(e=yy(Do(e)?[]:{},e));if(!T){for(b in n)Qj.call(m,e,b,"get",n[b]);u=function(H){return r6(H,m)||(h?e.p:e)}}}return rp(r,u)},due=function(e,n,r){var o=e.labels,u=Rl,h,m,b;for(h in o)m=o[h]-n,m<0==!!r&&m&&u>(m=Math.abs(m))&&(b=h,u=m);return b},el=function(e,n,r){var o=e.vars,u=o[n],h=zi,m=e._ctx,b,S,T;if(u)return b=o[n+"Params"],S=o.callbackScope||e,r&&$h.length&&s3(),m&&(zi=m),T=b?u.apply(S,b):u.call(S),zi=h,T},iw=function(e){return Qh(e),e.scrollTrigger&&e.scrollTrigger.kill(!!po),e.progress()<1&&el(e,"onInterrupt"),e},J_,ade=[],ode=function(e){if(e)if(e=!e.name&&e.default||e,qj()||e.headless){var n=e.name,r=ta(e),o=n&&!r&&e.init?function(){this._props=[]}:e,u={init:Nw,render:r6,add:Qj,kill:aAe,modifier:iAe,rawVars:0},h={targetTest:0,get:0,getSetter:n6,aliases:{},register:0};if(Sy(),e!==o){if(Ks[n])return;al(o,al(l3(e,u),h)),yy(o.prototype,yy(u,l3(e,h))),Ks[o.prop=n]=o,e.targetTest&&(HI.push(o),Yj[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Vce(n,o),e.register&&e.register(Ps,o,Ts)}else ade.push(e)},gi=255,aw={aqua:[0,gi,gi],lime:[0,gi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,gi],navy:[0,0,128],white:[gi,gi,gi],olive:[128,128,0],yellow:[gi,gi,0],orange:[gi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[gi,0,0],pink:[gi,192,203],cyan:[0,gi,gi],transparent:[gi,gi,gi,0]},O4=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*gi+.5|0},sde=function(e,n,r){var o=e?cf(e)?[e>>16,e>>8&gi,e&gi]:0:aw.black,u,h,m,b,S,T,k,O,L,H;if(!o){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),aw[e])o=aw[e];else if(e.charAt(0)==="#"){if(e.length<6&&(u=e.charAt(1),h=e.charAt(2),m=e.charAt(3),e="#"+u+u+h+h+m+m+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return o=parseInt(e.substr(1,6),16),[o>>16,o>>8&gi,o&gi,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),o=[e>>16,e>>8&gi,e&gi]}else if(e.substr(0,3)==="hsl"){if(o=H=e.match(oue),!n)b=+o[0]%360/360,S=+o[1]/100,T=+o[2]/100,h=T<=.5?T*(S+1):T+S-T*S,u=T*2-h,o.length>3&&(o[3]*=1),o[0]=O4(b+1/3,u,h),o[1]=O4(b,u,h),o[2]=O4(b-1/3,u,h);else if(~e.indexOf("="))return o=e.match(Uce),r&&o.length<4&&(o[3]=1),o}else o=e.match(oue)||aw.transparent;o=o.map(Number)}return n&&!H&&(u=o[0]/gi,h=o[1]/gi,m=o[2]/gi,k=Math.max(u,h,m),O=Math.min(u,h,m),T=(k+O)/2,k===O?b=S=0:(L=k-O,S=T>.5?L/(2-k-O):L/(k+O),b=k===u?(h-m)/L+(h<m?6:0):k===h?(m-u)/L+2:(u-h)/L+4,b*=60),o[0]=~~(b+.5),o[1]=~~(S*100+.5),o[2]=~~(T*100+.5)),r&&o.length<4&&(o[3]=1),o},lde=function(e){var n=[],r=[],o=-1;return e.split(Zh).forEach(function(u){var h=u.match(Z_)||[];n.push.apply(n,h),r.push(o+=h.length+1)}),n.c=r,n},fue=function(e,n,r){var o="",u=(e+o).match(Zh),h=n?"hsla(":"rgba(",m=0,b,S,T,k;if(!u)return e;if(u=u.map(function(O){return(O=sde(O,n,1))&&h+(n?O[0]+","+O[1]+"%,"+O[2]+"%,"+O[3]:O.join(","))+")"}),r&&(T=lde(e),b=r.c,b.join(o)!==T.c.join(o)))for(S=e.replace(Zh,"1").split(Z_),k=S.length-1;m<k;m++)o+=S[m]+(~b.indexOf(m)?u.shift()||h+"0,0,0,0)":(T.length?T:u.length?u:r).shift());if(!S)for(S=e.split(Zh),k=S.length-1;m<k;m++)o+=S[m]+u[m];return o+S[k]},Zh=(function(){var c="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in aw)c+="|"+e+"\\b";return new RegExp(c+")","gi")})(),GCe=/hsl[a]?\(/,ude=function(e){var n=e.join(" "),r;if(Zh.lastIndex=0,Zh.test(n))return r=GCe.test(n),e[1]=fue(e[1],r),e[0]=fue(e[0],r,lde(e[1])),!0},Fw,Zs=(function(){var c=Date.now,e=500,n=33,r=c(),o=r,u=1e3/240,h=u,m=[],b,S,T,k,O,L,H=function G(V){var I=c()-o,K=V===!0,ue,P,ae,ge;if((I>e||I<0)&&(r+=I-n),o+=I,ae=o-r,ue=ae-h,(ue>0||K)&&(ge=++k.frame,O=ae-k.time*1e3,k.time=ae=ae/1e3,h+=ue+(ue>=u?4:u-ue),P=1),K||(b=S(G)),P)for(L=0;L<m.length;L++)m[L](ae,O,ge,V)};return k={time:0,frame:0,tick:function(){H(!0)},deltaRatio:function(V){return O/(1e3/(V||60))},wake:function(){zce&&(!$z&&qj()&&(bc=$z=window,Xj=bc.document||{},il.gsap=Ps,(bc.gsapVersions||(bc.gsapVersions=[])).push(Ps.version),jce(o3||bc.GreenSockGlobals||!bc.gsap&&bc||{}),ade.forEach(ode)),T=typeof requestAnimationFrame<"u"&&requestAnimationFrame,b&&k.sleep(),S=T||function(V){return setTimeout(V,h-k.time*1e3+1|0)},Fw=1,H(2))},sleep:function(){(T?cancelAnimationFrame:clearTimeout)(b),Fw=0,S=Nw},lagSmoothing:function(V,I){e=V||1/0,n=Math.min(I||33,e)},fps:function(V){u=1e3/(V||240),h=k.time*1e3+u},add:function(V,I,K){var ue=I?function(P,ae,ge,me){V(P,ae,ge,me),k.remove(ue)}:V;return k.remove(V),m[K?"unshift":"push"](ue),Sy(),ue},remove:function(V,I){~(I=m.indexOf(V))&&m.splice(I,1)&&L>=I&&L--},_listeners:m},k})(),Sy=function(){return!Fw&&Zs.wake()},Br={},WCe=/^[\d.\-M][\d.\-,\s]/,qCe=/["']/g,XCe=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),o=r[0],u=1,h=r.length,m,b,S;u<h;u++)b=r[u],m=u!==h-1?b.lastIndexOf(","):b.length,S=b.substr(0,m),n[o]=isNaN(S)?S.replace(qCe,"").trim():+S,o=b.substr(m+1).trim();return n},KCe=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),o=e.indexOf("(",n);return e.substring(n,~o&&o<r?e.indexOf(")",r+1):r)},YCe=function(e){var n=(e+"").split("("),r=Br[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[XCe(n[1])]:KCe(e).split(",").map(qce)):Br._CE&&WCe.test(e)?Br._CE("",e):r},cde=function(e){return function(n){return 1-e(1-n)}},dde=function c(e,n){for(var r=e._first,o;r;)r instanceof is?c(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?c(r.timeline,n):(o=r._ease,r._ease=r._yEase,r._yEase=o,r._yoyo=n)),r=r._next},fg=function(e,n){return e&&(ta(e)?e:Br[e]||YCe(e))||n},wg=function(e,n,r,o){r===void 0&&(r=function(b){return 1-n(1-b)}),o===void 0&&(o=function(b){return b<.5?n(b*2)/2:1-n((1-b)*2)/2});var u={easeIn:n,easeOut:r,easeInOut:o},h;return Es(e,function(m){Br[m]=il[m]=u,Br[h=m.toLowerCase()]=r;for(var b in u)Br[h+(b==="easeIn"?".in":b==="easeOut"?".out":".inOut")]=Br[m+"."+b]=u[b]}),u},fde=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},N4=function c(e,n,r){var o=n>=1?n:1,u=(r||(e?.3:.45))/(n<1?n:1),h=u/Yz*(Math.asin(1/o)||0),m=function(T){return T===1?1:o*Math.pow(2,-10*T)*bCe((T-h)*u)+1},b=e==="out"?m:e==="in"?function(S){return 1-m(1-S)}:fde(m);return u=Yz/u,b.config=function(S,T){return c(e,S,T)},b},L4=function c(e,n){n===void 0&&(n=1.70158);var r=function(h){return h?--h*h*((n+1)*h+n)+1:0},o=e==="out"?r:e==="in"?function(u){return 1-r(1-u)}:fde(r);return o.config=function(u){return c(e,u)},o};Es("Linear,Quad,Cubic,Quart,Quint,Strong",function(c,e){var n=e<5?e+1:e;wg(c+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});Br.Linear.easeNone=Br.none=Br.Linear.easeIn;wg("Elastic",N4("in"),N4("out"),N4());(function(c,e){var n=1/e,r=2*n,o=2.5*n,u=function(m){return m<n?c*m*m:m<r?c*Math.pow(m-1.5/e,2)+.75:m<o?c*(m-=2.25/e)*m+.9375:c*Math.pow(m-2.625/e,2)+.984375};wg("Bounce",function(h){return 1-u(1-h)},u)})(7.5625,2.75);wg("Expo",function(c){return Math.pow(2,10*(c-1))*c+c*c*c*c*c*c*(1-c)});wg("Circ",function(c){return-(Lce(1-c*c)-1)});wg("Sine",function(c){return c===1?1:-yCe(c*vCe)+1});wg("Back",L4("in"),L4("out"),L4());Br.SteppedEase=Br.steps=il.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,o=e+(n?0:1),u=n?1:0,h=1-vi;return function(m){return((o*qw(0,h,m)|0)+u)*r}}};_y.ease=Br["quad.out"];Es("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(c){return $j+=c+","+c+"Params,"});var hde=function(e,n){this.id=_Ce++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:Gce,this.set=n?n.getSetter:n6},Uw=(function(){function c(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,xy(this,+n.duration,1,1),this.data=n.data,zi&&(this._ctx=zi,zi.data.push(this)),Fw||Zs.wake()}var e=c.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,xy(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,o){if(Sy(),!arguments.length)return this._tTime;var u=this._dp;if(u&&u.smoothChildTiming&&this._ts){for(E3(this,r),!u._dp||u.parent||Yce(u,this);u&&u.parent;)u.parent._time!==u._start+(u._ts>=0?u._tTime/u._ts:(u.totalDuration()-u._tTime)/-u._ts)&&u.totalTime(u._tTime,!0),u=u.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Ec(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!o||this._initted&&Math.abs(this._zTime)===vi||!this._initted&&this._dur&&r||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Wce(this,r,o)),this},e.time=function(r,o){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+uue(this))%(this._dur+this._rDelay)||(r?this._dur:0),o):this._time},e.totalProgress=function(r,o){return arguments.length?this.totalTime(this.totalDuration()*r,o):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,o){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+uue(this),o):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,o){var u=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*u,o):this._repeat?by(this._tTime,u)+1:1},e.timeScale=function(r,o){if(!arguments.length)return this._rts===-vi?0:this._rts;if(this._rts===r)return this;var u=this.parent&&this._ts?u3(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-vi?0:this._rts,this.totalTime(qw(-Math.abs(this._delay),this.totalDuration(),u),o!==!1),w3(this),kCe(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Sy(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==vi&&(this._tTime-=vi)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=Xi(r);var o=this.parent||this._dp;return o&&(o._sort||!this.parent)&&Ec(o,this,this._start-this._delay),this}return this._start},e.endTime=function(r){return this._start+(ws(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var o=this.parent||this._dp;return o?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?u3(o.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=MCe);var o=po;return po=r,Jj(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),po=o,this},e.globalTime=function(r){for(var o=this,u=arguments.length?r:o.rawTime();o;)u=o._start+u/(Math.abs(o._ts)||1),o=o._dp;return!this.parent&&this._sat?this._sat.globalTime(r):u},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,cue(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var o=this._time;return this._rDelay=r,cue(this),o?this.time(o):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,o){return this.totalTime(Pl(this,r),ws(o))},e.restart=function(r,o){return this.play().totalTime(r?-this._delay:0,ws(o)),this._dur||(this._zTime=-vi),this},e.play=function(r,o){return r!=null&&this.seek(r,o),this.reversed(!1).paused(!1)},e.reverse=function(r,o){return r!=null&&this.seek(r||this.totalDuration(),o),this.reversed(!0).paused(!1)},e.pause=function(r,o){return r!=null&&this.seek(r,o),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-vi:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-vi,this},e.isActive=function(){var r=this.parent||this._dp,o=this._start,u;return!!(!r||this._ts&&this._initted&&r.isActive()&&(u=r.rawTime(!0))>=o&&u<this.endTime(!0)-vi)},e.eventCallback=function(r,o,u){var h=this.vars;return arguments.length>1?(o?(h[r]=o,u&&(h[r+"Params"]=u),r==="onUpdate"&&(this._onUpdate=o)):delete h[r],this):h[r]},e.then=function(r){var o=this,u=o._prom;return new Promise(function(h){var m=ta(r)?r:Xce,b=function(){var T=o.then;o.then=null,u&&u(),ta(m)&&(m=m(o))&&(m.then||m===o)&&(o.then=T),h(m),o.then=T};o._initted&&o.totalProgress()===1&&o._ts>=0||!o._tTime&&o._ts<0?b():o._prom=b})},e.kill=function(){iw(this)},c})();al(Uw.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-vi,_prom:0,_ps:!1,_rts:1});var is=(function(c){Nce(e,c);function e(r,o){var u;return r===void 0&&(r={}),u=c.call(this,r)||this,u.labels={},u.smoothChildTiming=!!r.smoothChildTiming,u.autoRemoveChildren=!!r.autoRemoveChildren,u._sort=ws(r.sortChildren),Ki&&Ec(r.parent||Ki,Zd(u),o),r.reversed&&u.reverse(),r.paused&&u.paused(!0),r.scrollTrigger&&$ce(Zd(u),r.scrollTrigger),u}var n=e.prototype;return n.to=function(o,u,h){return mw(0,arguments,this),this},n.from=function(o,u,h){return mw(1,arguments,this),this},n.fromTo=function(o,u,h,m){return mw(2,arguments,this),this},n.set=function(o,u,h){return u.duration=0,u.parent=this,pw(u).repeatDelay||(u.repeat=0),u.immediateRender=!!u.immediateRender,new Ta(o,u,Pl(this,h),1),this},n.call=function(o,u,h){return Ec(this,Ta.delayedCall(0,o,u),h)},n.staggerTo=function(o,u,h,m,b,S,T){return h.duration=u,h.stagger=h.stagger||m,h.onComplete=S,h.onCompleteParams=T,h.parent=this,new Ta(o,h,Pl(this,b)),this},n.staggerFrom=function(o,u,h,m,b,S,T){return h.runBackwards=1,pw(h).immediateRender=ws(h.immediateRender),this.staggerTo(o,u,h,m,b,S,T)},n.staggerFromTo=function(o,u,h,m,b,S,T,k){return m.startAt=h,pw(m).immediateRender=ws(m.immediateRender),this.staggerTo(o,u,m,b,S,T,k)},n.render=function(o,u,h){var m=this._time,b=this._dirty?this.totalDuration():this._tDur,S=this._dur,T=o<=0?0:Xi(o),k=this._zTime<0!=o<0&&(this._initted||!S),O,L,H,G,V,I,K,ue,P,ae,ge,me;if(this!==Ki&&T>b&&o>=0&&(T=b),T!==this._tTime||h||k){if(m!==this._time&&S&&(T+=this._time-m,o+=this._time-m),O=T,P=this._start,ue=this._ts,I=!ue,k&&(S||(m=this._zTime),(o||!u)&&(this._zTime=o)),this._repeat){if(ge=this._yoyo,V=S+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(V*100+o,u,h);if(O=Xi(T%V),T===b?(G=this._repeat,O=S):(ae=Xi(T/V),G=~~ae,G&&G===ae&&(O=S,G--),O>S&&(O=S)),ae=by(this._tTime,V),!m&&this._tTime&&ae!==G&&this._tTime-ae*V-this._dur<=0&&(ae=G),ge&&G&1&&(O=S-O,me=1),G!==ae&&!this._lock){var J=ge&&ae&1,te=J===(ge&&G&1);if(G<ae&&(J=!J),m=J?0:T%S?S:T,this._lock=1,this.render(m||(me?0:Xi(G*V)),u,!S)._lock=0,this._tTime=T,!u&&this.parent&&el(this,"onRepeat"),this.vars.repeatRefresh&&!me&&(this.invalidate()._lock=1,ae=G),m&&m!==this._time||I!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(S=this._dur,b=this._tDur,te&&(this._lock=2,m=J?S:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!me&&this.invalidate()),this._lock=0,!this._ts&&!I)return this;dde(this,me)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(K=OCe(this,Xi(m),Xi(O)),K&&(T-=O-(O=K._start))),this._tTime=T,this._time=O,this._act=!ue,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=o,m=0),!m&&T&&S&&!u&&!ae&&(el(this,"onStart"),this._tTime!==T))return this;if(O>=m&&o>=0)for(L=this._first;L;){if(H=L._next,(L._act||O>=L._start)&&L._ts&&K!==L){if(L.parent!==this)return this.render(o,u,h);if(L.render(L._ts>0?(O-L._start)*L._ts:(L._dirty?L.totalDuration():L._tDur)+(O-L._start)*L._ts,u,h),O!==this._time||!this._ts&&!I){K=0,H&&(T+=this._zTime=-vi);break}}L=H}else{L=this._last;for(var oe=o<0?o:O;L;){if(H=L._prev,(L._act||oe<=L._end)&&L._ts&&K!==L){if(L.parent!==this)return this.render(o,u,h);if(L.render(L._ts>0?(oe-L._start)*L._ts:(L._dirty?L.totalDuration():L._tDur)+(oe-L._start)*L._ts,u,h||po&&Jj(L)),O!==this._time||!this._ts&&!I){K=0,H&&(T+=this._zTime=oe?-vi:vi);break}}L=H}}if(K&&!u&&(this.pause(),K.render(O>=m?0:-vi)._zTime=O>=m?1:-1,this._ts))return this._start=P,w3(this),this.render(o,u,h);this._onUpdate&&!u&&el(this,"onUpdate",!0),(T===b&&this._tTime>=this.totalDuration()||!T&&m)&&(P===this._start||Math.abs(ue)!==Math.abs(this._ts))&&(this._lock||((o||!S)&&(T===b&&this._ts>0||!T&&this._ts<0)&&Qh(this,1),!u&&!(o<0&&!m)&&(T||m||!b)&&(el(this,T===b&&o>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(T<b&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(o,u){var h=this;if(cf(u)||(u=Pl(this,u,o)),!(o instanceof Uw)){if(Do(o))return o.forEach(function(m){return h.add(m,u)}),this;if(Ya(o))return this.addLabel(o,u);if(ta(o))o=Ta.delayedCall(0,o);else return this}return this!==o?Ec(this,o,u):this},n.getChildren=function(o,u,h,m){o===void 0&&(o=!0),u===void 0&&(u=!0),h===void 0&&(h=!0),m===void 0&&(m=-Rl);for(var b=[],S=this._first;S;)S._start>=m&&(S instanceof Ta?u&&b.push(S):(h&&b.push(S),o&&b.push.apply(b,S.getChildren(!0,u,h)))),S=S._next;return b},n.getById=function(o){for(var u=this.getChildren(1,1,1),h=u.length;h--;)if(u[h].vars.id===o)return u[h]},n.remove=function(o){return Ya(o)?this.removeLabel(o):ta(o)?this.killTweensOf(o):(o.parent===this&&S3(this,o),o===this._recent&&(this._recent=this._last),dg(this))},n.totalTime=function(o,u){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Xi(Zs.time-(this._ts>0?o/this._ts:(this.totalDuration()-o)/-this._ts))),c.prototype.totalTime.call(this,o,u),this._forcing=0,this):this._tTime},n.addLabel=function(o,u){return this.labels[o]=Pl(this,u),this},n.removeLabel=function(o){return delete this.labels[o],this},n.addPause=function(o,u,h){var m=Ta.delayedCall(0,u||Nw,h);return m.data="isPause",this._hasPause=1,Ec(this,m,Pl(this,o))},n.removePause=function(o){var u=this._first;for(o=Pl(this,o);u;)u._start===o&&u.data==="isPause"&&Qh(u),u=u._next},n.killTweensOf=function(o,u,h){for(var m=this.getTweensOf(o,h),b=m.length;b--;)Wh!==m[b]&&m[b].kill(o,u);return this},n.getTweensOf=function(o,u){for(var h=[],m=Dl(o),b=this._first,S=cf(u),T;b;)b instanceof Ta?PCe(b._targets,m)&&(S?(!Wh||b._initted&&b._ts)&&b.globalTime(0)<=u&&b.globalTime(b.totalDuration())>u:!u||b.isActive())&&h.push(b):(T=b.getTweensOf(m,u)).length&&h.push.apply(h,T),b=b._next;return h},n.tweenTo=function(o,u){u=u||{};var h=this,m=Pl(h,o),b=u,S=b.startAt,T=b.onStart,k=b.onStartParams,O=b.immediateRender,L,H=Ta.to(h,al({ease:u.ease||"none",lazy:!1,immediateRender:!1,time:m,overwrite:"auto",duration:u.duration||Math.abs((m-(S&&"time"in S?S.time:h._time))/h.timeScale())||vi,onStart:function(){if(h.pause(),!L){var V=u.duration||Math.abs((m-(S&&"time"in S?S.time:h._time))/h.timeScale());H._dur!==V&&xy(H,V,0,1).render(H._time,!0,!0),L=1}T&&T.apply(H,k||[])}},u));return O?H.render(0):H},n.tweenFromTo=function(o,u,h){return this.tweenTo(u,al({startAt:{time:Pl(this,o)}},h))},n.recent=function(){return this._recent},n.nextLabel=function(o){return o===void 0&&(o=this._time),due(this,Pl(this,o))},n.previousLabel=function(o){return o===void 0&&(o=this._time),due(this,Pl(this,o),1)},n.currentLabel=function(o){return arguments.length?this.seek(o,!0):this.previousLabel(this._time+vi)},n.shiftChildren=function(o,u,h){h===void 0&&(h=0);var m=this._first,b=this.labels,S;for(o=Xi(o);m;)m._start>=h&&(m._start+=o,m._end+=o),m=m._next;if(u)for(S in b)b[S]>=h&&(b[S]+=o);return dg(this)},n.invalidate=function(o){var u=this._first;for(this._lock=0;u;)u.invalidate(o),u=u._next;return c.prototype.invalidate.call(this,o)},n.clear=function(o){o===void 0&&(o=!0);for(var u=this._first,h;u;)h=u._next,this.remove(u),u=h;return this._dp&&(this._time=this._tTime=this._pTime=0),o&&(this.labels={}),dg(this)},n.totalDuration=function(o){var u=0,h=this,m=h._last,b=Rl,S,T,k;if(arguments.length)return h.timeScale((h._repeat<0?h.duration():h.totalDuration())/(h.reversed()?-o:o));if(h._dirty){for(k=h.parent;m;)S=m._prev,m._dirty&&m.totalDuration(),T=m._start,T>b&&h._sort&&m._ts&&!h._lock?(h._lock=1,Ec(h,m,T-m._delay,1)._lock=0):b=T,T<0&&m._ts&&(u-=T,(!k&&!h._dp||k&&k.smoothChildTiming)&&(h._start+=Xi(T/h._ts),h._time-=T,h._tTime-=T),h.shiftChildren(-T,!1,-1/0),b=0),m._end>u&&m._ts&&(u=m._end),m=S;xy(h,h===Ki&&h._time>u?h._time:u,1,1),h._dirty=0}return h._tDur},e.updateRoot=function(o){if(Ki._ts&&(Wce(Ki,u3(o,Ki)),Hce=Zs.frame),Zs.frame>=sue){sue+=nl.autoSleep||120;var u=Ki._first;if((!u||!u._ts)&&nl.autoSleep&&Zs._listeners.length<2){for(;u&&!u._ts;)u=u._next;u||Zs.sleep()}}},e})(Uw);al(is.prototype,{_lock:0,_hasPause:0,_forcing:0});var $Ce=function(e,n,r,o,u,h,m){var b=new Ts(this._pt,e,n,0,1,yde,null,u),S=0,T=0,k,O,L,H,G,V,I,K;for(b.b=r,b.e=o,r+="",o+="",(I=~o.indexOf("random("))&&(o=Lw(o)),h&&(K=[r,o],h(K,e,n),r=K[0],o=K[1]),O=r.match(R4)||[];k=R4.exec(o);)H=k[0],G=o.substring(S,k.index),L?L=(L+1)%5:G.substr(-5)==="rgba("&&(L=1),H!==O[T++]&&(V=parseFloat(O[T-1])||0,b._pt={_next:b._pt,p:G||T===1?G:",",s:V,c:H.charAt(1)==="="?ry(V,H)-V:parseFloat(H)-V,m:L&&L<4?Math.round:0},S=R4.lastIndex);return b.c=S<o.length?o.substring(S,o.length):"",b.fp=m,(Bce.test(o)||I)&&(b.e=0),this._pt=b,b},Qj=function(e,n,r,o,u,h,m,b,S,T){ta(o)&&(o=o(u||0,e,h));var k=e[n],O=r!=="get"?r:ta(k)?S?e[n.indexOf("set")||!ta(e["get"+n.substr(3)])?n:"get"+n.substr(3)](S):e[n]():k,L=ta(k)?S?tAe:vde:t6,H;if(Ya(o)&&(~o.indexOf("random(")&&(o=Lw(o)),o.charAt(1)==="="&&(H=ry(O,o)+(Io(O)||0),(H||H===0)&&(o=H))),!T||O!==o||rj)return!isNaN(O*o)&&o!==""?(H=new Ts(this._pt,e,n,+O||0,o-(O||0),typeof k=="boolean"?rAe:_de,0,L),S&&(H.fp=S),m&&H.modifier(m,this,e),this._pt=H):(!k&&!(n in e)&&Kj(n,o),$Ce.call(this,e,n,O,o,L,b||nl.stringFilter,S))},ZCe=function(e,n,r,o,u){if(ta(e)&&(e=gw(e,u,n,r,o)),!Lc(e)||e.style&&e.nodeType||Do(e)||Fce(e))return Ya(e)?gw(e,u,n,r,o):e;var h={},m;for(m in e)h[m]=gw(e[m],u,n,r,o);return h},pde=function(e,n,r,o,u,h){var m,b,S,T;if(Ks[e]&&(m=new Ks[e]).init(u,m.rawVars?n[e]:ZCe(n[e],o,u,h,r),r,o,h)!==!1&&(r._pt=b=new Ts(r._pt,u,e,0,1,m.render,m,0,m.priority),r!==J_))for(S=r._ptLookup[r._targets.indexOf(u)],T=m._props.length;T--;)S[m._props[T]]=b;return m},Wh,rj,e6=function c(e,n,r){var o=e.vars,u=o.ease,h=o.startAt,m=o.immediateRender,b=o.lazy,S=o.onUpdate,T=o.runBackwards,k=o.yoyoEase,O=o.keyframes,L=o.autoRevert,H=e._dur,G=e._startAt,V=e._targets,I=e.parent,K=I&&I.data==="nested"?I.vars.targets:V,ue=e._overwrite==="auto"&&!Gj,P=e.timeline,ae,ge,me,J,te,oe,Y,ke,$e,ot,Qe,pe,Ve;if(P&&(!O||!u)&&(u="none"),e._ease=fg(u,_y.ease),e._yEase=k?cde(fg(k===!0?u:k,_y.ease)):0,k&&e._yoyo&&!e._repeat&&(k=e._yEase,e._yEase=e._ease,e._ease=k),e._from=!P&&!!o.runBackwards,!P||O&&!o.stagger){if(ke=V[0]?cg(V[0]).harness:0,pe=ke&&o[ke.prop],ae=l3(o,Yj),G&&(G._zTime<0&&G.progress(1),n<0&&T&&m&&!L?G.render(-1,!0):G.revert(T&&H?VI:TCe),G._lazy=0),h){if(Qh(e._startAt=Ta.set(V,al({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!G&&ws(b),startAt:null,delay:0,onUpdate:S&&function(){return el(e,"onUpdate")},stagger:0},h))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(po||!m&&!L)&&e._startAt.revert(VI),m&&H&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(T&&H&&!G){if(n&&(m=!1),me=al({overwrite:!1,data:"isFromStart",lazy:m&&!G&&ws(b),immediateRender:m,stagger:0,parent:I},ae),pe&&(me[ke.prop]=pe),Qh(e._startAt=Ta.set(V,me)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(po?e._startAt.revert(VI):e._startAt.render(-1,!0)),e._zTime=n,!m)c(e._startAt,vi,vi);else if(!n)return}for(e._pt=e._ptCache=0,b=H&&ws(b)||b&&!H,ge=0;ge<V.length;ge++){if(te=V[ge],Y=te._gsap||Zj(V)[ge]._gsap,e._ptLookup[ge]=ot={},Zz[Y.id]&&$h.length&&s3(),Qe=K===V?ge:K.indexOf(te),ke&&($e=new ke).init(te,pe||ae,e,Qe,K)!==!1&&(e._pt=J=new Ts(e._pt,te,$e.name,0,1,$e.render,$e,0,$e.priority),$e._props.forEach(function(Ue){ot[Ue]=J}),$e.priority&&(oe=1)),!ke||pe)for(me in ae)Ks[me]&&($e=pde(me,ae,e,Qe,te,K))?$e.priority&&(oe=1):ot[me]=J=Qj.call(e,te,me,"get",ae[me],Qe,K,0,o.stringFilter);e._op&&e._op[ge]&&e.kill(te,e._op[ge]),ue&&e._pt&&(Wh=e,Ki.killTweensOf(te,ot,e.globalTime(n)),Ve=!e.parent,Wh=0),e._pt&&b&&(Zz[Y.id]=1)}oe&&bde(e),e._onInit&&e._onInit(e)}e._onUpdate=S,e._initted=(!e._op||e._pt)&&!Ve,O&&n<=0&&P.render(Rl,!0,!0)},JCe=function(e,n,r,o,u,h,m,b){var S=(e._pt&&e._ptCache||(e._ptCache={}))[n],T,k,O,L;if(!S)for(S=e._ptCache[n]=[],O=e._ptLookup,L=e._targets.length;L--;){if(T=O[L][n],T&&T.d&&T.d._pt)for(T=T.d._pt;T&&T.p!==n&&T.fp!==n;)T=T._next;if(!T)return rj=1,e.vars[n]="+=0",e6(e,m),rj=0,b?Ow(n+" not eligible for reset"):1;S.push(T)}for(L=S.length;L--;)k=S[L],T=k._pt||k,T.s=(o||o===0)&&!u?o:T.s+(o||0)+h*T.c,T.c=r-T.s,k.e&&(k.e=ca(r)+Io(k.e)),k.b&&(k.b=T.s+Io(k.b))},QCe=function(e,n){var r=e[0]?cg(e[0]).harness:0,o=r&&r.aliases,u,h,m,b;if(!o)return n;u=yy({},n);for(h in o)if(h in u)for(b=o[h].split(","),m=b.length;m--;)u[b[m]]=u[h];return u},eAe=function(e,n,r,o){var u=n.ease||o||"power1.inOut",h,m;if(Do(n))m=r[e]||(r[e]=[]),n.forEach(function(b,S){return m.push({t:S/(n.length-1)*100,v:b,e:u})});else for(h in n)m=r[h]||(r[h]=[]),h==="ease"||m.push({t:parseFloat(e),v:n[h],e:u})},gw=function(e,n,r,o,u){return ta(e)?e.call(n,r,o,u):Ya(e)&&~e.indexOf("random(")?Lw(e):e},mde=$j+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",gde={};Es(mde+",id,stagger,delay,duration,paused,scrollTrigger",function(c){return gde[c]=1});var Ta=(function(c){Nce(e,c);function e(r,o,u,h){var m;typeof o=="number"&&(u.duration=o,o=u,u=null),m=c.call(this,h?o:pw(o))||this;var b=m.vars,S=b.duration,T=b.delay,k=b.immediateRender,O=b.stagger,L=b.overwrite,H=b.keyframes,G=b.defaults,V=b.scrollTrigger,I=b.yoyoEase,K=o.parent||Ki,ue=(Do(r)||Fce(r)?cf(r[0]):"length"in o)?[r]:Dl(r),P,ae,ge,me,J,te,oe,Y;if(m._targets=ue.length?Zj(ue):Ow("GSAP target "+r+" not found. https://gsap.com",!nl.nullTargetWarn)||[],m._ptLookup=[],m._overwrite=L,H||O||xI(S)||xI(T)){if(o=m.vars,P=m.timeline=new is({data:"nested",defaults:G||{},targets:K&&K.data==="nested"?K.vars.targets:ue}),P.kill(),P.parent=P._dp=Zd(m),P._start=0,O||xI(S)||xI(T)){if(me=ue.length,oe=O&&ede(O),Lc(O))for(J in O)~mde.indexOf(J)&&(Y||(Y={}),Y[J]=O[J]);for(ae=0;ae<me;ae++)ge=l3(o,gde),ge.stagger=0,I&&(ge.yoyoEase=I),Y&&yy(ge,Y),te=ue[ae],ge.duration=+gw(S,Zd(m),ae,te,ue),ge.delay=(+gw(T,Zd(m),ae,te,ue)||0)-m._delay,!O&&me===1&&ge.delay&&(m._delay=T=ge.delay,m._start+=T,ge.delay=0),P.to(te,ge,oe?oe(ae,te,ue):0),P._ease=Br.none;P.duration()?S=T=0:m.timeline=0}else if(H){pw(al(P.vars.defaults,{ease:"none"})),P._ease=fg(H.ease||o.ease||"none");var ke=0,$e,ot,Qe;if(Do(H))H.forEach(function(pe){return P.to(ue,pe,">")}),P.duration();else{ge={};for(J in H)J==="ease"||J==="easeEach"||eAe(J,H[J],ge,H.easeEach);for(J in ge)for($e=ge[J].sort(function(pe,Ve){return pe.t-Ve.t}),ke=0,ae=0;ae<$e.length;ae++)ot=$e[ae],Qe={ease:ot.e,duration:(ot.t-(ae?$e[ae-1].t:0))/100*S},Qe[J]=ot.v,P.to(ue,Qe,ke),ke+=Qe.duration;P.duration()<S&&P.to({},{duration:S-P.duration()})}}S||m.duration(S=P.duration())}else m.timeline=0;return L===!0&&!Gj&&(Wh=Zd(m),Ki.killTweensOf(ue),Wh=0),Ec(K,Zd(m),u),o.reversed&&m.reverse(),o.paused&&m.paused(!0),(k||!S&&!H&&m._start===Xi(K._time)&&ws(k)&&ICe(Zd(m))&&K.data!=="nested")&&(m._tTime=-vi,m.render(Math.max(0,-T)||0)),V&&$ce(Zd(m),V),m}var n=e.prototype;return n.render=function(o,u,h){var m=this._time,b=this._tDur,S=this._dur,T=o<0,k=o>b-vi&&!T?b:o<vi?0:o,O,L,H,G,V,I,K,ue,P;if(!S)DCe(this,o,u,h);else if(k!==this._tTime||!o||h||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==T||this._lazy){if(O=k,ue=this.timeline,this._repeat){if(G=S+this._rDelay,this._repeat<-1&&T)return this.totalTime(G*100+o,u,h);if(O=Xi(k%G),k===b?(H=this._repeat,O=S):(V=Xi(k/G),H=~~V,H&&H===V?(O=S,H--):O>S&&(O=S)),I=this._yoyo&&H&1,I&&(P=this._yEase,O=S-O),V=by(this._tTime,G),O===m&&!h&&this._initted&&H===V)return this._tTime=k,this;H!==V&&(ue&&this._yEase&&dde(ue,I),this.vars.repeatRefresh&&!I&&!this._lock&&O!==G&&this._initted&&(this._lock=h=1,this.render(Xi(G*H),!0).invalidate()._lock=0))}if(!this._initted){if(Zce(this,T?o:O,h,u,k))return this._tTime=0,this;if(m!==this._time&&!(h&&this.vars.repeatRefresh&&H!==V))return this;if(S!==this._dur)return this.render(o,u,h)}if(this._tTime=k,this._time=O,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=K=(P||this._ease)(O/S),this._from&&(this.ratio=K=1-K),!m&&k&&!u&&!V&&(el(this,"onStart"),this._tTime!==k))return this;for(L=this._pt;L;)L.r(K,L.d),L=L._next;ue&&ue.render(o<0?o:ue._dur*ue._ease(O/this._dur),u,h)||this._startAt&&(this._zTime=o),this._onUpdate&&!u&&(T&&Jz(this,o,u,h),el(this,"onUpdate")),this._repeat&&H!==V&&this.vars.onRepeat&&!u&&this.parent&&el(this,"onRepeat"),(k===this._tDur||!k)&&this._tTime===k&&(T&&!this._onUpdate&&Jz(this,o,!0,!0),(o||!S)&&(k===this._tDur&&this._ts>0||!k&&this._ts<0)&&Qh(this,1),!u&&!(T&&!m)&&(k||m||I)&&(el(this,k===b?"onComplete":"onReverseComplete",!0),this._prom&&!(k<b&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(o){return(!o||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(o),c.prototype.invalidate.call(this,o)},n.resetTo=function(o,u,h,m,b){Fw||Zs.wake(),this._ts||this.play();var S=Math.min(this._dur,(this._dp._time-this._start)*this._ts),T;return this._initted||e6(this,S),T=this._ease(S/this._dur),JCe(this,o,u,h,m,T,S,b)?this.resetTo(o,u,h,m,1):(E3(this,0),this.parent||Kce(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(o,u){if(u===void 0&&(u="all"),!o&&(!u||u==="all"))return this._lazy=this._pt=0,this.parent?iw(this):this.scrollTrigger&&this.scrollTrigger.kill(!!po),this;if(this.timeline){var h=this.timeline.totalDuration();return this.timeline.killTweensOf(o,u,Wh&&Wh.vars.overwrite!==!0)._first||iw(this),this.parent&&h!==this.timeline.totalDuration()&&xy(this,this._dur*this.timeline._tDur/h,0,1),this}var m=this._targets,b=o?Dl(o):m,S=this._ptLookup,T=this._pt,k,O,L,H,G,V,I;if((!u||u==="all")&&ACe(m,b))return u==="all"&&(this._pt=0),iw(this);for(k=this._op=this._op||[],u!=="all"&&(Ya(u)&&(G={},Es(u,function(K){return G[K]=1}),u=G),u=QCe(m,u)),I=m.length;I--;)if(~b.indexOf(m[I])){O=S[I],u==="all"?(k[I]=u,H=O,L={}):(L=k[I]=k[I]||{},H=u);for(G in H)V=O&&O[G],V&&((!("kill"in V.d)||V.d.kill(G)===!0)&&S3(this,V,"_pt"),delete O[G]),L!=="all"&&(L[G]=1)}return this._initted&&!this._pt&&T&&iw(this),this},e.to=function(o,u){return new e(o,u,arguments[2])},e.from=function(o,u){return mw(1,arguments)},e.delayedCall=function(o,u,h,m){return new e(u,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:o,onComplete:u,onReverseComplete:u,onCompleteParams:h,onReverseCompleteParams:h,callbackScope:m})},e.fromTo=function(o,u,h){return mw(2,arguments)},e.set=function(o,u){return u.duration=0,u.repeatDelay||(u.repeat=0),new e(o,u)},e.killTweensOf=function(o,u,h){return Ki.killTweensOf(o,u,h)},e})(Uw);al(Ta.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Es("staggerTo,staggerFrom,staggerFromTo",function(c){Ta[c]=function(){var e=new is,n=ej.call(arguments,0);return n.splice(c==="staggerFromTo"?5:4,0,0),e[c].apply(e,n)}});var t6=function(e,n,r){return e[n]=r},vde=function(e,n,r){return e[n](r)},tAe=function(e,n,r,o){return e[n](o.fp,r)},nAe=function(e,n,r){return e.setAttribute(n,r)},n6=function(e,n){return ta(e[n])?vde:Wj(e[n])&&e.setAttribute?nAe:t6},_de=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},rAe=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},yde=function(e,n){var r=n._pt,o="";if(!e&&n.b)o=n.b;else if(e===1&&n.e)o=n.e;else{for(;r;)o=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+o,r=r._next;o+=n.c}n.set(n.t,n.p,o,n)},r6=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},iAe=function(e,n,r,o){for(var u=this._pt,h;u;)h=u._next,u.p===o&&u.modifier(e,n,r),u=h},aAe=function(e){for(var n=this._pt,r,o;n;)o=n._next,n.p===e&&!n.op||n.op===e?S3(this,n,"_pt"):n.dep||(r=1),n=o;return!r},oAe=function(e,n,r,o){o.mSet(e,n,o.m.call(o.tween,r,o.mt),o)},bde=function(e){for(var n=e._pt,r,o,u,h;n;){for(r=n._next,o=u;o&&o.pr>n.pr;)o=o._next;(n._prev=o?o._prev:h)?n._prev._next=n:u=n,(n._next=o)?o._prev=n:h=n,n=r}e._pt=u},Ts=(function(){function c(n,r,o,u,h,m,b,S,T){this.t=r,this.s=u,this.c=h,this.p=o,this.r=m||_de,this.d=b||this,this.set=S||t6,this.pr=T||0,this._next=n,n&&(n._prev=this)}var e=c.prototype;return e.modifier=function(r,o,u){this.mSet=this.mSet||this.set,this.set=oAe,this.m=r,this.mt=u,this.tween=o},c})();Es($j+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(c){return Yj[c]=1});il.TweenMax=il.TweenLite=Ta;il.TimelineLite=il.TimelineMax=is;Ki=new is({sortChildren:!1,defaults:_y,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});nl.stringFilter=ude;var hg=[],GI={},sAe=[],hue=0,lAe=0,F4=function(e){return(GI[e]||sAe).map(function(n){return n()})},ij=function(){var e=Date.now(),n=[];e-hue>2&&(F4("matchMediaInit"),hg.forEach(function(r){var o=r.queries,u=r.conditions,h,m,b,S;for(m in o)h=bc.matchMedia(o[m]).matches,h&&(b=1),h!==u[m]&&(u[m]=h,S=1);S&&(r.revert(),b&&n.push(r))}),F4("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(o){return r.add(null,o)})}),hue=e,F4("matchMedia"))},xde=(function(){function c(n,r){this.selector=r&&tj(r),this.data=[],this._r=[],this.isReverted=!1,this.id=lAe++,n&&this.add(n)}var e=c.prototype;return e.add=function(r,o,u){ta(r)&&(u=o,o=r,r=ta);var h=this,m=function(){var S=zi,T=h.selector,k;return S&&S!==h&&S.data.push(h),u&&(h.selector=tj(u)),zi=h,k=o.apply(h,arguments),ta(k)&&h._r.push(k),zi=S,h.selector=T,h.isReverted=!1,k};return h.last=m,r===ta?m(h,function(b){return h.add(null,b)}):r?h[r]=m:m},e.ignore=function(r){var o=zi;zi=null,r(this),zi=o},e.getTweens=function(){var r=[];return this.data.forEach(function(o){return o instanceof c?r.push.apply(r,o.getTweens()):o instanceof Ta&&!(o.parent&&o.parent.data==="nested")&&r.push(o)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,o){var u=this;if(r?(function(){for(var m=u.getTweens(),b=u.data.length,S;b--;)S=u.data[b],S.data==="isFlip"&&(S.revert(),S.getChildren(!0,!0,!1).forEach(function(T){return m.splice(m.indexOf(T),1)}));for(m.map(function(T){return{g:T._dur||T._delay||T._sat&&!T._sat.vars.immediateRender?T.globalTime(0):-1/0,t:T}}).sort(function(T,k){return k.g-T.g||-1/0}).forEach(function(T){return T.t.revert(r)}),b=u.data.length;b--;)S=u.data[b],S instanceof is?S.data!=="nested"&&(S.scrollTrigger&&S.scrollTrigger.revert(),S.kill()):!(S instanceof Ta)&&S.revert&&S.revert(r);u._r.forEach(function(T){return T(r,u)}),u.isReverted=!0})():this.data.forEach(function(m){return m.kill&&m.kill()}),this.clear(),o)for(var h=hg.length;h--;)hg[h].id===this.id&&hg.splice(h,1)},e.revert=function(r){this.kill(r||{})},c})(),uAe=(function(){function c(n){this.contexts=[],this.scope=n,zi&&zi.data.push(this)}var e=c.prototype;return e.add=function(r,o,u){Lc(r)||(r={matches:r});var h=new xde(0,u||this.scope),m=h.conditions={},b,S,T;zi&&!h.selector&&(h.selector=zi.selector),this.contexts.push(h),o=h.add("onMatch",o),h.queries=r;for(S in r)S==="all"?T=1:(b=bc.matchMedia(r[S]),b&&(hg.indexOf(h)<0&&hg.push(h),(m[S]=b.matches)&&(T=1),b.addListener?b.addListener(ij):b.addEventListener("change",ij)));return T&&o(h,function(k){return h.add(null,k)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(o){return o.kill(r,!0)})},c})(),c3={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(o){return ode(o)})},timeline:function(e){return new is(e)},getTweensOf:function(e,n){return Ki.getTweensOf(e,n)},getProperty:function(e,n,r,o){Ya(e)&&(e=Dl(e)[0]);var u=cg(e||{}).get,h=r?Xce:qce;return r==="native"&&(r=""),e&&(n?h((Ks[n]&&Ks[n].get||u)(e,n,r,o)):function(m,b,S){return h((Ks[m]&&Ks[m].get||u)(e,m,b,S))})},quickSetter:function(e,n,r){if(e=Dl(e),e.length>1){var o=e.map(function(T){return Ps.quickSetter(T,n,r)}),u=o.length;return function(T){for(var k=u;k--;)o[k](T)}}e=e[0]||{};var h=Ks[n],m=cg(e),b=m.harness&&(m.harness.aliases||{})[n]||n,S=h?function(T){var k=new h;J_._pt=0,k.init(e,r?T+r:T,J_,0,[e]),k.render(1,k),J_._pt&&r6(1,J_)}:m.set(e,b);return h?S:function(T){return S(e,b,r?T+r:T,m,1)}},quickTo:function(e,n,r){var o,u=Ps.to(e,al((o={},o[n]="+=0.1",o.paused=!0,o.stagger=0,o),r||{})),h=function(b,S,T){return u.resetTo(n,b,S,T)};return h.tween=u,h},isTweening:function(e){return Ki.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=fg(e.ease,_y.ease)),lue(_y,e||{})},config:function(e){return lue(nl,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,o=e.plugins,u=e.defaults,h=e.extendTimeline;(o||"").split(",").forEach(function(m){return m&&!Ks[m]&&!il[m]&&Ow(n+" effect requires "+m+" plugin.")}),D4[n]=function(m,b,S){return r(Dl(m),al(b||{},u),S)},h&&(is.prototype[n]=function(m,b,S){return this.add(D4[n](m,Lc(b)?b:(S=b)&&{},this),S)})},registerEase:function(e,n){Br[e]=fg(n)},parseEase:function(e,n){return arguments.length?fg(e,n):Br},getById:function(e){return Ki.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new is(e),o,u;for(r.smoothChildTiming=ws(e.smoothChildTiming),Ki.remove(r),r._dp=0,r._time=r._tTime=Ki._time,o=Ki._first;o;)u=o._next,(n||!(!o._dur&&o instanceof Ta&&o.vars.onComplete===o._targets[0]))&&Ec(r,o,o._start-o._delay),o=u;return Ec(Ki,r,0),r},context:function(e,n){return e?new xde(e,n):zi},matchMedia:function(e){return new uAe(e)},matchMediaRefresh:function(){return hg.forEach(function(e){var n=e.conditions,r,o;for(o in n)n[o]&&(n[o]=!1,r=1);r&&e.revert()})||ij()},addEventListener:function(e,n){var r=GI[e]||(GI[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=GI[e],o=r&&r.indexOf(n);o>=0&&r.splice(o,1)},utils:{wrap:jCe,wrapYoyo:VCe,distribute:ede,random:nde,snap:tde,normalize:zCe,getUnit:Io,clamp:LCe,splitColor:sde,toArray:Dl,selector:tj,mapRange:ide,pipe:UCe,unitize:BCe,interpolate:HCe,shuffle:Qce},install:jce,effects:D4,ticker:Zs,updateRoot:is.updateRoot,plugins:Ks,globalTimeline:Ki,core:{PropTween:Ts,globals:Vce,Tween:Ta,Timeline:is,Animation:Uw,getCache:cg,_removeLinkedListItem:S3,reverting:function(){return po},context:function(e){return e&&zi&&(zi.data.push(e),e._ctx=zi),zi},suppressOverwrites:function(e){return Gj=e}}};Es("to,from,fromTo,delayedCall,set,killTweensOf",function(c){return c3[c]=Ta[c]});Zs.add(is.updateRoot);J_=c3.to({},{duration:0});var cAe=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},dAe=function(e,n){var r=e._targets,o,u,h;for(o in n)for(u=r.length;u--;)h=e._ptLookup[u][o],h&&(h=h.d)&&(h._pt&&(h=cAe(h,o)),h&&h.modifier&&h.modifier(n[o],e,r[u],o))},U4=function(e,n){return{name:e,headless:1,rawVars:1,init:function(o,u,h){h._onInit=function(m){var b,S;if(Ya(u)&&(b={},Es(u,function(T){return b[T]=1}),u=b),n){b={};for(S in u)b[S]=n(u[S]);u=b}dAe(m,u)}}}},Ps=c3.registerPlugin({name:"attr",init:function(e,n,r,o,u){var h,m,b;this.tween=r;for(h in n)b=e.getAttribute(h)||"",m=this.add(e,"setAttribute",(b||0)+"",n[h],o,u,0,0,h),m.op=h,m.b=b,this._props.push(h)},render:function(e,n){for(var r=n._pt;r;)po?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},U4("roundProps",nj),U4("modifiers"),U4("snap",tde))||c3;Ta.version=is.version=Ps.version="3.14.2";zce=1;qj()&&Sy();Br.Power0;Br.Power1;Br.Power2;Br.Power3;Br.Power4;Br.Linear;Br.Quad;Br.Cubic;Br.Quart;Br.Quint;Br.Strong;Br.Elastic;Br.Back;Br.SteppedEase;Br.Bounce;Br.Sine;Br.Expo;Br.Circ;var pue,qh,iy,i6,sg,mue,a6,fAe=function(){return typeof window<"u"},df={},eg=180/Math.PI,ay=Math.PI/180,W_=Math.atan2,gue=1e8,o6=/([A-Z])/g,hAe=/(left|right|width|margin|padding|x)/i,pAe=/[\s,\(]\S/,Pc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},aj=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},mAe=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},gAe=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},vAe=function(e,n){return n.set(n.t,n.p,e===1?n.e:e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},_Ae=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},Sde=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},wde=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},yAe=function(e,n,r){return e.style[n]=r},bAe=function(e,n,r){return e.style.setProperty(n,r)},xAe=function(e,n,r){return e._gsap[n]=r},SAe=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},wAe=function(e,n,r,o,u){var h=e._gsap;h.scaleX=h.scaleY=r,h.renderTransform(u,h)},EAe=function(e,n,r,o,u){var h=e._gsap;h[n]=r,h.renderTransform(u,h)},Yi="transform",Ms=Yi+"Origin",TAe=function c(e,n){var r=this,o=this.target,u=o.style,h=o._gsap;if(e in df&&u){if(this.tfm=this.tfm||{},e!=="transform")e=Pc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(m){return r.tfm[m]=Qd(o,m)}):this.tfm[e]=h.x?h[e]:Qd(o,e),e===Ms&&(this.tfm.zOrigin=h.zOrigin);else return Pc.transform.split(",").forEach(function(m){return c.call(r,m,n)});if(this.props.indexOf(Yi)>=0)return;h.svg&&(this.svgo=o.getAttribute("data-svg-origin"),this.props.push(Ms,n,"")),e=Yi}(u||n)&&this.props.push(e,n,u[e])},Ede=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},MAe=function(){var e=this.props,n=this.target,r=n.style,o=n._gsap,u,h;for(u=0;u<e.length;u+=3)e[u+1]?e[u+1]===2?n[e[u]](e[u+2]):n[e[u]]=e[u+2]:e[u+2]?r[e[u]]=e[u+2]:r.removeProperty(e[u].substr(0,2)==="--"?e[u]:e[u].replace(o6,"-$1").toLowerCase());if(this.tfm){for(h in this.tfm)o[h]=this.tfm[h];o.svg&&(o.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),u=a6(),(!u||!u.isStart)&&!r[Yi]&&(Ede(r),o.zOrigin&&r[Ms]&&(r[Ms]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},Tde=function(e,n){var r={target:e,props:[],revert:MAe,save:TAe};return e._gsap||Ps.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(o){return r.save(o)}),r},Mde,oj=function(e,n){var r=qh.createElementNS?qh.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):qh.createElement(e);return r&&r.style?r:qh.createElement(e)},tl=function c(e,n,r){var o=getComputedStyle(e);return o[n]||o.getPropertyValue(n.replace(o6,"-$1").toLowerCase())||o.getPropertyValue(n)||!r&&c(e,wy(n)||n,1)||""},vue="O,Moz,ms,Ms,Webkit".split(","),wy=function(e,n,r){var o=n||sg,u=o.style,h=5;if(e in u&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);h--&&!(vue[h]+e in u););return h<0?null:(h===3?"ms":h>=0?vue[h]:"")+e},sj=function(){fAe()&&window.document&&(pue=window,qh=pue.document,iy=qh.documentElement,sg=oj("div")||{style:{}},oj("div"),Yi=wy(Yi),Ms=Yi+"Origin",sg.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Mde=!!wy("perspective"),a6=Ps.core.reverting,i6=1)},_ue=function(e){var n=e.ownerSVGElement,r=oj("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),o=e.cloneNode(!0),u;o.style.display="block",r.appendChild(o),iy.appendChild(r);try{u=o.getBBox()}catch{}return r.removeChild(o),iy.removeChild(r),u},yue=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},Pde=function(e){var n,r;try{n=e.getBBox()}catch{n=_ue(e),r=1}return n&&(n.width||n.height)||r||(n=_ue(e)),n&&!n.width&&!n.x&&!n.y?{x:+yue(e,["x","cx","x1"])||0,y:+yue(e,["y","cy","y1"])||0,width:0,height:0}:n},Cde=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Pde(e))},ep=function(e,n){if(n){var r=e.style,o;n in df&&n!==Ms&&(n=Yi),r.removeProperty?(o=n.substr(0,2),(o==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(o==="--"?n:n.replace(o6,"-$1").toLowerCase())):r.removeAttribute(n)}},Xh=function(e,n,r,o,u,h){var m=new Ts(e._pt,n,r,0,1,h?wde:Sde);return e._pt=m,m.b=o,m.e=u,e._props.push(r),m},bue={deg:1,rad:1,turn:1},PAe={grid:1,flex:1},tp=function c(e,n,r,o){var u=parseFloat(r)||0,h=(r+"").trim().substr((u+"").length)||"px",m=sg.style,b=hAe.test(n),S=e.tagName.toLowerCase()==="svg",T=(S?"client":"offset")+(b?"Width":"Height"),k=100,O=o==="px",L=o==="%",H,G,V,I;if(o===h||!u||bue[o]||bue[h])return u;if(h!=="px"&&!O&&(u=c(e,n,r,"px")),I=e.getCTM&&Cde(e),(L||h==="%")&&(df[n]||~n.indexOf("adius")))return H=I?e.getBBox()[b?"width":"height"]:e[T],ca(L?u/H*k:u/100*H);if(m[b?"width":"height"]=k+(O?h:o),G=o!=="rem"&&~n.indexOf("adius")||o==="em"&&e.appendChild&&!S?e:e.parentNode,I&&(G=(e.ownerSVGElement||{}).parentNode),(!G||G===qh||!G.appendChild)&&(G=qh.body),V=G._gsap,V&&L&&V.width&&b&&V.time===Zs.time&&!V.uncache)return ca(u/V.width*k);if(L&&(n==="height"||n==="width")){var K=e.style[n];e.style[n]=k+o,H=e[T],K?e.style[n]=K:ep(e,n)}else(L||h==="%")&&!PAe[tl(G,"display")]&&(m.position=tl(e,"position")),G===e&&(m.position="static"),G.appendChild(sg),H=sg[T],G.removeChild(sg),m.position="absolute";return b&&L&&(V=cg(G),V.time=Zs.time,V.width=G[T]),ca(O?H*u/k:H&&u?k/H*u:0)},Qd=function(e,n,r,o){var u;return i6||sj(),n in Pc&&n!=="transform"&&(n=Pc[n],~n.indexOf(",")&&(n=n.split(",")[0])),df[n]&&n!=="transform"?(u=zw(e,o),u=n!=="transformOrigin"?u[n]:u.svg?u.origin:f3(tl(e,Ms))+" "+u.zOrigin+"px"):(u=e.style[n],(!u||u==="auto"||o||~(u+"").indexOf("calc("))&&(u=d3[n]&&d3[n](e,n,r)||tl(e,n)||Gce(e,n)||(n==="opacity"?1:0))),r&&!~(u+"").trim().indexOf(" ")?tp(e,n,u,r)+r:u},CAe=function(e,n,r,o){if(!r||r==="none"){var u=wy(n,e,1),h=u&&tl(e,u,1);h&&h!==r?(n=u,r=h):n==="borderColor"&&(r=tl(e,"borderTopColor"))}var m=new Ts(this._pt,e.style,n,0,1,yde),b=0,S=0,T,k,O,L,H,G,V,I,K,ue,P,ae;if(m.b=r,m.e=o,r+="",o+="",o.substring(0,6)==="var(--"&&(o=tl(e,o.substring(4,o.indexOf(")")))),o==="auto"&&(G=e.style[n],e.style[n]=o,o=tl(e,n)||o,G?e.style[n]=G:ep(e,n)),T=[r,o],ude(T),r=T[0],o=T[1],O=r.match(Z_)||[],ae=o.match(Z_)||[],ae.length){for(;k=Z_.exec(o);)V=k[0],K=o.substring(b,k.index),H?H=(H+1)%5:(K.substr(-5)==="rgba("||K.substr(-5)==="hsla(")&&(H=1),V!==(G=O[S++]||"")&&(L=parseFloat(G)||0,P=G.substr((L+"").length),V.charAt(1)==="="&&(V=ry(L,V)+P),I=parseFloat(V),ue=V.substr((I+"").length),b=Z_.lastIndex-ue.length,ue||(ue=ue||nl.units[n]||P,b===o.length&&(o+=ue,m.e+=ue)),P!==ue&&(L=tp(e,n,G,ue)||0),m._pt={_next:m._pt,p:K||S===1?K:",",s:L,c:I-L,m:H&&H<4||n==="zIndex"?Math.round:0});m.c=b<o.length?o.substring(b,o.length):""}else m.r=n==="display"&&o==="none"?wde:Sde;return Bce.test(o)&&(m.e=0),this._pt=m,m},xue={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},AAe=function(e){var n=e.split(" "),r=n[0],o=n[1]||"50%";return(r==="top"||r==="bottom"||o==="left"||o==="right")&&(e=r,r=o,o=e),n[0]=xue[r]||r,n[1]=xue[o]||o,n.join(" ")},kAe=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,o=r.style,u=n.u,h=r._gsap,m,b,S;if(u==="all"||u===!0)o.cssText="",b=1;else for(u=u.split(","),S=u.length;--S>-1;)m=u[S],df[m]&&(b=1,m=m==="transformOrigin"?Ms:Yi),ep(r,m);b&&(ep(r,Yi),h&&(h.svg&&r.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",zw(r,1),h.uncache=1,Ede(o)))}},d3={clearProps:function(e,n,r,o,u){if(u.data!=="isFromStart"){var h=e._pt=new Ts(e._pt,n,r,0,0,kAe);return h.u=o,h.pr=-10,h.tween=u,e._props.push(r),1}}},Bw=[1,0,0,1,0,0],Ade={},kde=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Sue=function(e){var n=tl(e,Yi);return kde(n)?Bw:n.substr(7).match(Uce).map(ca)},s6=function(e,n){var r=e._gsap||cg(e),o=e.style,u=Sue(e),h,m,b,S;return r.svg&&e.getAttribute("transform")?(b=e.transform.baseVal.consolidate().matrix,u=[b.a,b.b,b.c,b.d,b.e,b.f],u.join(",")==="1,0,0,1,0,0"?Bw:u):(u===Bw&&!e.offsetParent&&e!==iy&&!r.svg&&(b=o.display,o.display="block",h=e.parentNode,(!h||!e.offsetParent&&!e.getBoundingClientRect().width)&&(S=1,m=e.nextElementSibling,iy.appendChild(e)),u=Sue(e),b?o.display=b:ep(e,"display"),S&&(m?h.insertBefore(e,m):h?h.appendChild(e):iy.removeChild(e))),n&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},lj=function(e,n,r,o,u,h){var m=e._gsap,b=u||s6(e,!0),S=m.xOrigin||0,T=m.yOrigin||0,k=m.xOffset||0,O=m.yOffset||0,L=b[0],H=b[1],G=b[2],V=b[3],I=b[4],K=b[5],ue=n.split(" "),P=parseFloat(ue[0])||0,ae=parseFloat(ue[1])||0,ge,me,J,te;r?b!==Bw&&(me=L*V-H*G)&&(J=P*(V/me)+ae*(-G/me)+(G*K-V*I)/me,te=P*(-H/me)+ae*(L/me)-(L*K-H*I)/me,P=J,ae=te):(ge=Pde(e),P=ge.x+(~ue[0].indexOf("%")?P/100*ge.width:P),ae=ge.y+(~(ue[1]||ue[0]).indexOf("%")?ae/100*ge.height:ae)),o||o!==!1&&m.smooth?(I=P-S,K=ae-T,m.xOffset=k+(I*L+K*G)-I,m.yOffset=O+(I*H+K*V)-K):m.xOffset=m.yOffset=0,m.xOrigin=P,m.yOrigin=ae,m.smooth=!!o,m.origin=n,m.originIsAbsolute=!!r,e.style[Ms]="0px 0px",h&&(Xh(h,m,"xOrigin",S,P),Xh(h,m,"yOrigin",T,ae),Xh(h,m,"xOffset",k,m.xOffset),Xh(h,m,"yOffset",O,m.yOffset)),e.setAttribute("data-svg-origin",P+" "+ae)},zw=function(e,n){var r=e._gsap||new hde(e);if("x"in r&&!n&&!r.uncache)return r;var o=e.style,u=r.scaleX<0,h="px",m="deg",b=getComputedStyle(e),S=tl(e,Ms)||"0",T,k,O,L,H,G,V,I,K,ue,P,ae,ge,me,J,te,oe,Y,ke,$e,ot,Qe,pe,Ve,Ue,Pt,Me,Ot,Tn,yn,qn,Dn;return T=k=O=G=V=I=K=ue=P=0,L=H=1,r.svg=!!(e.getCTM&&Cde(e)),b.translate&&((b.translate!=="none"||b.scale!=="none"||b.rotate!=="none")&&(o[Yi]=(b.translate!=="none"?"translate3d("+(b.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(b.rotate!=="none"?"rotate("+b.rotate+") ":"")+(b.scale!=="none"?"scale("+b.scale.split(" ").join(",")+") ":"")+(b[Yi]!=="none"?b[Yi]:"")),o.scale=o.rotate=o.translate="none"),me=s6(e,r.svg),r.svg&&(r.uncache?(Ue=e.getBBox(),S=r.xOrigin-Ue.x+"px "+(r.yOrigin-Ue.y)+"px",Ve=""):Ve=!n&&e.getAttribute("data-svg-origin"),lj(e,Ve||S,!!Ve||r.originIsAbsolute,r.smooth!==!1,me)),ae=r.xOrigin||0,ge=r.yOrigin||0,me!==Bw&&(Y=me[0],ke=me[1],$e=me[2],ot=me[3],T=Qe=me[4],k=pe=me[5],me.length===6?(L=Math.sqrt(Y*Y+ke*ke),H=Math.sqrt(ot*ot+$e*$e),G=Y||ke?W_(ke,Y)*eg:0,K=$e||ot?W_($e,ot)*eg+G:0,K&&(H*=Math.abs(Math.cos(K*ay))),r.svg&&(T-=ae-(ae*Y+ge*$e),k-=ge-(ae*ke+ge*ot))):(Dn=me[6],yn=me[7],Me=me[8],Ot=me[9],Tn=me[10],qn=me[11],T=me[12],k=me[13],O=me[14],J=W_(Dn,Tn),V=J*eg,J&&(te=Math.cos(-J),oe=Math.sin(-J),Ve=Qe*te+Me*oe,Ue=pe*te+Ot*oe,Pt=Dn*te+Tn*oe,Me=Qe*-oe+Me*te,Ot=pe*-oe+Ot*te,Tn=Dn*-oe+Tn*te,qn=yn*-oe+qn*te,Qe=Ve,pe=Ue,Dn=Pt),J=W_(-$e,Tn),I=J*eg,J&&(te=Math.cos(-J),oe=Math.sin(-J),Ve=Y*te-Me*oe,Ue=ke*te-Ot*oe,Pt=$e*te-Tn*oe,qn=ot*oe+qn*te,Y=Ve,ke=Ue,$e=Pt),J=W_(ke,Y),G=J*eg,J&&(te=Math.cos(J),oe=Math.sin(J),Ve=Y*te+ke*oe,Ue=Qe*te+pe*oe,ke=ke*te-Y*oe,pe=pe*te-Qe*oe,Y=Ve,Qe=Ue),V&&Math.abs(V)+Math.abs(G)>359.9&&(V=G=0,I=180-I),L=ca(Math.sqrt(Y*Y+ke*ke+$e*$e)),H=ca(Math.sqrt(pe*pe+Dn*Dn)),J=W_(Qe,pe),K=Math.abs(J)>2e-4?J*eg:0,P=qn?1/(qn<0?-qn:qn):0),r.svg&&(Ve=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!kde(tl(e,Yi)),Ve&&e.setAttribute("transform",Ve))),Math.abs(K)>90&&Math.abs(K)<270&&(u?(L*=-1,K+=G<=0?180:-180,G+=G<=0?180:-180):(H*=-1,K+=K<=0?180:-180)),n=n||r.uncache,r.x=T-((r.xPercent=T&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-T)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+h,r.y=k-((r.yPercent=k&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-k)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+h,r.z=O+h,r.scaleX=ca(L),r.scaleY=ca(H),r.rotation=ca(G)+m,r.rotationX=ca(V)+m,r.rotationY=ca(I)+m,r.skewX=K+m,r.skewY=ue+m,r.transformPerspective=P+h,(r.zOrigin=parseFloat(S.split(" ")[2])||!n&&r.zOrigin||0)&&(o[Ms]=f3(S)),r.xOffset=r.yOffset=0,r.force3D=nl.force3D,r.renderTransform=r.svg?RAe:Mde?Ide:IAe,r.uncache=0,r},f3=function(e){return(e=e.split(" "))[0]+" "+e[1]},B4=function(e,n,r){var o=Io(n);return ca(parseFloat(n)+parseFloat(tp(e,"x",r+"px",o)))+o},IAe=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Ide(e,n)},Zm="0deg",YS="0px",Jm=") ",Ide=function(e,n){var r=n||this,o=r.xPercent,u=r.yPercent,h=r.x,m=r.y,b=r.z,S=r.rotation,T=r.rotationY,k=r.rotationX,O=r.skewX,L=r.skewY,H=r.scaleX,G=r.scaleY,V=r.transformPerspective,I=r.force3D,K=r.target,ue=r.zOrigin,P="",ae=I==="auto"&&e&&e!==1||I===!0;if(ue&&(k!==Zm||T!==Zm)){var ge=parseFloat(T)*ay,me=Math.sin(ge),J=Math.cos(ge),te;ge=parseFloat(k)*ay,te=Math.cos(ge),h=B4(K,h,me*te*-ue),m=B4(K,m,-Math.sin(ge)*-ue),b=B4(K,b,J*te*-ue+ue)}V!==YS&&(P+="perspective("+V+Jm),(o||u)&&(P+="translate("+o+"%, "+u+"%) "),(ae||h!==YS||m!==YS||b!==YS)&&(P+=b!==YS||ae?"translate3d("+h+", "+m+", "+b+") ":"translate("+h+", "+m+Jm),S!==Zm&&(P+="rotate("+S+Jm),T!==Zm&&(P+="rotateY("+T+Jm),k!==Zm&&(P+="rotateX("+k+Jm),(O!==Zm||L!==Zm)&&(P+="skew("+O+", "+L+Jm),(H!==1||G!==1)&&(P+="scale("+H+", "+G+Jm),K.style[Yi]=P||"translate(0, 0)"},RAe=function(e,n){var r=n||this,o=r.xPercent,u=r.yPercent,h=r.x,m=r.y,b=r.rotation,S=r.skewX,T=r.skewY,k=r.scaleX,O=r.scaleY,L=r.target,H=r.xOrigin,G=r.yOrigin,V=r.xOffset,I=r.yOffset,K=r.forceCSS,ue=parseFloat(h),P=parseFloat(m),ae,ge,me,J,te;b=parseFloat(b),S=parseFloat(S),T=parseFloat(T),T&&(T=parseFloat(T),S+=T,b+=T),b||S?(b*=ay,S*=ay,ae=Math.cos(b)*k,ge=Math.sin(b)*k,me=Math.sin(b-S)*-O,J=Math.cos(b-S)*O,S&&(T*=ay,te=Math.tan(S-T),te=Math.sqrt(1+te*te),me*=te,J*=te,T&&(te=Math.tan(T),te=Math.sqrt(1+te*te),ae*=te,ge*=te)),ae=ca(ae),ge=ca(ge),me=ca(me),J=ca(J)):(ae=k,J=O,ge=me=0),(ue&&!~(h+"").indexOf("px")||P&&!~(m+"").indexOf("px"))&&(ue=tp(L,"x",h,"px"),P=tp(L,"y",m,"px")),(H||G||V||I)&&(ue=ca(ue+H-(H*ae+G*me)+V),P=ca(P+G-(H*ge+G*J)+I)),(o||u)&&(te=L.getBBox(),ue=ca(ue+o/100*te.width),P=ca(P+u/100*te.height)),te="matrix("+ae+","+ge+","+me+","+J+","+ue+","+P+")",L.setAttribute("transform",te),K&&(L.style[Yi]=te)},DAe=function(e,n,r,o,u){var h=360,m=Ya(u),b=parseFloat(u)*(m&&~u.indexOf("rad")?eg:1),S=b-o,T=o+S+"deg",k,O;return m&&(k=u.split("_")[1],k==="short"&&(S%=h,S!==S%(h/2)&&(S+=S<0?h:-h)),k==="cw"&&S<0?S=(S+h*gue)%h-~~(S/h)*h:k==="ccw"&&S>0&&(S=(S-h*gue)%h-~~(S/h)*h)),e._pt=O=new Ts(e._pt,n,r,o,S,mAe),O.e=T,O.u="deg",e._props.push(r),O},wue=function(e,n){for(var r in n)e[r]=n[r];return e},OAe=function(e,n,r){var o=wue({},r._gsap),u="perspective,force3D,transformOrigin,svgOrigin",h=r.style,m,b,S,T,k,O,L,H;o.svg?(S=r.getAttribute("transform"),r.setAttribute("transform",""),h[Yi]=n,m=zw(r,1),ep(r,Yi),r.setAttribute("transform",S)):(S=getComputedStyle(r)[Yi],h[Yi]=n,m=zw(r,1),h[Yi]=S);for(b in df)S=o[b],T=m[b],S!==T&&u.indexOf(b)<0&&(L=Io(S),H=Io(T),k=L!==H?tp(r,b,S,H):parseFloat(S),O=parseFloat(T),e._pt=new Ts(e._pt,m,b,k,O-k,aj),e._pt.u=H||0,e._props.push(b));wue(m,o)};Es("padding,margin,Width,Radius",function(c,e){var n="Top",r="Right",o="Bottom",u="Left",h=(e<3?[n,r,o,u]:[n+u,n+r,o+r,o+u]).map(function(m){return e<2?c+m:"border"+m+c});d3[e>1?"border"+c:c]=function(m,b,S,T,k){var O,L;if(arguments.length<4)return O=h.map(function(H){return Qd(m,H,S)}),L=O.join(" "),L.split(O[0]).length===5?O[0]:L;O=(T+"").split(" "),L={},h.forEach(function(H,G){return L[H]=O[G]=O[G]||O[(G-1)/2|0]}),m.init(b,L,k)}});var Rde={name:"css",register:sj,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,o,u){var h=this._props,m=e.style,b=r.vars.startAt,S,T,k,O,L,H,G,V,I,K,ue,P,ae,ge,me,J,te;i6||sj(),this.styles=this.styles||Tde(e),J=this.styles.props,this.tween=r;for(G in n)if(G!=="autoRound"&&(T=n[G],!(Ks[G]&&pde(G,n,r,o,e,u)))){if(L=typeof T,H=d3[G],L==="function"&&(T=T.call(r,o,e,u),L=typeof T),L==="string"&&~T.indexOf("random(")&&(T=Lw(T)),H)H(this,e,G,T,r)&&(me=1);else if(G.substr(0,2)==="--")S=(getComputedStyle(e).getPropertyValue(G)+"").trim(),T+="",Zh.lastIndex=0,Zh.test(S)||(V=Io(S),I=Io(T),I?V!==I&&(S=tp(e,G,S,I)+I):V&&(T+=V)),this.add(m,"setProperty",S,T,o,u,0,0,G),h.push(G),J.push(G,0,m[G]);else if(L!=="undefined"){if(b&&G in b?(S=typeof b[G]=="function"?b[G].call(r,o,e,u):b[G],Ya(S)&&~S.indexOf("random(")&&(S=Lw(S)),Io(S+"")||S==="auto"||(S+=nl.units[G]||Io(Qd(e,G))||""),(S+"").charAt(1)==="="&&(S=Qd(e,G))):S=Qd(e,G),O=parseFloat(S),K=L==="string"&&T.charAt(1)==="="&&T.substr(0,2),K&&(T=T.substr(2)),k=parseFloat(T),G in Pc&&(G==="autoAlpha"&&(O===1&&Qd(e,"visibility")==="hidden"&&k&&(O=0),J.push("visibility",0,m.visibility),Xh(this,m,"visibility",O?"inherit":"hidden",k?"inherit":"hidden",!k)),G!=="scale"&&G!=="transform"&&(G=Pc[G],~G.indexOf(",")&&(G=G.split(",")[0]))),ue=G in df,ue){if(this.styles.save(G),te=T,L==="string"&&T.substring(0,6)==="var(--"){if(T=tl(e,T.substring(4,T.indexOf(")"))),T.substring(0,5)==="calc("){var oe=e.style.perspective;e.style.perspective=T,T=tl(e,"perspective"),oe?e.style.perspective=oe:ep(e,"perspective")}k=parseFloat(T)}if(P||(ae=e._gsap,ae.renderTransform&&!n.parseTransform||zw(e,n.parseTransform),ge=n.smoothOrigin!==!1&&ae.smooth,P=this._pt=new Ts(this._pt,m,Yi,0,1,ae.renderTransform,ae,0,-1),P.dep=1),G==="scale")this._pt=new Ts(this._pt,ae,"scaleY",ae.scaleY,(K?ry(ae.scaleY,K+k):k)-ae.scaleY||0,aj),this._pt.u=0,h.push("scaleY",G),G+="X";else if(G==="transformOrigin"){J.push(Ms,0,m[Ms]),T=AAe(T),ae.svg?lj(e,T,0,ge,0,this):(I=parseFloat(T.split(" ")[2])||0,I!==ae.zOrigin&&Xh(this,ae,"zOrigin",ae.zOrigin,I),Xh(this,m,G,f3(S),f3(T)));continue}else if(G==="svgOrigin"){lj(e,T,1,ge,0,this);continue}else if(G in Ade){DAe(this,ae,G,O,K?ry(O,K+T):T);continue}else if(G==="smoothOrigin"){Xh(this,ae,"smooth",ae.smooth,T);continue}else if(G==="force3D"){ae[G]=T;continue}else if(G==="transform"){OAe(this,T,e);continue}}else G in m||(G=wy(G)||G);if(ue||(k||k===0)&&(O||O===0)&&!pAe.test(T)&&G in m)V=(S+"").substr((O+"").length),k||(k=0),I=Io(T)||(G in nl.units?nl.units[G]:V),V!==I&&(O=tp(e,G,S,I)),this._pt=new Ts(this._pt,ue?ae:m,G,O,(K?ry(O,K+k):k)-O,!ue&&(I==="px"||G==="zIndex")&&n.autoRound!==!1?_Ae:aj),this._pt.u=I||0,ue&&te!==T?(this._pt.b=S,this._pt.e=te,this._pt.r=vAe):V!==I&&I!=="%"&&(this._pt.b=S,this._pt.r=gAe);else if(G in m)CAe.call(this,e,G,S,K?K+T:T);else if(G in e)this.add(e,G,S||e[G],K?K+T:T,o,u);else if(G!=="parseTransform"){Kj(G,T);continue}ue||(G in m?J.push(G,0,m[G]):typeof e[G]=="function"?J.push(G,2,e[G]()):J.push(G,1,S||e[G])),h.push(G)}}me&&bde(this)},render:function(e,n){if(n.tween._time||!a6())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:Qd,aliases:Pc,getSetter:function(e,n,r){var o=Pc[n];return o&&o.indexOf(",")<0&&(n=o),n in df&&n!==Ms&&(e._gsap.x||Qd(e,"x"))?r&&mue===r?n==="scale"?SAe:xAe:(mue=r||{})&&(n==="scale"?wAe:EAe):e.style&&!Wj(e.style[n])?yAe:~n.indexOf("-")?bAe:n6(e,n)},core:{_removeProperty:ep,_getMatrix:s6}};Ps.utils.checkPrefix=wy;Ps.core.getStyleSaver=Tde;(function(c,e,n,r){var o=Es(c+","+e+","+n,function(u){df[u]=1});Es(e,function(u){nl.units[u]="deg",Ade[u]=1}),Pc[o[13]]=c+","+e,Es(r,function(u){var h=u.split(":");Pc[h[1]]=o[h[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Es("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(c){nl.units[c]="px"});Ps.registerPlugin(Rde);var Dde=Ps.registerPlugin(Rde)||Ps;Dde.core.Tween;function NAe(c,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(c,r.key,r)}}function LAe(c,e,n){return e&&NAe(c.prototype,e),c}var fo,WI,Js,Kh,Yh,oy,Ode,tg,vw,Nde,rf,Su,Lde,Fde=function(){return fo||typeof window<"u"&&(fo=window.gsap)&&fo.registerPlugin&&fo},Ude=1,Q_=[],Ar=[],Ic=[],_w=Date.now,uj=function(e,n){return n},FAe=function(){var e=vw.core,n=e.bridge||{},r=e._scrollers,o=e._proxies;r.push.apply(r,Ar),o.push.apply(o,Ic),Ar=r,Ic=o,uj=function(h,m){return n[h](m)}},Jh=function(e,n){return~Ic.indexOf(e)&&Ic[Ic.indexOf(e)+1][n]},yw=function(e){return!!~Nde.indexOf(e)},Jo=function(e,n,r,o,u){return e.addEventListener(n,r,{passive:o!==!1,capture:!!u})},Zo=function(e,n,r,o){return e.removeEventListener(n,r,!!o)},SI="scrollLeft",wI="scrollTop",cj=function(){return rf&&rf.isPressed||Ar.cache++},h3=function(e,n){var r=function o(u){if(u||u===0){Ude&&(Js.history.scrollRestoration="manual");var h=rf&&rf.isPressed;u=o.v=Math.round(u)||(rf&&rf.iOS?1:0),e(u),o.cacheID=Ar.cache,h&&uj("ss",u)}else(n||Ar.cache!==o.cacheID||uj("ref"))&&(o.cacheID=Ar.cache,o.v=e());return o.v+o.offset};return r.offset=0,e&&r},as={s:SI,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:h3(function(c){return arguments.length?Js.scrollTo(c,Ra.sc()):Js.pageXOffset||Kh[SI]||Yh[SI]||oy[SI]||0})},Ra={s:wI,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:as,sc:h3(function(c){return arguments.length?Js.scrollTo(as.sc(),c):Js.pageYOffset||Kh[wI]||Yh[wI]||oy[wI]||0})},Ss=function(e,n){return(n&&n._ctx&&n._ctx.selector||fo.utils.toArray)(e)[0]||(typeof e=="string"&&fo.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},UAe=function(e,n){for(var r=n.length;r--;)if(n[r]===e||n[r].contains(e))return!0;return!1},np=function(e,n){var r=n.s,o=n.sc;yw(e)&&(e=Kh.scrollingElement||Yh);var u=Ar.indexOf(e),h=o===Ra.sc?1:2;!~u&&(u=Ar.push(e)-1),Ar[u+h]||Jo(e,"scroll",cj);var m=Ar[u+h],b=m||(Ar[u+h]=h3(Jh(e,r),!0)||(yw(e)?o:h3(function(S){return arguments.length?e[r]=S:e[r]})));return b.target=e,m||(b.smooth=fo.getProperty(e,"scrollBehavior")==="smooth"),b},dj=function(e,n,r){var o=e,u=e,h=_w(),m=h,b=n||50,S=Math.max(500,b*3),T=function(H,G){var V=_w();G||V-h>b?(u=o,o=H,m=h,h=V):r?o+=H:o=u+(H-u)/(V-m)*(h-m)},k=function(){u=o=r?0:o,m=h=0},O=function(H){var G=m,V=u,I=_w();return(H||H===0)&&H!==o&&T(H),h===m||I-m>S?0:(o+(r?V:-V))/((r?I:h)-G)*1e3};return{update:T,reset:k,getVelocity:O}},$S=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Eue=function(e){var n=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(r)?n:r},Bde=function(){vw=fo.core.globals().ScrollTrigger,vw&&vw.core&&FAe()},zde=function(e){return fo=e||Fde(),!WI&&fo&&typeof document<"u"&&document.body&&(Js=window,Kh=document,Yh=Kh.documentElement,oy=Kh.body,Nde=[Js,Kh,Yh,oy],fo.utils.clamp,Lde=fo.core.context||function(){},tg="onpointerenter"in oy?"pointer":"mouse",Ode=ha.isTouch=Js.matchMedia&&Js.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Js||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Su=ha.eventTypes=("ontouchstart"in Yh?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Yh?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Ude=0},500),Bde(),WI=1),WI};as.op=Ra;Ar.cache=0;var ha=(function(){function c(n){this.init(n)}var e=c.prototype;return e.init=function(r){WI||zde(fo)||console.warn("Please gsap.registerPlugin(Observer)"),vw||Bde();var o=r.tolerance,u=r.dragMinimum,h=r.type,m=r.target,b=r.lineHeight,S=r.debounce,T=r.preventDefault,k=r.onStop,O=r.onStopDelay,L=r.ignore,H=r.wheelSpeed,G=r.event,V=r.onDragStart,I=r.onDragEnd,K=r.onDrag,ue=r.onPress,P=r.onRelease,ae=r.onRight,ge=r.onLeft,me=r.onUp,J=r.onDown,te=r.onChangeX,oe=r.onChangeY,Y=r.onChange,ke=r.onToggleX,$e=r.onToggleY,ot=r.onHover,Qe=r.onHoverEnd,pe=r.onMove,Ve=r.ignoreCheck,Ue=r.isNormalizer,Pt=r.onGestureStart,Me=r.onGestureEnd,Ot=r.onWheel,Tn=r.onEnable,yn=r.onDisable,qn=r.onClick,Dn=r.scrollSpeed,xt=r.capture,vt=r.allowClicks,Zt=r.lockAxis,Mn=r.onLockAxis;this.target=m=Ss(m)||Yh,this.vars=r,L&&(L=fo.utils.toArray(L)),o=o||1e-9,u=u||0,H=H||1,Dn=Dn||1,h=h||"wheel,touch,pointer",S=S!==!1,b||(b=parseFloat(Js.getComputedStyle(oy).lineHeight)||22);var sn,Fn,fr,pn,zn,nr,Un,st=this,De=0,or=0,sr=r.passive||!T&&r.passive!==!1,Pn=np(m,as),Jt=np(m,Ra),we=Pn(),ie=Jt(),ze=~h.indexOf("touch")&&!~h.indexOf("pointer")&&Su[0]==="pointerdown",St=yw(m),_t=m.ownerDocument||Kh,mt=[0,0,0],ln=[0,0,0],Wt=0,dn=function(){return Wt=_w()},fn=function(vn,rr){return(st.event=vn)&&L&&UAe(vn.target,L)||rr&&ze&&vn.pointerType!=="touch"||Ve&&Ve(vn,rr)},At=function(){st._vx.reset(),st._vy.reset(),Fn.pause(),k&&k(st)},Kt=function(){var vn=st.deltaX=Eue(mt),rr=st.deltaY=Eue(ln),rn=Math.abs(vn)>=o,kn=Math.abs(rr)>=o;Y&&(rn||kn)&&Y(st,vn,rr,mt,ln),rn&&(ae&&st.deltaX>0&&ae(st),ge&&st.deltaX<0&&ge(st),te&&te(st),ke&&st.deltaX<0!=De<0&&ke(st),De=st.deltaX,mt[0]=mt[1]=mt[2]=0),kn&&(J&&st.deltaY>0&&J(st),me&&st.deltaY<0&&me(st),oe&&oe(st),$e&&st.deltaY<0!=or<0&&$e(st),or=st.deltaY,ln[0]=ln[1]=ln[2]=0),(pn||fr)&&(pe&&pe(st),fr&&(V&&fr===1&&V(st),K&&K(st),fr=0),pn=!1),nr&&!(nr=!1)&&Mn&&Mn(st),zn&&(Ot(st),zn=!1),sn=0},hn=function(vn,rr,rn){mt[rn]+=vn,ln[rn]+=rr,st._vx.update(vn),st._vy.update(rr),S?sn||(sn=requestAnimationFrame(Kt)):Kt()},mn=function(vn,rr){Zt&&!Un&&(st.axis=Un=Math.abs(vn)>Math.abs(rr)?"x":"y",nr=!0),Un!=="y"&&(mt[2]+=vn,st._vx.update(vn,!0)),Un!=="x"&&(ln[2]+=rr,st._vy.update(rr,!0)),S?sn||(sn=requestAnimationFrame(Kt)):Kt()},qt=function(vn){if(!fn(vn,1)){vn=$S(vn,T);var rr=vn.clientX,rn=vn.clientY,kn=rr-st.x,gn=rn-st.y,$n=st.isDragging;st.x=rr,st.y=rn,($n||(kn||gn)&&(Math.abs(st.startX-rr)>=u||Math.abs(st.startY-rn)>=u))&&(fr||(fr=$n?2:1),$n||(st.isDragging=!0),mn(kn,gn))}},Xn=st.onPress=function(en){fn(en,1)||en&&en.button||(st.axis=Un=null,Fn.pause(),st.isPressed=!0,en=$S(en),De=or=0,st.startX=st.x=en.clientX,st.startY=st.y=en.clientY,st._vx.reset(),st._vy.reset(),Jo(Ue?m:_t,Su[1],qt,sr,!0),st.deltaX=st.deltaY=0,ue&&ue(st))},Ae=st.onRelease=function(en){if(!fn(en,1)){Zo(Ue?m:_t,Su[1],qt,!0);var vn=!isNaN(st.y-st.startY),rr=st.isDragging,rn=rr&&(Math.abs(st.x-st.startX)>3||Math.abs(st.y-st.startY)>3),kn=$S(en);!rn&&vn&&(st._vx.reset(),st._vy.reset(),T&&vt&&fo.delayedCall(.08,function(){if(_w()-Wt>300&&!en.defaultPrevented){if(en.target.click)en.target.click();else if(_t.createEvent){var gn=_t.createEvent("MouseEvents");gn.initMouseEvent("click",!0,!0,Js,1,kn.screenX,kn.screenY,kn.clientX,kn.clientY,!1,!1,!1,!1,0,null),en.target.dispatchEvent(gn)}}})),st.isDragging=st.isGesturing=st.isPressed=!1,k&&rr&&!Ue&&Fn.restart(!0),fr&&Kt(),I&&rr&&I(st),P&&P(st,rn)}},Gt=function(vn){return vn.touches&&vn.touches.length>1&&(st.isGesturing=!0)&&Pt(vn,st.isDragging)},Dt=function(){return(st.isGesturing=!1)||Me(st)},Xt=function(vn){if(!fn(vn)){var rr=Pn(),rn=Jt();hn((rr-we)*Dn,(rn-ie)*Dn,1),we=rr,ie=rn,k&&Fn.restart(!0)}},Ct=function(vn){if(!fn(vn)){vn=$S(vn,T),Ot&&(zn=!0);var rr=(vn.deltaMode===1?b:vn.deltaMode===2?Js.innerHeight:1)*H;hn(vn.deltaX*rr,vn.deltaY*rr,0),k&&!Ue&&Fn.restart(!0)}},Mt=function(vn){if(!fn(vn)){var rr=vn.clientX,rn=vn.clientY,kn=rr-st.x,gn=rn-st.y;st.x=rr,st.y=rn,pn=!0,k&&Fn.restart(!0),(kn||gn)&&mn(kn,gn)}},Yt=function(vn){st.event=vn,ot(st)},Sn=function(vn){st.event=vn,Qe(st)},_r=function(vn){return fn(vn)||$S(vn,T)&&qn(st)};Fn=st._dc=fo.delayedCall(O||.25,At).pause(),st.deltaX=st.deltaY=0,st._vx=dj(0,50,!0),st._vy=dj(0,50,!0),st.scrollX=Pn,st.scrollY=Jt,st.isDragging=st.isGesturing=st.isPressed=!1,Lde(this),st.enable=function(en){return st.isEnabled||(Jo(St?_t:m,"scroll",cj),h.indexOf("scroll")>=0&&Jo(St?_t:m,"scroll",Xt,sr,xt),h.indexOf("wheel")>=0&&Jo(m,"wheel",Ct,sr,xt),(h.indexOf("touch")>=0&&Ode||h.indexOf("pointer")>=0)&&(Jo(m,Su[0],Xn,sr,xt),Jo(_t,Su[2],Ae),Jo(_t,Su[3],Ae),vt&&Jo(m,"click",dn,!0,!0),qn&&Jo(m,"click",_r),Pt&&Jo(_t,"gesturestart",Gt),Me&&Jo(_t,"gestureend",Dt),ot&&Jo(m,tg+"enter",Yt),Qe&&Jo(m,tg+"leave",Sn),pe&&Jo(m,tg+"move",Mt)),st.isEnabled=!0,st.isDragging=st.isGesturing=st.isPressed=pn=fr=!1,st._vx.reset(),st._vy.reset(),we=Pn(),ie=Jt(),en&&en.type&&Xn(en),Tn&&Tn(st)),st},st.disable=function(){st.isEnabled&&(Q_.filter(function(en){return en!==st&&yw(en.target)}).length||Zo(St?_t:m,"scroll",cj),st.isPressed&&(st._vx.reset(),st._vy.reset(),Zo(Ue?m:_t,Su[1],qt,!0)),Zo(St?_t:m,"scroll",Xt,xt),Zo(m,"wheel",Ct,xt),Zo(m,Su[0],Xn,xt),Zo(_t,Su[2],Ae),Zo(_t,Su[3],Ae),Zo(m,"click",dn,!0),Zo(m,"click",_r),Zo(_t,"gesturestart",Gt),Zo(_t,"gestureend",Dt),Zo(m,tg+"enter",Yt),Zo(m,tg+"leave",Sn),Zo(m,tg+"move",Mt),st.isEnabled=st.isPressed=st.isDragging=!1,yn&&yn(st))},st.kill=st.revert=function(){st.disable();var en=Q_.indexOf(st);en>=0&&Q_.splice(en,1),rf===st&&(rf=0)},Q_.push(st),Ue&&yw(m)&&(rf=st),st.enable(G)},LAe(c,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),c})();ha.version="3.14.2";ha.create=function(c){return new ha(c)};ha.register=zde;ha.getAll=function(){return Q_.slice()};ha.getById=function(c){return Q_.filter(function(e){return e.vars.id===c})[0]};Fde()&&fo.registerPlugin(ha);var An,K_,Cr,Ti,Ys,ei,l6,p3,jw,bw,ow,EI,Co,T3,fj,ts,Tue,Mue,Y_,jde,z4,Vde,es,hj,Hde,Gde,jh,pj,u6,sy,c6,xw,mj,j4,TI=1,Ao=Date.now,V4=Ao(),Nl=0,sw=0,Pue=function(e,n,r){var o=Xs(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+n+"Clamp"]=o,o?e.substr(6,e.length-7):e},Cue=function(e,n){return n&&(!Xs(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},BAe=function c(){return sw&&requestAnimationFrame(c)},Aue=function(){return T3=1},kue=function(){return T3=0},xc=function(e){return e},lw=function(e){return Math.round(e*1e5)/1e5||0},Wde=function(){return typeof window<"u"},qde=function(){return An||Wde()&&(An=window.gsap)&&An.registerPlugin&&An},_g=function(e){return!!~l6.indexOf(e)},Xde=function(e){return(e==="Height"?c6:Cr["inner"+e])||Ys["client"+e]||ei["client"+e]},Kde=function(e){return Jh(e,"getBoundingClientRect")||(_g(e)?function(){return $I.width=Cr.innerWidth,$I.height=c6,$I}:function(){return ef(e)})},zAe=function(e,n,r){var o=r.d,u=r.d2,h=r.a;return(h=Jh(e,"getBoundingClientRect"))?function(){return h()[o]}:function(){return(n?Xde(u):e["client"+u])||0}},jAe=function(e,n){return!n||~Ic.indexOf(e)?Kde(e):function(){return $I}},Cc=function(e,n){var r=n.s,o=n.d2,u=n.d,h=n.a;return Math.max(0,(r="scroll"+o)&&(h=Jh(e,r))?h()-Kde(e)()[u]:_g(e)?(Ys[r]||ei[r])-Xde(o):e[r]-e["offset"+o])},MI=function(e,n){for(var r=0;r<Y_.length;r+=3)(!n||~n.indexOf(Y_[r+1]))&&e(Y_[r],Y_[r+1],Y_[r+2])},Xs=function(e){return typeof e=="string"},Ro=function(e){return typeof e=="function"},uw=function(e){return typeof e=="number"},ng=function(e){return typeof e=="object"},ZS=function(e,n,r){return e&&e.progress(n?0:1)&&r&&e.pause()},H4=function(e,n){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return n(e)}):n(e);r&&r.totalTime&&(e.callbackAnimation=r)}},q_=Math.abs,Yde="left",$de="top",d6="right",f6="bottom",pg="width",mg="height",Sw="Right",ww="Left",Ew="Top",Tw="Bottom",Ea="padding",Al="margin",Ey="Width",h6="Height",Ia="px",kl=function(e){return Cr.getComputedStyle(e)},VAe=function(e){var n=kl(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},Iue=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},ef=function(e,n){var r=n&&kl(e)[fj]!=="matrix(1, 0, 0, 1, 0, 0)"&&An.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),o=e.getBoundingClientRect();return r&&r.progress(0).kill(),o},m3=function(e,n){var r=n.d2;return e["offset"+r]||e["client"+r]||0},Zde=function(e){var n=[],r=e.labels,o=e.duration(),u;for(u in r)n.push(r[u]/o);return n},HAe=function(e){return function(n){return An.utils.snap(Zde(e),n)}},p6=function(e){var n=An.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(o,u){return o-u});return r?function(o,u,h){h===void 0&&(h=.001);var m;if(!u)return n(o);if(u>0){for(o-=h,m=0;m<r.length;m++)if(r[m]>=o)return r[m];return r[m-1]}else for(m=r.length,o+=h;m--;)if(r[m]<=o)return r[m];return r[0]}:function(o,u,h){h===void 0&&(h=.001);var m=n(o);return!u||Math.abs(m-o)<h||m-o<0==u<0?m:n(u<0?o-e:o+e)}},GAe=function(e){return function(n,r){return p6(Zde(e))(n,r.direction)}},PI=function(e,n,r,o){return r.split(",").forEach(function(u){return e(n,u,o)})},Xa=function(e,n,r,o,u){return e.addEventListener(n,r,{passive:!o,capture:!!u})},qa=function(e,n,r,o){return e.removeEventListener(n,r,!!o)},CI=function(e,n,r){r=r&&r.wheelHandler,r&&(e(n,"wheel",r),e(n,"touchmove",r))},Rue={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},AI={toggleActions:"play",anticipatePin:0},g3={top:0,left:0,center:.5,bottom:1,right:1},qI=function(e,n){if(Xs(e)){var r=e.indexOf("="),o=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(o*=n/100),e=e.substr(0,r-1)),e=o+(e in g3?g3[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},kI=function(e,n,r,o,u,h,m,b){var S=u.startColor,T=u.endColor,k=u.fontSize,O=u.indent,L=u.fontWeight,H=Ti.createElement("div"),G=_g(r)||Jh(r,"pinType")==="fixed",V=e.indexOf("scroller")!==-1,I=G?ei:r,K=e.indexOf("start")!==-1,ue=K?S:T,P="border-color:"+ue+";font-size:"+k+";color:"+ue+";font-weight:"+L+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return P+="position:"+((V||b)&&G?"fixed;":"absolute;"),(V||b||!G)&&(P+=(o===Ra?d6:f6)+":"+(h+parseFloat(O))+"px;"),m&&(P+="box-sizing:border-box;text-align:left;width:"+m.offsetWidth+"px;"),H._isStart=K,H.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),H.style.cssText=P,H.innerText=n||n===0?e+"-"+n:e,I.children[0]?I.insertBefore(H,I.children[0]):I.appendChild(H),H._offset=H["offset"+o.op.d2],XI(H,0,o,K),H},XI=function(e,n,r,o){var u={display:"block"},h=r[o?"os2":"p2"],m=r[o?"p2":"os2"];e._isFlipped=o,u[r.a+"Percent"]=o?-100:0,u[r.a]=o?"1px":0,u["border"+h+Ey]=1,u["border"+m+Ey]=0,u[r.p]=n+"px",An.set(e,u)},Er=[],gj={},Vw,Due=function(){return Ao()-Nl>34&&(Vw||(Vw=requestAnimationFrame(sf)))},X_=function(){(!es||!es.isPressed||es.startX>ei.clientWidth)&&(Ar.cache++,es?Vw||(Vw=requestAnimationFrame(sf)):sf(),Nl||bg("scrollStart"),Nl=Ao())},G4=function(){Gde=Cr.innerWidth,Hde=Cr.innerHeight},cw=function(e){Ar.cache++,(e===!0||!Co&&!Vde&&!Ti.fullscreenElement&&!Ti.webkitFullscreenElement&&(!hj||Gde!==Cr.innerWidth||Math.abs(Cr.innerHeight-Hde)>Cr.innerHeight*.25))&&p3.restart(!0)},yg={},WAe=[],Jde=function c(){return qa(kr,"scrollEnd",c)||lg(!0)},bg=function(e){return yg[e]&&yg[e].map(function(n){return n()})||WAe},qs=[],Qde=function(e){for(var n=0;n<qs.length;n+=5)(!e||qs[n+4]&&qs[n+4].query===e)&&(qs[n].style.cssText=qs[n+1],qs[n].getBBox&&qs[n].setAttribute("transform",qs[n+2]||""),qs[n+3].uncache=1)},efe=function(){return Ar.forEach(function(e){return Ro(e)&&++e.cacheID&&(e.rec=e())})},m6=function(e,n){var r;for(ts=0;ts<Er.length;ts++)r=Er[ts],r&&(!n||r._ctx===n)&&(e?r.kill(1):r.revert(!0,!0));xw=!0,n&&Qde(n),n||bg("revert")},tfe=function(e,n){Ar.cache++,(n||!ns)&&Ar.forEach(function(r){return Ro(r)&&r.cacheID++&&(r.rec=0)}),Xs(e)&&(Cr.history.scrollRestoration=u6=e)},ns,gg=0,Oue,qAe=function(){if(Oue!==gg){var e=Oue=gg;requestAnimationFrame(function(){return e===gg&&lg(!0)})}},nfe=function(){ei.appendChild(sy),c6=!es&&sy.offsetHeight||Cr.innerHeight,ei.removeChild(sy)},Nue=function(e){return jw(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},lg=function(e,n){if(Ys=Ti.documentElement,ei=Ti.body,l6=[Cr,Ti,Ys,ei],Nl&&!e&&!xw){Xa(kr,"scrollEnd",Jde);return}nfe(),ns=kr.isRefreshing=!0,xw||efe();var r=bg("refreshInit");jde&&kr.sort(),n||m6(),Ar.forEach(function(o){Ro(o)&&(o.smooth&&(o.target.style.scrollBehavior="auto"),o(0))}),Er.slice(0).forEach(function(o){return o.refresh()}),xw=!1,Er.forEach(function(o){if(o._subPinOffset&&o.pin){var u=o.vars.horizontal?"offsetWidth":"offsetHeight",h=o.pin[u];o.revert(!0,1),o.adjustPinSpacing(o.pin[u]-h),o.refresh()}}),mj=1,Nue(!0),Er.forEach(function(o){var u=Cc(o.scroller,o._dir),h=o.vars.end==="max"||o._endClamp&&o.end>u,m=o._startClamp&&o.start>=u;(h||m)&&o.setPositions(m?u-1:o.start,h?Math.max(m?u:o.start+1,u):o.end,!0)}),Nue(!1),mj=0,r.forEach(function(o){return o&&o.render&&o.render(-1)}),Ar.forEach(function(o){Ro(o)&&(o.smooth&&requestAnimationFrame(function(){return o.target.style.scrollBehavior="smooth"}),o.rec&&o(o.rec))}),tfe(u6,1),p3.pause(),gg++,ns=2,sf(2),Er.forEach(function(o){return Ro(o.vars.onRefresh)&&o.vars.onRefresh(o)}),ns=kr.isRefreshing=!1,bg("refresh")},vj=0,KI=1,Mw,sf=function(e){if(e===2||!ns&&!xw){kr.isUpdating=!0,Mw&&Mw.update(0);var n=Er.length,r=Ao(),o=r-V4>=50,u=n&&Er[0].scroll();if(KI=vj>u?-1:1,ns||(vj=u),o&&(Nl&&!T3&&r-Nl>200&&(Nl=0,bg("scrollEnd")),ow=V4,V4=r),KI<0){for(ts=n;ts-- >0;)Er[ts]&&Er[ts].update(0,o);KI=1}else for(ts=0;ts<n;ts++)Er[ts]&&Er[ts].update(0,o);kr.isUpdating=!1}Vw=0},_j=[Yde,$de,f6,d6,Al+Tw,Al+Sw,Al+Ew,Al+ww,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],YI=_j.concat([pg,mg,"boxSizing","max"+Ey,"max"+h6,"position",Al,Ea,Ea+Ew,Ea+Sw,Ea+Tw,Ea+ww]),XAe=function(e,n,r){ly(r);var o=e._gsap;if(o.spacerIsNative)ly(o.spacerState);else if(e._gsap.swappedIn){var u=n.parentNode;u&&(u.insertBefore(e,n),u.removeChild(n))}e._gsap.swappedIn=!1},W4=function(e,n,r,o){if(!e._gsap.swappedIn){for(var u=_j.length,h=n.style,m=e.style,b;u--;)b=_j[u],h[b]=r[b];h.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(h.display="inline-block"),m[f6]=m[d6]="auto",h.flexBasis=r.flexBasis||"auto",h.overflow="visible",h.boxSizing="border-box",h[pg]=m3(e,as)+Ia,h[mg]=m3(e,Ra)+Ia,h[Ea]=m[Al]=m[$de]=m[Yde]="0",ly(o),m[pg]=m["max"+Ey]=r[pg],m[mg]=m["max"+h6]=r[mg],m[Ea]=r[Ea],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},KAe=/([A-Z])/g,ly=function(e){if(e){var n=e.t.style,r=e.length,o=0,u,h;for((e.t._gsap||An.core.getCache(e.t)).uncache=1;o<r;o+=2)h=e[o+1],u=e[o],h?n[u]=h:n[u]&&n.removeProperty(u.replace(KAe,"-$1").toLowerCase())}},II=function(e){for(var n=YI.length,r=e.style,o=[],u=0;u<n;u++)o.push(YI[u],r[YI[u]]);return o.t=e,o},YAe=function(e,n,r){for(var o=[],u=e.length,h=r?8:0,m;h<u;h+=2)m=e[h],o.push(m,m in n?n[m]:e[h+1]);return o.t=e.t,o},$I={left:0,top:0},Lue=function(e,n,r,o,u,h,m,b,S,T,k,O,L,H){Ro(e)&&(e=e(b)),Xs(e)&&e.substr(0,3)==="max"&&(e=O+(e.charAt(4)==="="?qI("0"+e.substr(3),r):0));var G=L?L.time():0,V,I,K;if(L&&L.seek(0),isNaN(e)||(e=+e),uw(e))L&&(e=An.utils.mapRange(L.scrollTrigger.start,L.scrollTrigger.end,0,O,e)),m&&XI(m,r,o,!0);else{Ro(n)&&(n=n(b));var ue=(e||"0").split(" "),P,ae,ge,me;K=Ss(n,b)||ei,P=ef(K)||{},(!P||!P.left&&!P.top)&&kl(K).display==="none"&&(me=K.style.display,K.style.display="block",P=ef(K),me?K.style.display=me:K.style.removeProperty("display")),ae=qI(ue[0],P[o.d]),ge=qI(ue[1]||"0",r),e=P[o.p]-S[o.p]-T+ae+u-ge,m&&XI(m,ge,o,r-ge<20||m._isStart&&ge>20),r-=r-ge}if(H&&(b[H]=e||-.001,e<0&&(e=0)),h){var J=e+r,te=h._isStart;V="scroll"+o.d2,XI(h,J,o,te&&J>20||!te&&(k?Math.max(ei[V],Ys[V]):h.parentNode[V])<=J+1),k&&(S=ef(m),k&&(h.style[o.op.p]=S[o.op.p]-o.op.m-h._offset+Ia))}return L&&K&&(V=ef(K),L.seek(O),I=ef(K),L._caScrollDist=V[o.p]-I[o.p],e=e/L._caScrollDist*O),L&&L.seek(G),L?e:Math.round(e)},$Ae=/(webkit|moz|length|cssText|inset)/i,Fue=function(e,n,r,o){if(e.parentNode!==n){var u=e.style,h,m;if(n===ei){e._stOrig=u.cssText,m=kl(e);for(h in m)!+h&&!$Ae.test(h)&&m[h]&&typeof u[h]=="string"&&h!=="0"&&(u[h]=m[h]);u.top=r,u.left=o}else u.cssText=e._stOrig;An.core.getCache(e).uncache=1,n.appendChild(e)}},rfe=function(e,n,r){var o=n,u=o;return function(h){var m=Math.round(e());return m!==o&&m!==u&&Math.abs(m-o)>3&&Math.abs(m-u)>3&&(h=m,r&&r()),u=o,o=Math.round(h),o}},RI=function(e,n,r){var o={};o[n.p]="+="+r,An.set(e,o)},Uue=function(e,n){var r=np(e,n),o="_scroll"+n.p2,u=function h(m,b,S,T,k){var O=h.tween,L=b.onComplete,H={};S=S||r();var G=rfe(r,S,function(){O.kill(),h.tween=0});return k=T&&k||0,T=T||m-S,O&&O.kill(),b[o]=m,b.inherit=!1,b.modifiers=H,H[o]=function(){return G(S+T*O.ratio+k*O.ratio*O.ratio)},b.onUpdate=function(){Ar.cache++,h.tween&&sf()},b.onComplete=function(){h.tween=0,L&&L.call(O)},O=h.tween=An.to(e,b),O};return e[o]=r,r.wheelHandler=function(){return u.tween&&u.tween.kill()&&(u.tween=0)},Xa(e,"wheel",r.wheelHandler),kr.isTouch&&Xa(e,"touchmove",r.wheelHandler),u},kr=(function(){function c(n,r){K_||c.register(An)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),pj(this),this.init(n,r)}var e=c.prototype;return e.init=function(r,o){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!sw){this.update=this.refresh=this.kill=xc;return}r=Iue(Xs(r)||uw(r)||r.nodeType?{trigger:r}:r,AI);var u=r,h=u.onUpdate,m=u.toggleClass,b=u.id,S=u.onToggle,T=u.onRefresh,k=u.scrub,O=u.trigger,L=u.pin,H=u.pinSpacing,G=u.invalidateOnRefresh,V=u.anticipatePin,I=u.onScrubComplete,K=u.onSnapComplete,ue=u.once,P=u.snap,ae=u.pinReparent,ge=u.pinSpacer,me=u.containerAnimation,J=u.fastScrollEnd,te=u.preventOverlaps,oe=r.horizontal||r.containerAnimation&&r.horizontal!==!1?as:Ra,Y=!k&&k!==0,ke=Ss(r.scroller||Cr),$e=An.core.getCache(ke),ot=_g(ke),Qe=("pinType"in r?r.pinType:Jh(ke,"pinType")||ot&&"fixed")==="fixed",pe=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],Ve=Y&&r.toggleActions.split(" "),Ue="markers"in r?r.markers:AI.markers,Pt=ot?0:parseFloat(kl(ke)["border"+oe.p2+Ey])||0,Me=this,Ot=r.onRefreshInit&&function(){return r.onRefreshInit(Me)},Tn=zAe(ke,ot,oe),yn=jAe(ke,ot),qn=0,Dn=0,xt=0,vt=np(ke,oe),Zt,Mn,sn,Fn,fr,pn,zn,nr,Un,st,De,or,sr,Pn,Jt,we,ie,ze,St,_t,mt,ln,Wt,dn,fn,At,Kt,hn,mn,qt,Xn,Ae,Gt,Dt,Xt,Ct,Mt,Yt,Sn;if(Me._startClamp=Me._endClamp=!1,Me._dir=oe,V*=45,Me.scroller=ke,Me.scroll=me?me.time.bind(me):vt,Fn=vt(),Me.vars=r,o=o||r.animation,"refreshPriority"in r&&(jde=1,r.refreshPriority===-9999&&(Mw=Me)),$e.tweenScroll=$e.tweenScroll||{top:Uue(ke,Ra),left:Uue(ke,as)},Me.tweenTo=Zt=$e.tweenScroll[oe.p],Me.scrubDuration=function(rn){Gt=uw(rn)&&rn,Gt?Ae?Ae.duration(rn):Ae=An.to(o,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Gt,paused:!0,onComplete:function(){return I&&I(Me)}}):(Ae&&Ae.progress(1).kill(),Ae=0)},o&&(o.vars.lazy=!1,o._initted&&!Me.isReverted||o.vars.immediateRender!==!1&&r.immediateRender!==!1&&o.duration()&&o.render(0,!0,!0),Me.animation=o.pause(),o.scrollTrigger=Me,Me.scrubDuration(k),qt=0,b||(b=o.vars.id)),P&&((!ng(P)||P.push)&&(P={snapTo:P}),"scrollBehavior"in ei.style&&An.set(ot?[ei,Ys]:ke,{scrollBehavior:"auto"}),Ar.forEach(function(rn){return Ro(rn)&&rn.target===(ot?Ti.scrollingElement||Ys:ke)&&(rn.smooth=!1)}),sn=Ro(P.snapTo)?P.snapTo:P.snapTo==="labels"?HAe(o):P.snapTo==="labelsDirectional"?GAe(o):P.directional!==!1?function(rn,kn){return p6(P.snapTo)(rn,Ao()-Dn<500?0:kn.direction)}:An.utils.snap(P.snapTo),Dt=P.duration||{min:.1,max:2},Dt=ng(Dt)?bw(Dt.min,Dt.max):bw(Dt,Dt),Xt=An.delayedCall(P.delay||Gt/2||.1,function(){var rn=vt(),kn=Ao()-Dn<500,gn=Zt.tween;if((kn||Math.abs(Me.getVelocity())<10)&&!gn&&!T3&&qn!==rn){var $n=(rn-pn)/Pn,li=o&&!Y?o.totalProgress():$n,hr=kn?0:(li-Xn)/(Ao()-ow)*1e3||0,yr=An.utils.clamp(-$n,1-$n,q_(hr/2)*hr/.185),ui=$n+(P.inertia===!1?0:yr),Yr,jr,mr=P,na=mr.onStart,Mr=mr.onInterrupt,Mi=mr.onComplete;if(Yr=sn(ui,Me),uw(Yr)||(Yr=ui),jr=Math.max(0,Math.round(pn+Yr*Pn)),rn<=zn&&rn>=pn&&jr!==rn){if(gn&&!gn._initted&&gn.data<=q_(jr-rn))return;P.inertia===!1&&(yr=Yr-$n),Zt(jr,{duration:Dt(q_(Math.max(q_(ui-li),q_(Yr-li))*.185/hr/.05||0)),ease:P.ease||"power3",data:q_(jr-rn),onInterrupt:function(){return Xt.restart(!0)&&Mr&&Mr(Me)},onComplete:function(){Me.update(),qn=vt(),o&&!Y&&(Ae?Ae.resetTo("totalProgress",Yr,o._tTime/o._tDur):o.progress(Yr)),qt=Xn=o&&!Y?o.totalProgress():Me.progress,K&&K(Me),Mi&&Mi(Me)}},rn,yr*Pn,jr-rn-yr*Pn),na&&na(Me,Zt.tween)}}else Me.isActive&&qn!==rn&&Xt.restart(!0)}).pause()),b&&(gj[b]=Me),O=Me.trigger=Ss(O||L!==!0&&L),Sn=O&&O._gsap&&O._gsap.stRevert,Sn&&(Sn=Sn(Me)),L=L===!0?O:Ss(L),Xs(m)&&(m={targets:O,className:m}),L&&(H===!1||H===Al||(H=!H&&L.parentNode&&L.parentNode.style&&kl(L.parentNode).display==="flex"?!1:Ea),Me.pin=L,Mn=An.core.getCache(L),Mn.spacer?Jt=Mn.pinState:(ge&&(ge=Ss(ge),ge&&!ge.nodeType&&(ge=ge.current||ge.nativeElement),Mn.spacerIsNative=!!ge,ge&&(Mn.spacerState=II(ge))),Mn.spacer=ze=ge||Ti.createElement("div"),ze.classList.add("pin-spacer"),b&&ze.classList.add("pin-spacer-"+b),Mn.pinState=Jt=II(L)),r.force3D!==!1&&An.set(L,{force3D:!0}),Me.spacer=ze=Mn.spacer,mn=kl(L),dn=mn[H+oe.os2],_t=An.getProperty(L),mt=An.quickSetter(L,oe.a,Ia),W4(L,ze,mn),ie=II(L)),Ue){or=ng(Ue)?Iue(Ue,Rue):Rue,st=kI("scroller-start",b,ke,oe,or,0),De=kI("scroller-end",b,ke,oe,or,0,st),St=st["offset"+oe.op.d2];var _r=Ss(Jh(ke,"content")||ke);nr=this.markerStart=kI("start",b,_r,oe,or,St,0,me),Un=this.markerEnd=kI("end",b,_r,oe,or,St,0,me),me&&(Yt=An.quickSetter([nr,Un],oe.a,Ia)),!Qe&&!(Ic.length&&Jh(ke,"fixedMarkers")===!0)&&(VAe(ot?ei:ke),An.set([st,De],{force3D:!0}),At=An.quickSetter(st,oe.a,Ia),hn=An.quickSetter(De,oe.a,Ia))}if(me){var en=me.vars.onUpdate,vn=me.vars.onUpdateParams;me.eventCallback("onUpdate",function(){Me.update(0,0,1),en&&en.apply(me,vn||[])})}if(Me.previous=function(){return Er[Er.indexOf(Me)-1]},Me.next=function(){return Er[Er.indexOf(Me)+1]},Me.revert=function(rn,kn){if(!kn)return Me.kill(!0);var gn=rn!==!1||!Me.enabled,$n=Co;gn!==Me.isReverted&&(gn&&(Ct=Math.max(vt(),Me.scroll.rec||0),xt=Me.progress,Mt=o&&o.progress()),nr&&[nr,Un,st,De].forEach(function(li){return li.style.display=gn?"none":"block"}),gn&&(Co=Me,Me.update(gn)),L&&(!ae||!Me.isActive)&&(gn?XAe(L,ze,Jt):W4(L,ze,kl(L),fn)),gn||Me.update(gn),Co=$n,Me.isReverted=gn)},Me.refresh=function(rn,kn,gn,$n){if(!((Co||!Me.enabled)&&!kn)){if(L&&rn&&Nl){Xa(c,"scrollEnd",Jde);return}!ns&&Ot&&Ot(Me),Co=Me,Zt.tween&&!gn&&(Zt.tween.kill(),Zt.tween=0),Ae&&Ae.pause(),G&&o&&(o.revert({kill:!1}).invalidate(),o.getChildren?o.getChildren(!0,!0,!1).forEach(function(Qt){return Qt.vars.immediateRender&&Qt.render(0,!0,!0)}):o.vars.immediateRender&&o.render(0,!0,!0)),Me.isReverted||Me.revert(!0,!0),Me._subPinOffset=!1;var li=Tn(),hr=yn(),yr=me?me.duration():Cc(ke,oe),ui=Pn<=.01||!Pn,Yr=0,jr=$n||0,mr=ng(gn)?gn.end:r.end,na=r.endTrigger||O,Mr=ng(gn)?gn.start:r.start||(r.start===0||!O?0:L?"0 0":"0 100%"),Mi=Me.pinnedContainer=r.pinnedContainer&&Ss(r.pinnedContainer,Me),pa=O&&Math.max(0,Er.indexOf(Me))||0,yi=pa,Pi,Oi,Ni,La,Li,he,He,ft,lt,Je,Bt,an,tn;for(Ue&&ng(gn)&&(an=An.getProperty(st,oe.p),tn=An.getProperty(De,oe.p));yi-- >0;)he=Er[yi],he.end||he.refresh(0,1)||(Co=Me),He=he.pin,He&&(He===O||He===L||He===Mi)&&!he.isReverted&&(Je||(Je=[]),Je.unshift(he),he.revert(!0,!0)),he!==Er[yi]&&(pa--,yi--);for(Ro(Mr)&&(Mr=Mr(Me)),Mr=Pue(Mr,"start",Me),pn=Lue(Mr,O,li,oe,vt(),nr,st,Me,hr,Pt,Qe,yr,me,Me._startClamp&&"_startClamp")||(L?-.001:0),Ro(mr)&&(mr=mr(Me)),Xs(mr)&&!mr.indexOf("+=")&&(~mr.indexOf(" ")?mr=(Xs(Mr)?Mr.split(" ")[0]:"")+mr:(Yr=qI(mr.substr(2),li),mr=Xs(Mr)?Mr:(me?An.utils.mapRange(0,me.duration(),me.scrollTrigger.start,me.scrollTrigger.end,pn):pn)+Yr,na=O)),mr=Pue(mr,"end",Me),zn=Math.max(pn,Lue(mr||(na?"100% 0":yr),na,li,oe,vt()+Yr,Un,De,Me,hr,Pt,Qe,yr,me,Me._endClamp&&"_endClamp"))||-.001,Yr=0,yi=pa;yi--;)he=Er[yi]||{},He=he.pin,He&&he.start-he._pinPush<=pn&&!me&&he.end>0&&(Pi=he.end-(Me._startClamp?Math.max(0,he.start):he.start),(He===O&&he.start-he._pinPush<pn||He===Mi)&&isNaN(Mr)&&(Yr+=Pi*(1-he.progress)),He===L&&(jr+=Pi));if(pn+=Yr,zn+=Yr,Me._startClamp&&(Me._startClamp+=Yr),Me._endClamp&&!ns&&(Me._endClamp=zn||-.001,zn=Math.min(zn,Cc(ke,oe))),Pn=zn-pn||(pn-=.01)&&.001,ui&&(xt=An.utils.clamp(0,1,An.utils.normalize(pn,zn,Ct))),Me._pinPush=jr,nr&&Yr&&(Pi={},Pi[oe.a]="+="+Yr,Mi&&(Pi[oe.p]="-="+vt()),An.set([nr,Un],Pi)),L&&!(mj&&Me.end>=Cc(ke,oe)))Pi=kl(L),La=oe===Ra,Ni=vt(),ln=parseFloat(_t(oe.a))+jr,!yr&&zn>1&&(Bt=(ot?Ti.scrollingElement||Ys:ke).style,Bt={style:Bt,value:Bt["overflow"+oe.a.toUpperCase()]},ot&&kl(ei)["overflow"+oe.a.toUpperCase()]!=="scroll"&&(Bt.style["overflow"+oe.a.toUpperCase()]="scroll")),W4(L,ze,Pi),ie=II(L),Oi=ef(L,!0),ft=Qe&&np(ke,La?as:Ra)(),H?(fn=[H+oe.os2,Pn+jr+Ia],fn.t=ze,yi=H===Ea?m3(L,oe)+Pn+jr:0,yi&&(fn.push(oe.d,yi+Ia),ze.style.flexBasis!=="auto"&&(ze.style.flexBasis=yi+Ia)),ly(fn),Mi&&Er.forEach(function(Qt){Qt.pin===Mi&&Qt.vars.pinSpacing!==!1&&(Qt._subPinOffset=!0)}),Qe&&vt(Ct)):(yi=m3(L,oe),yi&&ze.style.flexBasis!=="auto"&&(ze.style.flexBasis=yi+Ia)),Qe&&(Li={top:Oi.top+(La?Ni-pn:ft)+Ia,left:Oi.left+(La?ft:Ni-pn)+Ia,boxSizing:"border-box",position:"fixed"},Li[pg]=Li["max"+Ey]=Math.ceil(Oi.width)+Ia,Li[mg]=Li["max"+h6]=Math.ceil(Oi.height)+Ia,Li[Al]=Li[Al+Ew]=Li[Al+Sw]=Li[Al+Tw]=Li[Al+ww]="0",Li[Ea]=Pi[Ea],Li[Ea+Ew]=Pi[Ea+Ew],Li[Ea+Sw]=Pi[Ea+Sw],Li[Ea+Tw]=Pi[Ea+Tw],Li[Ea+ww]=Pi[Ea+ww],we=YAe(Jt,Li,ae),ns&&vt(0)),o?(lt=o._initted,z4(1),o.render(o.duration(),!0,!0),Wt=_t(oe.a)-ln+Pn+jr,Kt=Math.abs(Pn-Wt)>1,Qe&&Kt&&we.splice(we.length-2,2),o.render(0,!0,!0),lt||o.invalidate(!0),o.parent||o.totalTime(o.totalTime()),z4(0)):Wt=Pn,Bt&&(Bt.value?Bt.style["overflow"+oe.a.toUpperCase()]=Bt.value:Bt.style.removeProperty("overflow-"+oe.a));else if(O&&vt()&&!me)for(Oi=O.parentNode;Oi&&Oi!==ei;)Oi._pinOffset&&(pn-=Oi._pinOffset,zn-=Oi._pinOffset),Oi=Oi.parentNode;Je&&Je.forEach(function(Qt){return Qt.revert(!1,!0)}),Me.start=pn,Me.end=zn,Fn=fr=ns?Ct:vt(),!me&&!ns&&(Fn<Ct&&vt(Ct),Me.scroll.rec=0),Me.revert(!1,!0),Dn=Ao(),Xt&&(qn=-1,Xt.restart(!0)),Co=0,o&&Y&&(o._initted||Mt)&&o.progress()!==Mt&&o.progress(Mt||0,!0).render(o.time(),!0,!0),(ui||xt!==Me.progress||me||G||o&&!o._initted)&&(o&&!Y&&(o._initted||xt||o.vars.immediateRender!==!1)&&o.totalProgress(me&&pn<-.001&&!xt?An.utils.normalize(pn,zn,0):xt,!0),Me.progress=ui||(Fn-pn)/Pn===xt?0:xt),L&&H&&(ze._pinOffset=Math.round(Me.progress*Wt)),Ae&&Ae.invalidate(),isNaN(an)||(an-=An.getProperty(st,oe.p),tn-=An.getProperty(De,oe.p),RI(st,oe,an),RI(nr,oe,an-($n||0)),RI(De,oe,tn),RI(Un,oe,tn-($n||0))),ui&&!ns&&Me.update(),T&&!ns&&!sr&&(sr=!0,T(Me),sr=!1)}},Me.getVelocity=function(){return(vt()-fr)/(Ao()-ow)*1e3||0},Me.endAnimation=function(){ZS(Me.callbackAnimation),o&&(Ae?Ae.progress(1):o.paused()?Y||ZS(o,Me.direction<0,1):ZS(o,o.reversed()))},Me.labelToScroll=function(rn){return o&&o.labels&&(pn||Me.refresh()||pn)+o.labels[rn]/o.duration()*Pn||0},Me.getTrailing=function(rn){var kn=Er.indexOf(Me),gn=Me.direction>0?Er.slice(0,kn).reverse():Er.slice(kn+1);return(Xs(rn)?gn.filter(function($n){return $n.vars.preventOverlaps===rn}):gn).filter(function($n){return Me.direction>0?$n.end<=pn:$n.start>=zn})},Me.update=function(rn,kn,gn){if(!(me&&!gn&&!rn)){var $n=ns===!0?Ct:Me.scroll(),li=rn?0:($n-pn)/Pn,hr=li<0?0:li>1?1:li||0,yr=Me.progress,ui,Yr,jr,mr,na,Mr,Mi,pa;if(kn&&(fr=Fn,Fn=me?vt():$n,P&&(Xn=qt,qt=o&&!Y?o.totalProgress():hr)),V&&L&&!Co&&!TI&&Nl&&(!hr&&pn<$n+($n-fr)/(Ao()-ow)*V?hr=1e-4:hr===1&&zn>$n+($n-fr)/(Ao()-ow)*V&&(hr=.9999)),hr!==yr&&Me.enabled){if(ui=Me.isActive=!!hr&&hr<1,Yr=!!yr&&yr<1,Mr=ui!==Yr,na=Mr||!!hr!=!!yr,Me.direction=hr>yr?1:-1,Me.progress=hr,na&&!Co&&(jr=hr&&!yr?0:hr===1?1:yr===1?2:3,Y&&(mr=!Mr&&Ve[jr+1]!=="none"&&Ve[jr+1]||Ve[jr],pa=o&&(mr==="complete"||mr==="reset"||mr in o))),te&&(Mr||pa)&&(pa||k||!o)&&(Ro(te)?te(Me):Me.getTrailing(te).forEach(function(Ni){return Ni.endAnimation()})),Y||(Ae&&!Co&&!TI?(Ae._dp._time-Ae._start!==Ae._time&&Ae.render(Ae._dp._time-Ae._start),Ae.resetTo?Ae.resetTo("totalProgress",hr,o._tTime/o._tDur):(Ae.vars.totalProgress=hr,Ae.invalidate().restart())):o&&o.totalProgress(hr,!!(Co&&(Dn||rn)))),L){if(rn&&H&&(ze.style[H+oe.os2]=dn),!Qe)mt(lw(ln+Wt*hr));else if(na){if(Mi=!rn&&hr>yr&&zn+1>$n&&$n+1>=Cc(ke,oe),ae)if(!rn&&(ui||Mi)){var yi=ef(L,!0),Pi=$n-pn;Fue(L,ei,yi.top+(oe===Ra?Pi:0)+Ia,yi.left+(oe===Ra?0:Pi)+Ia)}else Fue(L,ze);ly(ui||Mi?we:ie),Kt&&hr<1&&ui||mt(ln+(hr===1&&!Mi?Wt:0))}}P&&!Zt.tween&&!Co&&!TI&&Xt.restart(!0),m&&(Mr||ue&&hr&&(hr<1||!j4))&&jw(m.targets).forEach(function(Ni){return Ni.classList[ui||ue?"add":"remove"](m.className)}),h&&!Y&&!rn&&h(Me),na&&!Co?(Y&&(pa&&(mr==="complete"?o.pause().totalProgress(1):mr==="reset"?o.restart(!0).pause():mr==="restart"?o.restart(!0):o[mr]()),h&&h(Me)),(Mr||!j4)&&(S&&Mr&&H4(Me,S),pe[jr]&&H4(Me,pe[jr]),ue&&(hr===1?Me.kill(!1,1):pe[jr]=0),Mr||(jr=hr===1?1:3,pe[jr]&&H4(Me,pe[jr]))),J&&!ui&&Math.abs(Me.getVelocity())>(uw(J)?J:2500)&&(ZS(Me.callbackAnimation),Ae?Ae.progress(1):ZS(o,mr==="reverse"?1:!hr,1))):Y&&h&&!Co&&h(Me)}if(hn){var Oi=me?$n/me.duration()*(me._caScrollDist||0):$n;At(Oi+(st._isFlipped?1:0)),hn(Oi)}Yt&&Yt(-$n/me.duration()*(me._caScrollDist||0))}},Me.enable=function(rn,kn){Me.enabled||(Me.enabled=!0,Xa(ke,"resize",cw),ot||Xa(ke,"scroll",X_),Ot&&Xa(c,"refreshInit",Ot),rn!==!1&&(Me.progress=xt=0,Fn=fr=qn=vt()),kn!==!1&&Me.refresh())},Me.getTween=function(rn){return rn&&Zt?Zt.tween:Ae},Me.setPositions=function(rn,kn,gn,$n){if(me){var li=me.scrollTrigger,hr=me.duration(),yr=li.end-li.start;rn=li.start+yr*rn/hr,kn=li.start+yr*kn/hr}Me.refresh(!1,!1,{start:Cue(rn,gn&&!!Me._startClamp),end:Cue(kn,gn&&!!Me._endClamp)},$n),Me.update()},Me.adjustPinSpacing=function(rn){if(fn&&rn){var kn=fn.indexOf(oe.d)+1;fn[kn]=parseFloat(fn[kn])+rn+Ia,fn[1]=parseFloat(fn[1])+rn+Ia,ly(fn)}},Me.disable=function(rn,kn){if(rn!==!1&&Me.revert(!0,!0),Me.enabled&&(Me.enabled=Me.isActive=!1,kn||Ae&&Ae.pause(),Ct=0,Mn&&(Mn.uncache=1),Ot&&qa(c,"refreshInit",Ot),Xt&&(Xt.pause(),Zt.tween&&Zt.tween.kill()&&(Zt.tween=0)),!ot)){for(var gn=Er.length;gn--;)if(Er[gn].scroller===ke&&Er[gn]!==Me)return;qa(ke,"resize",cw),ot||qa(ke,"scroll",X_)}},Me.kill=function(rn,kn){Me.disable(rn,kn),Ae&&!kn&&Ae.kill(),b&&delete gj[b];var gn=Er.indexOf(Me);gn>=0&&Er.splice(gn,1),gn===ts&&KI>0&&ts--,gn=0,Er.forEach(function($n){return $n.scroller===Me.scroller&&(gn=1)}),gn||ns||(Me.scroll.rec=0),o&&(o.scrollTrigger=null,rn&&o.revert({kill:!1}),kn||o.kill()),nr&&[nr,Un,st,De].forEach(function($n){return $n.parentNode&&$n.parentNode.removeChild($n)}),Mw===Me&&(Mw=0),L&&(Mn&&(Mn.uncache=1),gn=0,Er.forEach(function($n){return $n.pin===L&&gn++}),gn||(Mn.spacer=0)),r.onKill&&r.onKill(Me)},Er.push(Me),Me.enable(!1,!1),Sn&&Sn(Me),o&&o.add&&!Pn){var rr=Me.update;Me.update=function(){Me.update=rr,Ar.cache++,pn||zn||Me.refresh()},An.delayedCall(.01,Me.update),Pn=.01,pn=zn=0}else Me.refresh();L&&qAe()},c.register=function(r){return K_||(An=r||qde(),Wde()&&window.document&&c.enable(),K_=sw),K_},c.defaults=function(r){if(r)for(var o in r)AI[o]=r[o];return AI},c.disable=function(r,o){sw=0,Er.forEach(function(h){return h[o?"kill":"disable"](r)}),qa(Cr,"wheel",X_),qa(Ti,"scroll",X_),clearInterval(EI),qa(Ti,"touchcancel",xc),qa(ei,"touchstart",xc),PI(qa,Ti,"pointerdown,touchstart,mousedown",Aue),PI(qa,Ti,"pointerup,touchend,mouseup",kue),p3.kill(),MI(qa);for(var u=0;u<Ar.length;u+=3)CI(qa,Ar[u],Ar[u+1]),CI(qa,Ar[u],Ar[u+2])},c.enable=function(){if(Cr=window,Ti=document,Ys=Ti.documentElement,ei=Ti.body,An&&(jw=An.utils.toArray,bw=An.utils.clamp,pj=An.core.context||xc,z4=An.core.suppressOverwrites||xc,u6=Cr.history.scrollRestoration||"auto",vj=Cr.pageYOffset||0,An.core.globals("ScrollTrigger",c),ei)){sw=1,sy=document.createElement("div"),sy.style.height="100vh",sy.style.position="absolute",nfe(),BAe(),ha.register(An),c.isTouch=ha.isTouch,jh=ha.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),hj=ha.isTouch===1,Xa(Cr,"wheel",X_),l6=[Cr,Ti,Ys,ei],An.matchMedia?(c.matchMedia=function(S){var T=An.matchMedia(),k;for(k in S)T.add(k,S[k]);return T},An.addEventListener("matchMediaInit",function(){efe(),m6()}),An.addEventListener("matchMediaRevert",function(){return Qde()}),An.addEventListener("matchMedia",function(){lg(0,1),bg("matchMedia")}),An.matchMedia().add("(orientation: portrait)",function(){return G4(),G4})):console.warn("Requires GSAP 3.11.0 or later"),G4(),Xa(Ti,"scroll",X_);var r=ei.hasAttribute("style"),o=ei.style,u=o.borderTopStyle,h=An.core.Animation.prototype,m,b;for(h.revert||Object.defineProperty(h,"revert",{value:function(){return this.time(-.01,!0)}}),o.borderTopStyle="solid",m=ef(ei),Ra.m=Math.round(m.top+Ra.sc())||0,as.m=Math.round(m.left+as.sc())||0,u?o.borderTopStyle=u:o.removeProperty("border-top-style"),r||(ei.setAttribute("style",""),ei.removeAttribute("style")),EI=setInterval(Due,250),An.delayedCall(.5,function(){return TI=0}),Xa(Ti,"touchcancel",xc),Xa(ei,"touchstart",xc),PI(Xa,Ti,"pointerdown,touchstart,mousedown",Aue),PI(Xa,Ti,"pointerup,touchend,mouseup",kue),fj=An.utils.checkPrefix("transform"),YI.push(fj),K_=Ao(),p3=An.delayedCall(.2,lg).pause(),Y_=[Ti,"visibilitychange",function(){var S=Cr.innerWidth,T=Cr.innerHeight;Ti.hidden?(Tue=S,Mue=T):(Tue!==S||Mue!==T)&&cw()},Ti,"DOMContentLoaded",lg,Cr,"load",lg,Cr,"resize",cw],MI(Xa),Er.forEach(function(S){return S.enable(0,1)}),b=0;b<Ar.length;b+=3)CI(qa,Ar[b],Ar[b+1]),CI(qa,Ar[b],Ar[b+2])}},c.config=function(r){"limitCallbacks"in r&&(j4=!!r.limitCallbacks);var o=r.syncInterval;o&&clearInterval(EI)||(EI=o)&&setInterval(Due,o),"ignoreMobileResize"in r&&(hj=c.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(MI(qa)||MI(Xa,r.autoRefreshEvents||"none"),Vde=(r.autoRefreshEvents+"").indexOf("resize")===-1)},c.scrollerProxy=function(r,o){var u=Ss(r),h=Ar.indexOf(u),m=_g(u);~h&&Ar.splice(h,m?6:2),o&&(m?Ic.unshift(Cr,o,ei,o,Ys,o):Ic.unshift(u,o))},c.clearMatchMedia=function(r){Er.forEach(function(o){return o._ctx&&o._ctx.query===r&&o._ctx.kill(!0,!0)})},c.isInViewport=function(r,o,u){var h=(Xs(r)?Ss(r):r).getBoundingClientRect(),m=h[u?pg:mg]*o||0;return u?h.right-m>0&&h.left+m<Cr.innerWidth:h.bottom-m>0&&h.top+m<Cr.innerHeight},c.positionInViewport=function(r,o,u){Xs(r)&&(r=Ss(r));var h=r.getBoundingClientRect(),m=h[u?pg:mg],b=o==null?m/2:o in g3?g3[o]*m:~o.indexOf("%")?parseFloat(o)*m/100:parseFloat(o)||0;return u?(h.left+b)/Cr.innerWidth:(h.top+b)/Cr.innerHeight},c.killAll=function(r){if(Er.slice(0).forEach(function(u){return u.vars.id!=="ScrollSmoother"&&u.kill()}),r!==!0){var o=yg.killAll||[];yg={},o.forEach(function(u){return u()})}},c})();kr.version="3.14.2";kr.saveStyles=function(c){return c?jw(c).forEach(function(e){if(e&&e.style){var n=qs.indexOf(e);n>=0&&qs.splice(n,5),qs.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),An.core.getCache(e),pj())}}):qs};kr.revert=function(c,e){return m6(!c,e)};kr.create=function(c,e){return new kr(c,e)};kr.refresh=function(c){return c?cw(!0):(K_||kr.register())&&lg(!0)};kr.update=function(c){return++Ar.cache&&sf(c===!0?2:0)};kr.clearScrollMemory=tfe;kr.maxScroll=function(c,e){return Cc(c,e?as:Ra)};kr.getScrollFunc=function(c,e){return np(Ss(c),e?as:Ra)};kr.getById=function(c){return gj[c]};kr.getAll=function(){return Er.filter(function(c){return c.vars.id!=="ScrollSmoother"})};kr.isScrolling=function(){return!!Nl};kr.snapDirectional=p6;kr.addEventListener=function(c,e){var n=yg[c]||(yg[c]=[]);~n.indexOf(e)||n.push(e)};kr.removeEventListener=function(c,e){var n=yg[c],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)};kr.batch=function(c,e){var n=[],r={},o=e.interval||.016,u=e.batchMax||1e9,h=function(S,T){var k=[],O=[],L=An.delayedCall(o,function(){T(k,O),k=[],O=[]}).pause();return function(H){k.length||L.restart(!0),k.push(H.trigger),O.push(H),u<=k.length&&L.progress(1)}},m;for(m in e)r[m]=m.substr(0,2)==="on"&&Ro(e[m])&&m!=="onRefreshInit"?h(m,e[m]):e[m];return Ro(u)&&(u=u(),Xa(kr,"refresh",function(){return u=e.batchMax()})),jw(c).forEach(function(b){var S={};for(m in r)S[m]=r[m];S.trigger=b,n.push(kr.create(S))}),n};var Bue=function(e,n,r,o){return n>o?e(o):n<0&&e(0),r>o?(o-n)/(r-n):r<0?n/(n-r):1},q4=function c(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(ha.isTouch?" pinch-zoom":""):"none",e===Ys&&c(ei,n)},DI={auto:1,scroll:1},ZAe=function(e){var n=e.event,r=e.target,o=e.axis,u=(n.changedTouches?n.changedTouches[0]:n).target,h=u._gsap||An.core.getCache(u),m=Ao(),b;if(!h._isScrollT||m-h._isScrollT>2e3){for(;u&&u!==ei&&(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth||!(DI[(b=kl(u)).overflowY]||DI[b.overflowX]));)u=u.parentNode;h._isScroll=u&&u!==r&&!_g(u)&&(DI[(b=kl(u)).overflowY]||DI[b.overflowX]),h._isScrollT=m}(h._isScroll||o==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},ife=function(e,n,r,o){return ha.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:o=o&&ZAe,onPress:o,onDrag:o,onScroll:o,onEnable:function(){return r&&Xa(Ti,ha.eventTypes[0],jue,!1,!0)},onDisable:function(){return qa(Ti,ha.eventTypes[0],jue,!0)}})},JAe=/(input|label|select|textarea)/i,zue,jue=function(e){var n=JAe.test(e.target.tagName);(n||zue)&&(e._gsapAllow=!0,zue=n)},QAe=function(e){ng(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,r=n.normalizeScrollX,o=n.momentum,u=n.allowNestedScroll,h=n.onRelease,m,b,S=Ss(e.target)||Ys,T=An.core.globals().ScrollSmoother,k=T&&T.get(),O=jh&&(e.content&&Ss(e.content)||k&&e.content!==!1&&!k.smooth()&&k.content()),L=np(S,Ra),H=np(S,as),G=1,V=(ha.isTouch&&Cr.visualViewport?Cr.visualViewport.scale*Cr.visualViewport.width:Cr.outerWidth)/Cr.innerWidth,I=0,K=Ro(o)?function(){return o(m)}:function(){return o||2.8},ue,P,ae=ife(S,e.type,!0,u),ge=function(){return P=!1},me=xc,J=xc,te=function(){b=Cc(S,Ra),J=bw(jh?1:0,b),r&&(me=bw(0,Cc(S,as))),ue=gg},oe=function(){O._gsap.y=lw(parseFloat(O._gsap.y)+L.offset)+"px",O.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(O._gsap.y)+", 0, 1)",L.offset=L.cacheID=0},Y=function(){if(P){requestAnimationFrame(ge);var Ue=lw(m.deltaY/2),Pt=J(L.v-Ue);if(O&&Pt!==L.v+L.offset){L.offset=Pt-L.v;var Me=lw((parseFloat(O&&O._gsap.y)||0)-L.offset);O.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Me+", 0, 1)",O._gsap.y=Me+"px",L.cacheID=Ar.cache,sf()}return!0}L.offset&&oe(),P=!0},ke,$e,ot,Qe,pe=function(){te(),ke.isActive()&&ke.vars.scrollY>b&&(L()>b?ke.progress(1)&&L(b):ke.resetTo("scrollY",b))};return O&&An.set(O,{y:"+=0"}),e.ignoreCheck=function(Ve){return jh&&Ve.type==="touchmove"&&Y()||G>1.05&&Ve.type!=="touchstart"||m.isGesturing||Ve.touches&&Ve.touches.length>1},e.onPress=function(){P=!1;var Ve=G;G=lw((Cr.visualViewport&&Cr.visualViewport.scale||1)/V),ke.pause(),Ve!==G&&q4(S,G>1.01?!0:r?!1:"x"),$e=H(),ot=L(),te(),ue=gg},e.onRelease=e.onGestureStart=function(Ve,Ue){if(L.offset&&oe(),!Ue)Qe.restart(!0);else{Ar.cache++;var Pt=K(),Me,Ot;r&&(Me=H(),Ot=Me+Pt*.05*-Ve.velocityX/.227,Pt*=Bue(H,Me,Ot,Cc(S,as)),ke.vars.scrollX=me(Ot)),Me=L(),Ot=Me+Pt*.05*-Ve.velocityY/.227,Pt*=Bue(L,Me,Ot,Cc(S,Ra)),ke.vars.scrollY=J(Ot),ke.invalidate().duration(Pt).play(.01),(jh&&ke.vars.scrollY>=b||Me>=b-1)&&An.to({},{onUpdate:pe,duration:Pt})}h&&h(Ve)},e.onWheel=function(){ke._ts&&ke.pause(),Ao()-I>1e3&&(ue=0,I=Ao())},e.onChange=function(Ve,Ue,Pt,Me,Ot){if(gg!==ue&&te(),Ue&&r&&H(me(Me[2]===Ue?$e+(Ve.startX-Ve.x):H()+Ue-Me[1])),Pt){L.offset&&oe();var Tn=Ot[2]===Pt,yn=Tn?ot+Ve.startY-Ve.y:L()+Pt-Ot[1],qn=J(yn);Tn&&yn!==qn&&(ot+=qn-yn),L(qn)}(Pt||Ue)&&sf()},e.onEnable=function(){q4(S,r?!1:"x"),kr.addEventListener("refresh",pe),Xa(Cr,"resize",pe),L.smooth&&(L.target.style.scrollBehavior="auto",L.smooth=H.smooth=!1),ae.enable()},e.onDisable=function(){q4(S,!0),qa(Cr,"resize",pe),kr.removeEventListener("refresh",pe),ae.kill()},e.lockAxis=e.lockAxis!==!1,m=new ha(e),m.iOS=jh,jh&&!L()&&L(1),jh&&An.ticker.add(xc),Qe=m._dc,ke=An.to(m,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:rfe(L,L(),function(){return ke.pause()})},onUpdate:sf,onComplete:Qe.vars.onComplete}),m};kr.sort=function(c){if(Ro(c))return Er.sort(c);var e=Cr.pageYOffset||0;return kr.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+Cr.innerHeight}),Er.sort(c||function(n,r){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((r.vars.containerAnimation?1e6:r._sortY)+(r.vars.refreshPriority||0)*-1e6)})};kr.observe=function(c){return new ha(c)};kr.normalizeScroll=function(c){if(typeof c>"u")return es;if(c===!0&&es)return es.enable();if(c===!1){es&&es.kill(),es=c;return}var e=c instanceof ha?c:QAe(c);return es&&es.target===e.target&&es.kill(),_g(e.target)&&(es=e),e};kr.core={_getVelocityProp:dj,_inputObserver:ife,_scrollers:Ar,_proxies:Ic,bridge:{ss:function(){Nl||bg("scrollStart"),Nl=Ao()},ref:function(){return Co}}};qde()&&An.registerPlugin(kr);Dde.registerPlugin(kr);class eke{constructor(e={}){this.enableStudio=e.enableStudio??!0,this.useState=!this.enableStudio,this.stateUrl=e.stateUrl,this.projectName=e.projectName??"WebGL Project",this.sheetName=e.sheetName??"Main Scene",this.sequenceLength=e.sequenceLength??10,this.project=null,this.sheet=null,this.state=null,this.objects=[]}async init(){if(this.useState)try{const e=await fetch(this.stateUrl);e.ok&&(this.state=await e.json())}catch(e){console.warn("Failed to load Theatre state:",e)}return I4.initialize(),this.enableStudio?I4.ui.restore():I4.ui.hide(),this.project=pCe.getProject(this.projectName,{state:this.state}),this.sheet=this.project.sheet(this.sheetName),await this.project.ready,this.sheet.sequence.length=this.sequenceLength,this}register(e,n,r,o){if(!this.sheet)return console.warn("Theatre.js is not initialized. Call init() first."),null;const u=this.sheet.object(n,r);return this.objects.push({name:n,target:e,theatreObj:u,update:o}),u.onValuesChange(h=>{o&&o(e,h)}),u}setupScrollTrigger(e={}){if(!this.sheet)return console.warn("Theatre.js is not initialized. Call init() first."),null;const n={trigger:document.body,start:"top top",end:"bottom bottom",scrub:1,markers:!1,...e};return kr.create({...n,onUpdate:o=>{const u=o.progress*this.sequenceLength;this.sheet.sequence.position=u,this.objects.forEach(h=>{const m=h.theatreObj.value;m&&h.update&&h.update(h.target,m)}),e.onUpdate&&e.onUpdate(o)}})}getObject(e){const n=this.objects.find(r=>r.name===e);return n?n.theatreObj:null}getAllObjects(){return this.objects}getProject(){return this.project}getSheet(){return this.sheet}}function Vue(c,e){if(e===f1e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),c;if(e===zz||e===uce){let n=c.getIndex();if(n===null){const h=[],m=c.getAttribute("position");if(m!==void 0){for(let b=0;b<m.count;b++)h.push(b);c.setIndex(h),n=c.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c}const r=n.count-2,o=[];if(e===zz)for(let h=1;h<=r;h++)o.push(n.getX(0)),o.push(n.getX(h)),o.push(n.getX(h+1));else for(let h=0;h<r;h++)h%2===0?(o.push(n.getX(h)),o.push(n.getX(h+1)),o.push(n.getX(h+2))):(o.push(n.getX(h+2)),o.push(n.getX(h+1)),o.push(n.getX(h)));o.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const u=c.clone();return u.setIndex(o),u.clearGroups(),u}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),c}class tke extends Sg{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new oke(n)}),this.register(function(n){return new ske(n)}),this.register(function(n){return new gke(n)}),this.register(function(n){return new vke(n)}),this.register(function(n){return new _ke(n)}),this.register(function(n){return new uke(n)}),this.register(function(n){return new cke(n)}),this.register(function(n){return new dke(n)}),this.register(function(n){return new fke(n)}),this.register(function(n){return new ake(n)}),this.register(function(n){return new hke(n)}),this.register(function(n){return new lke(n)}),this.register(function(n){return new mke(n)}),this.register(function(n){return new pke(n)}),this.register(function(n){return new rke(n)}),this.register(function(n){return new yke(n)}),this.register(function(n){return new bke(n)})}load(e,n,r,o){const u=this;let h;if(this.resourcePath!=="")h=this.resourcePath;else if(this.path!==""){const S=hw.extractUrlBase(e);h=hw.resolveURL(S,this.path)}else h=hw.extractUrlBase(e);this.manager.itemStart(e);const m=function(S){o?o(S):console.error(S),u.manager.itemError(e),u.manager.itemEnd(e)},b=new i3(this.manager);b.setPath(this.path),b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(e,function(S){try{u.parse(S,h,function(T){n(T),u.manager.itemEnd(e)},m)}catch(T){m(T)}},r,m)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,o){let u;const h={},m={},b=new TextDecoder;if(typeof e=="string")u=JSON.parse(e);else if(e instanceof ArrayBuffer)if(b.decode(new Uint8Array(e,0,4))===afe){try{h[Rr.KHR_BINARY_GLTF]=new xke(e)}catch(k){o&&o(k);return}u=JSON.parse(h[Rr.KHR_BINARY_GLTF].content)}else u=JSON.parse(b.decode(e));else u=e;if(u.asset===void 0||u.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const S=new Oke(u,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});S.fileLoader.setRequestHeader(this.requestHeader);for(let T=0;T<this.pluginCallbacks.length;T++){const k=this.pluginCallbacks[T](S);k.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),m[k.name]=k,h[k.name]=!0}if(u.extensionsUsed)for(let T=0;T<u.extensionsUsed.length;++T){const k=u.extensionsUsed[T],O=u.extensionsRequired||[];switch(k){case Rr.KHR_MATERIALS_UNLIT:h[k]=new ike;break;case Rr.KHR_DRACO_MESH_COMPRESSION:h[k]=new Ske(u,this.dracoLoader);break;case Rr.KHR_TEXTURE_TRANSFORM:h[k]=new wke;break;case Rr.KHR_MESH_QUANTIZATION:h[k]=new Eke;break;default:O.indexOf(k)>=0&&m[k]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+k+'".')}}S.setExtensions(h),S.setPlugins(m),S.parse(r,o)}parseAsync(e,n){const r=this;return new Promise(function(o,u){r.parse(e,n,o,u)})}}function nke(){let c={};return{get:function(e){return c[e]},add:function(e,n){c[e]=n},remove:function(e){delete c[e]},removeAll:function(){c={}}}}const Rr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class rke{constructor(e){this.parser=e,this.name=Rr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,o=n.length;r<o;r++){const u=n[r];u.extensions&&u.extensions[this.name]&&u.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,u.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let o=n.cache.get(r);if(o)return o;const u=n.json,b=((u.extensions&&u.extensions[this.name]||{}).lights||[])[e];let S;const T=new tr(16777215);b.color!==void 0&&T.setRGB(b.color[0],b.color[1],b.color[2],Oo);const k=b.range!==void 0?b.range:0;switch(b.type){case"directional":S=new Gz(T),S.target.position.set(0,0,-1),S.add(S.target);break;case"point":S=new USe(T),S.distance=k;break;case"spot":S=new LSe(T),S.distance=k,b.spot=b.spot||{},b.spot.innerConeAngle=b.spot.innerConeAngle!==void 0?b.spot.innerConeAngle:0,b.spot.outerConeAngle=b.spot.outerConeAngle!==void 0?b.spot.outerConeAngle:Math.PI/4,S.angle=b.spot.outerConeAngle,S.penumbra=1-b.spot.innerConeAngle/b.spot.outerConeAngle,S.target.position.set(0,0,-1),S.add(S.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+b.type)}return S.position.set(0,0,0),yc(S,b),b.intensity!==void 0&&(S.intensity=b.intensity),S.name=n.createUniqueName(b.name||"light_"+e),o=Promise.resolve(S),n.cache.add(r,o),o}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,u=r.json.nodes[e],m=(u.extensions&&u.extensions[this.name]||{}).light;return m===void 0?null:this._loadLight(m).then(function(b){return r._getNodeRef(n.cache,m,b)})}}class ike{constructor(){this.name=Rr.KHR_MATERIALS_UNLIT}getMaterialType(){return og}extendParams(e,n,r){const o=[];e.color=new tr(1,1,1),e.opacity=1;const u=n.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;e.color.setRGB(h[0],h[1],h[2],Oo),e.opacity=h[3]}u.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",u.baseColorTexture,da))}return Promise.all(o)}}class ake{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=o.extensions[this.name].emissiveStrength;return u!==void 0&&(n.emissiveIntensity=u),Promise.resolve()}}class oke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];if(h.clearcoatFactor!==void 0&&(n.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&u.push(r.assignTexture(n,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&u.push(r.assignTexture(n,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(u.push(r.assignTexture(n,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const m=h.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new gr(m,m)}return Promise.all(u)}}class ske{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=o.extensions[this.name];return n.dispersion=u.dispersion!==void 0?u.dispersion:0,Promise.resolve()}}class lke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];return h.iridescenceFactor!==void 0&&(n.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&u.push(r.assignTexture(n,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(n.iridescenceIOR=h.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&u.push(r.assignTexture(n,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(u)}}class uke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[];n.sheenColor=new tr(0,0,0),n.sheenRoughness=0,n.sheen=1;const h=o.extensions[this.name];if(h.sheenColorFactor!==void 0){const m=h.sheenColorFactor;n.sheenColor.setRGB(m[0],m[1],m[2],Oo)}return h.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&u.push(r.assignTexture(n,"sheenColorMap",h.sheenColorTexture,da)),h.sheenRoughnessTexture!==void 0&&u.push(r.assignTexture(n,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(u)}}class cke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];return h.transmissionFactor!==void 0&&(n.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&u.push(r.assignTexture(n,"transmissionMap",h.transmissionTexture)),Promise.all(u)}}class dke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];n.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&u.push(r.assignTexture(n,"thicknessMap",h.thicknessTexture)),n.attenuationDistance=h.attenuationDistance||1/0;const m=h.attenuationColor||[1,1,1];return n.attenuationColor=new tr().setRGB(m[0],m[1],m[2],Oo),Promise.all(u)}}class fke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=o.extensions[this.name];return n.ior=u.ior!==void 0?u.ior:1.5,Promise.resolve()}}class hke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];n.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&u.push(r.assignTexture(n,"specularIntensityMap",h.specularTexture));const m=h.specularColorFactor||[1,1,1];return n.specularColor=new tr().setRGB(m[0],m[1],m[2],Oo),h.specularColorTexture!==void 0&&u.push(r.assignTexture(n,"specularColorMap",h.specularColorTexture,da)),Promise.all(u)}}class pke{constructor(e){this.parser=e,this.name=Rr.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];return n.bumpScale=h.bumpFactor!==void 0?h.bumpFactor:1,h.bumpTexture!==void 0&&u.push(r.assignTexture(n,"bumpMap",h.bumpTexture)),Promise.all(u)}}class mke{constructor(e){this.parser=e,this.name=Rr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Uc}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const u=[],h=o.extensions[this.name];return h.anisotropyStrength!==void 0&&(n.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(n.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&u.push(r.assignTexture(n,"anisotropyMap",h.anisotropyTexture)),Promise.all(u)}}class gke{constructor(e){this.parser=e,this.name=Rr.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const u=o.extensions[this.name],h=n.options.ktx2Loader;if(!h){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,u.source,h)}}class vke{constructor(e){this.parser=e,this.name=Rr.EXT_TEXTURE_WEBP}loadTexture(e){const n=this.name,r=this.parser,o=r.json,u=o.textures[e];if(!u.extensions||!u.extensions[n])return null;const h=u.extensions[n],m=o.images[h.source];let b=r.textureLoader;if(m.uri){const S=r.options.manager.getHandler(m.uri);S!==null&&(b=S)}return r.loadTextureImage(e,h.source,b)}}class _ke{constructor(e){this.parser=e,this.name=Rr.EXT_TEXTURE_AVIF}loadTexture(e){const n=this.name,r=this.parser,o=r.json,u=o.textures[e];if(!u.extensions||!u.extensions[n])return null;const h=u.extensions[n],m=o.images[h.source];let b=r.textureLoader;if(m.uri){const S=r.options.manager.getHandler(m.uri);S!==null&&(b=S)}return r.loadTextureImage(e,h.source,b)}}class yke{constructor(e){this.name=Rr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],u=this.parser.getDependency("buffer",o.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return u.then(function(m){const b=o.byteOffset||0,S=o.byteLength||0,T=o.count,k=o.byteStride,O=new Uint8Array(m,b,S);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(T,k,O,o.mode,o.filter).then(function(L){return L.buffer}):h.ready.then(function(){const L=new ArrayBuffer(T*k);return h.decodeGltfBuffer(new Uint8Array(L),T,k,O,o.mode,o.filter),L})})}else return null}}class bke{constructor(e){this.name=Rr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const o=n.meshes[r.mesh];for(const S of o.primitives)if(S.mode!==Cl.TRIANGLES&&S.mode!==Cl.TRIANGLE_STRIP&&S.mode!==Cl.TRIANGLE_FAN&&S.mode!==void 0)return null;const h=r.extensions[this.name].attributes,m=[],b={};for(const S in h)m.push(this.parser.getDependency("accessor",h[S]).then(T=>(b[S]=T,b[S])));return m.length<1?null:(m.push(this.parser.createNodeMesh(e)),Promise.all(m).then(S=>{const T=S.pop(),k=T.isGroup?T.children:[T],O=S[0].count,L=[];for(const H of k){const G=new vr,V=new Xe,I=new Oc,K=new Xe(1,1,1),ue=new fSe(H.geometry,H.material,O);for(let P=0;P<O;P++)b.TRANSLATION&&V.fromBufferAttribute(b.TRANSLATION,P),b.ROTATION&&I.fromBufferAttribute(b.ROTATION,P),b.SCALE&&K.fromBufferAttribute(b.SCALE,P),ue.setMatrixAt(P,G.compose(V,I,K));for(const P in b)if(P==="_COLOR_0"){const ae=b[P];ue.instanceColor=new Vz(ae.array,ae.itemSize,ae.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&H.geometry.setAttribute(P,b[P]);$i.prototype.copy.call(ue,H),this.parser.assignFinalMaterial(ue),L.push(ue)}return T.isGroup?(T.clear(),T.add(...L),T):L[0]}))}}const afe="glTF",JS=12,Hue={JSON:1313821514,BIN:5130562};class xke{constructor(e){this.name=Rr.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,JS),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==afe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-JS,u=new DataView(e,JS);let h=0;for(;h<o;){const m=u.getUint32(h,!0);h+=4;const b=u.getUint32(h,!0);if(h+=4,b===Hue.JSON){const S=new Uint8Array(e,JS+h,m);this.content=r.decode(S)}else if(b===Hue.BIN){const S=JS+h;this.body=e.slice(S,S+m)}h+=m}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ske{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,o=this.dracoLoader,u=e.extensions[this.name].bufferView,h=e.extensions[this.name].attributes,m={},b={},S={};for(const T in h){const k=yj[T]||T.toLowerCase();m[k]=h[T]}for(const T in e.attributes){const k=yj[T]||T.toLowerCase();if(h[T]!==void 0){const O=r.accessors[e.attributes[T]],L=uy[O.componentType];S[k]=L.name,b[k]=O.normalized===!0}}return n.getDependency("bufferView",u).then(function(T){return new Promise(function(k,O){o.decodeDracoFile(T,function(L){for(const H in L.attributes){const G=L.attributes[H],V=b[H];V!==void 0&&(G.normalized=V)}k(L)},m,S,Oo,O)})})}}class wke{constructor(){this.name=Rr.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Eke{constructor(){this.name=Rr.KHR_MESH_QUANTIZATION}}class ofe extends Gw{constructor(e,n,r,o){super(e,n,r,o)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,o=this.valueSize,u=e*o*3+o;for(let h=0;h!==o;h++)n[h]=r[u+h];return n}interpolate_(e,n,r,o){const u=this.resultBuffer,h=this.sampleValues,m=this.valueSize,b=m*2,S=m*3,T=o-n,k=(r-n)/T,O=k*k,L=O*k,H=e*S,G=H-S,V=-2*L+3*O,I=L-O,K=1-V,ue=I-O+k;for(let P=0;P!==m;P++){const ae=h[G+P+m],ge=h[G+P+b]*T,me=h[H+P+m],J=h[H+P]*T;u[P]=K*ae+ue*ge+V*me+I*J}return u}}const Tke=new Oc;class Mke extends ofe{interpolate_(e,n,r,o){const u=super.interpolate_(e,n,r,o);return Tke.fromArray(u).normalize().toArray(u),u}}const Cl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},uy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Gue={9728:Da,9729:fa,9984:nce,9985:LI,9986:ew,9987:tf},Wue={33071:Tc,33648:ZI,10497:rs},X4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yj={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Pke={CUBICSPLINE:void 0,LINEAR:kw,STEP:Aw},K4={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Cke(c){return c.DefaultMaterial===void 0&&(c.DefaultMaterial=new Bj({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Rc})),c.DefaultMaterial}function Qm(c,e,n){for(const r in n.extensions)c[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function yc(c,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(c.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ake(c,e,n){let r=!1,o=!1,u=!1;for(let S=0,T=e.length;S<T;S++){const k=e[S];if(k.POSITION!==void 0&&(r=!0),k.NORMAL!==void 0&&(o=!0),k.COLOR_0!==void 0&&(u=!0),r&&o&&u)break}if(!r&&!o&&!u)return Promise.resolve(c);const h=[],m=[],b=[];for(let S=0,T=e.length;S<T;S++){const k=e[S];if(r){const O=k.POSITION!==void 0?n.getDependency("accessor",k.POSITION):c.attributes.position;h.push(O)}if(o){const O=k.NORMAL!==void 0?n.getDependency("accessor",k.NORMAL):c.attributes.normal;m.push(O)}if(u){const O=k.COLOR_0!==void 0?n.getDependency("accessor",k.COLOR_0):c.attributes.color;b.push(O)}}return Promise.all([Promise.all(h),Promise.all(m),Promise.all(b)]).then(function(S){const T=S[0],k=S[1],O=S[2];return r&&(c.morphAttributes.position=T),o&&(c.morphAttributes.normal=k),u&&(c.morphAttributes.color=O),c.morphTargetsRelative=!0,c})}function kke(c,e){if(c.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)c.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(c.morphTargetInfluences.length===n.length){c.morphTargetDictionary={};for(let r=0,o=n.length;r<o;r++)c.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ike(c){let e;const n=c.extensions&&c.extensions[Rr.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+Y4(n.attributes):e=c.indices+":"+Y4(c.attributes)+":"+c.mode,c.targets!==void 0)for(let r=0,o=c.targets.length;r<o;r++)e+=":"+Y4(c.targets[r]);return e}function Y4(c){let e="";const n=Object.keys(c).sort();for(let r=0,o=n.length;r<o;r++)e+=n[r]+":"+c[n[r]]+";";return e}function bj(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rke(c){return c.search(/\.jpe?g($|\?)/i)>0||c.search(/^data\:image\/jpeg/)===0?"image/jpeg":c.search(/\.webp($|\?)/i)>0||c.search(/^data\:image\/webp/)===0?"image/webp":c.search(/\.ktx2($|\?)/i)>0||c.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const Dke=new vr;class Oke{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new nke,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,o=-1,u=!1,h=-1;if(typeof navigator<"u"){const m=navigator.userAgent;r=/^((?!chrome|android).)*safari/i.test(m)===!0;const b=m.match(/Version\/(\d+)/);o=r&&b?parseInt(b[1],10):-1,u=m.indexOf("Firefox")>-1,h=u?m.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||r&&o<17||u&&h<98?this.textureLoader=new a3(this.options.manager):this.textureLoader=new jSe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i3(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,o=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(h){const m={scene:h[0][o.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:o.asset,parser:r,userData:{}};return Qm(u,m,o),yc(m,o),Promise.all(r._invokeAll(function(b){return b.afterRoot&&b.afterRoot(m)})).then(function(){for(const b of m.scenes)b.updateMatrixWorld();e(m)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let o=0,u=n.length;o<u;o++){const h=n[o].joints;for(let m=0,b=h.length;m<b;m++)e[h[m]].isBone=!0}for(let o=0,u=e.length;o<u;o++){const h=e[o];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(r[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const o=r.clone(),u=(h,m)=>{const b=this.associations.get(h);b!=null&&this.associations.set(m,b);for(const[S,T]of h.children.entries())u(T,m.children[S])};return u(r,o),o.name+="_instance_"+e.uses[n]++,o}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const o=e(n[r]);if(o)return o}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let o=0;o<n.length;o++){const u=e(n[o]);u&&r.push(u)}return r}getDependency(e,n){const r=e+":"+n;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(u){return u.loadNode&&u.loadNode(n)});break;case"mesh":o=this._invokeOne(function(u){return u.loadMesh&&u.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(u){return u.loadBufferView&&u.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(u){return u.loadMaterial&&u.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(u){return u.loadTexture&&u.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(u){return u.loadAnimation&&u.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(u){return u!=this&&u.getDependency&&u.getDependency(e,n)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(r,o)}return o}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(u,h){return r.getDependency(e,h)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Rr.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(u,h){r.load(hw.resolveURL(n.uri,o.path),u,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const o=n.byteLength||0,u=n.byteOffset||0;return r.slice(u,u+o)})}loadAccessor(e){const n=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){const h=X4[o.type],m=uy[o.componentType],b=o.normalized===!0,S=new m(o.count*h);return Promise.resolve(new ho(S,h,b))}const u=[];return o.bufferView!==void 0?u.push(this.getDependency("bufferView",o.bufferView)):u.push(null),o.sparse!==void 0&&(u.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(u).then(function(h){const m=h[0],b=X4[o.type],S=uy[o.componentType],T=S.BYTES_PER_ELEMENT,k=T*b,O=o.byteOffset||0,L=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,H=o.normalized===!0;let G,V;if(L&&L!==k){const I=Math.floor(O/L),K="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+I+":"+o.count;let ue=n.cache.get(K);ue||(G=new S(m,I*L,o.count*L/T),ue=new Sce(G,L/T),n.cache.add(K,ue)),V=new _3(ue,b,O%L/T,H)}else m===null?G=new S(o.count*b):G=new S(m,O,o.count*b),V=new ho(G,b,H);if(o.sparse!==void 0){const I=X4.SCALAR,K=uy[o.sparse.indices.componentType],ue=o.sparse.indices.byteOffset||0,P=o.sparse.values.byteOffset||0,ae=new K(h[1],ue,o.sparse.count*I),ge=new S(h[2],P,o.sparse.count*b);m!==null&&(V=new ho(V.array.slice(),V.itemSize,V.normalized)),V.normalized=!1;for(let me=0,J=ae.length;me<J;me++){const te=ae[me];if(V.setX(te,ge[me*b]),b>=2&&V.setY(te,ge[me*b+1]),b>=3&&V.setZ(te,ge[me*b+2]),b>=4&&V.setW(te,ge[me*b+3]),b>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}V.normalized=H}return V})}loadTexture(e){const n=this.json,r=this.options,u=n.textures[e].source,h=n.images[u];let m=this.textureLoader;if(h.uri){const b=r.manager.getHandler(h.uri);b!==null&&(m=b)}return this.loadTextureImage(e,u,m)}loadTextureImage(e,n,r){const o=this,u=this.json,h=u.textures[e],m=u.images[n],b=(m.uri||m.bufferView)+":"+h.sampler;if(this.textureCache[b])return this.textureCache[b];const S=this.loadImageSource(n,r).then(function(T){T.flipY=!1,T.name=h.name||m.name||"",T.name===""&&typeof m.uri=="string"&&m.uri.startsWith("data:image/")===!1&&(T.name=m.uri);const O=(u.samplers||{})[h.sampler]||{};return T.magFilter=Gue[O.magFilter]||fa,T.minFilter=Gue[O.minFilter]||tf,T.wrapS=Wue[O.wrapS]||rs,T.wrapT=Wue[O.wrapT]||rs,T.generateMipmaps=!T.isCompressedTexture&&T.minFilter!==Da&&T.minFilter!==fa,o.associations.set(T,{textures:e}),T}).catch(function(){return null});return this.textureCache[b]=S,S}loadImageSource(e,n){const r=this,o=this.json,u=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(k=>k.clone());const h=o.images[e],m=self.URL||self.webkitURL;let b=h.uri||"",S=!1;if(h.bufferView!==void 0)b=r.getDependency("bufferView",h.bufferView).then(function(k){S=!0;const O=new Blob([k],{type:h.mimeType});return b=m.createObjectURL(O),b});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const T=Promise.resolve(b).then(function(k){return new Promise(function(O,L){let H=O;n.isImageBitmapLoader===!0&&(H=function(G){const V=new Ka(G);V.needsUpdate=!0,O(V)}),n.load(hw.resolveURL(k,u.path),H,void 0,L)})}).then(function(k){return S===!0&&m.revokeObjectURL(b),yc(k,h),k.userData.mimeType=h.mimeType||Rke(h.uri),k}).catch(function(k){throw console.error("THREE.GLTFLoader: Couldn't load texture",b),k});return this.sourceCache[e]=T,T}assignTexture(e,n,r,o){const u=this;return this.getDependency("texture",r.index).then(function(h){if(!h)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(h=h.clone(),h.channel=r.texCoord),u.extensions[Rr.KHR_TEXTURE_TRANSFORM]){const m=r.extensions!==void 0?r.extensions[Rr.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const b=u.associations.get(h);h=u.extensions[Rr.KHR_TEXTURE_TRANSFORM].extendTexture(h,m),u.associations.set(h,b)}}return o!==void 0&&(h.colorSpace=o),e[n]=h,h})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const o=n.attributes.tangent===void 0,u=n.attributes.color!==void 0,h=n.attributes.normal===void 0;if(e.isPoints){const m="PointsMaterial:"+r.uuid;let b=this.cache.get(m);b||(b=new Tce,kc.prototype.copy.call(b,r),b.color.copy(r.color),b.map=r.map,b.sizeAttenuation=!1,this.cache.add(m,b)),r=b}else if(e.isLine){const m="LineBasicMaterial:"+r.uuid;let b=this.cache.get(m);b||(b=new Ece,kc.prototype.copy.call(b,r),b.color.copy(r.color),b.map=r.map,this.cache.add(m,b)),r=b}if(o||u||h){let m="ClonedMaterial:"+r.uuid+":";o&&(m+="derivative-tangents:"),u&&(m+="vertex-colors:"),h&&(m+="flat-shading:");let b=this.cache.get(m);b||(b=r.clone(),u&&(b.vertexColors=!0),h&&(b.flatShading=!0),o&&(b.normalScale&&(b.normalScale.y*=-1),b.clearcoatNormalScale&&(b.clearcoatNormalScale.y*=-1)),this.cache.add(m,b),this.associations.set(b,this.associations.get(r))),r=b}e.material=r}getMaterialType(){return Bj}loadMaterial(e){const n=this,r=this.json,o=this.extensions,u=r.materials[e];let h;const m={},b=u.extensions||{},S=[];if(b[Rr.KHR_MATERIALS_UNLIT]){const k=o[Rr.KHR_MATERIALS_UNLIT];h=k.getMaterialType(),S.push(k.extendParams(m,u,n))}else{const k=u.pbrMetallicRoughness||{};if(m.color=new tr(1,1,1),m.opacity=1,Array.isArray(k.baseColorFactor)){const O=k.baseColorFactor;m.color.setRGB(O[0],O[1],O[2],Oo),m.opacity=O[3]}k.baseColorTexture!==void 0&&S.push(n.assignTexture(m,"map",k.baseColorTexture,da)),m.metalness=k.metallicFactor!==void 0?k.metallicFactor:1,m.roughness=k.roughnessFactor!==void 0?k.roughnessFactor:1,k.metallicRoughnessTexture!==void 0&&(S.push(n.assignTexture(m,"metalnessMap",k.metallicRoughnessTexture)),S.push(n.assignTexture(m,"roughnessMap",k.metallicRoughnessTexture))),h=this._invokeOne(function(O){return O.getMaterialType&&O.getMaterialType(e)}),S.push(Promise.all(this._invokeAll(function(O){return O.extendMaterialParams&&O.extendMaterialParams(e,m)})))}u.doubleSided===!0&&(m.side=wc);const T=u.alphaMode||K4.OPAQUE;if(T===K4.BLEND?(m.transparent=!0,m.depthWrite=!1):(m.transparent=!1,T===K4.MASK&&(m.alphaTest=u.alphaCutoff!==void 0?u.alphaCutoff:.5)),u.normalTexture!==void 0&&h!==og&&(S.push(n.assignTexture(m,"normalMap",u.normalTexture)),m.normalScale=new gr(1,1),u.normalTexture.scale!==void 0)){const k=u.normalTexture.scale;m.normalScale.set(k,k)}if(u.occlusionTexture!==void 0&&h!==og&&(S.push(n.assignTexture(m,"aoMap",u.occlusionTexture)),u.occlusionTexture.strength!==void 0&&(m.aoMapIntensity=u.occlusionTexture.strength)),u.emissiveFactor!==void 0&&h!==og){const k=u.emissiveFactor;m.emissive=new tr().setRGB(k[0],k[1],k[2],Oo)}return u.emissiveTexture!==void 0&&h!==og&&S.push(n.assignTexture(m,"emissiveMap",u.emissiveTexture,da)),Promise.all(S).then(function(){const k=new h(m);return u.name&&(k.name=u.name),yc(k,u),n.associations.set(k,{materials:e}),u.extensions&&Qm(o,k,u),k})}createUniqueName(e){const n=si.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,o=this.primitiveCache;function u(m){return r[Rr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(m,n).then(function(b){return que(b,m,n)})}const h=[];for(let m=0,b=e.length;m<b;m++){const S=e[m],T=Ike(S),k=o[T];if(k)h.push(k.promise);else{let O;S.extensions&&S.extensions[Rr.KHR_DRACO_MESH_COMPRESSION]?O=u(S):O=que(new ol,S,n),o[T]={primitive:S,promise:O},h.push(O)}}return Promise.all(h)}loadMesh(e){const n=this,r=this.json,o=this.extensions,u=r.meshes[e],h=u.primitives,m=[];for(let b=0,S=h.length;b<S;b++){const T=h[b].material===void 0?Cke(this.cache):this.getDependency("material",h[b].material);m.push(T)}return m.push(n.loadGeometries(h)),Promise.all(m).then(function(b){const S=b.slice(0,b.length-1),T=b[b.length-1],k=[];for(let L=0,H=T.length;L<H;L++){const G=T[L],V=h[L];let I;const K=S[L];if(V.mode===Cl.TRIANGLES||V.mode===Cl.TRIANGLE_STRIP||V.mode===Cl.TRIANGLE_FAN||V.mode===void 0)I=u.isSkinnedMesh===!0?new uSe(G,K):new No(G,K),I.isSkinnedMesh===!0&&I.normalizeSkinWeights(),V.mode===Cl.TRIANGLE_STRIP?I.geometry=Vue(I.geometry,uce):V.mode===Cl.TRIANGLE_FAN&&(I.geometry=Vue(I.geometry,zz));else if(V.mode===Cl.LINES)I=new gSe(G,K);else if(V.mode===Cl.LINE_STRIP)I=new Uj(G,K);else if(V.mode===Cl.LINE_LOOP)I=new vSe(G,K);else if(V.mode===Cl.POINTS)I=new _Se(G,K);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+V.mode);Object.keys(I.geometry.morphAttributes).length>0&&kke(I,u),I.name=n.createUniqueName(u.name||"mesh_"+e),yc(I,u),V.extensions&&Qm(o,I,V),n.assignFinalMaterial(I),k.push(I)}for(let L=0,H=k.length;L<H;L++)n.associations.set(k[L],{meshes:e,primitives:L});if(k.length===1)return u.extensions&&Qm(o,k[0],u),k[0];const O=new Hh;u.extensions&&Qm(o,O,u),n.associations.set(O,{meshes:e});for(let L=0,H=k.length;L<H;L++)O.add(k[L]);return O})}loadCamera(e){let n;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new ko(ug.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(n=new Ww(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),yc(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let o=0,u=n.joints.length;o<u;o++)r.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(o){const u=o.pop(),h=o,m=[],b=[];for(let S=0,T=h.length;S<T;S++){const k=h[S];if(k){m.push(k);const O=new vr;u!==null&&O.fromArray(u.array,S*16),b.push(O)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[S])}return new Lj(m,b)})}loadAnimation(e){const n=this.json,r=this,o=n.animations[e],u=o.name?o.name:"animation_"+e,h=[],m=[],b=[],S=[],T=[];for(let k=0,O=o.channels.length;k<O;k++){const L=o.channels[k],H=o.samplers[L.sampler],G=L.target,V=G.node,I=o.parameters!==void 0?o.parameters[H.input]:H.input,K=o.parameters!==void 0?o.parameters[H.output]:H.output;G.node!==void 0&&(h.push(this.getDependency("node",V)),m.push(this.getDependency("accessor",I)),b.push(this.getDependency("accessor",K)),S.push(H),T.push(G))}return Promise.all([Promise.all(h),Promise.all(m),Promise.all(b),Promise.all(S),Promise.all(T)]).then(function(k){const O=k[0],L=k[1],H=k[2],G=k[3],V=k[4],I=[];for(let ue=0,P=O.length;ue<P;ue++){const ae=O[ue],ge=L[ue],me=H[ue],J=G[ue],te=V[ue];if(ae===void 0)continue;ae.updateMatrix&&ae.updateMatrix();const oe=r._createAnimationTracks(ae,ge,me,J,te);if(oe)for(let Y=0;Y<oe.length;Y++)I.push(oe[Y])}const K=new CSe(u,void 0,I);return yc(K,o),K})}createNodeMesh(e){const n=this.json,r=this,o=n.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(u){const h=r._getNodeRef(r.meshCache,o.mesh,u);return o.weights!==void 0&&h.traverse(function(m){if(m.isMesh)for(let b=0,S=o.weights.length;b<S;b++)m.morphTargetInfluences[b]=o.weights[b]}),h})}loadNode(e){const n=this.json,r=this,o=n.nodes[e],u=r._loadNodeShallow(e),h=[],m=o.children||[];for(let S=0,T=m.length;S<T;S++)h.push(r.getDependency("node",m[S]));const b=o.skin===void 0?Promise.resolve(null):r.getDependency("skin",o.skin);return Promise.all([u,Promise.all(h),b]).then(function(S){const T=S[0],k=S[1],O=S[2];O!==null&&T.traverse(function(L){L.isSkinnedMesh&&L.bind(O,Dke)});for(let L=0,H=k.length;L<H;L++)T.add(k[L]);return T})}_loadNodeShallow(e){const n=this.json,r=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const u=n.nodes[e],h=u.name?o.createUniqueName(u.name):"",m=[],b=o._invokeOne(function(S){return S.createNodeMesh&&S.createNodeMesh(e)});return b&&m.push(b),u.camera!==void 0&&m.push(o.getDependency("camera",u.camera).then(function(S){return o._getNodeRef(o.cameraCache,u.camera,S)})),o._invokeAll(function(S){return S.createNodeAttachment&&S.createNodeAttachment(e)}).forEach(function(S){m.push(S)}),this.nodeCache[e]=Promise.all(m).then(function(S){let T;if(u.isBone===!0?T=new wce:S.length>1?T=new Hh:S.length===1?T=S[0]:T=new $i,T!==S[0])for(let k=0,O=S.length;k<O;k++)T.add(S[k]);if(u.name&&(T.userData.name=u.name,T.name=h),yc(T,u),u.extensions&&Qm(r,T,u),u.matrix!==void 0){const k=new vr;k.fromArray(u.matrix),T.applyMatrix4(k)}else u.translation!==void 0&&T.position.fromArray(u.translation),u.rotation!==void 0&&T.quaternion.fromArray(u.rotation),u.scale!==void 0&&T.scale.fromArray(u.scale);if(!o.associations.has(T))o.associations.set(T,{});else if(u.mesh!==void 0&&o.meshCache.refs[u.mesh]>1){const k=o.associations.get(T);o.associations.set(T,{...k})}return o.associations.get(T).nodes=e,T}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],o=this,u=new Hh;r.name&&(u.name=o.createUniqueName(r.name)),yc(u,r),r.extensions&&Qm(n,u,r);const h=r.nodes||[],m=[];for(let b=0,S=h.length;b<S;b++)m.push(o.getDependency("node",h[b]));return Promise.all(m).then(function(b){for(let T=0,k=b.length;T<k;T++)u.add(b[T]);const S=T=>{const k=new Map;for(const[O,L]of o.associations)(O instanceof kc||O instanceof Ka)&&k.set(O,L);return T.traverse(O=>{const L=o.associations.get(O);L!=null&&k.set(O,L)}),k};return o.associations=S(u),u})}_createAnimationTracks(e,n,r,o,u){const h=[],m=e.name?e.name:e.uuid,b=[];zh[u.path]===zh.weights?e.traverse(function(O){O.morphTargetInfluences&&b.push(O.name?O.name:O.uuid)}):b.push(m);let S;switch(zh[u.path]){case zh.weights:S=my;break;case zh.rotation:S=gy;break;case zh.translation:case zh.scale:S=vy;break;default:r.itemSize===1?S=my:S=vy;break}const T=o.interpolation!==void 0?Pke[o.interpolation]:kw,k=this._getArrayFromAccessor(r);for(let O=0,L=b.length;O<L;O++){const H=new S(b[O]+"."+zh[u.path],n.array,k,T);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(H),h.push(H)}return h}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const r=bj(n.constructor),o=new Float32Array(n.length);for(let u=0,h=n.length;u<h;u++)o[u]=n[u]*r;n=o}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const o=this instanceof gy?Mke:ofe;return new o(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Nke(c,e,n){const r=e.attributes,o=new ff;if(r.POSITION!==void 0){const m=n.json.accessors[r.POSITION],b=m.min,S=m.max;if(b!==void 0&&S!==void 0){if(o.set(new Xe(b[0],b[1],b[2]),new Xe(S[0],S[1],S[2])),m.normalized){const T=bj(uy[m.componentType]);o.min.multiplyScalar(T),o.max.multiplyScalar(T)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const u=e.targets;if(u!==void 0){const m=new Xe,b=new Xe;for(let S=0,T=u.length;S<T;S++){const k=u[S];if(k.POSITION!==void 0){const O=n.json.accessors[k.POSITION],L=O.min,H=O.max;if(L!==void 0&&H!==void 0){if(b.setX(Math.max(Math.abs(L[0]),Math.abs(H[0]))),b.setY(Math.max(Math.abs(L[1]),Math.abs(H[1]))),b.setZ(Math.max(Math.abs(L[2]),Math.abs(H[2]))),O.normalized){const G=bj(uy[O.componentType]);b.multiplyScalar(G)}m.max(b)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(m)}c.boundingBox=o;const h=new Fc;o.getCenter(h.center),h.radius=o.min.distanceTo(o.max)/2,c.boundingSphere=h}function que(c,e,n){const r=e.attributes,o=[];function u(h,m){return n.getDependency("accessor",h).then(function(b){c.setAttribute(m,b)})}for(const h in r){const m=yj[h]||h.toLowerCase();m in c.attributes||o.push(u(r[h],m))}if(e.indices!==void 0&&!c.index){const h=n.getDependency("accessor",e.indices).then(function(m){c.setIndex(m)});o.push(h)}return Or.workingColorSpace!==Oo&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Or.workingColorSpace}" not supported.`),yc(c,e),Nke(c,e,n),Promise.all(o).then(function(){return e.targets!==void 0?Ake(c,e.targets,n):c})}const $4=new WeakMap;class Lke extends Sg{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,o){const u=new i3(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,h=>{this.parse(h,n,o)},r,o)}parse(e,n,r=()=>{}){this.decodeDracoFile(e,n,null,null,da,r).catch(r)}decodeDracoFile(e,n,r,o,u=Oo,h=()=>{}){const m={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!r,vertexColorSpace:u};return this.decodeGeometry(e,m).then(n).catch(h)}decodeGeometry(e,n){const r=JSON.stringify(n);if($4.has(e)){const b=$4.get(e);if(b.key===r)return b.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const u=this.workerNextTaskID++,h=e.byteLength,m=this._getWorker(u,h).then(b=>(o=b,new Promise((S,T)=>{o._callbacks[u]={resolve:S,reject:T},o.postMessage({type:"decode",id:u,taskConfig:n,buffer:e},[e])}))).then(b=>this._createGeometry(b.geometry));return m.catch(()=>!0).then(()=>{o&&u&&this._releaseTask(o,u)}),$4.set(e,{key:r,promise:m}),m}_createGeometry(e){const n=new ol;e.index&&n.setIndex(new ho(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const{name:o,array:u,itemSize:h,stride:m,vertexColorSpace:b}=e.attributes[r];let S;if(h===m)S=new ho(u,h);else{const T=new Sce(u,m);S=new _3(T,h,0)}o==="color"&&(this._assignVertexColorSpace(S,b),S.normalized=!(u instanceof Float32Array)),n.setAttribute(o,S)}return n}_assignVertexColorSpace(e,n){if(n!==da)return;const r=new tr;for(let o=0,u=e.count;o<u;o++)r.fromBufferAttribute(e,o),Or.colorSpaceToWorking(r,da),e.setXYZ(o,r.r,r.g,r.b)}_loadLibrary(e,n){const r=new i3(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((o,u)=>{r.load(e,o,void 0,u)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const o=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const u=Fke.toString(),h=["/* draco decoder */",o,"","/* worker */",u.substring(u.indexOf("{")+1,u.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(u){const h=u.data;switch(h.type){case"decode":o._callbacks[h.id].resolve(h);break;case"error":o._callbacks[h.id].reject(h);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,u){return o._taskLoad>u._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Fke(){let c,e;onmessage=function(h){const m=h.data;switch(m.type){case"init":c=m.decoderConfig,e=new Promise(function(T){c.onModuleLoaded=function(k){T({draco:k})},DracoDecoderModule(c)});break;case"decode":const b=m.buffer,S=m.taskConfig;e.then(T=>{const k=T.draco,O=new k.Decoder;try{const L=n(k,O,new Int8Array(b),S),H=L.attributes.map(G=>G.array.buffer);L.index&&H.push(L.index.array.buffer),self.postMessage({type:"decode",id:m.id,geometry:L},H)}catch(L){console.error(L),self.postMessage({type:"error",id:m.id,error:L.message})}finally{k.destroy(O)}});break}};function n(h,m,b,S){const T=S.attributeIDs,k=S.attributeTypes;let O,L;const H=m.GetEncodedGeometryType(b);if(H===h.TRIANGULAR_MESH)O=new h.Mesh,L=m.DecodeArrayToMesh(b,b.byteLength,O);else if(H===h.POINT_CLOUD)O=new h.PointCloud,L=m.DecodeArrayToPointCloud(b,b.byteLength,O);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!L.ok()||O.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+L.error_msg());const G={index:null,attributes:[]};for(const V in T){const I=self[k[V]];let K,ue;if(S.useUniqueIDs)ue=T[V],K=m.GetAttributeByUniqueId(O,ue);else{if(ue=m.GetAttributeId(O,h[T[V]]),ue===-1)continue;K=m.GetAttribute(O,ue)}const P=o(h,m,O,V,I,K);V==="color"&&(P.vertexColorSpace=S.vertexColorSpace),G.attributes.push(P)}return H===h.TRIANGULAR_MESH&&(G.index=r(h,m,O)),h.destroy(O),G}function r(h,m,b){const T=b.num_faces()*3,k=T*4,O=h._malloc(k);m.GetTrianglesUInt32Array(b,k,O);const L=new Uint32Array(h.HEAPF32.buffer,O,T).slice();return h._free(O),{array:L,itemSize:1}}function o(h,m,b,S,T,k){const O=b.num_points(),L=k.num_components(),H=u(h,T),G=L*T.BYTES_PER_ELEMENT,V=Math.ceil(G/4)*4,I=V/T.BYTES_PER_ELEMENT,K=O*G,ue=O*V,P=h._malloc(K);m.GetAttributeDataArrayForAllPoints(b,k,H,K,P);const ae=new T(h.HEAPF32.buffer,P,K/T.BYTES_PER_ELEMENT);let ge;if(G===V)ge=ae.slice();else{ge=new T(ue/T.BYTES_PER_ELEMENT);let me=0;for(let J=0,te=ae.length;J<te;J++){for(let oe=0;oe<L;oe++)ge[me+oe]=ae[J*L+oe];me+=I}}return h._free(P),{name:S,count:O,itemSize:L,array:ge,stride:I}}function u(h,m){switch(m){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}class Uke{constructor(e){this.modelPath=e,this.model=null,this.loader=new tke,this.isLoaded=!1;const n=new Lke;n.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),this.loader.setDRACOLoader(n)}async load(){return new Promise((e,n)=>{this.loader.load(this.modelPath,r=>{this.model=r,this.isLoaded=!0,e(r)},void 0,r=>{console.error("Error loading model:",r),n(r)})})}update(){this.model}getModel(){return this.model}}class Bke extends No{constructor(e,n={}){super(e),this.isWater=!0;const r=this,o=n.textureWidth!==void 0?n.textureWidth:512,u=n.textureHeight!==void 0?n.textureHeight:512,h=n.clipBias!==void 0?n.clipBias:0,m=n.alpha!==void 0?n.alpha:1,b=n.time!==void 0?n.time:0,S=n.waterNormals!==void 0?n.waterNormals:null,T=n.sunDirection!==void 0?n.sunDirection:new Xe(.70707,.70707,0),k=new tr(n.sunColor!==void 0?n.sunColor:16777215),O=new tr(n.waterColor!==void 0?n.waterColor:8355711),L=n.eye!==void 0?n.eye:new Xe(0,0,0),H=n.distortionScale!==void 0?n.distortionScale:20,G=n.side!==void 0?n.side:Rc,V=n.fog!==void 0?n.fog:!1,I=new Jd,K=new Xe,ue=new Xe,P=new Xe,ae=new vr,ge=new Xe(0,0,-1),me=new _i,J=new Xe,te=new Xe,oe=new _i,Y=new vr,ke=new ko,$e=new Ol(o,u),ot={name:"MirrorShader",uniforms:t3.merge([un.fog,un.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new vr},sunColor:{value:new tr(8355711)},sunDirection:{value:new Xe(.70707,.70707,0)},eye:{value:new Xe},waterColor:{value:new tr(5592405)}}]),vertexShader:`
				uniform mat4 textureMatrix;
				uniform float time;

				varying vec4 mirrorCoord;
				varying vec4 worldPosition;

				#include <common>
				#include <fog_pars_vertex>
				#include <shadowmap_pars_vertex>
				#include <logdepthbuf_pars_vertex>

				void main() {
					mirrorCoord = modelMatrix * vec4( position, 1.0 );
					worldPosition = mirrorCoord.xyzw;
					mirrorCoord = textureMatrix * mirrorCoord;
					vec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );
					gl_Position = projectionMatrix * mvPosition;

				#include <beginnormal_vertex>
				#include <defaultnormal_vertex>
				#include <logdepthbuf_vertex>
				#include <fog_vertex>
				#include <shadowmap_vertex>
			}`,fragmentShader:`
				uniform sampler2D mirrorSampler;
				uniform float alpha;
				uniform float time;
				uniform float size;
				uniform float distortionScale;
				uniform sampler2D normalSampler;
				uniform vec3 sunColor;
				uniform vec3 sunDirection;
				uniform vec3 eye;
				uniform vec3 waterColor;

				varying vec4 mirrorCoord;
				varying vec4 worldPosition;

				vec4 getNoise( vec2 uv ) {
					vec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);
					vec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );
					vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );
					vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );
					vec4 noise = texture2D( normalSampler, uv0 ) +
						texture2D( normalSampler, uv1 ) +
						texture2D( normalSampler, uv2 ) +
						texture2D( normalSampler, uv3 );
					return noise * 0.5 - 1.0;
				}

				void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {
					vec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );
					float direction = max( 0.0, dot( eyeDirection, reflection ) );
					specularColor += pow( direction, shiny ) * sunColor * spec;
					diffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;
				}

				#include <common>
				#include <packing>
				#include <bsdfs>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <lights_pars_begin>
				#include <shadowmap_pars_fragment>
				#include <shadowmask_pars_fragment>

				void main() {

					#include <logdepthbuf_fragment>
					vec4 noise = getNoise( worldPosition.xz * size );
					vec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );

					vec3 diffuseLight = vec3(0.0);
					vec3 specularLight = vec3(0.0);

					vec3 worldToEye = eye-worldPosition.xyz;
					vec3 eyeDirection = normalize( worldToEye );
					sunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );

					float distance = length(worldToEye);

					vec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;
					vec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );

					float theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );
					float rf0 = 0.3;
					float reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );
					vec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;
					vec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);
					vec3 outgoingLight = albedo;
					gl_FragColor = vec4( outgoingLight, alpha );

					#include <tonemapping_fragment>
					#include <colorspace_fragment>
					#include <fog_fragment>	
				}`},Qe=new rl({name:ot.name,uniforms:t3.clone(ot.uniforms),vertexShader:ot.vertexShader,fragmentShader:ot.fragmentShader,lights:!0,side:G,fog:V});Qe.uniforms.mirrorSampler.value=$e.texture,Qe.uniforms.textureMatrix.value=Y,Qe.uniforms.alpha.value=m,Qe.uniforms.time.value=b,Qe.uniforms.normalSampler.value=S,Qe.uniforms.sunColor.value=k,Qe.uniforms.waterColor.value=O,Qe.uniforms.sunDirection.value=T,Qe.uniforms.distortionScale.value=H,Qe.uniforms.eye.value=L,r.material=Qe,r.onBeforeRender=function(pe,Ve,Ue){if(ue.setFromMatrixPosition(r.matrixWorld),P.setFromMatrixPosition(Ue.matrixWorld),ae.extractRotation(r.matrixWorld),K.set(0,0,1),K.applyMatrix4(ae),J.subVectors(ue,P),J.dot(K)>0)return;J.reflect(K).negate(),J.add(ue),ae.extractRotation(Ue.matrixWorld),ge.set(0,0,-1),ge.applyMatrix4(ae),ge.add(P),te.subVectors(ue,ge),te.reflect(K).negate(),te.add(ue),ke.position.copy(J),ke.up.set(0,1,0),ke.up.applyMatrix4(ae),ke.up.reflect(K),ke.lookAt(te),ke.far=Ue.far,ke.updateMatrixWorld(),ke.projectionMatrix.copy(Ue.projectionMatrix),Y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Y.multiply(ke.projectionMatrix),Y.multiply(ke.matrixWorldInverse),I.setFromNormalAndCoplanarPoint(K,ue),I.applyMatrix4(ke.matrixWorldInverse),me.set(I.normal.x,I.normal.y,I.normal.z,I.constant);const Pt=ke.projectionMatrix;oe.x=(Math.sign(me.x)+Pt.elements[8])/Pt.elements[0],oe.y=(Math.sign(me.y)+Pt.elements[9])/Pt.elements[5],oe.z=-1,oe.w=(1+Pt.elements[10])/Pt.elements[14],me.multiplyScalar(2/me.dot(oe)),Pt.elements[2]=me.x,Pt.elements[6]=me.y,Pt.elements[10]=me.z+1-h,Pt.elements[14]=me.w,L.setFromMatrixPosition(Ue.matrixWorld);const Me=pe.getRenderTarget(),Ot=pe.xr.enabled,Tn=pe.shadowMap.autoUpdate;r.visible=!1,pe.xr.enabled=!1,pe.shadowMap.autoUpdate=!1,pe.setRenderTarget($e),pe.state.buffers.depth.setMask(!0),pe.autoClear===!1&&pe.clear(),pe.render(Ve,ke),r.visible=!0,pe.xr.enabled=Ot,pe.shadowMap.autoUpdate=Tn,pe.setRenderTarget(Me);const yn=Ue.viewport;yn!==void 0&&pe.state.viewport(yn)}}}class Xue{constructor(){this.mesh=null,this.width=4e3,this.height=4e3,this.init()}init(){const e=new My(this.width,this.height);this.mesh=new Bke(e,{textureWidth:4400,textureHeight:4400,waterNormals:new a3().load("./textures/waternormals.png",n=>{n.wrapS=n.wrapT=rs}),sunDirection:new Xe(1,1,1).normalize(),sunColor:16777215,waterColor:2978448,distortionScale:20,size:.3,fog:!1}),this.mesh.rotation.x=-Math.PI/2,this.mesh.position.set(-2660,0,1900)}update(e){this.mesh&&this.mesh.material.uniforms.time&&(this.mesh.material.uniforms.time.value=e*1.2),this.mesh.material.userData.shader&&(this.mesh.material.userData.shader.uniforms.uTime.value=e)}getMesh(){return this.mesh}setWaterColor(e){this.mesh.material.uniforms.waterColor.value.set(e)}setDistortionScale(e){this.mesh.material.uniforms.distortionScale.value=e}setSunDirection(e,n,r){this.mesh.material.uniforms.sunDirection.value.set(e,n,r).normalize()}}class zke{constructor(e=512,n=0,r=4e3){this.size=e,this.waterLevel=n,this.waterSize=r,this.causticsTarget=new Ol(e,e,{minFilter:fa,magFilter:fa,format:Qs,generateMipmaps:!1,wrapS:rs,wrapT:rs}),this.init()}init(){const n=new My(this.waterSize,this.waterSize,200,200);this.material=new rl({uniforms:{uTime:{value:0},uWaterLevel:{value:this.waterLevel},uResolution:{value:new Xe(this.size,this.size,1)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform float uTime;
        uniform vec3 uResolution;
        varying vec2 vUv;

        // Adapting ShaderToy globals to standard uniforms
        #define iTime uTime
        #define iResolution uResolution

        // ==========================================
        // USER PROVIDED SHADER CODE STARTS HERE
        // ==========================================

        #define Use_Perlin
        //#define Use_Value
        //#define Use_Simplex

        // ========= Hash ===========

        // Grab from https://www.shadertoy.com/view/4djSRW
        //#define MOD3 vec3(.1031,.11369,.13787)
        #define MOD3 vec3(443.8975,397.2973, 491.1871)
        float hash31(vec3 p3)
        {
          p3  = fract(p3 * MOD3);
            p3 += dot(p3, p3.yzx + 19.19);
            return -1.0 + 2.0 * fract((p3.x + p3.y) * p3.z);
        }

        vec3 hash33(vec3 p3)
        {
          p3 = fract(p3 * MOD3);
            p3 += dot(p3, p3.yxz+19.19);
            return -1.0 + 2.0 * fract(vec3((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y, (p3.y+p3.z)*p3.x));
        }

        // ========= Noise ===========

        float value_noise(vec3 p)
        {
            vec3 pi = floor(p);
            vec3 pf = p - pi;
            
            vec3 w = pf * pf * (3.0 - 2.0 * pf);
            
            return 	mix(
                    mix(
                      mix(hash31(pi + vec3(0, 0, 0)), hash31(pi + vec3(1, 0, 0)), w.x),
                      mix(hash31(pi + vec3(0, 0, 1)), hash31(pi + vec3(1, 0, 1)), w.x), 
                            w.z),
                    mix(
                            mix(hash31(pi + vec3(0, 1, 0)), hash31(pi + vec3(1, 1, 0)), w.x),
                      mix(hash31(pi + vec3(0, 1, 1)), hash31(pi + vec3(1, 1, 1)), w.x), 
                            w.z),
                    w.y);
        }

        float perlin_noise(vec3 p)
        {
            vec3 pi = floor(p);
            vec3 pf = p - pi;
            
            vec3 w = pf * pf * (3.0 - 2.0 * pf);
            
            return 	mix(
                    mix(
                          mix(dot(pf - vec3(0, 0, 0), hash33(pi + vec3(0, 0, 0))), 
                                dot(pf - vec3(1, 0, 0), hash33(pi + vec3(1, 0, 0))),
                                w.x),
                          mix(dot(pf - vec3(0, 0, 1), hash33(pi + vec3(0, 0, 1))), 
                                dot(pf - vec3(1, 0, 1), hash33(pi + vec3(1, 0, 1))),
                                w.x),
                          w.z),
                    mix(
                            mix(dot(pf - vec3(0, 1, 0), hash33(pi + vec3(0, 1, 0))), 
                                dot(pf - vec3(1, 1, 0), hash33(pi + vec3(1, 1, 0))),
                                w.x),
                            mix(dot(pf - vec3(0, 1, 1), hash33(pi + vec3(0, 1, 1))), 
                                dot(pf - vec3(1, 1, 1), hash33(pi + vec3(1, 1, 1))),
                                w.x),
                          w.z),
                  w.y);
        }

        float simplex_noise(vec3 p)
        {
            const float K1 = 0.333333333;
            const float K2 = 0.166666667;
            
            vec3 i = floor(p + (p.x + p.y + p.z) * K1);
            vec3 d0 = p - (i - (i.x + i.y + i.z) * K2);
            
            // thx nikita: https://www.shadertoy.com/view/XsX3zB
            vec3 e = step(vec3(0.0), d0 - d0.yzx);
          vec3 i1 = e * (1.0 - e.zxy);
          vec3 i2 = 1.0 - e.zxy * (1.0 - e);
            
            vec3 d1 = d0 - (i1 - 1.0 * K2);
            vec3 d2 = d0 - (i2 - 2.0 * K2);
            vec3 d3 = d0 - (1.0 - 3.0 * K2);
            
            vec4 h = max(0.6 - vec4(dot(d0, d0), dot(d1, d1), dot(d2, d2), dot(d3, d3)), 0.0);
            vec4 n = h * h * h * h * vec4(dot(d0, hash33(i)), dot(d1, hash33(i + i1)), dot(d2, hash33(i + i2)), dot(d3, hash33(i + 1.0)));
            
            return dot(vec4(31.316), n);
        }

        float noise(vec3 p) {
        #ifdef Use_Perlin
            return perlin_noise(p * 2.0);
        #elif defined Use_Value
            return value_noise(p * 2.0);
        #elif defined Use_Simplex
            return simplex_noise(p);
        #endif
            
            return 0.0;
        }

        float sphere( vec3 p, float s )
        {
          return length(p)-s;
        }

        float box( vec3 p, vec3 b )
        {
          vec3 d = abs(p) - b;
          return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));
        }

        float plane( vec3 p, vec4 n )
        {
          // n must be normalized
          return dot(p,n.xyz) + n.w;
        }

        float bottom(vec3 ro, vec3 ray)
        {
            float t = 0.0;
            for (int i = 0; i < 256; i++) {
                float res = plane(ro + ray * t, vec4(0.0, 1.0, 0.0, 10.0));
                if( res < 0.00001 ) return t;
                t += res;
            }

            return -1.0;
        }

        float map(vec3 p)
        {
          float pl = plane(p, vec4(0.0, 1.0, 0.0, 10.0));
            // Removed sphere and box
            return pl;
        }

        vec2 scene(vec3 ro, vec3 ray)
        {
            float t = 0.0;
            for (int i = 0; i < 256; i++) {
                float res = map(ro+ray*t);
                if( res < 0.00001 ) return vec2(t, res);
                t += res;
            }

            return vec2(-1.0);
        }

        vec2 intersect2(vec3 ro, vec3 ray)
        {
            float t = 0.0;
            for (int i = 0; i < 256; i++) {
                float res = plane((ro+ray*t), vec4(0.0, 1.0, 0.0, 10.0));
                if( res < 0.00001 ) return vec2(t, res);
                t += res;
            }

            return vec2(-1.0);
        }

        vec2 water(vec3 ro, vec3 ray)
        {
            float t = 0.0;
            for (int i = 0; i < 64; i++) {
                float res = plane(ro+ray*t, vec4(0.0, 1.0, 0.0, -1.0));
                if( res < 0.0001 ) return vec2(t, res);
                t += res;
            }

            return vec2(-1.0);
        }

        vec3 waterNormal(vec3 p, float e) {
            vec3 ee = vec3(e, 0., 0.);
            vec3 pp = p * 1.0;
          float h1 = noise(p + ee.xyy);
            float h2 = noise(p - ee.xyy);
            float h3 = noise(p + ee.yyx);
            float h4 = noise(p - ee.yyx);
            vec3 du = vec3(1., 0., h2 - h1);
            vec3 dv = vec3(0., 1., h4 - h3);
            return normalize(cross(du, dv)) * 0.5 + 0.5;
            //return vec3(h1, h2, h3);
        }

        float caustics(vec3 p, vec3 lp) {
            vec3 ray = normalize(p - lp);

            vec2 shadow = scene(lp, ray);
            float l = distance(lp + ray * shadow.x, p);
            if (l > 0.01) {
                return 0.0;
            }

            vec2 d = water(lp, ray);
            vec3 waterSurface = lp + ray * d.x;

            vec3 refractRay = refract(ray, vec3(0., 1., 0.), 1.0/1.333);
            float beforeHit = bottom(waterSurface, refractRay);
            vec3 beforePos = waterSurface + refractRay * beforeHit;

            // 0.1, 0.2, 0.5
            float scale = 2.0;
            vec3 noisePos = waterSurface * scale + vec3(0.,iTime * 2.0,0.);
            float height = noise(noisePos);
            vec3 deformedWaterSurface = waterSurface + vec3(0., height, 0.);

            refractRay = refract(ray, waterNormal(noisePos, 0.5), 1.0/1.333);
            float afterHit = bottom(deformedWaterSurface, refractRay);
            vec3 afterPos = deformedWaterSurface + refractRay * afterHit;

            float beforeArea = length(dFdx(beforePos)) * length(dFdy(beforePos));
            float afterArea = length(dFdx(afterPos)) * length(dFdy(afterPos));
            return max(beforeArea / afterArea, .001);
        }

        vec3 normal(vec3 pos, float e )
        {
            vec3 eps = vec3(e,0.0,0.0);

          return normalize( vec3(
                  map(pos+eps.xyy) - map(pos-eps.xyy),
                  map(pos+eps.yxy) - map(pos-eps.yxy),
                  map(pos+eps.yyx) - map(pos-eps.yyx) ) );
        }

        mat3 createCamera(vec3 ro, vec3 ta, float cr )
        {
          vec3 cw = normalize(ta - ro);
          vec3 cp = vec3(sin(cr), cos(cr),0.0);
          vec3 cu = normalize( cross(cw,cp) );
          vec3 cv = normalize( cross(cu,cw) );
            return mat3( cu, cv, cw );
        }

        void mainImage( out vec4 fragColor, in vec2 fragCoord )
        {
            // fragment position
            vec2 p = (fragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);

            // camera
            vec3 ro = vec3(sin(iTime * 0.1) * 10.0, 0.0, cos(iTime * 0.1) * 10.0) * 2.0;
            vec3 ta = vec3(0.0, -8.0, 0.0);
            mat3 cm = createCamera(ro, ta, 0.0);
            vec3 ray = cm * normalize(vec3(p, 4.0));
            
            // marching loop
            vec2 res = scene(ro, ray);
            
            // hit check
            if(res.y > -0.5) {
                vec3 p = ro + ray * res.x;
                vec3 n = normal(p, 0.0001);
                vec3 l = vec3(10.0, 10.0, 10.0);
                vec3 v = -normalize(p - l);
                fragColor = vec4(normal(ro + ray * res.x, 0.0001), 1.0);
                float c = caustics(ro + ray * res.x, l) * 0.6;
                vec3 co = vec3(c,c,c) + vec3(0.02,0.15,0.27);
                float li = max(dot(v, n), 0.0);
                vec3 col = co * li + vec3(0.02,0.15,0.27);
                col = pow(col, vec3(1.0/2.2));
                fragColor = vec4(mix(col, vec3(0.02,0.15,0.27), res.x / 100.0), 1.0);
            }else{
                fragColor = vec4(vec3(0.0), 1.0);
            }
        }

        // ==========================================
        // ADAPTER WRAPPER
        // ==========================================
        void main() {
            mainImage(gl_FragColor, vUv * uResolution.xy);
        }
      `}),this.mesh=new No(n,this.material),this.mesh.rotation.x=-Math.PI/2,this.mesh.position.set(0,this.waterLevel,0),this.scene=new xce,this.scene.add(this.mesh);const r=this.waterSize;this.camera=new Ww(-r/2,r/2,r/2,-r/2,.1,1e3),this.camera.position.set(0,100,0),this.camera.lookAt(0,this.waterLevel,0)}update(e,n){this.material.uniforms.uTime.value=n*.03,e.setRenderTarget(this.causticsTarget),e.render(this.scene,this.camera),e.setRenderTarget(null),this.causticsTarget.texture.version++}getTexture(){return this.causticsTarget.texture}getMesh(){return this.mesh}dispose(){this.causticsTarget.dispose(),this.material.dispose(),this.mesh.geometry.dispose()}}class M3 extends No{constructor(){const e=M3.SkyShader,n=new rl({name:e.name,uniforms:t3.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:os,depthWrite:!1});super(new Ty(1,1,1),n),this.isSky=!0}}M3.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Xe},up:{value:new Xe(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calculation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorption + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class jke{constructor(){this.init()}init(){this.mesh=new M3,this.mesh.scale.setScalar(4e4);const e=this.mesh.material.uniforms;e.turbidity.value=1,e.rayleigh.value=1,e.mieCoefficient.value=.005,e.mieDirectionalG.value=.8;const n=new Xe,r=ug.degToRad(90),o=ug.degToRad(-135);n.setFromSphericalCoords(1,r,o),e.sunPosition.value.copy(n)}update(){}getMesh(){return this.mesh}}const OI={theatre:{enableStudio:!0,stateUrl:"./animation.json",projectName:"WebGL Project",sheetName:"Main Scene",sequenceLength:7},scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:1,markers:!0},models:{landscape:"./landscape.glb"}};class Vke{constructor(e){this.app=e,this.scene=e.getScene(),this.camera=e.getCamera(),this.theatreManager=null,this.models=[],this.sea1=null,this.sea2=null,this.caustic=null,this.sky=null,this.title=null,this.text=null,this.heading=new Hh,this.mountain=null,this.underwater=null,this.init()}async init(){await this.setupTheatre(),await this.loadObjects()}async setupTheatre(){this.theatreManager=new eke(OI.theatre),await this.theatreManager.init(),this.theatreManager.register(this.camera.instance,"Camera",{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},(e,n)=>{e.position.set(n.position.x,n.position.y,n.position.z),e.rotation.set(ug.degToRad(n.rotation.x),ug.degToRad(n.rotation.y),ug.degToRad(n.rotation.z))}),OI.theatre.enableStudio||this.theatreManager.setupScrollTrigger(OI.scrollTrigger)}async loadObjects(){const e=new Uke(OI.models.landscape);this.models.push(e);try{const n=await e.load();if(n.scene.scale.set(40,40,40),this.scene.add(n.scene),console.log(n.scene.children),this.title=n.scene.getObjectByName("intro_title"),this.text=n.scene.getObjectByName("intro_sub"),this.underwater=n.scene.getObjectByName("underwater"),this.mountain=n.scene.getObjectByName("mountain"),this.underwater){const o=new a3().load("./textures/image.png");o.wrapS=rs,o.wrapT=rs,o.repeat.set(6,6),this.underwater.traverse(u=>{u.isMesh&&(u.material=u.material.clone(),u.material.map=o,u.material.needsUpdate=!0)})}if(this.mountain){const o=new a3().load("./textures/mountain.png");o.wrapS=rs,o.wrapT=rs,o.repeat.set(6,6),this.mountain.traverse(u=>{u.isMesh&&(u.material=u.material.clone(),u.material.map=o,u.material.needsUpdate=!0)})}this.heading.attach(this.title),this.heading.attach(this.text),this.scene.add(this.heading),this.title&&(this.title.material=this.title.material.clone(),this.title.material.color.setHex(16777215),this.title.material.emissive.setHex(16777215),this.title.material.emissiveIntensity=.5,this.title.material.toneMapped=!1),this.text&&(this.text.material=this.title.material.clone(),this.text.material.color.setHex(16777215),this.text.material.emissive.setHex(16777215),this.text.material.emissiveIntensity=.5,this.text.material.toneMapped=!1)}catch(n){console.error("Failed to load model:",n)}if(this.heading.position.y-=20,this.sea1=new Xue,this.scene.add(this.sea1.getMesh()),this.sea2=new Xue,this.sea2.getMesh().rotation.x+=Math.PI,this.scene.add(this.sea2.getMesh()),this.caustic=new zke(2048),this.underwater){const n=this.caustic.getTexture();n.wrapS=rs,n.wrapT=rs,this.applyCausticsToMountain(this.underwater,n)}this.sky=new jke,this.scene.add(this.sky.getMesh()),this.registerUpdateCallbacks()}registerUpdateCallbacks(){this.app.addUpdateCallback(()=>{this.models.forEach(e=>e.update())}),this.sea1&&this.app.addUpdateCallback(()=>{this.sea1.update(performance.now()*.001)}),this.sea2&&this.app.addUpdateCallback(()=>{this.sea2.update(performance.now()*.001)}),this.caustic&&this.app.addUpdateCallback(()=>{this.caustic.update(this.app.renderer,performance.now()*.001)}),this.underwater&&this.app.addUpdateCallback(()=>{const e=performance.now()*.001;this.underwater.traverse(n=>{n.isMesh&&n.material&&n.material.userData.shader&&(n.material.userData.shader.uniforms.uTime.value=e)})}),this.app.addUpdateCallback(()=>{this.updateUnderwaterEffect()})}updateUnderwaterEffect(){const r=this.camera.instance.position.y<0,o=this.app.getLight();o&&o.setUnderwater(r),r?(this.scene.fog||(this.scene.fog=new Oj(12642559,4e-4)),this.scene.fog.density=4e-4,this.scene.fog.color.setHex(12642559),this.sea1&&(this.sea1.getMesh().visible=!1),this.sea2&&(this.sea2.getMesh().visible=!0)):(this.scene.fog&&(this.scene.fog=null),this.sea1&&(this.sea1.getMesh().visible=!0),this.sea2&&(this.sea2.getMesh().visible=!1))}applyCausticsToMountain(e,n){e.traverse(r=>{if(r.isMesh&&r.material){const o=r.material;o.onBeforeCompile=u=>{u.uniforms.tCaustics={value:n},u.uniforms.uWaterLevel={value:0},u.uniforms.uWaterSize={value:4e3},u.uniforms.uCausticsIntensity={value:2},u.uniforms.uTime={value:0},u.vertexShader=u.vertexShader.replace("#include <common>",`
            #include <common>
            varying vec3 vWorldPosition;
            `),u.vertexShader=u.vertexShader.replace("#include <worldpos_vertex>",`
            #include <worldpos_vertex>
            vWorldPosition = (modelMatrix * vec4(transformed, 1.0)).xyz;
            `),u.fragmentShader=u.fragmentShader.replace("#include <common>",`
            #include <common>
            uniform sampler2D tCaustics;
            uniform float uWaterLevel;
            uniform float uWaterSize;
            uniform float uCausticsIntensity;
            uniform float uTime;
            varying vec3 vWorldPosition;
            `),u.fragmentShader=u.fragmentShader.replace("#include <dithering_fragment>",`
            #include <dithering_fragment>

            // UV
            // 
            float scale = 0.0002; // 1 / 2000
            vec2 causticsUV = vWorldPosition.xz * scale;

            // 
            vec4 causticsColor = texture2D(tCaustics, causticsUV);

            // 
            float caustics = causticsColor.r * uCausticsIntensity;

            // 
            gl_FragColor.rgb += caustics * abs(vWorldPosition.y) * 0.00005 * vec3(0.4, 0.6, 0.8);
            `),o.userData.shader=u},o.needsUpdate=!0}})}getTheatreManager(){return this.theatreManager}}const Hke=new dCe(".webgl");new Vke(Hke);
